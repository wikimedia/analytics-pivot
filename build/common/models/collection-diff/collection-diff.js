"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var immutable_class_1=require("immutable-class");var collection_1=require("../collection/collection");var CollectionDiff=function(e){tslib_1.__extends(t,e);function t(t){var l=e.call(this,t)||this;var o=l,i=o.before,r=o.after;if(!i&&!r)throw new Error("invalid (empty) diff");if(i&&r&&i.name!==r.name)throw new Error("before and after names must match");return l}t.isCollectionDiff=function(e){return e instanceof t};t.fromJS=function(e,l){var o={};if(e.before)o.before=collection_1.Collection.fromJS(e.before,l);if(e.after)o.after=collection_1.Collection.fromJS(e.after,l);return new t(o)};t.prototype.getName=function(){var e=this,t=e.before,l=e.after;return t?t.name:l.name};return t}(immutable_class_1.BaseImmutable);CollectionDiff.PROPERTIES=[{name:"before",immutableClass:collection_1.Collection,defaultValue:null},{name:"after",immutableClass:collection_1.Collection,defaultValue:null}];exports.CollectionDiff=CollectionDiff;immutable_class_1.BaseImmutable.finalize(CollectionDiff);