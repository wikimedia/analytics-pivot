"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var immutable_class_1=require("immutable-class");var split_combine_1=require("../split-combine/split-combine");var splits_1=require("../splits/splits");var base_manifest_1=require("./base-manifest");var BarChartManifest=function(e){tslib_1.__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.name="bar-chart";t.title="Bar Chart";return t}t.prototype.canHandleSplitDimensions=function(e,t,i,n){var r=function(t){var i=e.filter(function(e){return e.kind===t}).slice(0,2);return i.length?i:null};var s=r("number")||r("boolean")||r("string")||[];var a=function(e){return split_combine_1.SplitCombine.fromDimensionAndFilterAndMeasure(e,i,n)};if(!t.length){return base_manifest_1.Resolve.rejectDimensions("The Bar Chart requires at least one split",s.map(function(e){return base_manifest_1.SplitSuggestion.fromTitleAndSplit("Add a split on "+e.title,a(e))}))}else if(t.length>2){return base_manifest_1.Resolve.rejectDimensions("Too many splits on the bar chart",[base_manifest_1.SplitSuggestion.fromTitleAndSplit("Remove all but the first split",a(t[0]))])}else{return base_manifest_1.Resolve.proceedWithDimensions()}};t.prototype.getSuitability=function(e,t,i,n){var r=n?10:4;if(t.length()===1&&immutable_class_1.NamedArray.findByName(e,t.first().dimension).getKind()==="number")r=10;if(t.splitCombines.some(function(e){return!e.limitAction})){r=r-1}return new base_manifest_1.Suitability(r)};t.prototype.getEffectiveSplits=function(e){var t=false;var i=e.splitCombines.map(function(e){if(!e.limitAction){t=true;return e.changeLimit(25)}return e});return t?new splits_1.Splits(i):e};return t}(base_manifest_1.Manifest);exports.BarChartManifest=BarChartManifest;exports.BAR_CHART_MANIFEST=new BarChartManifest;