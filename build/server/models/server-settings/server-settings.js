"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var immutable_class_1=require("immutable-class");var settings_location_1=require("../settings-location/settings-location");function basicEqual(e,t){return Boolean(e)===Boolean(t)}var ServerSettings=function(e){tslib_1.__extends(t,e);function t(t){var r=e.call(this,t)||this;if(r.auth&&!(r.userMode==="external-users"||r.userMode==="external-users-and-session")){throw new Error("can not have auth with userMode "+r.userMode)}return r}t.isServerSettings=function(e){return e instanceof t};t.fromJS=function(e){if(typeof e.port==="string")e.port=parseInt(e.port,10);if(e.serverRoot&&e.serverRoot[0]!=="/")e.serverRoot="/"+e.serverRoot;if(e.serverRoot==="/")e.serverRoot=null;if(e.auth&&!e.userMode)e.userMode="external-users-and-session";return new t(immutable_class_1.BaseImmutable.jsToValue(t.PROPERTIES,e))};t.prototype.needsSession=function(){var e=this.getUserMode();return e==="native-users"||e==="external-users"};t.prototype.needsLogin=function(){var e=this.getUserMode();return e==="native-users"};t.prototype.externalUsers=function(){var e=this.getUserMode();return e==="external-users"||e==="external-users-and-session"};return t}(immutable_class_1.BaseImmutable);ServerSettings.DEFAULT_PORT=9090;ServerSettings.DEFAULT_SERVER_ROOT="/pivot";ServerSettings.DEFAULT_REQUEST_LOG_FORMAT="common";ServerSettings.DEFAULT_PAGE_MUST_LOAD_TIMEOUT=800;ServerSettings.IFRAME_VALUES=["allow","deny"];ServerSettings.DEFAULT_IFRAME="allow";ServerSettings.TRUST_PROXY_VALUES=["none","always"];ServerSettings.DEFAULT_TRUST_PROXY="none";ServerSettings.STRICT_TRANSPORT_SECURITY_VALUES=["none","always"];ServerSettings.DEFAULT_STRICT_TRANSPORT_SECURITY="none";ServerSettings.USER_MODES=["all-users","all-admin","native-users","external-users","external-users-and-session"];ServerSettings.DEFAULT_USER_MODE="all-admin";ServerSettings.PROPERTIES=[{name:"port",defaultValue:ServerSettings.DEFAULT_PORT,validate:immutable_class_1.BaseImmutable.ensure.number},{name:"serverHost",defaultValue:null},{name:"serverRoot",defaultValue:ServerSettings.DEFAULT_SERVER_ROOT},{name:"requestLogFormat",defaultValue:ServerSettings.DEFAULT_REQUEST_LOG_FORMAT},{name:"trackingUrl",defaultValue:null},{name:"trackingContext",defaultValue:null,equal:basicEqual},{name:"pageMustLoadTimeout",defaultValue:ServerSettings.DEFAULT_PAGE_MUST_LOAD_TIMEOUT},{name:"iframe",defaultValue:ServerSettings.DEFAULT_IFRAME,possibleValues:ServerSettings.IFRAME_VALUES},{name:"trustProxy",defaultValue:ServerSettings.DEFAULT_TRUST_PROXY,possibleValues:ServerSettings.TRUST_PROXY_VALUES},{name:"strictTransportSecurity",defaultValue:ServerSettings.DEFAULT_STRICT_TRANSPORT_SECURITY,possibleValues:ServerSettings.STRICT_TRANSPORT_SECURITY_VALUES},{name:"auth",defaultValue:null},{name:"settingsLocation",defaultValue:null,immutableClass:settings_location_1.SettingsLocation},{name:"userMode",defaultValue:ServerSettings.DEFAULT_USER_MODE,possibleValues:ServerSettings.USER_MODES},{name:"defaultAdminPass",defaultValue:"password"},{name:"sessionStore",defaultValue:null},{name:"sessionSecret",defaultValue:"You are not getting thorough here fool."},{name:"inviteStore",defaultValue:null},{name:"cookieMaxAge",defaultValue:2592e6},{name:"shaSalt",defaultValue:"Don't rub salt in your eyes!"},{name:"standaloneApp",defaultValue:true}];exports.ServerSettings=ServerSettings;immutable_class_1.BaseImmutable.finalize(ServerSettings);