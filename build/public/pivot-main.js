webpackJsonp([0],[,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.STRINGS={add:"Add",addAttributes:"Add attributes",addFromCube:"Add from Cube",addNewUser:"Add new user",addToAlbum:"Add to album",addToDashboard:"Add to dashboard",addToNewAlbum:"Add to new album",addToNewDashboard:"Add to new dashboard",alsoUseAsUserId:"Also use as user ID",any:"any",attribute:"Attribute",attributes:"attributes",autoFillDimensionsAndMeasures:"Auto-fill dimensions and measures",autoUpdate:"Auto update",cancel:"Cancel",close:"Close",clusters:"Clusters",collections:"Collections",configureCluster:"configure cluster",configureDataCube:"configure data cube",connectCluster:"Connect new cluster",connectNewCluster:"Connect new cluster",contains:"Contains",saveAsFixedTimeRange:"Save as fixed time range",copySpecificUrl:"Copy URL - fixed time",copyLink:"Copy Link",copyUrl:"Copy URL",copyValue:"Copy value",createColumn:"New column",createDataCube:"Create new data cube",createDataCubesFromCluster:"Create data cubes from cluster?",current:"Current",create:"Create",createDimension:"New dimension",createMeasure:"New measure",cubes:"cubes",custom:"Custom",day:"Day",days:"Days",dataCubes:"Data cubes",dataSources:"data sources",delete:"Delete",deleteCollection:"Delete this collection",deleteCollectionTile:"Delete this tile",dimensions:"Dimensions",dimension:"Dimension",dontSave:"Don't save",download:"Download",dragToReorder:"Drag tiles to reorder",duplicate:"Duplicate",duplicateDataCube:"Duplicate this data cube",duplicateCollectionTile:"Duplicate this tile",edit:"Edit",editColumn:"Edit column",editCluster:"Edit cluster",editDataCube:"Edit data cube",editDimension:"Edit dimension",editMeasure:"Edit measure",editThisCube:"Edit this cube",editTitleAndDesc:"Edit title and description",editUser:"Edit User",editVisualization:"Edit visualization",end:"End",exclude:"Exclude",explore:"Explore",export:"Export",exportToCSV:"Export to CSV",filter:"Filter",filters:"Filters",generalSettings:"General settings",goToUrl:"Go to URL",granularity:"Granularity",hour:"Hour",hours:"Hours",imply:"Imply",include:"Include",infoAndFeedback:"Info & Feedback",instead:"instead",intersection:"Intersection",invitationLink:"Invitation Link",invite:"Invite",last5Minutes:"Last 5 minutes",lastDay:"Last Day",lastHour:"Last Hour",lastWeek:"Last Week",latest:"Latest",limit:"Limit",loadingSettings:"Loading settings...",loginToPivot:"Login to Pivot",loggingIn:"Logging in...",logout:"Logout",measures:"Measures",measure:"Measure",specialColumns:"Special columns",metrics:"Metrics",month:"Month",newAlbum:"New album",newDashboard:"New dashboard",newDataCube:"New data cube",next:"Next",no:"No",noCollections:"You don't have any collections.",none:"None",noIllCreateThem:"No, I'll create them myself",noClusters:"There are no clusters connected",noDataCubes:"There are no data cubes",noDescription:"No description",noFilter:"No filter",noTilesInThisAlbum:"There are no tiles in this album",noTilesInThisDashboard:"There are no tiles in this dashboard",ok:"OK",orAddASpecificAttribute:"Or add a specific attribute",orViewSuggestedAttributes:"Or view suggested attributes",orConnectToACluster:"Or connect to a cluster",orReadFromAFile:"Or read from a file",orSelectAKnownColumn:"Or select a known column",orTypeInACustomName:"Or type in a custom name",openIn:"Open in",pin:"Pin",pivot:"Pivot",passwordReset:"Password Reset",pinboard:"Pinboard",pinboardPlaceholder:"Click or drag dimensions to pin them",previous:"Previous",quarter:"Quarter",queryError:"Query error",quicklyAddSomeUsing:"Quickly add some using",reset:"Reset",rawData:"Raw Data",regex:"Regex",removeAttribute:"Remove attribute",relative:"Relative",save:"Save",saveChanges:"Save changes",segment:"segment",select:"Select",settings:"Settings",sortBy:"Sort by",specific:"Specific",split:"Split",splitDelimiter:"by",start:"Start",stayHere:"Stay here",stringSearch:"String search",subsplit:"Split",subsetFilter:"Subset Filter",suggestion:"suggestion",suggestions:"suggestions",timezone:"Timezone",try:"Try",thereAreNoSuggestionsAtTheMoment:"There are no suggestions at the moment",undo:"Click here to undo",unsavedChangesTitle:"You have unsaved changes",unsavedChangesMessage:"You have unsaved changes. Would you like to save them?",unsplitable:"Un-splittable",updateTimezone:"Update Timezone",users:"Users",viewRawData:"View raw data",week:"Week",wouldYouLikeToCreateCubes:"Would you like to create data cubes from them?",year:"Year",yes:"Yes"}},,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var dom_1=__webpack_require__(48);var shpitz_1=__webpack_require__(151);__webpack_require__(396);var OFFSET_H=10;var OFFSET_V=0;var SCREEN_OFFSET=5;var BubbleMenu=function(_super){tslib_1.__extends(BubbleMenu,_super);function BubbleMenu(){var _this=_super.call(this)||this;_this.state={id:null};return _this}BubbleMenu.prototype.componentWillMount=function(){var _a=this.props,alignOn=_a.alignOn,openOn=_a.openOn,direction=_a.direction,align=_a.align,id=_a.id;var rect=(alignOn||openOn).getBoundingClientRect();var x;var y;switch(direction){case"right":x=rect.left+rect.width-OFFSET_H;y=rect.top+rect.height/2;break;case"down":if(align==="center"){x=rect.left+rect.width/2}else if(align==="start"){x=rect.left}else{x=rect.left+rect.width}y=rect.top+rect.height-OFFSET_V;break;default:throw new Error("unknown direction: '"+direction+"'")}this.setState({id:id||dom_1.uniqueId("bubble-menu-"),x:x,y:y})};BubbleMenu.prototype.onClose=function(){var onClose=this.props.onClose;if(onClose)onClose()};BubbleMenu.prototype.globalMouseDownListener=function(e){var _a=this.props,onClose=_a.onClose,openOn=_a.openOn;var id=this.state.id;var myElement=document.getElementById(id);if(!myElement)return;var target=e.target;if(beltful_1.DOMUtils.isInside(target,myElement)||beltful_1.DOMUtils.isInside(target,openOn))return;this.onClose()};BubbleMenu.prototype.render=function(){var _a=this.props,className=_a.className,direction=_a.direction,stage=_a.stage,fixedSize=_a.fixedSize,containerStage=_a.containerStage,inside=_a.inside,layout=_a.layout,align=_a.align,children=_a.children;var _b=this.state,id=_b.id,x=_b.x,y=_b.y;var menuWidth=stage.width;var menuHeight=stage.height;var menuLeft=0;var menuTop=0;var menuStyle={};if(fixedSize){menuStyle.width=menuWidth;menuStyle.height=menuHeight}var shpitzStyle={left:0,top:0};if(!containerStage){containerStage=new beltful_1.Stage({x:SCREEN_OFFSET,y:SCREEN_OFFSET,width:window.innerWidth-SCREEN_OFFSET*2,height:window.innerHeight-SCREEN_OFFSET*2})}switch(direction){case"right":var top_1=y-menuHeight/2;top_1=Math.min(Math.max(top_1,containerStage.y),containerStage.y+containerStage.height-menuHeight);menuLeft=x;menuTop=top_1;shpitzStyle.top=y-top_1;menuStyle.height=menuHeight;break;case"down":var left=void 0;if(align==="center"){left=x-menuWidth/2}else if(align==="start"){left=x}else{left=x-menuWidth}left=Math.min(Math.max(left,containerStage.x),containerStage.x+containerStage.width-menuWidth);menuLeft=left;menuTop=y;shpitzStyle.left=x-left;menuStyle.width=menuWidth;break;default:throw new Error("unknown direction: '"+direction+"'")}var insideId=null;if(inside){insideId=inside.id;if(!insideId)throw new Error("inside element must have id")}var shpitzElement=null;if(align==="center"){shpitzElement=React.createElement(shpitz_1.Shpitz,{style:shpitzStyle,direction:direction})}var myClass=classNames("bubble-menu",direction,className,{mini:layout==="mini"});return React.createElement(caladan_1.BodyPortal,{left:menuLeft,top:menuTop},React.createElement("div",{className:myClass,id:id,"data-parent":insideId,style:menuStyle},React.createElement(caladan_1.GlobalEventListener,{escape:this.onClose.bind(this),mouseDown:this.globalMouseDownListener.bind(this)}),children,shpitzElement))};return BubbleMenu}(React.Component);BubbleMenu.defaultProps={align:"center"};exports.BubbleMenu=BubbleMenu},,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TITLE_HEIGHT=36;exports.MEASURE_HEIGHT=27;exports.CORE_ITEM_WIDTH=192;exports.CORE_ITEM_GAP=8;exports.PIN_TITLE_HEIGHT=36;exports.PIN_ITEM_HEIGHT=25;exports.PIN_PADDING_BOTTOM=12;exports.VIS_H_PADDING=10;exports.OVERFLOW_WIDTH=40;exports.SPLIT="SPLIT";exports.MAX_SEARCH_LENGTH=300;exports.SEARCH_WAIT=900;exports.DATA_CUBES_STRATEGIES_LABELS={none:"None","no-autofill":"No autofill","autofill-dimensions-only":"Autofill dimensions only","autofill-measures-only":"Autofill measures only","autofill-all":"Autofill all"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function findParentWithClass(child,className){while(child){if(child.classList.contains(className))return child;child=child.parentNode}return null}exports.findParentWithClass=findParentWithClass;var lastID=0;function uniqueId(prefix){return prefix+lastID++}exports.uniqueId=uniqueId;function transformStyle(x,y){var xStr=String(x);var yStr=String(y);if(xStr!=="0")xStr+="px";if(yStr!=="0")yStr+="px";var transform="translate("+xStr+","+yStr+")";return{transform:transform,WebkitTransform:transform,MsTransform:transform}}exports.transformStyle=transformStyle;function roundToHalfInteger(n){return Math.round(n-.5)+.5}exports.roundToHalfInteger=roundToHalfInteger},,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var chronoshift_1=__webpack_require__(16);var hasOwnProperty=__webpack_require__(23);var moment=__webpack_require__(93);var FORMAT_ISOISH="YYYY-MM-DD[T]HH:mm:ss";var FORMAT_WITH_YEAR="MMM D, YYYY";var FORMAT_WITHOUT_YEAR="MMM D";function formatTimeOfDay(d){return d.minutes()?d.format("h:mma"):d.format("ha")}function isCurrentYear(year,timezone){var nowWallTime=moment.tz(new Date,timezone.toString());return nowWallTime.year()===year}var DisplayYear;(function(DisplayYear){DisplayYear[DisplayYear["ALWAYS"]=0]="ALWAYS";DisplayYear[DisplayYear["NEVER"]=1]="NEVER";DisplayYear[DisplayYear["IF_DIFF"]=2]="IF_DIFF"})(DisplayYear=exports.DisplayYear||(exports.DisplayYear={}));function getEndWallTimeInclusive(exclusiveEnd,timezone){return moment.tz(exclusiveToInclusiveEnd(exclusiveEnd),timezone.toString())}exports.getEndWallTimeInclusive=getEndWallTimeInclusive;function exclusiveToInclusiveEnd(exclusiveEnd){return new Date(exclusiveEnd.valueOf()-1)}exports.exclusiveToInclusiveEnd=exclusiveToInclusiveEnd;function formatTimeRange(timeRange,timezone,displayYear){var start=timeRange.start,end=timeRange.end;var startWallTime=moment.tz(start,timezone.toString());var endWallTime=moment.tz(end,timezone.toString());var endWallTimeInclusive=getEndWallTimeInclusive(end,timezone);var showingYear=true;var formatted;if(startWallTime.year()!==endWallTimeInclusive.year()){formatted=[startWallTime.format(FORMAT_WITH_YEAR),endWallTimeInclusive.format(FORMAT_WITH_YEAR)].join(" - ")}else{showingYear=displayYear===DisplayYear.ALWAYS||displayYear===DisplayYear.IF_DIFF&&!isCurrentYear(endWallTimeInclusive.year(),timezone);var fmt=showingYear?FORMAT_WITH_YEAR:FORMAT_WITHOUT_YEAR;if(startWallTime.month()!==endWallTimeInclusive.month()||startWallTime.date()!==endWallTimeInclusive.date()){formatted=[startWallTime.format(FORMAT_WITHOUT_YEAR),endWallTimeInclusive.format(fmt)].join(" - ")}else{formatted=startWallTime.format(fmt)}}if(startWallTime.hours()||startWallTime.minutes()||endWallTime.hours()||endWallTime.minutes()){formatted+=showingYear?" ":", ";var startTimeStr=formatTimeOfDay(startWallTime).toLowerCase();var endTimeStr=formatTimeOfDay(endWallTime).toLowerCase();if(startTimeStr===endTimeStr){formatted+=startTimeStr}else{if(startTimeStr.substr(-2)===endTimeStr.substr(-2)){startTimeStr=startTimeStr.substr(0,startTimeStr.length-2)}formatted+=[startTimeStr,endTimeStr].join("-")}}return formatted}exports.formatTimeRange=formatTimeRange;function monthToWeeks(firstDayOfMonth,timezone){var weeks=[];var firstDayNextMonth=chronoshift_1.month.shift(firstDayOfMonth,timezone,1);var week=[];var currentPointer=chronoshift_1.day.floor(firstDayOfMonth,timezone);while(currentPointer<firstDayNextMonth){var wallTime=moment.tz(currentPointer,timezone.toString());if(wallTime.day()===moment.localeData().firstDayOfWeek()&&week.length>0){weeks.push(week);week=[]}week.push(currentPointer);currentPointer=chronoshift_1.day.shift(currentPointer,timezone,1)}if(week.length>0)weeks.push(week);return weeks}exports.monthToWeeks=monthToWeeks;function prependDays(timezone,weekPrependTo,countPrepend){for(var i=0;i<countPrepend;i++){var firstDate=weekPrependTo[0];var shiftedDate=chronoshift_1.day.shift(firstDate,timezone,-1);weekPrependTo.unshift(shiftedDate)}return weekPrependTo}exports.prependDays=prependDays;function appendDays(timezone,weekAppendTo,countAppend){for(var i=0;i<countAppend;i++){var lastDate=weekAppendTo[weekAppendTo.length-1];var shiftedDate=chronoshift_1.day.shift(lastDate,timezone,1);weekAppendTo.push(shiftedDate)}return weekAppendTo}exports.appendDays=appendDays;function shiftOneDay(floored,timezone){return chronoshift_1.day.shift(floored,timezone,1)}exports.shiftOneDay=shiftOneDay;function datesEqual(d1,d2){if(!Boolean(d1)===Boolean(d2))return false;if(d1===d2)return true;return d1.valueOf()===d2.valueOf()}exports.datesEqual=datesEqual;function getWallTimeDay(date,timezone){return moment.tz(date,timezone.toString()).date()}exports.getWallTimeDay=getWallTimeDay;function getWallTimeMonthWithYear(date,timezone){return moment.tz(date,timezone.toString()).format("MMMM YYYY")}exports.getWallTimeMonthWithYear=getWallTimeMonthWithYear;function wallTimeInclusiveEndEqual(d1,d2,timezone){if(!Boolean(d1)===Boolean(d2))return false;if(d1===d2)return true;var d1InclusiveEnd=getEndWallTimeInclusive(d1,timezone);var d2InclusiveEnd=getEndWallTimeInclusive(d2,timezone);return d1InclusiveEnd.valueOf()===d2InclusiveEnd.valueOf()}exports.wallTimeInclusiveEndEqual=wallTimeInclusiveEndEqual;function getWallTimeString(date,timezone,includeTime,delimiter){var wallTimeISOString=moment.tz(date,timezone.toString()).format(FORMAT_ISOISH);if(includeTime){return wallTimeISOString.replace("T",delimiter||", ")}return wallTimeISOString.replace(/:\d\d/,"").split("T")[0]}exports.getWallTimeString=getWallTimeString;function formatTimeBasedOnGranularity(range,granularity,timezone){var wallTimeStart=moment.tz(range.start,timezone.toString());var granularityString=granularity.toJS();var unit=granularityString.substring(granularityString.length-1);switch(unit){case"S":return wallTimeStart.format("MMM D, hh:mm:ss");case"M":var prefix=granularityString.substring(0,2);return prefix==="PT"?wallTimeStart.format("MMM D, h:mma"):wallTimeStart.format("MMM, YYYY");case"H":return wallTimeStart.format("MMM D YYYY, ha");case"D":return wallTimeStart.format("MMM D, YYYY");case"W":return""+formatTimeRange(range,timezone,DisplayYear.ALWAYS);default:return wallTimeStart.format(FORMAT_ISOISH)}}exports.formatTimeBasedOnGranularity=formatTimeBasedOnGranularity;function isBoundaryTick(object){return object&&hasOwnProperty(object,"boundary")}exports.isBoundaryTick=isBoundaryTick;function formatAxisBasedOnRange(date,range,timezone){var time=moment.tz(date,timezone.toString());var length=range.end.valueOf()-range.start.valueOf();if(length<6*chronoshift_1.hour.canonicalLength){if(time.minute()===0)return time.format("hA");return time.format("hh:mm")}else if(length<3*chronoshift_1.day.canonicalLength){if(time.hour()===0)return{value:time.format("hA"),boundary:time.format("MMM DD")};return time.format("hA")}else if(length<6*chronoshift_1.day.canonicalLength){if(time.hour()===0)return time.format("MMM DD");return time.format("hh:mm")}else if(length<20*chronoshift_1.day.canonicalLength){if(time.date()===0)return{value:time.format("ddd DD"),boundary:time.format("MMMM")};return time.format("ddd DD")}else if(length<95*chronoshift_1.day.canonicalLength){return time.format("MMM DD")}else if(length<2*chronoshift_1.year.canonicalLength){if(time.month()===0)return{value:time.format("MMMM"),boundary:time.format("YYYY")};return time.format("MMM")}return time.format("MMM YYYY")}exports.formatAxisBasedOnRange=formatAxisBasedOnRange;function formatGranularity(granularity){return granularity.replace(/^PT?/,"")}exports.formatGranularity=formatGranularity},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var classNames=__webpack_require__(9);var React=__webpack_require__(1);__webpack_require__(414);var HighlightString=function(_super){tslib_1.__extends(HighlightString,_super);function HighlightString(){return _super.call(this)||this}HighlightString.prototype.highlightInString=function(){var _a=this.props,text=_a.text,highlight=_a.highlight;if(!highlight)return text;var startIndex=null;var highlightString=null;if(typeof highlight==="string"){var strLower=text.toLowerCase();startIndex=strLower.indexOf(highlight.toLowerCase());if(startIndex===-1)return text;highlightString=highlight.toLowerCase()}else{var match=text.match(highlight);if(!match)return text;highlightString=match[0];startIndex=match.index}var endIndex=startIndex+highlightString.length;return[React.createElement("span",{className:"pre",key:"pre"},text.substring(0,startIndex)),React.createElement("span",{className:"bold",key:"bold"},text.substring(startIndex,endIndex)),React.createElement("span",{className:"post",key:"post"},text.substring(endIndex))]};HighlightString.prototype.render=function(){var className=this.props.className;return React.createElement("span",{className:classNames("highlight-string",className)},this.highlightInString())};return HighlightString}(React.Component);exports.HighlightString=HighlightString},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function makeTitle(name){return name.replace(/^[ _\-]+|[ _\-]+$/g,"").replace(/(^|[_\-]+)\w/g,function(s){return s.replace(/[_\-]+/," ").toUpperCase()}).replace(/[a-z0-9][A-Z]/g,function(s){return s[0]+" "+s[1]})}exports.makeTitle=makeTitle;function collect(wait,fn){var timeout;var later=function(){timeout=null;fn()};return function(){if(!timeout){timeout=setTimeout(later,wait)}}}exports.collect=collect;var URL_UNSAFE_CHARS=/[^\w.~\-]+/g;function makeUrlSafeName(name){return name.replace(URL_UNSAFE_CHARS,"_")}exports.makeUrlSafeName=makeUrlSafeName;function verifyUrlSafeName(name){if(typeof name!=="string")throw new TypeError("name must be a string");if(!name.length)throw new Error("can not have empty name");var urlSafeName=makeUrlSafeName(name);if(name!==urlSafeName){throw new Error("'"+name+"' is not a URL safe name. Try '"+urlSafeName+"' instead?")}}exports.verifyUrlSafeName=verifyUrlSafeName;function arraySum(inputArray){return inputArray.reduce(function(pV,cV){return pV+cV},0)}exports.arraySum=arraySum;function findFirstBiggerIndex(array,elementToFind,valueOf){if(!elementToFind)return-1;var valueOfElementToFind=valueOf(elementToFind);return array.findIndex(function(g){return valueOf(g)>valueOfElementToFind})}exports.findFirstBiggerIndex=findFirstBiggerIndex;function findBiggerClosestToIdeal(array,elementToFind,ideal,valueOf){var biggerOrEqualIndex=array.findIndex(function(g){return valueOf(g)>=valueOf(elementToFind)});var biggerArrayOrEqual=array.slice(biggerOrEqualIndex);return biggerArrayOrEqual.reduce(function(pV,cV,i,arr){return Math.abs(valueOf(pV)-valueOf(ideal))<Math.abs(valueOf(cV)-valueOf(ideal))?pV:cV})}exports.findBiggerClosestToIdeal=findBiggerClosestToIdeal;function findExactIndex(array,elementToFind,valueOf){return array.findIndex(function(g){return valueOf(g)===valueOf(elementToFind)})}exports.findExactIndex=findExactIndex;function findMaxValueIndex(array,valueOf){return array.reduce(function(currMax,cV,cIdx,arr){return valueOf(cV)>valueOf(arr[currMax])?cIdx:currMax},0)}exports.findMaxValueIndex=findMaxValueIndex;function findMinValueIndex(array,valueOf){return array.reduce(function(currMax,cV,cIdx,arr){return valueOf(cV)<valueOf(arr[currMax])?cIdx:currMax},0)}exports.findMinValueIndex=findMinValueIndex;function log10(n){return Math.log(n)*Math.LOG10E}function toSignificantDigits(n,digits){var multiplier=Math.pow(10,digits-Math.floor(Math.log(n)/Math.LN10)-1);return Math.round(n*multiplier)/multiplier}exports.toSignificantDigits=toSignificantDigits;function getNumberOfWholeDigits(n){return Math.max(Math.floor(log10(Math.abs(n))),0)+1}exports.getNumberOfWholeDigits=getNumberOfWholeDigits;function inlineVars(obj,vs){return JSON.parse(JSON.stringify(obj).replace(/%\{[\w\-]+\}%/g,function(varName){varName=varName.substr(2,varName.length-4);var v=vs[varName];if(typeof v!=="string")throw new Error("could not find variable '"+varName+"'");v=JSON.stringify(v);return v.substr(1,v.length-2)}))}exports.inlineVars=inlineVars;function ensureOneOf(value,values,messagePrefix){if(values.indexOf(value)!==-1)return;var isMessage=typeof value==="undefined"?"not defined":"'"+value+"'";throw new Error(messagePrefix+" must be on of '"+values.join("', '")+"' (is "+isMessage+")")}exports.ensureOneOf=ensureOneOf;function pluralIfNeeded(n,thing){return n+" "+thing+(n===1?"":"s")}exports.pluralIfNeeded=pluralIfNeeded;function isSubset(candidateSubset,candidateSuperset){return candidateSubset.every(function(v){return candidateSuperset.indexOf(v)!==-1})}exports.isSubset=isSubset},,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ajax_1=__webpack_require__(45);var plywood_1=__webpack_require__(6);function getSplitsDescription(ex){var splits=[];ex.forEach(function(ex){if(ex instanceof plywood_1.SplitExpression){splits.push(ex.firstSplitExpression().toString())}});return splits.join(";")}var QueryRunner=function(){function QueryRunner(){}QueryRunner.fetch=function(dataCube,expression,timezone){return ajax_1.Ajax.query({method:"POST",url:QueryRunner.URL+"?by="+getSplitsDescription(expression),data:{dataCube:dataCube.name,expression:expression.toJS(),timezone:timezone}}).then(function(res){if(!res.result)throw new Error("Got back empty result");return plywood_1.Dataset.fromJS(res.result)})};return QueryRunner}();QueryRunner.URL="plywood";exports.QueryRunner=QueryRunner},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DragManager=function(){function DragManager(){}DragManager.init=function(){document.addEventListener("dragend",function(){DragManager.dragOrigin=null;DragManager.dragDimension=null;DragManager.dragSplit=null},false)};DragManager.getDragOrigin=function(){return DragManager.dragOrigin};DragManager.setDragDimension=function(dimension,origin){DragManager.dragDimension=dimension;DragManager.dragOrigin=origin};DragManager.getDragDimension=function(){return DragManager.dragDimension};DragManager.setDragSplit=function(split,origin){DragManager.dragSplit=split;DragManager.dragOrigin=origin};DragManager.getDragSplit=function(){return DragManager.dragSplit};return DragManager}();DragManager.dragOrigin=null;DragManager.dragDimension=null;DragManager.dragSplit=null;exports.DragManager=DragManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var React=__webpack_require__(1);var strings_1=__webpack_require__(15);__webpack_require__(427);var QueryError=function(_super){tslib_1.__extends(QueryError,_super);function QueryError(){return _super.call(this)||this}QueryError.prototype.render=function(){var error=this.props.error;return React.createElement("div",{className:"query-error"},React.createElement("div",{className:"whiteout"}),React.createElement("div",{className:"error-container"},React.createElement("div",{className:"error"},strings_1.STRINGS.queryError),React.createElement("div",{className:"message"},error.message)))};return QueryError}(React.Component);exports.QueryError=QueryError},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var chronoshift_1=__webpack_require__(16);var numeral=__webpack_require__(126);var plywood_1=__webpack_require__(6);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var time_1=__webpack_require__(75);var scales={a:{"":1,k:1e3,m:1e6,b:1e9,t:1e12},b:{B:1,KB:1024,MB:1024*1024,GB:1024*1024*1024,TB:1024*1024*1024*1024,PB:1024*1024*1024*1024*1024,EB:1024*1024*1024*1024*1024*1024,ZB:1024*1024*1024*1024*1024*1024*1024,YB:1024*1024*1024*1024*1024*1024*1024*1024}};function getMiddleNumber(values){var filteredAbsData=[];for(var _i=0,values_1=values;_i<values_1.length;_i++){var v=values_1[_i];if(v===0||isNaN(v)||!isFinite(v))continue;filteredAbsData.push(Math.abs(v))}var n=filteredAbsData.length;if(n){filteredAbsData.sort(function(a,b){return b-a});return filteredAbsData[Math.ceil((n-1)/2)]}else{return 0}}exports.getMiddleNumber=getMiddleNumber;function formatterFromData(values,format){var match=format.match(/^(\S*)( ?)([ab])$/);if(match){var numberFormat_1=match[1];var space=match[2];var formatType=match[3];var middle=getMiddleNumber(values);var formatMiddle=numeral(middle).format("0 "+formatType);var unit=formatMiddle.split(" ")[1]||"";var scale_1=scales[formatType][unit];var append_1=unit?space+unit:"";return function(n){if(isNaN(n)||!isFinite(n))return"-";return numeral(n/scale_1).format(numberFormat_1)+append_1}}else{return function(n){if(isNaN(n)||!isFinite(n))return"-";return numeral(n).format(format)}}}exports.formatterFromData=formatterFromData;function formatNumberRange(value){var s=value.start!=null?String(value.start):strings_1.STRINGS.any;var e=value.end!=null?String(value.end):strings_1.STRINGS.any;return s+" to "+e}exports.formatNumberRange=formatNumberRange;function formatValue(value,timezone,displayYear){if(plywood_1.NumberRange.isNumberRange(value)){return formatNumberRange(value)}else if(plywood_1.TimeRange.isTimeRange(value)){return time_1.formatTimeRange(value,timezone,displayYear)}else{return""+value}}exports.formatValue=formatValue;function formatFilterClause(dimension,clause,timezone,verbose){var _a=this.getFormattedClause(dimension,clause,timezone,verbose),title=_a.title,values=_a.values;return title?title+" "+values:values}exports.formatFilterClause=formatFilterClause;function getFormattedClause(dimension,clause,timezone,verbose){var dimType=dimension.getType();var values;var clauseSet=clause.getLiteralSet();function getClauseLabel(){var dimTitle=dimension.title;if(dimType==="TIME"&&!verbose)return"";var delimiter=["regex","contains"].indexOf(clause.getAction())!==-1?" ~":":";if(clauseSet&&clauseSet.elements.length>1&&!verbose)return""+dimTitle;return""+dimTitle+delimiter}switch(dimType){case"NULL":case"BOOLEAN":case"NUMBER":case"STRING":case"SET/BOOLEAN":case"SET/NUMBER":case"SET/STRING":var action=clause.getAction();if(action==="overlap"){if(verbose){values=clauseSet.toString()}else{var setElements=clauseSet.elements;if(setElements.length>1){values="("+setElements.length+")"}else{values=formatValue(setElements[0])}}}else if(action==="match"){values="/"+clause.search+"/"}else if(action===models_1.Filter.CONTAINS){values='"'+clause.search+'"'}break;case"TIME":if(clause.dynamic){values=getLabelForRelativeSelection(clause.dynamic)}else{var selection=clause.values;var elements=selection.elements;if(elements.length===1){var timeRange=elements[0];if(timeRange instanceof plywood_1.TimeRange){values=time_1.formatTimeRange(timeRange,timezone,time_1.DisplayYear.IF_DIFF)}else{values=clauseSet.toString()}}else{values=elements.length+" time ranges"}}break;default:throw new Error("unknown type "+dimType)}return{title:getClauseLabel(),values:values}}exports.getFormattedClause=getFormattedClause;function getLabelForRelativeSelection(expression){var op=expression.getHeadOperand();if(!(expression instanceof plywood_1.TimeRangeExpression)&&!(expression instanceof plywood_1.TimeBucketExpression)){return expression.toString()}var duration=expression.duration;var durationStr=expression instanceof plywood_1.TimeRangeExpression?expression.getQualifiedDurationDescription():duration.getDescription(true);if(duration.equals(chronoshift_1.Duration.fromJS("P3M")))durationStr=strings_1.STRINGS.quarter;var isNegativeRange=expression instanceof plywood_1.TimeRangeExpression&&expression.step<0;var refIsNow=op.equals(models_1.FilterClause.$now);if(op.equals(models_1.FilterClause.$maxTime)&&isNegativeRange){return strings_1.STRINGS.latest+" "+durationStr}else if(refIsNow&&isNegativeRange){return strings_1.STRINGS.previous+" "+durationStr}else if(refIsNow&&expression instanceof plywood_1.TimeBucketExpression){return strings_1.STRINGS.current+" "+durationStr}return expression.toString()}exports.getLabelForRelativeSelection=getLabelForRelativeSelection},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var little_pictures_1=__webpack_require__(11);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var ReactDOM=__webpack_require__(20);var bubble_menu_1=__webpack_require__(34);var tile_header_1=__webpack_require__(215);__webpack_require__(429);var SearchableTile=function(_super){tslib_1.__extends(SearchableTile,_super);function SearchableTile(){var _this=_super.call(this)||this;_this.state={actionsMenuOpenOn:null};_this.globalMouseDownListener=_this.globalMouseDownListener.bind(_this);_this.onEscape=_this.onEscape.bind(_this);return _this}SearchableTile.prototype.componentDidMount=function(){this.mounted=true;this.setState({actionsMenuAlignOn:ReactDOM.findDOMNode(this.refs["header"])});window.addEventListener("mousedown",this.globalMouseDownListener)};SearchableTile.prototype.componentWillUnmount=function(){this.mounted=false;window.removeEventListener("mousedown",this.globalMouseDownListener)};SearchableTile.prototype.globalMouseDownListener=function(e){var _a=this.props,searchText=_a.searchText,toggleChangeFn=_a.toggleChangeFn;if(searchText!=="")return;var target=e.target;var searchBoxElement=ReactDOM.findDOMNode(this.refs["search-box"]);if(!searchBoxElement||beltful_1.DOMUtils.isInside(target,searchBoxElement))return;var headerRef=this.refs["header"];if(!headerRef)return;var searchButtonElement=ReactDOM.findDOMNode(headerRef.refs["search"]);if(!searchButtonElement||beltful_1.DOMUtils.isInside(target,searchButtonElement))return;toggleChangeFn()};SearchableTile.prototype.onEscape=function(e){var _a=this.props,toggleChangeFn=_a.toggleChangeFn,showSearch=_a.showSearch;if(!showSearch)return;toggleChangeFn()};SearchableTile.prototype.onActionsMenuClose=function(){var actionsMenuOpenOn=this.state.actionsMenuOpenOn;if(!actionsMenuOpenOn)return;this.setState({actionsMenuOpenOn:null})};SearchableTile.prototype.onActionsMenuClick=function(e){var actionsMenuOpenOn=this.state.actionsMenuOpenOn;if(actionsMenuOpenOn)return this.onActionsMenuClose();this.setState({actionsMenuOpenOn:e.target})};SearchableTile.prototype.onSelectGranularity=function(action){this.onActionsMenuClose();action.onClick()};SearchableTile.prototype.renderGranularityElements=function(){var _this=this;var actions=this.props.actions;return actions.map(function(action,i){return React.createElement("li",{className:classNames({selected:action.selected}),key:i,onClick:_this.onSelectGranularity.bind(_this,action)},action.label||action.toString())})};SearchableTile.prototype.renderActionsMenu=function(){
var _a=this.state,actionsMenuOpenOn=_a.actionsMenuOpenOn,actionsMenuAlignOn=_a.actionsMenuAlignOn;var stage=beltful_1.Stage.fromSize(180,200);return React.createElement(bubble_menu_1.BubbleMenu,{align:"end",className:"dimension-tile-actions",direction:"down",stage:stage,onClose:this.onActionsMenuClose.bind(this),openOn:actionsMenuOpenOn,alignOn:actionsMenuAlignOn},React.createElement("ul",{className:"bubble-list"},this.renderGranularityElements()))};SearchableTile.prototype.render=function(){var _a=this.props,className=_a.className,style=_a.style,icons=_a.icons,title=_a.title,onSearchChange=_a.onSearchChange,showSearch=_a.showSearch,searchText=_a.searchText,children=_a.children,onDragStart=_a.onDragStart,actions=_a.actions;var actionsMenuOpenOn=this.state.actionsMenuOpenOn;var tileIcons=icons;if(actions&&actions.length>0){tileIcons=[{name:"more",ref:"more",onClick:this.onActionsMenuClick.bind(this),svg:little_pictures_1.FULL_MORE,active:Boolean(actionsMenuOpenOn)}].concat(icons)}var qualifiedClassName="searchable-tile "+className;var header=React.createElement(tile_header_1.TileHeader,{title:title,ref:"header",icons:tileIcons,onDragStart:onDragStart});var searchBar=null;if(showSearch){searchBar=React.createElement("div",{className:"search-box",ref:"search-box"},React.createElement(caladan_1.ClearableInput,{placeholder:"Search",focusOnMount:true,value:searchText,onChange:onSearchChange.bind(this)}))}qualifiedClassName=classNames(qualifiedClassName,showSearch?"has-search":"no-search");return React.createElement("div",{className:qualifiedClassName,style:style},React.createElement(caladan_1.GlobalEventListener,{escape:this.onEscape.bind(this)}),header,searchBar,actionsMenuOpenOn?this.renderActionsMenu():null,children)};return SearchableTile}(React.Component);exports.SearchableTile=SearchableTile},,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var little_pictures_1=__webpack_require__(11);var React=__webpack_require__(1);var constants_1=__webpack_require__(47);__webpack_require__(408);var FancyDragIndicator=function(_super){tslib_1.__extends(FancyDragIndicator,_super);function FancyDragIndicator(){return _super.call(this)||this}FancyDragIndicator.prototype.render=function(){var dragPosition=this.props.dragPosition;if(!dragPosition)return null;var sectionWidth=constants_1.CORE_ITEM_WIDTH+constants_1.CORE_ITEM_GAP;var ghostArrowLeft;var dragGhostElement=null;if(dragPosition.isInsert()){ghostArrowLeft=dragPosition.insert*sectionWidth-constants_1.CORE_ITEM_GAP/2}else{ghostArrowLeft=dragPosition.replace*sectionWidth+constants_1.CORE_ITEM_WIDTH/2;var left=dragPosition.replace*sectionWidth;dragGhostElement=React.createElement("div",{className:"drag-ghost-element",style:{left:left}})}return React.createElement("div",{className:"fancy-drag-indicator"},dragGhostElement,React.createElement(caladan_1.SvgIcon,{className:"drag-ghost-arrow",svg:little_pictures_1.DRAG_ARROW,style:{left:ghostArrowLeft}}))};return FancyDragIndicator}(React.Component);exports.FancyDragIndicator=FancyDragIndicator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);__webpack_require__(410);var FILTER_OPTIONS=[{label:strings_1.STRINGS.include,value:models_1.Filter.INCLUDE,svg:Icons.FILTER_INCLUDE,checkType:"check"},{label:strings_1.STRINGS.exclude,value:models_1.Filter.EXCLUDE,svg:Icons.FILTER_EXCLUDE,checkType:"cross"},{label:strings_1.STRINGS.contains,value:models_1.Filter.CONTAINS,svg:Icons.FILTER_CONTAINS},{label:strings_1.STRINGS.regex,value:models_1.Filter.REGEX,svg:Icons.FILTER_REGEX}];var FilterOptionsDropdown=function(_super){tslib_1.__extends(FilterOptionsDropdown,_super);function FilterOptionsDropdown(){return _super.call(this)||this}FilterOptionsDropdown.getFilterOptions=function(){var filterTypes=[];for(var _i=0;_i<arguments.length;_i++){filterTypes[_i]=arguments[_i]}return FILTER_OPTIONS.filter(function(option){return filterTypes.indexOf(option.value)!==-1})};FilterOptionsDropdown.prototype.onSelectOption=function(option){this.props.onSelectOption(option.value)};FilterOptionsDropdown.prototype.renderFilterOption=function(option){return React.createElement("span",{className:"filter-option"},React.createElement(caladan_1.SvgIcon,{className:"icon",svg:option.svg}),React.createElement("span",{className:"option-label"},option.label))};FilterOptionsDropdown.prototype.render=function(){var _a=this.props,selectedOption=_a.selectedOption,onSelectOption=_a.onSelectOption,filterOptions=_a.filterOptions;var FilterDropdown=caladan_1.Dropdown.specialize();var options=filterOptions||FILTER_OPTIONS;var selectedItem=options.filter(function(o){return o.value===selectedOption})[0]||options[0];return React.createElement("div",{className:"filter-options-dropdown"},React.createElement(FilterDropdown,{menuClassName:"filter-options",items:options,selectedItem:selectedItem,equal:function(a,b){return a.value===b.value},keyItem:function(d){return d.value},renderItem:this.renderFilterOption.bind(this),renderSelectedItem:function(d){return React.createElement(caladan_1.SvgIcon,{className:"icon",svg:d.svg})},onSelect:this.onSelectOption.bind(this)}))};return FilterOptionsDropdown}(React.Component);exports.FilterOptionsDropdown=FilterOptionsDropdown},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var little_pictures_1=__webpack_require__(11);var React=__webpack_require__(1);var strings_1=__webpack_require__(15);var bubble_menu_1=__webpack_require__(34);__webpack_require__(430);var SegmentActionButtons=function(_super){tslib_1.__extends(SegmentActionButtons,_super);function SegmentActionButtons(){var _this=_super.call(this)||this;_this.state={moreMenuOpenOn:null,mainLabel:strings_1.STRINGS.select};return _this}SegmentActionButtons.prototype.onAltDown=function(e){var _a=this.props,clicker=_a.clicker,dimensions=_a.dimensions,disableExclusion=_a.disableExclusion;if(disableExclusion===true)return;if(!dimensions||dimensions.some(function(d){return d.isContinuous()}))return;var hasChanged=clicker.invertHighlight();if(hasChanged){this.setState({mainLabel:strings_1.STRINGS.exclude})}};SegmentActionButtons.prototype.onAltUp=function(e){var _a=this.props,clicker=_a.clicker,dimensions=_a.dimensions,disableExclusion=_a.disableExclusion;if(disableExclusion===true)return;if(!dimensions||dimensions.some(function(d){return d.isContinuous()}))return;clicker.invertHighlight();this.setState({mainLabel:strings_1.STRINGS.select})};SegmentActionButtons.prototype.onExclude=function(e){var _a=this.props,onClose=_a.onClose,clicker=_a.clicker;clicker.acceptInvertedHighlight();if(onClose)onClose()};SegmentActionButtons.prototype.onSelect=function(e){var _a=this.props,onClose=_a.onClose,clicker=_a.clicker;clicker.acceptHighlight();if(onClose)onClose()};SegmentActionButtons.prototype.onCancel=function(e){var _a=this.props,onClose=_a.onClose,clicker=_a.clicker;clicker.dropHighlight();if(onClose)onClose()};SegmentActionButtons.prototype.onMore=function(e){var moreMenuOpenOn=this.state.moreMenuOpenOn;if(moreMenuOpenOn)return this.closeMoreMenu();this.setState({moreMenuOpenOn:e.target})};SegmentActionButtons.prototype.closeMoreMenu=function(){this.setState({moreMenuOpenOn:null})};SegmentActionButtons.prototype.getUrl=function(){var _a=this.props,segmentLabel=_a.segmentLabel,dimensions=_a.dimensions;if(!dimensions||dimensions.length>1||!dimensions[0]||!dimensions[0].url)return null;return dimensions[0].url.replace(/%s/g,segmentLabel)};SegmentActionButtons.prototype.openRawDataModal=function(){var openRawDataModal=this.props.openRawDataModal;if(!openRawDataModal)return;this.closeMoreMenu();openRawDataModal()};SegmentActionButtons.prototype.renderMoreMenu=function(){var _a=this.props,segmentLabel=_a.segmentLabel,dimensions=_a.dimensions,disableExclusion=_a.disableExclusion,openRawDataModal=_a.openRawDataModal;var moreMenuOpenOn=this.state.moreMenuOpenOn;if(!moreMenuOpenOn)return null;var menuSize=beltful_1.Stage.fromSize(160,160);var bubbleListItems=[React.createElement("li",{className:"clipboard",key:"copyValue","data-clipboard-text":segmentLabel,onClick:this.closeMoreMenu.bind(this)},strings_1.STRINGS.copyValue)];if(openRawDataModal){bubbleListItems.push(React.createElement("li",{className:"view-raw-data",key:"view-raw-data",onClick:this.openRawDataModal.bind(this)},strings_1.STRINGS.viewRawData))}var url=this.getUrl();if(url){bubbleListItems.push(React.createElement("li",{key:"goToUrl"},React.createElement("a",{href:url,onClick:this.closeMoreMenu.bind(this),target:"_blank"},strings_1.STRINGS.goToUrl)))}if(!disableExclusion&&dimensions&&!dimensions.some(function(d){return d.isContinuous()})){bubbleListItems.push(React.createElement("li",{className:"exclude",key:"exclude",onClick:this.onExclude.bind(this)},strings_1.STRINGS.exclude))}return React.createElement(bubble_menu_1.BubbleMenu,{className:"more-menu",direction:"down",stage:menuSize,openOn:moreMenuOpenOn,align:"start",onClose:this.closeMoreMenu.bind(this)},React.createElement("ul",{className:"bubble-list"},bubbleListItems))};SegmentActionButtons.prototype.render=function(){var disableMoreMenu=this.props.disableMoreMenu;var _a=this.state,moreMenuOpenOn=_a.moreMenuOpenOn,mainLabel=_a.mainLabel;return React.createElement("div",{className:"segment-action-buttons"},React.createElement(caladan_1.GlobalEventListener,{altDown:this.onAltDown.bind(this),altUp:this.onAltUp.bind(this)}),React.createElement(caladan_1.Button,{type:"primary",className:"mini main",onClick:this.onSelect.bind(this),title:mainLabel}),React.createElement(caladan_1.Button,{type:"secondary",className:"mini",onClick:this.onCancel.bind(this),title:strings_1.STRINGS.cancel}),disableMoreMenu?null:React.createElement(caladan_1.Button,{type:"secondary",className:"mini",onClick:this.onMore.bind(this),svg:little_pictures_1.FULL_MORE_MINI,active:Boolean(moreMenuOpenOn)}),this.renderMoreMenu())};return SegmentActionButtons}(React.Component);exports.SegmentActionButtons=SegmentActionButtons},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var classNames=__webpack_require__(9);var React=__webpack_require__(1);__webpack_require__(433);var Shpitz=function(_super){tslib_1.__extends(Shpitz,_super);function Shpitz(){return _super.call(this)||this}Shpitz.prototype.render=function(){var _a=this.props,direction=_a.direction,style=_a.style;return React.createElement("div",{className:classNames("shpitz",direction),style:style},React.createElement("div",{className:"rectangle"}))};return Shpitz}(React.Component);exports.Shpitz=Shpitz},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NUM_REGEX=/^\d+$/;function firstUp(str){return str?str.charAt(0).toUpperCase()+str.slice(1):undefined}exports.firstUp=firstUp;function titleCase(str){return firstUp(str.toLowerCase())}exports.titleCase=titleCase;function pad(n,padding){if(padding===void 0){padding=3}var str=String(n);if(str.length>padding)return str;while(str.length<padding)str="0"+str;return str}exports.pad=pad;function generateUniqueName(prefix,isUnique,options){options=options||{suffixIfAlreadyUnique:true,separator:"",startAt:0};var suffixIfAlreadyUnique=options.suffixIfAlreadyUnique||false;var separator=options.separator||"";var startAt=options.startAt||0;if(!suffixIfAlreadyUnique&&isUnique(prefix))return prefix;var i=startAt;var name=prefix+separator+pad(i);while(!isUnique(name)){name=prefix+separator+pad(++i)}return name}exports.generateUniqueName=generateUniqueName},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var ajax_1=__webpack_require__(45);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var Clipboard=__webpack_require__(446);var immutable_class_1=__webpack_require__(2);var Q=__webpack_require__(49);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var about_modal_1=__webpack_require__(342);var expired_modal_1=__webpack_require__(812);var welcome_modal_1=__webpack_require__(815);var url_1=__webpack_require__(316);var collection_view_1=__webpack_require__(819);var cube_edit_view_1=__webpack_require__(822);var cube_view_1=__webpack_require__(775);var home_view_1=__webpack_require__(826);var link_view_1=__webpack_require__(829);__webpack_require__(946);var PivotApplication=function(_super){tslib_1.__extends(PivotApplication,_super);function PivotApplication(){var _this=_super.call(this)||this;_this.state={appSettings:null,drawerOpen:false,showAboutModal:false,showWelcomeModal:false,showExpiredModal:false};var resetEditStateIfNeeded=function(){var _a=_this.state,dataCubeEditController=_a.dataCubeEditController,collectionEditController=_a.collectionEditController;if(!dataCubeEditController&&!collectionEditController)return;_this.setState({dataCubeEditController:null,collectionEditController:null})};_this.controller={openSideDrawer:function(){_this.setState({drawerOpen:true})},goHome:function(){window.location.hash="#home";resetEditStateIfNeeded()},openDataCube:function(dataCube,essence){window.location.hash="#"+(essence?essence.getURL():dataCube.name);resetEditStateIfNeeded()},editDataCube:function(dataCube,editMode){_this.setState({dataCubeEditController:{dataCube:dataCube,editMode:editMode,onDelete:function(){var _a=_this.state,appSettings=_a.appSettings,dataCubeEditController=_a.dataCubeEditController;_this.controller.updateSettings(appSettings.deleteCollection(dataCubeEditController.dataCube.name)).then(function(undo){caladan_1.Notifier.success("Data cube deleted",{label:"Undo",callback:undo});_this.controller.goHome()})},onCancel:resetEditStateIfNeeded,onSave:function(newDataCube){var appSettings=_this.state.appSettings;_this.controller.updateSettings(appSettings.addOrUpdateDataCube(newDataCube)).then(function(){if(editMode==="create"){_this.controller.openDataCube(newDataCube)}else{resetEditStateIfNeeded()}},function(e){var jsonError=e.jsonError;if(jsonError&&jsonError.error==="conflict"){caladan_1.Notifier.failure("Conflict","Please refresh and try again")}else{caladan_1.Notifier.failure("Error",e.message)}})}}})},openCollection:function(collection){window.location.hash="#collection/"+collection.name;resetEditStateIfNeeded()},editCollection:function(collection,editMode,stayInIt){_this.setState({collectionEditController:{collection:collection,editMode:editMode,onDelete:function(){var _a=_this.state,appSettings=_a.appSettings,collectionEditController=_a.collectionEditController;_this.controller.updateSettings(appSettings.deleteCollection(collectionEditController.collection.name)).then(function(undo){caladan_1.Notifier.success("Collection deleted",{label:"Undo",callback:undo});_this.controller.goHome()})},onCancel:resetEditStateIfNeeded,onSave:function(newCollection){var appSettings=_this.state.appSettings;_this.controller.updateSettings(appSettings.addOrUpdateCollection(newCollection)).then(function(){if(editMode==="create"||stayInIt){_this.controller.openCollection(newCollection)}else{resetEditStateIfNeeded()}},function(e){var jsonError=e.jsonError;if(jsonError&&jsonError.error==="conflict"){caladan_1.Notifier.failure("Conflict","Please refresh and try again")}else{caladan_1.Notifier.failure("Error",e.message)}})}}})},openSettings:function(preferredTab){window.open("/settings"+(preferredTab?"#"+preferredTab:""),"_self")},updateSettings:function(newSettings){var appSettings=_this.state.appSettings;var deferred=Q.defer();ajax_1.Ajax.query({method:"POST",url:"client-settings/change",data:{dataCubeDiffs:newSettings.getDataCubeDiffs(appSettings.dataCubes),collectionDiffs:newSettings.getCollectionDiffs(appSettings.collections)}}).then(function(resp){if(!_this.mounted)return;_this.setState({appSettings:models_1.AppSettings.fromJS(resp.clientSettings,{visualizations:models_1.MANIFESTS})},function(){deferred.resolve(function(){_this.controller.updateSettings(appSettings).then(function(){caladan_1.Notifier.success("Undone")},function(e){caladan_1.Notifier.failure("Woops","Something bad happened during undo")})})})},function(e){deferred.reject(e)});return deferred.promise}};_this.fetchSettings=_this.fetchSettings.bind(_this);var clipboard=new Clipboard(".clipboard");return _this}PivotApplication.changeHash=function(hash,skipHistory){if(skipHistory===void 0){skipHistory=false}if(skipHistory){url_1.replaceHash("#"+hash)}else{window.location.hash=hash}};PivotApplication.prototype.fetchSettings=function(){var _this=this;ajax_1.Ajax.query({url:"client-settings"}).then(function(resp){if(!_this.mounted)return;_this.setState({appSettings:models_1.AppSettings.fromJS(resp.clientSettings,{visualizations:models_1.MANIFESTS})})},function(e){})};PivotApplication.prototype.initFromProps=function(props){var appSettings=props.appSettings,initTimekeeper=props.initTimekeeper,specialRun=props.specialRun;var showWelcomeModal=specialRun==="welcome";var showExpiredModal=specialRun==="expired";this.setState({appSettings:appSettings,showWelcomeModal:showWelcomeModal,showExpiredModal:showExpiredModal,timekeeper:initTimekeeper||models_1.Timekeeper.EMPTY})};PivotApplication.prototype.componentWillMount=function(){this.initFromProps(this.props)};PivotApplication.prototype.componentDidMount=function(){var _this=this;this.mounted=true;ajax_1.Ajax.addUpdateHandler(this.fetchSettings);ajax_1.Ajax.settingsVersionGetter=function(){var appSettings=_this.state.appSettings;return appSettings.getVersion()}};PivotApplication.prototype.componentWillUnmount=function(){this.mounted=false;ajax_1.Ajax.removeUpdateHandler(this.fetchSettings)};PivotApplication.prototype.isHome=function(breadCrumbs){return!breadCrumbs||!breadCrumbs.length||breadCrumbs[0]==="home"};PivotApplication.prototype.isLinkView=function(breadCrumbs){return breadCrumbs&&breadCrumbs[0]==="link"};PivotApplication.prototype.needsGateKeeping=function(){var _a=this.state,dataCubeEditController=_a.dataCubeEditController,collectionEditController=_a.collectionEditController;return Boolean(dataCubeEditController||collectionEditController)};PivotApplication.prototype.renderAboutModal=function(){var _this=this;var version=this.props.version;var showAboutModal=this.state.showAboutModal;if(!showAboutModal)return null;return React.createElement(about_modal_1.AboutModal,{version:version,onClose:function(){return _this.setState({showAboutModal:false})}})};PivotApplication.prototype.renderWelcomeModal=function(){var _this=this;var version=this.props.version;var showWelcomeModal=this.state.showWelcomeModal;if(!showWelcomeModal)return null;return React.createElement(welcome_modal_1.WelcomeModal,{version:version,onClose:function(){return _this.setState({showWelcomeModal:false})}})};PivotApplication.prototype.renderExpiredModal=function(){var version=this.props.version;var showExpiredModal=this.state.showExpiredModal;if(!showExpiredModal)return null;return React.createElement(expired_modal_1.ExpiredModal,{version:version})};PivotApplication.prototype.isSelectedItem=function(item){var breadCrumbs=this.state.breadCrumbs;if(!breadCrumbs||!breadCrumbs.length)return false;if(models_1.Collection.isCollection(item)){return breadCrumbs[0]==="collection"&&breadCrumbs[1]===item.name}if(models_1.DataCube.isDataCube(item)){return breadCrumbs[0]===item.name}return false};PivotApplication.prototype.renderSideDrawer=function(){var _this=this;var _a=this.props,user=_a.user,stateful=_a.stateful;var _b=this.state,breadCrumbs=_b.breadCrumbs,drawerOpen=_b.drawerOpen,appSettings=_b.appSettings;var dataCubes=appSettings.dataCubes,collections=appSettings.collections,customization=appSettings.customization;var closeSideDrawer=function(){return _this.setState({drawerOpen:false})};var needsGateKeeping=this.needsGateKeeping();var itemize=function(item){return{svgIcon:models_1.DataCube.isDataCube(item)?Icons.FULL_CUBE:Icons.FULL_COLLECTION,label:item.title,hash:"#"+(models_1.Collection.isCollection(item)?"collection/":"")+item.name,selected:_this.isSelectedItem(item),needsGateKeeping:needsGateKeeping}};var items=[caladan_1.SideDrawer.separator(),{svgIcon:Icons.HOME,label:this.isLinkView(breadCrumbs)?"Overview":"Home",hash:"#home",selected:this.isHome(breadCrumbs),needsGateKeeping:needsGateKeeping},caladan_1.SideDrawer.separator()].concat(dataCubes.map(itemize),[dataCubes.length?caladan_1.SideDrawer.separator():null],collections.map(itemize),[collections.length?caladan_1.SideDrawer.separator():null]).filter(Boolean);if(customization.getLauncherHref()){items.push({svgIcon:Icons.LAUNCHER,label:"Launcher",href:customization.getLauncherHref(),needsGateKeeping:needsGateKeeping})}else{if(stateful&&user&&user.canAccessSettings()&&customization.getSettingsMode()!==models_1.Customization.SETTINGS_MODE_SUPPRESSED){items.push({label:"Settings",href:"settings",needsGateKeeping:needsGateKeeping})}items.push({label:"Info & feedback",onClick:function(){return _this.setState({showAboutModal:true})}})}return React.createElement(caladan_1.SideDrawer,{open:drawerOpen,items:items,onClose:closeSideDrawer,navLogo:customization&&customization.customLogoSvg?customization.customLogoSvg:Icons.IMPLY_PIVOT_LOGO,onSelfClick:function(item){return window.open(item.hash,"_self")}})};PivotApplication.prototype.onURLChange=function(breadCrumbs){this.setState({breadCrumbs:breadCrumbs})};PivotApplication.prototype.renderView=function(){var _this=this;var _a=this.props,user=_a.user,stateful=_a.stateful,userMode=_a.userMode;var _b=this.state,appSettings=_b.appSettings,timekeeper=_b.timekeeper,dataCubeEditController=_b.dataCubeEditController,collectionEditController=_b.collectionEditController;var dataCubes=appSettings.dataCubes,collections=appSettings.collections,customization=appSettings.customization;var getInflater=function(field,items){return function(key,value){if(key!==field+"Id")return{key:key,value:value};var item=immutable_class_1.NamedArray.findByName(items,value);if(item)return{key:field,value:item};_this.controller.goHome();return undefined}};if(dataCubeEditController){return React.createElement(cube_edit_view_1.CubeEditView,{settings:appSettings,controller:this.controller,dataCube:dataCubeEditController.dataCube,editMode:dataCubeEditController.editMode,onDelete:dataCubeEditController.onDelete,onCancel:dataCubeEditController.onCancel,onSave:dataCubeEditController.onSave,user:user,userMode:userMode,customization:customization})}if(collectionEditController){return React.createElement(caladan_1.Router,{key:"router",onURLChange:function(){return null}},React.createElement(caladan_1.Route,{fragment:":$noop"},React.createElement(collection_view_1.CollectionView,{settings:appSettings,controller:this.controller,collection:collectionEditController.collection,collectionEditController:collectionEditController,user:user,userMode:userMode,timekeeper:timekeeper,dataCubes:dataCubes,customization:customization})))}return React.createElement(caladan_1.Router,{key:"router",onURLChange:this.onURLChange.bind(this)},React.createElement(caladan_1.Route,{fragment:"home"},React.createElement(home_view_1.HomeView,{settings:appSettings,controller:this.controller,user:user,userMode:userMode,customization:customization,stateful:stateful})),React.createElement(caladan_1.Route,{fragment:"link",disabled:!appSettings.linkViewConfig},React.createElement(caladan_1.Route,{fragment:":tileId"},React.createElement(link_view_1.LinkView,{controller:this.controller,user:user,userMode:userMode,collection:appSettings.linkViewConfig,timekeeper:timekeeper,customization:customization,stateful:stateful}))),React.createElement(caladan_1.Route,{fragment:"collection"},React.createElement(caladan_1.Route,{fragment:":collectionId",inflate:getInflater("collection",collections)},React.createElement(collection_view_1.CollectionView,{settings:appSettings,controller:this.controller,user:user,userMode:userMode,timekeeper:timekeeper,dataCubes:dataCubes,customization:customization}))),React.createElement(caladan_1.Route,{fragment:":dataCubeId/:$hash=''",inflate:getInflater("dataCube",dataCubes)},React.createElement(cube_view_1.CubeView,{settings:appSettings,controller:this.controller,changeHash:PivotApplication.changeHash,user:user,userMode:userMode,initTimekeeper:timekeeper,customization:customization,stateful:stateful})))};PivotApplication.prototype.render=function(){return React.createElement("main",{className:"pivot-application"},this.renderView(),this.renderSideDrawer(),this.renderAboutModal(),this.renderWelcomeModal(),this.renderExpiredModal(),React.createElement(caladan_1.Notifications,null),React.createElement(caladan_1.Questions,null))};return PivotApplication}(React.Component);exports.PivotApplication=PivotApplication},,,function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(34));__export(__webpack_require__(318));__export(__webpack_require__(319));__export(__webpack_require__(320));__export(__webpack_require__(204));__export(__webpack_require__(205));__export(__webpack_require__(322));__export(__webpack_require__(206));__export(__webpack_require__(323));__export(__webpack_require__(207));__export(__webpack_require__(324));__export(__webpack_require__(148));__export(__webpack_require__(208));__export(__webpack_require__(149));__export(__webpack_require__(313));__export(__webpack_require__(325));__export(__webpack_require__(326));__export(__webpack_require__(76));__export(__webpack_require__(327));__export(__webpack_require__(321));__export(__webpack_require__(328));__export(__webpack_require__(330));__export(__webpack_require__(331));__export(__webpack_require__(332));__export(__webpack_require__(209));__export(__webpack_require__(210));__export(__webpack_require__(211));__export(__webpack_require__(333));__export(__webpack_require__(92));__export(__webpack_require__(212));__export(__webpack_require__(125));__export(__webpack_require__(150));__export(__webpack_require__(314));__export(__webpack_require__(312));__export(__webpack_require__(151));__export(__webpack_require__(213));__export(__webpack_require__(336));__export(__webpack_require__(214));__export(__webpack_require__(215));__export(__webpack_require__(216));__export(__webpack_require__(337));__export(__webpack_require__(338));__export(__webpack_require__(339));__export(__webpack_require__(340));__export(__webpack_require__(217))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var moment=__webpack_require__(93);var React=__webpack_require__(1);var time_1=__webpack_require__(75);__webpack_require__(401);var DateRangeInput=function(_super){tslib_1.__extends(DateRangeInput,_super);function DateRangeInput(){var _this=_super.call(this)||this;_this.state={dateString:""};return _this}DateRangeInput.prototype.componentDidMount=function(){var _a=this.props,time=_a.time,timezone=_a.timezone;this.updateStateFromTime(time,timezone)};DateRangeInput.prototype.componentWillReceiveProps=function(nextProps){var time=nextProps.time,timezone=nextProps.timezone;this.updateStateFromTime(time,timezone)};DateRangeInput.prototype.updateStateFromTime=function(time,timezone){if(!time)return;if(isNaN(time.valueOf())){this.setState({dateString:""});return}var effectiveTime=this.props.type==="end"?time_1.exclusiveToInclusiveEnd(time):time;this.setState({dateString:time_1.getWallTimeString(effectiveTime,timezone)})};DateRangeInput.prototype.dateChange=function(e){var dateString=e.target.value.replace(/[^\d-]/g,"").substr(0,10);this.setState({dateString:dateString});if(dateString.length===10){this.changeDate(dateString)}};DateRangeInput.prototype.changeDate=function(possibleDateString){var _a=this.props,timezone=_a.timezone,onChange=_a.onChange,type=_a.type;var possibleDate=new Date(possibleDateString);if(isNaN(possibleDate.valueOf())){onChange(null)}else{var possibleMoment=moment.tz(possibleDateString,timezone.toString());if(type==="end"){possibleMoment.add(1,"days")}onChange(new Date(possibleMoment.valueOf()))}};DateRangeInput.prototype.render=function(){var hide=this.props.hide;var dateString=this.state.dateString;var value=hide?"":dateString;return React.createElement("div",{className:"date-range-input"},React.createElement("input",{className:"input-field",value:value,onChange:this.dateChange.bind(this)}))};return DateRangeInput}(React.Component);exports.DateRangeInput=DateRangeInput},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var little_pictures_1=__webpack_require__(11);var chronoshift_1=__webpack_require__(16);var classNames=__webpack_require__(9);var moment=__webpack_require__(93);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var time_1=__webpack_require__(75);var date_range_input_1=__webpack_require__(204);__webpack_require__(402);var DateRangePicker=function(_super){tslib_1.__extends(DateRangePicker,_super);function DateRangePicker(){var _this=_super.call(this)||this;_this.state={activeMonthStartDate:null,hoverTimeRange:null,selectionSet:false};return _this}DateRangePicker.prototype.componentWillMount=function(){var _a=this.props,startTime=_a.startTime,endTime=_a.endTime,timezone=_a.timezone;if(startTime&&!time_1.datesEqual(startTime,chronoshift_1.day.floor(startTime,timezone)))throw new Error("start time must be round");if(endTime&&!time_1.datesEqual(endTime,chronoshift_1.day.floor(endTime,timezone)))throw new Error("end time must be round");var flooredStart=chronoshift_1.month.floor(startTime||new Date,timezone);this.setState({activeMonthStartDate:flooredStart,selectionSet:true})};DateRangePicker.prototype.navigateToMonth=function(offset){var timezone=this.props.timezone;var activeMonthStartDate=this.state.activeMonthStartDate;var newDate=chronoshift_1.month.shift(activeMonthStartDate,timezone,offset);this.setState({activeMonthStartDate:newDate})};DateRangePicker.prototype.goToPreviousMonth=function(){return this.navigateToMonth(-1)};DateRangePicker.prototype.goToNextMonth=function(){return this.navigateToMonth(1)};DateRangePicker.prototype.calculateHoverTimeRange=function(mouseEnteredDay){var _a=this.props,startTime=_a.startTime,endTime=_a.endTime;var hoverTimeRange=null;if(startTime&&!endTime){var start=startTime;var end=mouseEnteredDay;if(mouseEnteredDay<startTime){start=mouseEnteredDay;end=startTime}hoverTimeRange=new plywood_1.TimeRange({start:start,end:end,bounds:"[]"})}this.setState({hoverTimeRange:hoverTimeRange})};DateRangePicker.prototype.onCalendarMouseLeave=function(){this.setState({hoverTimeRange:null})};DateRangePicker.prototype.selectNewRange=function(startDate,endDate){var _a=this.props,onStartChange=_a.onStartChange,onEndChange=_a.onEndChange,timezone=_a.timezone;onStartChange(startDate);if(endDate)endDate=time_1.shiftOneDay(endDate,timezone);onEndChange(endDate)};DateRangePicker.prototype.selectDay=function(selection){var startTime=this.props.startTime;var selectionSet=this.state.selectionSet;if(selectionSet){this.setState({hoverTimeRange:null,selectionSet:false});this.selectNewRange(selection,null)}else{var isDoubleClickSameDay=time_1.datesEqual(selection,startTime)
;var isBackwardSelection=selection<startTime;if(isDoubleClickSameDay){this.selectNewRange(startTime,startTime)}else if(isBackwardSelection){this.selectNewRange(selection,startTime)}else{this.selectNewRange(startTime,selection)}this.setState({selectionSet:true})}};DateRangePicker.prototype.getIsSelectable=function(date){var _a=this.state,hoverTimeRange=_a.hoverTimeRange,selectionSet=_a.selectionSet;var inHoverTimeRange=false;if(hoverTimeRange){inHoverTimeRange=hoverTimeRange.contains(date)}return inHoverTimeRange&&!selectionSet};DateRangePicker.prototype.getIsSelectedEdgeEnd=function(isSingleDate,candidate){if(isSingleDate)return false;var _a=this.props,startTime=_a.startTime,endTime=_a.endTime,timezone=_a.timezone;var candidateEndPoint=time_1.shiftOneDay(candidate,timezone);return time_1.wallTimeInclusiveEndEqual(endTime,candidateEndPoint,timezone)&&endTime>startTime};DateRangePicker.prototype.renderDays=function(weeks,monthStart,isSingleDate){var _this=this;var _a=this.props,startTime=_a.startTime,endTime=_a.endTime,maxTime=_a.maxTime,timezone=_a.timezone;var nextMonthStart=chronoshift_1.month.shift(monthStart,timezone,1);return weeks.map(function(daysInWeek,row){return React.createElement("div",{className:"week",key:row}," ",daysInWeek.map(function(dayDate,column){var isPast=dayDate<monthStart;var isFuture=dayDate>=nextMonthStart;var isBeyondMaxRange=dayDate>maxTime;var isSelectedEdgeStart=time_1.datesEqual(dayDate,startTime);var isSelectedEdgeEnd=_this.getIsSelectedEdgeEnd(isSingleDate,dayDate);var className=classNames("day","value",{past:isPast,future:isFuture,"beyond-max-range":isBeyondMaxRange,selectable:_this.getIsSelectable(dayDate),selected:startTime<dayDate&&dayDate<endTime,"selected-edge":isSelectedEdgeStart||isSelectedEdgeEnd});return React.createElement("div",{className:className,key:column,onClick:_this.selectDay.bind(_this,dayDate),onMouseEnter:_this.calculateHoverTimeRange.bind(_this,dayDate)},time_1.getWallTimeDay(dayDate,timezone))}))})};DateRangePicker.prototype.renderCalendar=function(startDate,isSingleDate){var timezone=this.props.timezone;var weeks=time_1.monthToWeeks(startDate,timezone);var firstWeek=weeks[0];var lastWeek=weeks[weeks.length-1];var countPrepend=7-firstWeek.length;var countAppend=7-lastWeek.length;weeks[0]=time_1.prependDays(timezone,firstWeek,countPrepend);weeks[weeks.length-1]=time_1.appendDays(timezone,lastWeek,countAppend);return this.renderDays(weeks,startDate,isSingleDate)};DateRangePicker.prototype.renderCalendarNav=function(startDate){var timezone=this.props.timezone;return React.createElement("div",{className:"calendar-nav"},React.createElement("div",{className:"caret left",onClick:this.goToPreviousMonth.bind(this)},React.createElement(caladan_1.SvgIcon,{svg:little_pictures_1.FULL_CARET_LEFT})),time_1.getWallTimeMonthWithYear(startDate,timezone),React.createElement("div",{className:"caret right",onClick:this.goToNextMonth.bind(this)},React.createElement(caladan_1.SvgIcon,{svg:little_pictures_1.FULL_CARET_RIGHT})))};DateRangePicker.prototype.render=function(){var _a=this.props,startTime=_a.startTime,endTime=_a.endTime,timezone=_a.timezone,onStartChange=_a.onStartChange,onEndChange=_a.onEndChange;var _b=this.state,activeMonthStartDate=_b.activeMonthStartDate,selectionSet=_b.selectionSet;if(!activeMonthStartDate)return null;var isSingleDate=endTime?time_1.getWallTimeDay(startTime,timezone)===time_1.getEndWallTimeInclusive(endTime,timezone).date():true;return React.createElement("div",{className:"date-range-picker"},React.createElement("div",{className:"side-by-side"},React.createElement(date_range_input_1.DateRangeInput,{type:"start",time:startTime,timezone:timezone,onChange:onStartChange.bind(this)}),React.createElement(date_range_input_1.DateRangeInput,{type:"end",time:endTime,timezone:timezone,onChange:onEndChange.bind(this),hide:!selectionSet})),React.createElement("div",{className:"calendar",onMouseLeave:this.onCalendarMouseLeave.bind(this)},this.renderCalendarNav(activeMonthStartDate),React.createElement("div",{className:"week"},moment.weekdaysShort().map(function(day,i){return React.createElement("div",{className:"day label",key:day+i},React.createElement("span",{className:"space"}),day)})),this.renderCalendar(activeMonthStartDate,isSingleDate)))};return DateRangePicker}(React.Component);exports.DateRangePicker=DateRangePicker},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var query_runner_1=__webpack_require__(90);var bubble_menu_1=__webpack_require__(34);var line_loader_1=__webpack_require__(329);__webpack_require__(404);var ACTION_SIZE=60;var PREVIEW_HEIGHT=20;function makePreview(value){if(plywood_1.NumberRange.isNumberRange(value)){return value.start+" - "+value.end}return value+" values"}var DimensionActionsMenu=function(_super){tslib_1.__extends(DimensionActionsMenu,_super);function DimensionActionsMenu(){var _this=_super.call(this)||this;_this.state={loading:false,error:null,preview:null};return _this}DimensionActionsMenu.prototype.fetchData=function(essence,timekeeper,dimension){var _this=this;var dimensions=essence.getDimensions();var dataCube=essence.dataCube;var filterExpression=essence.getEffectiveFilter(timekeeper,null,dimension).toExpression(dimensions);var $main=plywood_1.$("main");var dimEx=dimension.expression;var query=plywood_1.ply().apply("main",$main.filter(filterExpression));var getResult=null;if(dimension.isContinuous()){getResult=function(d){return plywood_1.NumberRange.fromJS({start:d["Min"],end:d["Max"]})};query=query.apply("Min",$main.min(dimEx)).apply("Max",$main.max(dimEx))}else{getResult=function(d){return Math.round(d["Count"])};query=query.apply("Count",$main.countDistinct(dimEx))}this.setState({loading:true});query_runner_1.QueryRunner.fetch(dataCube,query,essence.timezone).then(function(dataset){if(!_this.mounted)return;_this.setState({loading:false,preview:getResult(dataset.data[0]),error:null})},function(error){if(!_this.mounted)return;_this.setState({loading:false,error:error})})};DimensionActionsMenu.prototype.componentDidMount=function(){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension;this.mounted=true;if(this.shouldShowPreview()){this.fetchData(essence,timekeeper,dimension)}};DimensionActionsMenu.prototype.componentWillUnmount=function(){this.mounted=false};DimensionActionsMenu.prototype.onFilter=function(){var _a=this.props,dimension=_a.dimension,triggerFilterMenu=_a.triggerFilterMenu,onClose=_a.onClose;triggerFilterMenu(dimension);onClose()};DimensionActionsMenu.prototype.onSplit=function(){var _a=this.props,clicker=_a.clicker,essence=_a.essence,dimension=_a.dimension,triggerSplitMenu=_a.triggerSplitMenu,onClose=_a.onClose;if(essence.splits.hasSplitOn(dimension.name)&&essence.splits.length()===1){triggerSplitMenu(dimension)}else{var split=models_1.SplitCombine.fromDimensionAndFilterAndMeasure(dimension,essence.filter,essence.getSortMeasure());clicker.changeSplits(models_1.Splits.fromSplitCombine(split),models_1.VisStrategy.FairGame)}onClose()};DimensionActionsMenu.prototype.onSubsplit=function(){var _a=this.props,clicker=_a.clicker,essence=_a.essence,dimension=_a.dimension,triggerSplitMenu=_a.triggerSplitMenu,onClose=_a.onClose;if(essence.splits.hasSplitOn(dimension.name)){triggerSplitMenu(dimension)}else{clicker.addSplit(models_1.SplitCombine.fromDimensionAndFilterAndMeasure(dimension,essence.filter,essence.getSortMeasure()))}onClose()};DimensionActionsMenu.prototype.onPin=function(){var _a=this.props,clicker=_a.clicker,dimension=_a.dimension,onClose=_a.onClose;clicker.pin(dimension);onClose()};DimensionActionsMenu.prototype.shouldShowPreview=function(){var dimension=this.props.dimension;return dimension.getKind()!=="time"};DimensionActionsMenu.prototype.renderPreview=function(){var _a=this.state,preview=_a.preview,loading=_a.loading,error=_a.error;if(!this.shouldShowPreview())return null;if(loading)return React.createElement("div",{className:"preview"},React.createElement(line_loader_1.LineLoader,null));var text=error?"query error":makePreview(preview);return React.createElement("div",{className:"preview"},React.createElement("div",{className:"preview-text"},text))};DimensionActionsMenu.prototype.render=function(){var _a=this.props,direction=_a.direction,openOn=_a.openOn,dimension=_a.dimension,onClose=_a.onClose;if(!dimension)return null;var height=ACTION_SIZE*2;if(this.shouldShowPreview())height=height+PREVIEW_HEIGHT;var menuSize=beltful_1.Stage.fromSize(ACTION_SIZE*2,height);return React.createElement(bubble_menu_1.BubbleMenu,{className:"dimension-actions-menu",direction:direction,stage:menuSize,fixedSize:true,openOn:openOn,onClose:onClose},React.createElement("div",{className:"filter action",onClick:this.onFilter.bind(this)},React.createElement(caladan_1.SvgIcon,{svg:Icons.PREVIEW_FILTER}),React.createElement("div",{className:"action-label"},strings_1.STRINGS.filter)),React.createElement("div",{className:"pin action",onClick:this.onPin.bind(this)},React.createElement(caladan_1.SvgIcon,{svg:Icons.PREVIEW_PIN}),React.createElement("div",{className:"action-label"},strings_1.STRINGS.pin)),React.createElement("div",{className:"split action",onClick:this.onSplit.bind(this)},React.createElement(caladan_1.SvgIcon,{svg:Icons.PREVIEW_SPLIT}),React.createElement("div",{className:"action-label"},strings_1.STRINGS.split)),React.createElement("div",{className:"subsplit action",onClick:this.onSubsplit.bind(this)},React.createElement(caladan_1.SvgIcon,{svg:Icons.PREVIEW_SUBSPLIT}),React.createElement("div",{className:"action-label"},strings_1.STRINGS.subsplit)),this.renderPreview())};return DimensionActionsMenu}(React.Component);exports.DimensionActionsMenu=DimensionActionsMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var classNames=__webpack_require__(9);var immutable_class_1=__webpack_require__(2);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var utils_1=__webpack_require__(221);var strings_1=__webpack_require__(15);var constants_1=__webpack_require__(47);var drag_manager_1=__webpack_require__(91);var formatter_1=__webpack_require__(124);var query_runner_1=__webpack_require__(90);var highlight_string_1=__webpack_require__(76);var loader_1=__webpack_require__(70);var query_error_1=__webpack_require__(92);var searchable_tile_1=__webpack_require__(125);__webpack_require__(406);var TOP_N=100;var FOLDER_BOX_HEIGHT=30;function getSelectedGranularityProp(essence,timekeeper,dimension){if(!dimension.canAutoBucket())return null;var filterSelection=essence.filter.getSelection(dimension.name);var kind=dimension.getKind();if(filterSelection){var range=kind==="time"?essence.evaluateSelection(filterSelection,timekeeper):filterSelection.getLiteralValue().extent();return models_1.getBestGranularityForRange(range,true,dimension.bucketedBy,dimension.granularities)}else{return models_1.getDefaultGranularityForKind(kind,dimension.bucketedBy,dimension.granularities)}}var DimensionTile=function(_super){tslib_1.__extends(DimensionTile,_super);function DimensionTile(){var _this=_super.call(this)||this;_this.state={loading:false,dataset:null,error:null,fetchQueued:false,unfolded:true,foldable:false,showSearch:false,selectedGranularity:null,searchText:""};_this.collectTriggerSearch=utils_1.collect(constants_1.SEARCH_WAIT,function(){if(!_this.mounted)return;var _a=_this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension,colors=_a.colors,sortOn=_a.sortOn,colorSplit=_a.colorSplit;var unfolded=_this.state.unfolded;_this.fetchData(essence,timekeeper,dimension,colors,sortOn,colorSplit,_this.getSelectedGranularity(),unfolded)});return _this}DimensionTile.prototype.fetchData=function(essence,timekeeper,dimension,colors,sortOn,colorSplit,selectedGranularity,unfolded){var _this=this;var searchText=this.state.searchText;var dimensions=essence.getDimensions();var dataCube=essence.dataCube;var filter=essence.getEffectiveFilter(timekeeper);if(unfolded&&!dataCube.isMandatoryFilter(dimension.name)&&!colors){filter=filter.remove(dimension.name)}if(!colors){filter=filter.setExclusionForDimension(dimension,false)}else if(!unfolded&&colors.dimension===dimension.name&&colors.values){filter=filter.setValues(dimension.name,colors.toSet())}if(searchText){filter=filter.setSearch(dimension.name,"contains",searchText)}var query=plywood_1.$("main").filter(filter.toExpression(dimensions));var sortExpression=null;if(colorSplit){query=query.split(colorSplit.toSplitExpression(dimensions),dimension.name);sortExpression=sortOn.getExpression()}else{if(selectedGranularity){query=query.split(dimension.expression.performAction(selectedGranularity),dimension.name);sortExpression=plywood_1.$(dimension.name)}else{query=query.split(dimension.expression,dimension.name);sortExpression=sortOn.getExpression()}}if(sortOn.measure){query=query.performAction(sortOn.measure.toApplyAction())}var direction=colorSplit&&colorSplit.sortAction?colorSplit.sortAction.direction:plywood_1.SortExpression.DESCENDING;query=query.sort(sortExpression,direction).limit(TOP_N+1);this.setState({loading:true,fetchQueued:false});query_runner_1.QueryRunner.fetch(dataCube,query,essence.timezone).then(function(dataset){if(!_this.mounted)return;_this.setState({loading:false,dataset:dataset,error:null})},function(error){if(!_this.mounted)return;_this.setState({loading:false,dataset:null,error:error})})};DimensionTile.prototype.getSelectedGranularity=function(){if(this.state.selectedGranularity)return this.state.selectedGranularity;var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension;return getSelectedGranularityProp(essence,timekeeper,dimension)};DimensionTile.prototype.updateFoldability=function(essence,dimension,colors){var unfolded=this.state.unfolded;var foldable;if(colors){foldable=true}else{foldable=essence.filter.filteredOn(dimension.name);unfolded=true}this.setState({foldable:foldable,unfolded:unfolded});return unfolded};DimensionTile.prototype.componentWillMount=function(){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension,colors=_a.colors,sortOn=_a.sortOn,colorSplit=_a.colorSplit;var unfolded=this.updateFoldability(essence,dimension,colors);this.fetchData(essence,timekeeper,dimension,colors,sortOn,colorSplit,this.getSelectedGranularity(),unfolded)};DimensionTile.prototype.componentWillReceiveProps=function(nextProps){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension,sortOn=_a.sortOn,colorSplit=_a.colorSplit,colors=_a.colors;var nextEssence=nextProps.essence;var nextTimekeeper=nextProps.timekeeper;var nextDimension=nextProps.dimension;var nextColors=nextProps.colors;var nextSortOn=nextProps.sortOn;var nextColorSplit=nextProps.colorSplit;var unfolded=this.updateFoldability(nextEssence,nextDimension,nextColors);var currentSelection=essence.getRealTimeSelection();var nextSelection=nextEssence.getRealTimeSelection();var differentTimeFilterSelection=currentSelection?!currentSelection.equals(nextSelection):Boolean(nextSelection);if(differentTimeFilterSelection){this.setState({dataset:null})}if(essence.differentDataCube(nextEssence)||essence.differentEffectiveFilter(nextEssence,timekeeper,nextTimekeeper,null,unfolded&&!colors?dimension:null)||essence.differentColors(nextEssence)||!dimension.equals(nextDimension)||!sortOn.equals(nextSortOn)||!immutable_class_1.immutableEqual(colorSplit,nextColorSplit)||essence.differentTimezoneMatters(nextEssence)||!essence.timezone.equals(nextEssence.timezone)&&dimension.getKind()==="time"||differentTimeFilterSelection){this.fetchData(nextEssence,nextTimekeeper,nextDimension,nextColors,nextSortOn,nextColorSplit,getSelectedGranularityProp(nextEssence,nextTimekeeper,nextDimension),unfolded)}this.setFilterModeFromProps(nextProps)};DimensionTile.prototype.setFilterModeFromProps=function(props){if(props.colors){this.setState({filterMode:models_1.Filter.INCLUDE})}else{var filterMode=props.essence.filter.getModeFor(props.dimension.name);if(filterMode)this.setState({filterMode:filterMode})}};DimensionTile.prototype.componentDidMount=function(){this.mounted=true;this.setFilterModeFromProps(this.props)};DimensionTile.prototype.componentWillUnmount=function(){this.mounted=false};DimensionTile.prototype.onRowClick=function(value,e){var _a=this.props,clicker=_a.clicker,essence=_a.essence,dimension=_a.dimension,colors=_a.colors;var _b=this.state,dataset=_b.dataset,filterMode=_b.filterMode;var filter=essence.filter;if(colors&&colors.dimension===dimension.name){if(colors.limit){if(!dataset)return;var values=dataset.data.slice(0,colors.limit).map(function(d){return d[dimension.name]});colors=models_1.Colors.fromValues(colors.dimension,values)}colors=colors.toggle(value);clicker.changeColors(colors)}else{var name_1=dimension.name;if(e.altKey||e.ctrlKey||e.metaKey){var filteredOnMe=filter.filteredOnValue(name_1,value);var filterSet=filter.getLiteralSet(name_1);var singleFilter=filterSet?filterSet.size()===1:false;if(filteredOnMe&&singleFilter){filter=filter.remove(name_1)}else{filter=filter.remove(name_1).addValue(name_1,value)}}else{filter=filter.toggleValue(name_1,value)}var unfolded=this.state.unfolded;if(!unfolded&&!filter.filteredOn(name_1)){this.setState({unfolded:true})}clicker.changeFilter(filter.setExclusionForDimension(dimension,filterMode===models_1.Filter.EXCLUDE))}};DimensionTile.prototype.changeFilterMode=function(value){var _a=this.props,clicker=_a.clicker,essence=_a.essence,dimension=_a.dimension;this.setState({filterMode:value},function(){clicker.changeFilter(essence.filter.setExclusionForDimension(dimension,value===models_1.Filter.EXCLUDE))})};DimensionTile.prototype.getFilterActions=function(){var _this=this;var _a=this.props,essence=_a.essence,dimension=_a.dimension;var filterMode=this.state.filterMode;if(!essence||!dimension)return null;var filter=essence.filter;var options=[models_1.Filter.INCLUDE,models_1.Filter.EXCLUDE];return options.map(function(value){return{selected:filterMode===value,onClick:_this.changeFilterMode.bind(_this,value),label:strings_1.STRINGS[value]}})};DimensionTile.prototype.toggleFold=function(){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension,colors=_a.colors,sortOn=_a.sortOn,colorSplit=_a.colorSplit;var unfolded=this.state.unfolded;unfolded=!unfolded;this.setState({unfolded:unfolded});this.fetchData(essence,timekeeper,dimension,colors,sortOn,colorSplit,this.getSelectedGranularity(),unfolded)};DimensionTile.prototype.onDragStart=function(e){var _a=this.props,essence=_a.essence,dimension=_a.dimension,getUrlPrefix=_a.getUrlPrefix;var filter=essence.filter;var essenceWithSplit=essence.addSplit(models_1.SplitCombine.fromDimensionAndFilterAndMeasure(dimension,filter,essence.getSortMeasure()),models_1.VisStrategy.FairGame);var newUrl=getUrlPrefix()+essenceWithSplit.getURL();var dataTransfer=e.dataTransfer;dataTransfer.effectAllowed="all";dataTransfer.setData("text/url-list",newUrl);dataTransfer.setData("text/plain",newUrl);drag_manager_1.DragManager.setDragDimension(dimension,"dimension-tile");beltful_1.DOMUtils.setDragGhost(dataTransfer,dimension.title)};DimensionTile.prototype.toggleSearch=function(){var showSearch=this.state.showSearch;this.setState({showSearch:!showSearch});this.onSearchChange("")};DimensionTile.prototype.onSearchChange=function(text){var _a=this.state,searchText=_a.searchText,dataset=_a.dataset,fetchQueued=_a.fetchQueued,loading=_a.loading;var newSearchText=text.substr(0,constants_1.MAX_SEARCH_LENGTH);if(searchText===newSearchText)return;if(newSearchText.indexOf(searchText)!==-1&&!fetchQueued&&!loading&&dataset&&dataset.data.length<TOP_N){this.setState({searchText:newSearchText});return}this.setState({searchText:newSearchText,fetchQueued:true});this.collectTriggerSearch()};DimensionTile.prototype.getTitleHeader=function(){var dimension=this.props.dimension;var selectedGranularity=this.getSelectedGranularity();if(selectedGranularity&&dimension.getKind()==="time"&&selectedGranularity instanceof plywood_1.TimeBucketExpression){return dimension.title+" ("+selectedGranularity.duration.getDescription()+")"}return dimension.title};DimensionTile.prototype.onSelectGranularity=function(selectedGranularity){if(immutable_class_1.immutableEqual(selectedGranularity,this.state.selectedGranularity))return;var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension,colors=_a.colors,sortOn=_a.sortOn,colorSplit=_a.colorSplit;var unfolded=this.updateFoldability(essence,dimension,colors);this.setState({dataset:null,selectedGranularity:selectedGranularity});this.fetchData(essence,timekeeper,dimension,colors,sortOn,colorSplit,selectedGranularity,unfolded)};DimensionTile.prototype.getGranularityActions=function(){var _this=this;var dimension=this.props.dimension;var selectedGranularity=this.getSelectedGranularity();var granularities=dimension.granularities||models_1.getGranularities(dimension.getKind(),dimension.bucketedBy,true);return granularities.map(function(g){var granularityStr=models_1.granularityToString(g);return{selected:models_1.granularityEquals(selectedGranularity,g),onClick:_this.onSelectGranularity.bind(_this,g),label:utils_1.formatGranularity(granularityStr)}})};DimensionTile.prototype.render=function(){var _this=this;var _a=this.props,clicker=_a.clicker,essence=_a.essence,dimension=_a.dimension,sortOn=_a.sortOn,colors=_a.colors,colorSplit=_a.colorSplit,onClose=_a.onClose;var _b=this.state,loading=_b.loading,dataset=_b.dataset,error=_b.error,showSearch=_b.showSearch,unfolded=_b.unfolded,foldable=_b.foldable,fetchQueued=_b.fetchQueued,searchText=_b.searchText,filterMode=_b.filterMode;var selectedGranularity=this.getSelectedGranularity();var measure=sortOn.measure;var measureName=measure?measure.name:null;var filterSet=essence.filter.getLiteralSet(dimension.name);var continuous=dimension.isContinuous();var excluded=filterMode===models_1.Filter.EXCLUDE;var maxHeight=constants_1.PIN_TITLE_HEIGHT;var rows=[];var folder=null;var hasMore=false;if(dataset){hasMore=dataset.data.length>TOP_N;var rowData=dataset.data.slice(0,TOP_N);if(!unfolded){if(filterSet){rowData=rowData.filter(function(d){return filterSet.contains(d[dimension.name])})}if(colors){if(colors.values){var colorsSet_1=colors.toSet();rowData=rowData.filter(function(d){return colorsSet_1.contains(d[dimension.name])})}else{rowData=rowData.slice(0,colors.limit)}}}if(searchText){var searchTextLower_1=searchText.toLowerCase();rowData=rowData.filter(function(d){return String(d[dimension.name]).toLowerCase().indexOf(searchTextLower_1)!==-1})}var formatter_2=measure?formatter_1.formatterFromData(rowData.map(function(d){return d[measureName]}),measure.getFormat()):null;var selected_1;rows=rowData.map(function(d){var segmentValue=d[dimension.name];var segmentValueStr=String(segmentValue);var className="row";var checkbox=null;if(filterSet||colors){if(colors){selected_1=false;className+=" color"}else{selected_1=essence.filter.filteredOnValue(dimension.name,segmentValue);className+=" "+(selected_1?"selected":"not-selected")}checkbox=React.createElement(caladan_1.Checkbox,{selected:selected_1,type:excluded?"cross":"check",color:colors?colors.getColor(segmentValue):null})}if(segmentValue instanceof plywood_1.TimeRange){segmentValueStr=utils_1.formatTimeBasedOnGranularity(segmentValue,selectedGranularity.duration,essence.timezone)}else if(segmentValue instanceof plywood_1.NumberRange){segmentValueStr=formatter_1.formatNumberRange(segmentValue)}var measureValueElement=null;if(measure){measureValueElement=React.createElement("div",{className:"measure-value"},formatter_2(d[measureName]))}return React.createElement("div",{className:className,key:segmentValueStr,onClick:_this.onRowClick.bind(_this,segmentValue)},React.createElement("div",{className:"segment-value",title:segmentValueStr},checkbox,React.createElement(highlight_string_1.HighlightString,{className:"label",text:segmentValueStr,highlight:searchText})),measureValueElement)});maxHeight+=Math.max(2,rows.length)*constants_1.PIN_ITEM_HEIGHT;if(foldable){folder=React.createElement("div",{className:classNames("folder",unfolded?"folded":"unfolded"),onClick:this.toggleFold.bind(this)},React.createElement(caladan_1.SvgIcon,{svg:Icons.CARET}),unfolded?"Show selection":"Show all");maxHeight+=FOLDER_BOX_HEIGHT}}maxHeight+=constants_1.PIN_PADDING_BOTTOM;var message=null;if(!loading&&dataset&&!fetchQueued&&searchText&&!rows.length){message=React.createElement("div",{className:"message"},'No results for "'+searchText+'"')}var className=classNames("dimension-tile",filterMode,folder?"has-folder":"no-folder",colors?"has-colors":"no-colors",{continuous:continuous});var icons=[];if(!dimension.isContinuous()){icons.push({name:"search",ref:"search",onClick:this.toggleSearch.bind(this),svg:Icons.FULL_SEARCH,active:showSearch})}if(onClose!==null){icons.push({name:"close",ref:"close",onClick:onClose,svg:Icons.FULL_REMOVE})}var actions=null;if(!colorSplit){if(dimension.canAutoBucket()){actions=this.getGranularityActions()}else if(!continuous){actions=this.getFilterActions()}}return React.createElement(searchable_tile_1.SearchableTile,{style:{maxHeight:maxHeight},title:this.getTitleHeader(),toggleChangeFn:this.toggleSearch.bind(this),onDragStart:this.onDragStart.bind(this),onSearchChange:this.onSearchChange.bind(this),searchText:searchText,showSearch:showSearch,icons:icons,className:className,actions:actions},React.createElement("div",{className:"rows"},rows,message),folder,error?React.createElement(query_error_1.QueryError,{error:error}):null,loading?React.createElement(loader_1.Loader,null):null)};return DimensionTile}(React.Component);exports.DimensionTile=DimensionTile},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var React=__webpack_require__(1);var number_filter_menu_1=__webpack_require__(209);var string_filter_menu_1=__webpack_require__(214);var time_filter_menu_1=__webpack_require__(216);__webpack_require__(409);var FilterMenu=function(_super){tslib_1.__extends(FilterMenu,_super);function FilterMenu(){return _super.call(this)||this}FilterMenu.prototype.render=function(){var _a=this.props,clicker=_a.clicker,essence=_a.essence,timekeeper=_a.timekeeper,changePosition=_a.changePosition,openOn=_a.openOn,dimension=_a.dimension,onClose=_a.onClose,inside=_a.inside;if(!dimension)return null;var kind=dimension.getKind();if(kind==="time"){return React.createElement(time_filter_menu_1.TimeFilterMenu,{essence:essence,timekeeper:timekeeper,clicker:clicker,dimension:dimension,onClose:onClose,openOn:openOn,inside:inside})}else if(kind==="number"){return React.createElement(number_filter_menu_1.NumberFilterMenu,{essence:essence,timekeeper:timekeeper,clicker:clicker,dimension:dimension,onClose:onClose,openOn:openOn,inside:inside})}else{return React.createElement(string_filter_menu_1.StringFilterMenu,{essence:essence,timekeeper:timekeeper,clicker:clicker,dimension:dimension,changePosition:changePosition,onClose:onClose,openOn:openOn,inside:inside})}};return FilterMenu}(React.Component);exports.FilterMenu=FilterMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var bubble_menu_1=__webpack_require__(34);var filter_options_dropdown_1=__webpack_require__(149);var number_range_picker_1=__webpack_require__(210);__webpack_require__(421);function numberOrAnyToString(start){if(start===number_range_picker_1.ANY_VALUE)return strings_1.STRINGS.any;return""+start}function stringToNumberOrAny(startInput){var parse=parseFloat(startInput);return isNaN(parse)?number_range_picker_1.ANY_VALUE:parse}var MENU_WIDTH=250;var filterOptions=filter_options_dropdown_1.FilterOptionsDropdown.getFilterOptions(models_1.Filter.INCLUDE,models_1.Filter.EXCLUDE);var NumberFilterMenu=function(_super){tslib_1.__extends(NumberFilterMenu,_super);function NumberFilterMenu(){var _this=_super.call(this)||this;_this.state={leftOffset:null,rightBound:null,start:null,startInput:"",end:null,endInput:""};return _this}NumberFilterMenu.prototype.componentWillMount=function(){var _a=this.props,essence=_a.essence,dimension=_a.dimension;var filter=essence.filter;var valueSet=filter.getLiteralSet(dimension.name);var hasFilter=valueSet&&valueSet.elements.length!==0;var start=null;var end=null;if(hasFilter){if(valueSet.setType==="NUMBER_RANGE"){var range=valueSet.elements[0];start=range.start;end=range.end}else if(valueSet.setType==="NUMBER"){var number=valueSet.elements[0];start=number;end=number}}this.setState({startInput:numberOrAnyToString(start),endInput:numberOrAnyToString(end),start:start,end:end,filterMode:filter.getModeFor(dimension.name)||models_1.Filter.INCLUDE})};NumberFilterMenu.prototype.constructFilter=function(){var _a=this.props,essence=_a.essence,dimension=_a.dimension;var _b=this.state,start=_b.start,end=_b.end,filterMode=_b.filterMode;var filter=essence.filter;var validFilter=false;if(start!==null&&end!==null){validFilter=start<=end}else{validFilter=!isNaN(start)&&!isNaN(end)&&(start!==null||end!==null)}if(validFilter){var bounds=start===end?"[]":"[)";var newSet=plywood_1.Set.fromJS({setType:"NUMBER_RANGE",elements:[plywood_1.NumberRange.fromJS({start:start,end:end,bounds:bounds})]});var clause=new models_1.FilterClause({dimension:dimension.name,values:newSet,exclude:filterMode===models_1.Filter.EXCLUDE});return filter.setClause(clause)}else{return null}};NumberFilterMenu.prototype.onOkClick=function(){if(!this.actionEnabled())return;var _a=this.props,clicker=_a.clicker,onClose=_a.onClose;clicker.changeFilter(this.constructFilter());onClose()};NumberFilterMenu.prototype.onCancelClick=function(){var onClose=this.props.onClose;onClose()};NumberFilterMenu.prototype.onRangeInputStartChange=function(e){var startInput=e.target.value;this.setState({startInput:startInput,start:stringToNumberOrAny(startInput)})};NumberFilterMenu.prototype.onRangeInputEndChange=function(e){var endInput=e.target.value;this.setState({endInput:endInput,end:stringToNumberOrAny(endInput)})};NumberFilterMenu.prototype.onRangeStartChange=function(newStart){this.setState({startInput:numberOrAnyToString(newStart),start:newStart})};NumberFilterMenu.prototype.onRangeEndChange=function(newEnd){this.setState({endInput:numberOrAnyToString(newEnd),end:newEnd})};NumberFilterMenu.prototype.onSelectFilterOption=function(filterMode){this.setState({filterMode:filterMode})};NumberFilterMenu.prototype.actionEnabled=function(){var essence=this.props.essence;return!essence.filter.equals(this.constructFilter())&&Boolean(this.constructFilter())};NumberFilterMenu.prototype.render=function(){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension,onClose=_a.onClose,openOn=_a.openOn,inside=_a.inside;var _b=this.state,endInput=_b.endInput,startInput=_b.startInput,end=_b.end,start=_b.start,filterMode=_b.filterMode;var menuSize=beltful_1.Stage.fromSize(MENU_WIDTH,410);return React.createElement(bubble_menu_1.BubbleMenu,{className:"number-filter-menu",direction:"down",stage:menuSize,openOn:openOn,onClose:onClose,inside:inside},React.createElement("div",{
className:"side-by-side"},React.createElement("div",{className:"group"},React.createElement("label",{className:"input-top-label"},"Type"),React.createElement(filter_options_dropdown_1.FilterOptionsDropdown,{selectedOption:filterMode,onSelectOption:this.onSelectFilterOption.bind(this),filterOptions:filterOptions})),React.createElement("div",{className:"group"},React.createElement("label",{className:"input-top-label"},"Min"),React.createElement("input",{value:startInput,onChange:this.onRangeInputStartChange.bind(this)})),React.createElement("div",{className:"group"},React.createElement("label",{className:"input-top-label"},"Max"),React.createElement("input",{value:endInput,onChange:this.onRangeInputEndChange.bind(this)}))),React.createElement(number_range_picker_1.NumberRangePicker,{onRangeEndChange:this.onRangeEndChange.bind(this),onRangeStartChange:this.onRangeStartChange.bind(this),start:start,end:end,dimension:dimension,essence:essence,timekeeper:timekeeper,exclude:filterMode===models_1.Filter.EXCLUDE}),React.createElement("div",{className:"ok-cancel-bar"},React.createElement(caladan_1.Button,{type:"primary",title:strings_1.STRINGS.ok,onClick:this.onOkClick.bind(this),disabled:!this.actionEnabled()}),React.createElement(caladan_1.Button,{type:"secondary",title:strings_1.STRINGS.cancel,onClick:this.onCancelClick.bind(this)})))};return NumberFilterMenu}(React.Component);exports.NumberFilterMenu=NumberFilterMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var chronoshift_1=__webpack_require__(16);var classNames=__webpack_require__(9);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var ReactDOM=__webpack_require__(20);var general_1=__webpack_require__(77);var query_runner_1=__webpack_require__(90);var loader_1=__webpack_require__(70);var query_error_1=__webpack_require__(92);var range_handle_1=__webpack_require__(212);__webpack_require__(422);exports.ANY_VALUE=null;var NUB_SIZE=16;var GRANULARITY_IN_BAR=300;function addNubSize(value){return value+NUB_SIZE}function subtractNubSize(value){return value&&value>NUB_SIZE?value-NUB_SIZE:0}function getNumberOfDigitsToShow(n){var totalDigits=general_1.getNumberOfWholeDigits(n/GRANULARITY_IN_BAR);return totalDigits>3?Math.min(totalDigits,4):3}function getAdjustedStartHalf(start){return start+NUB_SIZE/2}var NumberRangePicker=function(_super){tslib_1.__extends(NumberRangePicker,_super);function NumberRangePicker(){var _this=_super.call(this)||this;_this.state={min:null,max:null,step:null,loading:false,error:null};return _this}NumberRangePicker.prototype.fetchData=function(essence,timekeeper,dimension,rightBound){var _this=this;var dataCube=essence.dataCube;var dimensions=essence.getDimensions();var filterExpression=essence.getEffectiveFilter(timekeeper,null,dimension).toExpression(dimensions);var $main=plywood_1.$("main");var dimEx=dimension.expression;var query=plywood_1.ply().apply("main",$main.filter(filterExpression)).apply("Min",$main.min(dimEx)).apply("Max",$main.max(dimEx));this.setState({loading:true});query_runner_1.QueryRunner.fetch(dataCube,query,chronoshift_1.Timezone.UTC).then(function(dataset){if(!_this.mounted)return;var newState={loading:false};if(dataset.data.length){var min=dataset.data[0]["Min"];var max=dataset.data[0]["Max"];var step=max&&min&&isFinite(max)&&isFinite(min)?(max-min)/rightBound:1;newState.min=min;newState.max=max;newState.step=step||1}_this.setState(newState)},function(error){if(!_this.mounted)return;_this.setState({loading:false,error:error})})};NumberRangePicker.prototype.componentDidMount=function(){this.mounted=true;var node=ReactDOM.findDOMNode(this.refs["number-range-picker"]);var rect=node.getBoundingClientRect();var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension;var leftOffset=rect.left;var rightBound=rect.width;this.setState({leftOffset:leftOffset,rightBound:rightBound});this.fetchData(essence,timekeeper,dimension,rightBound)};NumberRangePicker.prototype.componentWillUnmount=function(){this.mounted=false};NumberRangePicker.prototype.relativePositionToValue=function(position,type){var _a=this.state,step=_a.step,min=_a.min,max=_a.max,rightBound=_a.rightBound;if(position<=addNubSize(0)&&type==="start")return exports.ANY_VALUE;if(position>=rightBound&&type==="end")return exports.ANY_VALUE;var range=max-min!==0?max-min:Math.abs(max);return general_1.toSignificantDigits(position*step,getNumberOfDigitsToShow(range))};NumberRangePicker.prototype.valueToRelativePosition=function(value){var step=this.state.step;return value/step};NumberRangePicker.prototype.onBarClick=function(positionStart,positionEnd,e){var leftOffset=this.state.leftOffset;var clickPadding=5;var absoluteX=beltful_1.EventUtils.getXFromEvent(e);var relativeX=absoluteX-leftOffset;if(relativeX<NUB_SIZE/2)return this.updateStart(leftOffset);var startNubPosition=addNubSize(positionStart)+clickPadding;var endNubPosition=subtractNubSize(positionEnd)+clickPadding;var isBeforeStart=relativeX<positionStart;var isAfterEnd=relativeX>positionEnd+NUB_SIZE;var inBetween=relativeX<positionEnd&&relativeX>startNubPosition;if(isBeforeStart){this.updateStart(absoluteX-NUB_SIZE)}else if(isAfterEnd){this.updateEnd(absoluteX)}else if(inBetween){var distanceFromEnd=endNubPosition-relativeX;var distanceFromStart=relativeX-startNubPosition;if(distanceFromEnd<distanceFromStart){this.updateEnd(endNubPosition+leftOffset-distanceFromEnd)}else{this.updateStart(startNubPosition+leftOffset+distanceFromStart-NUB_SIZE)}return}};NumberRangePicker.prototype.updateStart=function(absolutePosition){var onRangeStartChange=this.props.onRangeStartChange;var leftOffset=this.state.leftOffset;var relativePosition=absolutePosition-leftOffset;var newValue=this.relativePositionToValue(addNubSize(relativePosition),"start");onRangeStartChange(newValue)};NumberRangePicker.prototype.updateEnd=function(absolutePosition){var onRangeEndChange=this.props.onRangeEndChange;var leftOffset=this.state.leftOffset;var relativePosition=absolutePosition-leftOffset;var newValue=this.relativePositionToValue(relativePosition,"end");onRangeEndChange(newValue)};NumberRangePicker.prototype.render=function(){var _a=this.props,start=_a.start,end=_a.end,exclude=_a.exclude;var _b=this.state,min=_b.min,max=_b.max,loading=_b.loading,error=_b.error,step=_b.step,rightBound=_b.rightBound,leftOffset=_b.leftOffset;var content=null;if(rightBound&&step&&isFinite(max)&&isFinite(min)){var relativeStart=start===exports.ANY_VALUE?0:subtractNubSize(this.valueToRelativePosition(start));var relativeEnd=end===exports.ANY_VALUE?rightBound:this.valueToRelativePosition(end);var adjustedRightBound=subtractNubSize(rightBound);var positionEnd=beltful_1.NumberUtils.clamp(relativeEnd,addNubSize(relativeStart),adjustedRightBound);var positionStart=start?beltful_1.NumberUtils.clamp(relativeStart,0,subtractNubSize(positionEnd)):0;var rangeBarSelected={left:getAdjustedStartHalf(positionStart),width:positionEnd-positionStart};var absoluteRightBound=leftOffset+rightBound;content=React.createElement("div",{className:"range-slider",onMouseDown:this.onBarClick.bind(this,positionStart,positionEnd)},React.createElement("div",{className:"range-bar full"}),React.createElement("div",{className:"range-bar selected",style:rangeBarSelected}),React.createElement(range_handle_1.RangeHandle,{positionLeft:positionStart,onChange:this.updateStart.bind(this),isAny:start===exports.ANY_VALUE,isBeyondMin:start!==exports.ANY_VALUE&&start<min,leftBound:leftOffset,rightBound:leftOffset+subtractNubSize(positionEnd),offset:leftOffset}),React.createElement(range_handle_1.RangeHandle,{positionLeft:positionEnd,onChange:this.updateEnd.bind(this),isAny:end===exports.ANY_VALUE,isBeyondMax:end!==exports.ANY_VALUE&&max<end,leftBound:leftOffset+addNubSize(positionStart),rightBound:absoluteRightBound,offset:leftOffset}))}return React.createElement("div",{className:classNames("number-range-picker",{inverted:exclude}),ref:"number-range-picker"},content,loading?React.createElement(loader_1.Loader,null):null,error?React.createElement(query_error_1.QueryError,{error:error}):null)};return NumberRangePicker}(React.Component);exports.NumberRangePicker=NumberRangePicker},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var React=__webpack_require__(1);var models_1=__webpack_require__(10);__webpack_require__(424);var PinboardMeasureTile=function(_super){tslib_1.__extends(PinboardMeasureTile,_super);function PinboardMeasureTile(){return _super.call(this)||this}PinboardMeasureTile.prototype.render=function(){var _a=this.props,essence=_a.essence,title=_a.title,dimension=_a.dimension,sortOn=_a.sortOn,onSelect=_a.onSelect;if(!sortOn)return null;var sortOns=(dimension?[models_1.SortOn.fromDimension(dimension)]:[]).concat(essence.dataCube.getMeasures().map(models_1.SortOn.fromMeasure));var SortOnDropdown=caladan_1.Dropdown.specialize();return React.createElement("div",{className:"pinboard-measure-tile"},React.createElement("div",{className:"title"},title),React.createElement(SortOnDropdown,{items:sortOns,selectedItem:sortOn,equal:models_1.SortOn.equal,renderItem:models_1.SortOn.getTitle,keyItem:models_1.SortOn.getName,onSelect:onSelect}))};return PinboardMeasureTile}(React.Component);exports.PinboardMeasureTile=PinboardMeasureTile},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var classNames=__webpack_require__(9);var React=__webpack_require__(1);__webpack_require__(428);var RangeHandle=function(_super){tslib_1.__extends(RangeHandle,_super);function RangeHandle(){var _this=_super.call(this)||this;_this.state={anchor:null};_this.onGlobalMouseUp=_this.onGlobalMouseUp.bind(_this);_this.onGlobalMouseMove=_this.onGlobalMouseMove.bind(_this);return _this}RangeHandle.prototype.onGlobalMouseMove=function(event){var _a=this.props,onChange=_a.onChange,leftBound=_a.leftBound,rightBound=_a.rightBound;var anchor=this.state.anchor;var newX=beltful_1.EventUtils.getXFromEvent(event)-anchor;onChange(beltful_1.NumberUtils.clamp(newX,leftBound,rightBound))};RangeHandle.prototype.onMouseDown=function(event){var _a=this.props,offset=_a.offset,positionLeft=_a.positionLeft;var x=beltful_1.EventUtils.getXFromEvent(event);var anchor=x-offset-positionLeft;this.setState({anchor:anchor});event.preventDefault();window.addEventListener("mouseup",this.onGlobalMouseUp);window.addEventListener("mousemove",this.onGlobalMouseMove)};RangeHandle.prototype.onGlobalMouseUp=function(){window.removeEventListener("mouseup",this.onGlobalMouseUp);window.removeEventListener("mousemove",this.onGlobalMouseMove)};RangeHandle.prototype.render=function(){var _a=this.props,positionLeft=_a.positionLeft,isAny=_a.isAny,isBeyondMin=_a.isBeyondMin,isBeyondMax=_a.isBeyondMax;var style={left:positionLeft};return React.createElement("div",{className:classNames("range-handle",{empty:isAny,"beyond min":isBeyondMin,"beyond max":isBeyondMax}),style:style,onMouseDown:this.onMouseDown.bind(this)})};return RangeHandle}(React.Component);exports.RangeHandle=RangeHandle},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var little_pictures_1=__webpack_require__(11);var classNames=__webpack_require__(9);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var utils_1=__webpack_require__(221);var strings_1=__webpack_require__(15);var bubble_menu_1=__webpack_require__(34);__webpack_require__(434);var DUMMY_CUSTOM_LIMIT_ACTION=plywood_1.Expression._.limit(5);function formatLimit(limit){if(limit===DUMMY_CUSTOM_LIMIT_ACTION)return strings_1.STRINGS.custom;return limit==null||limit===models_1.SplitCombine.EFFECTIVE_NO_LIMIT?strings_1.STRINGS.none:String(limit.value)}function isGranularityCustom(dimension,split){if(!split.isBucketed())return false;return!dimension.getGranularities().find(function(g){return models_1.granularityEquals(g,split.bucketAction)})}var SplitMenu=function(_super){tslib_1.__extends(SplitMenu,_super);function SplitMenu(){var _this=_super.call(this)||this;_this.state={split:null,colors:null,invalidGranularityInput:null,showCustomGranularity:false};return _this}SplitMenu.prototype.componentWillMount=function(){var _a=this.props,essence=_a.essence,split=_a.split,dimension=_a.dimension;var colors=essence.getEffectiveColors();var myColors=null;if(colors){var colorDimension=essence.getDimension(colors.dimension);if(colorDimension.name===split.dimension){myColors=colors}}this.setState({split:split,colors:myColors,showCustomGranularity:isGranularityCustom(dimension,split)})};SplitMenu.prototype.onSelectGranularity=function(granularity){var split=this.state.split;var newAction=models_1.updateBucketSize(split.bucketAction,granularity);this.setState({split:split.changeBucketAction(newAction),showCustomGranularity:false})};SplitMenu.prototype.onSelectSortOn=function(sortOn){var split=this.state.split;var sortAction=split.sortAction;var direction=sortAction?sortAction.direction:plywood_1.SortExpression.DESCENDING;this.setState({split:split.changeSortAction(plywood_1.Expression._.sort(sortOn.getExpression(),direction))})};SplitMenu.prototype.onToggleDirection=function(){var split=this.state.split;var sortAction=split.sortAction;this.setState({split:split.changeSortAction(sortAction.toggleDirection())})};SplitMenu.prototype.onSelectLimit=function(limitAction){var essence=this.props.essence;var split=this.state.split;var colors=essence.getEffectiveColors();if(colors){colors=models_1.Colors.fromLimit(colors.dimension,limitAction.value)}var state={colors:colors};if(!(limitAction===models_1.SplitCombine.EFFECTIVE_NO_LIMIT&&!split.limitAction)){state.split=split.changeLimitAction(limitAction)}this.setState(state)};SplitMenu.prototype.onOkClick=function(){if(!this.actionEnabled())return;var _a=this.props,clicker=_a.clicker,essence=_a.essence,onClose=_a.onClose;var _b=this.state,split=_b.split,colors=_b.colors;clicker.changeSplits(essence.splits.replace(this.props.split,split),models_1.VisStrategy.UnfairGame,colors);onClose()};SplitMenu.prototype.onMoreClick=function(){this.setState({showCustomGranularity:true})};SplitMenu.prototype.onCancelClick=function(){var onClose=this.props.onClose;onClose()};SplitMenu.prototype.getSortOn=function(){var _a=this.props,essence=_a.essence,dimension=_a.dimension;var split=this.state.split;return models_1.SortOn.fromSortAction(split.sortAction,essence.dataCube,dimension)};SplitMenu.prototype.onInputChange=function(fromJS,e){var split=this.state.split;var value=e.target.value;try{var bucketAction=fromJS(value);this.setState({split:split.changeBucketAction(bucketAction),invalidGranularityInput:null})}catch(e){this.setState({invalidGranularityInput:value})}};SplitMenu.prototype.renderCustomGranularityInput=function(kind){var _a=this.state,showCustomGranularity=_a.showCustomGranularity,invalidGranularityInput=_a.invalidGranularityInput,split=_a.split;if(!showCustomGranularity)return null;var timeBucketFromJS=function(duration){return plywood_1.TimeBucketExpression.fromJS({duration:duration})};var numberBucketFromJS=function(v){var size=Number.parseInt(v);if(isNaN(size)||size<=0)throw new Error("invalid number bucket size");return plywood_1.NumberBucketExpression.fromJS({size:size})};var fromJS=kind==="number"?numberBucketFromJS:timeBucketFromJS;var inputValue=invalidGranularityInput!=null?invalidGranularityInput:models_1.granularityToString(split.bucketAction);return React.createElement("input",{className:classNames({error:!!invalidGranularityInput}),value:inputValue,onChange:this.onInputChange.bind(this,fromJS)})};SplitMenu.prototype.renderGranularityPicker=function(){var _this=this;var _a=this.state,split=_a.split,showCustomGranularity=_a.showCustomGranularity;var dimension=this.props.dimension;var bucketAction=split.bucketAction;var bucketedBy=dimension.bucketedBy;var selectedGran=models_1.granularityToString(bucketAction);var showNoBuckets=dimension.canHaveNoBucket();var granularities=dimension.getGranularities();if(!bucketedBy&&showNoBuckets){granularities=[null].concat(granularities.slice(0,granularities.length-1))}var buttons=granularities.map(function(g){var granularityStr=models_1.granularityToString(g);return{active:granularityStr===selectedGran&&!showCustomGranularity,onClick:_this.onSelectGranularity.bind(_this,g),title:utils_1.formatGranularity(granularityStr)}});buttons.push({active:showCustomGranularity,onClick:this.onMoreClick.bind(this),svg:little_pictures_1.FULL_MORE_MINI,className:"more"});return React.createElement(caladan_1.ButtonGroup,{className:"granularity-picker",title:strings_1.STRINGS.granularity,items:buttons})};SplitMenu.prototype.renderSortDropdown=function(){var _a=this.props,essence=_a.essence,dimension=_a.dimension;var sortOns=[models_1.SortOn.fromDimension(dimension)].concat(essence.dataCube.getMeasures().map(models_1.SortOn.fromMeasure));var SortOnDropdown=caladan_1.Dropdown.specialize();return React.createElement(SortOnDropdown,{label:strings_1.STRINGS.sortBy,items:sortOns,selectedItem:this.getSortOn(),equal:models_1.SortOn.equal,renderItem:models_1.SortOn.getTitle,keyItem:models_1.SortOn.getName,onSelect:this.onSelectSortOn.bind(this)})};SplitMenu.prototype.renderSortDirection=function(){var split=this.state.split;var direction=split.sortAction.direction;return React.createElement("div",{className:"sort-direction"},this.renderSortDropdown(),React.createElement("div",{className:"direction "+direction,onClick:this.onToggleDirection.bind(this)},React.createElement(caladan_1.SvgIcon,{svg:little_pictures_1.SORT_ARROW})))};SplitMenu.prototype.renderLimitDropdown=function(includeNone){var displayLimit=this.props.displayLimit;var _a=this.state,colors=_a.colors,split=_a.split;var limitActionInflater=function(n){return plywood_1.Expression._.limit(n)};var items=[5,10,25,50,100].map(limitActionInflater);var selectedItem=split.limitAction||displayLimit;if(colors){items=[3,5,7,9,10].map(limitActionInflater);selectedItem=colors.values?DUMMY_CUSTOM_LIMIT_ACTION:limitActionInflater(colors.limit)}if(includeNone)items.unshift(models_1.SplitCombine.EFFECTIVE_NO_LIMIT);var LimitDropdown=caladan_1.Dropdown.specialize();return React.createElement(LimitDropdown,{label:strings_1.STRINGS.limit,items:items,selectedItem:selectedItem,renderItem:formatLimit,onSelect:this.onSelectLimit.bind(this)})};SplitMenu.prototype.renderTimeControls=function(){return React.createElement("div",null,this.renderGranularityPicker(),this.renderCustomGranularityInput("time"),this.renderSortDirection(),this.renderLimitDropdown(true))};SplitMenu.prototype.renderNumberControls=function(){return React.createElement("div",null,this.renderGranularityPicker(),this.renderCustomGranularityInput("number"),this.renderSortDirection(),this.renderLimitDropdown(true))};SplitMenu.prototype.renderStringControls=function(){return React.createElement("div",null,this.renderSortDirection(),this.renderLimitDropdown(false))};SplitMenu.prototype.actionEnabled=function(){var originalSplit=this.props.split;var originalColors=this.props.essence.getEffectiveColors();var newSplit=this.state.split;var newColors=this.state.colors;return!originalSplit.equals(newSplit)||originalColors&&!originalColors.equals(newColors)};SplitMenu.prototype.render=function(){var _a=this.props,openOn=_a.openOn,dimension=_a.dimension,onClose=_a.onClose,inside=_a.inside;if(!dimension)return null;var kind=dimension.getKind();var isBucketable=dimension.isBucketable();var menuSize=beltful_1.Stage.fromSize(250,240);var menuControls=null;if(kind==="time"&&isBucketable){menuControls=this.renderTimeControls()}else if(kind==="number"&&isBucketable){menuControls=this.renderNumberControls()}else{menuControls=this.renderStringControls()}return React.createElement(bubble_menu_1.BubbleMenu,{className:"split-menu",direction:"down",stage:menuSize,openOn:openOn,onClose:onClose,inside:inside},React.createElement(caladan_1.GlobalEventListener,{enter:this.onOkClick.bind(this)}),menuControls,React.createElement("div",{className:"button-bar"},React.createElement(caladan_1.Button,{className:"ok",type:"primary",onClick:this.onOkClick.bind(this),disabled:!this.actionEnabled(),title:strings_1.STRINGS.ok}),React.createElement(caladan_1.Button,{className:"cancel",type:"secondary",onClick:this.onCancelClick.bind(this),title:strings_1.STRINGS.cancel})))};return SplitMenu}(React.Component);exports.SplitMenu=SplitMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var bubble_menu_1=__webpack_require__(34);var filter_options_dropdown_1=__webpack_require__(149);var preview_string_filter_menu_1=__webpack_require__(334);var selectable_string_filter_menu_1=__webpack_require__(335);__webpack_require__(436);var StringFilterMenu=function(_super){tslib_1.__extends(StringFilterMenu,_super);function StringFilterMenu(){var _this=_super.call(this)||this;_this.state={filterMode:null,searchText:null};return _this}StringFilterMenu.prototype.componentWillMount=function(){var _a=this.props,essence=_a.essence,dimension=_a.dimension;var filterMode=essence.filter.getModeFor(dimension.name);if(filterMode&&!this.state.filterMode){this.setState({filterMode:filterMode})}};StringFilterMenu.prototype.onSelectFilterOption=function(filterMode){this.setState({filterMode:filterMode})};StringFilterMenu.prototype.updateSearchText=function(searchText){this.setState({searchText:searchText})};StringFilterMenu.prototype.updateFilter=function(clause){var _a=this.props,essence=_a.essence,dimension=_a.dimension,changePosition=_a.changePosition;var filter=essence.filter;if(!clause)return filter.remove(dimension.name);if(changePosition){if(changePosition.isInsert()){return filter.insertByIndex(changePosition.insert,clause)}else{return filter.replaceByIndex(changePosition.replace,clause)}}else{return filter.setClause(clause)}};StringFilterMenu.prototype.getFilterOptions=function(){var dimension=this.props.dimension;var dimensionKind=dimension.getKind();var filterOptions=filter_options_dropdown_1.FilterOptionsDropdown.getFilterOptions(models_1.Filter.INCLUDE,models_1.Filter.EXCLUDE);if(dimensionKind!=="boolean")filterOptions=filterOptions.concat(filter_options_dropdown_1.FilterOptionsDropdown.getFilterOptions(models_1.Filter.REGEX,models_1.Filter.CONTAINS));return filterOptions};StringFilterMenu.prototype.renderMenuControls=function(){var _a=this.state,filterMode=_a.filterMode,searchText=_a.searchText;return React.createElement("div",{className:"string-filter-menu-controls"},React.createElement("div",{className:"side-by-side"},React.createElement(filter_options_dropdown_1.FilterOptionsDropdown,{selectedOption:filterMode,onSelectOption:this.onSelectFilterOption.bind(this),filterOptions:this.getFilterOptions()}),React.createElement("div",{className:"search-box"},React.createElement(caladan_1.ClearableInput,{placeholder:filterMode===models_1.Filter.REGEX?"Regex":filterMode===models_1.Filter.CONTAINS?"Contains text":"Search",focusOnMount:true,value:searchText,onChange:this.updateSearchText.bind(this)}))))};StringFilterMenu.prototype.render=function(){var _a=this.props,dimension=_a.dimension,clicker=_a.clicker,essence=_a.essence,timekeeper=_a.timekeeper,onClose=_a.onClose,openOn=_a.openOn,inside=_a.inside;var _b=this.state,filterMode=_b.filterMode,searchText=_b.searchText;if(!dimension)return null;var menuSize=null;var menuCont=null;if(filterMode===models_1.Filter.REGEX||filterMode===models_1.Filter.CONTAINS){menuSize=beltful_1.Stage.fromSize(350,410);menuCont=React.createElement(preview_string_filter_menu_1.PreviewStringFilterMenu,{dimension:dimension,clicker:clicker,essence:essence,timekeeper:timekeeper,onClose:onClose,searchText:searchText,filterMode:filterMode,onClauseChange:this.updateFilter.bind(this)})}else{menuSize=beltful_1.Stage.fromSize(250,410);menuCont=React.createElement(selectable_string_filter_menu_1.SelectableStringFilterMenu,{dimension:dimension,clicker:clicker,essence:essence,timekeeper:timekeeper,onClose:onClose,searchText:searchText,filterMode:filterMode,onClauseChange:this.updateFilter.bind(this)})}return React.createElement(bubble_menu_1.BubbleMenu,{className:"string-filter-menu",direction:"down",stage:menuSize,openOn:openOn,onClose:onClose,inside:inside},this.renderMenuControls(),menuCont)};return StringFilterMenu}(React.Component);exports.StringFilterMenu=StringFilterMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var classNames=__webpack_require__(9);var React=__webpack_require__(1);__webpack_require__(437);var TileHeader=function(_super){tslib_1.__extends(TileHeader,_super);function TileHeader(){return _super.call(this)||this}TileHeader.prototype.renderIcons=function(){var icons=this.props.icons;if(!icons||!icons.length)return null;var iconElements=icons.map(function(icon){return React.createElement("div",{className:classNames("icon",icon.name,{active:icon.active}),key:icon.name,onClick:icon.onClick,ref:icon.ref},React.createElement(caladan_1.SvgIcon,{svg:icon.svg}))});return React.createElement("div",{className:"icons"},iconElements)};TileHeader.prototype.render=function(){var _a=this.props,title=_a.title,onDragStart=_a.onDragStart;return React.createElement("div",{className:"tile-header",draggable:onDragStart?true:null,onDragStart:onDragStart},React.createElement("div",{className:"title"},title),this.renderIcons())};return TileHeader}(React.Component);exports.TileHeader=TileHeader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var chronoshift_1=__webpack_require__(16);var classNames=__webpack_require__(9);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var time_1=__webpack_require__(75);var bubble_menu_1=__webpack_require__(34);var date_range_picker_1=__webpack_require__(205);__webpack_require__(438);function makeDateIntoTimeRange(input,timezone){return new plywood_1.TimeRange({start:chronoshift_1.second.shift(input,timezone,-1),end:chronoshift_1.second.shift(input,timezone,1)})}var MENU_WIDTH=250;var RELATIVE="relative";var SPECIFIC="specific";var MULTIPLE="multiple";var TimeFilterMenu=function(_super){tslib_1.__extends(TimeFilterMenu,_super);function TimeFilterMenu(){var _this=_super.call(this)||this;_this.state={tab:null,timeSelection:null,startTime:null,endTime:null,hoverPreset:null};return _this}TimeFilterMenu.prototype.componentWillMount=function(){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension;var filter=essence.filter;var timezone=essence.timezone;var name=dimension.name;var timeSelection=filter.getSelection(name);var selectedTimeRangeSet=essence.getEffectiveFilter(timekeeper).getLiteralSet(name);var selectedTimeRange=selectedTimeRangeSet&&selectedTimeRangeSet.size()===1?selectedTimeRangeSet.elements[0]:null;if(selectedTimeRange&&!plywood_1.Range.isRange(selectedTimeRange))selectedTimeRange=makeDateIntoTimeRange(selectedTimeRange,timezone);this.setState({timeSelection:timeSelection,tab:this.getTabFromClause(filter.clauseForDimension(name)),startTime:selectedTimeRange?chronoshift_1.day.floor(selectedTimeRange.start,timezone):null,endTime:selectedTimeRange?chronoshift_1.day.ceil(selectedTimeRange.end,timezone):null})};TimeFilterMenu.prototype.getTabFromClause=function(clause){if(!clause)return RELATIVE;if(clause.dynamic)return RELATIVE;if(clause.values&&clause.values.size()>1)return MULTIPLE;return SPECIFIC};TimeFilterMenu.prototype.constructFilter=function(){var _a=this.props,essence=_a.essence,dimension=_a.dimension;var _b=this.state,tab=_b.tab,startTime=_b.startTime,endTime=_b.endTime;var filter=essence.filter;var timezone=essence.timezone;if(!this.isSpecific())return null;if(startTime&&!endTime){endTime=chronoshift_1.day.shift(startTime,timezone,1)}if(startTime&&endTime&&startTime<endTime){return filter.setValues(dimension.name,plywood_1.Set.fromJS([plywood_1.TimeRange.fromJS({start:startTime,end:endTime})]))}else{return null}};TimeFilterMenu.prototype.onPresetClick=function(preset){var _a=this.props,clicker=_a.clicker,onClose=_a.onClose,essence=_a.essence,dimension=_a.dimension;var filter=essence.filter;var newFilter=filter.setDynamic(dimension.name,preset.selection);clicker.changeFilter(newFilter);onClose()};TimeFilterMenu.prototype.onPresetMouseEnter=function(preset){var hoverPreset=this.state.hoverPreset;if(hoverPreset===preset)return;this.setState({hoverPreset:preset})};TimeFilterMenu.prototype.onPresetMouseLeave=function(preset){var hoverPreset=this.state.hoverPreset;if(hoverPreset!==preset)return;this.setState({hoverPreset:null})};TimeFilterMenu.prototype.onStartChange=function(start){this.setState({startTime:start})};TimeFilterMenu.prototype.onEndChange=function(end){this.setState({endTime:end})};TimeFilterMenu.prototype.selectTab=function(tab){this.setState({tab:tab})};TimeFilterMenu.prototype.isRelative=function(){return this.state.tab===RELATIVE};TimeFilterMenu.prototype.isSpecific=function(){return this.state.tab===SPECIFIC};TimeFilterMenu.prototype.isMultiple=function(){return this.state.tab===MULTIPLE};TimeFilterMenu.prototype.onOkClick=function(){if(!this.actionEnabled())return;var _a=this.props,clicker=_a.clicker,onClose=_a.onClose;var newFilter=this.constructFilter();if(!newFilter)return;clicker.changeFilter(newFilter);onClose()};TimeFilterMenu.prototype.onCancelClick=function(){var onClose=this.props.onClose;onClose()};TimeFilterMenu.prototype.renderPresets=function(){var _this=this;var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension;var _b=this.state,timeSelection=_b.timeSelection,hoverPreset=_b.hoverPreset;if(!dimension)return null;var timezone=essence.timezone;var presetToButton=function(preset){var selected=preset.selection.equals(timeSelection);return React.createElement(caladan_1.Button,{key:preset.name,type:selected?"primary":"secondary",className:classNames("preset",{hover:preset===hoverPreset,selected:selected}),onClick:_this.onPresetClick.bind(_this,preset),onMouseEnter:_this.onPresetMouseEnter.bind(_this,preset),onMouseLeave:_this.onPresetMouseLeave.bind(_this,preset),title:preset.name})};var previewTimeRange=null;if(timeSelection&&timeSelection.type==="SET/TIME_RANGE"){var value=timeSelection.value;if(!plywood_1.Set.isSet(value))throw new Error("Unrecognized filter value "+value);if(value.size()!==1)throw new Error("Can only filter on one time");var time=value.elements[0];previewTimeRange=makeDateIntoTimeRange(time,timezone)}else{previewTimeRange=essence.evaluateSelection(hoverPreset?hoverPreset.selection:timeSelection,timekeeper)}var previewText=previewTimeRange?time_1.formatTimeRange(previewTimeRange,timezone,time_1.DisplayYear.IF_DIFF):strings_1.STRINGS.noFilter;var maxTimeBasedPresets=React.createElement("div",null,React.createElement("div",{className:"type"},strings_1.STRINGS.latest),React.createElement("div",{className:"buttons"},models_1.FilterClause.LATEST_PRESETS.map(presetToButton)));return React.createElement("div",{className:"cont"
},essence.dataCube.isSpecialTimeDimension(dimension.name)?maxTimeBasedPresets:null,React.createElement("div",{className:"type"},strings_1.STRINGS.current),React.createElement("div",{className:"buttons"},models_1.FilterClause.CURRENT_PRESETS.map(presetToButton)),React.createElement("div",{className:"type"},strings_1.STRINGS.previous),React.createElement("div",{className:"buttons"},models_1.FilterClause.PREVIOUS_PRESETS.map(presetToButton)),React.createElement("div",{className:"preview"},previewText))};TimeFilterMenu.prototype.actionEnabled=function(){var essence=this.props.essence;var tab=this.state.tab;if(tab!=="specific")return false;var newFilter=this.constructFilter();return newFilter&&!essence.filter.equals(newFilter)};TimeFilterMenu.prototype.renderCustom=function(){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension;var _b=this.state,startTime=_b.startTime,endTime=_b.endTime;if(!dimension)return null;return React.createElement("div",null,React.createElement(date_range_picker_1.DateRangePicker,{startTime:startTime,endTime:endTime,maxTime:timekeeper.getTime(essence.dataCube.name),timezone:essence.timezone,onStartChange:this.onStartChange.bind(this),onEndChange:this.onEndChange.bind(this)}),React.createElement("div",{className:"ok-cancel-bar"},React.createElement(caladan_1.Button,{type:"primary",onClick:this.onOkClick.bind(this),disabled:!this.actionEnabled(),title:strings_1.STRINGS.ok}),React.createElement(caladan_1.Button,{type:"secondary",onClick:this.onCancelClick.bind(this),title:strings_1.STRINGS.cancel})))};TimeFilterMenu.prototype.isMultipleSelection=function(){var timeSelection=this.state.timeSelection;var value=timeSelection.value;return plywood_1.Set.isSet(value)&&value.size()>1};TimeFilterMenu.prototype.switchToSingleRange=function(){var essence=this.props.essence;var timeSelection=this.state.timeSelection;var selections=timeSelection.value;this.setState({tab:"specific",startTime:chronoshift_1.day.floor(selections.elements[0].start,essence.timezone),endTime:chronoshift_1.day.ceil(selections.elements[0].end,essence.timezone)})};TimeFilterMenu.prototype.renderMultipleSelection=function(){var _a=this.props,onClose=_a.onClose,openOn=_a.openOn,inside=_a.inside,essence=_a.essence;var timeSelection=this.state.timeSelection;var value=timeSelection.value;var menuSize=beltful_1.Stage.fromSize(MENU_WIDTH,410);return React.createElement(bubble_menu_1.BubbleMenu,{className:"time-filter-menu multiple",direction:"down",stage:menuSize,openOn:openOn,onClose:onClose,inside:inside},value.elements.map(function(t,i){return React.createElement("div",{key:i,className:"range"},time_1.formatTimeRange(t,essence.timezone,time_1.DisplayYear.IF_DIFF))}),React.createElement(caladan_1.Button,{type:"secondary",title:"Select single range",onClick:this.switchToSingleRange.bind(this)}))};TimeFilterMenu.prototype.render=function(){var _a=this.props,dimension=_a.dimension,onClose=_a.onClose,openOn=_a.openOn,inside=_a.inside;if(!dimension)return null;if(this.isMultiple())return this.renderMultipleSelection();var menuSize=beltful_1.Stage.fromSize(MENU_WIDTH,410);var buttons=[{active:this.isRelative(),onClick:this.selectTab.bind(this,RELATIVE),title:strings_1.STRINGS.relative},{active:this.isSpecific(),onClick:this.selectTab.bind(this,SPECIFIC),title:strings_1.STRINGS.specific}];return React.createElement(bubble_menu_1.BubbleMenu,{className:"time-filter-menu",direction:"down",stage:menuSize,openOn:openOn,onClose:onClose,inside:inside},React.createElement(caladan_1.GlobalEventListener,{enter:this.onOkClick.bind(this)}),React.createElement(caladan_1.ButtonGroup,{items:buttons}),this.isRelative()?this.renderPresets():this.renderCustom())};return TimeFilterMenu}(React.Component);exports.TimeFilterMenu=TimeFilterMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var ReactDOM=__webpack_require__(20);var icons_1=__webpack_require__(218);__webpack_require__(442);var VisSelectorMenu=function(_super){tslib_1.__extends(VisSelectorMenu,_super);function VisSelectorMenu(){var _this=_super.call(this)||this;_this.globalMouseDownListener=_this.globalMouseDownListener.bind(_this);return _this}VisSelectorMenu.prototype.componentDidMount=function(){window.addEventListener("mousedown",this.globalMouseDownListener)};VisSelectorMenu.prototype.componentWillUnmount=function(){window.removeEventListener("mousedown",this.globalMouseDownListener)};VisSelectorMenu.prototype.globalMouseDownListener=function(e){var _a=this.props,onClose=_a.onClose,openOn=_a.openOn;var myElement=ReactDOM.findDOMNode(this);if(!myElement)return;var target=e.target;if(beltful_1.DOMUtils.isInside(target,myElement)||beltful_1.DOMUtils.isInside(target,openOn))return;onClose()};VisSelectorMenu.prototype.onVisSelect=function(v){var clicker=this.props.clicker;clicker.summonVisualization(v);this.setState({menuOpen:false})};VisSelectorMenu.prototype.renderVisItem=function(v){var essence=this.props.essence;var visualization=essence.visualization;return React.createElement("div",{className:classNames("vis-item",v.name===visualization.name?"selected":"not-selected"),key:v.name,onClick:this.onVisSelect.bind(this,v)},React.createElement(caladan_1.SvgIcon,{svg:icons_1.VISUALIZATIONS[v.name]}),React.createElement("div",{className:"vis-title"},v.title))};VisSelectorMenu.prototype.render=function(){var _this=this;var essence=this.props.essence;var visualizations=essence.visualizations;var visItems=null;if(visualizations){visItems=visualizations.map(function(v){return _this.renderVisItem(v)})}return React.createElement("div",{className:"vis-selector-menu"},React.createElement(caladan_1.GlobalEventListener,{escape:this.props.onClose}),visItems)};return VisSelectorMenu}(React.Component);exports.VisSelectorMenu=VisSelectorMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Icons=__webpack_require__(11);exports.VISUALIZATIONS={"bar-chart":Icons.VIS_BAR_CHART,geo:Icons.VIS_GEO,heatmap:Icons.VIS_HEATMAP,"line-chart":Icons.VIS_LINE_CHART,"scatter-plot":Icons.VIS_SCATTER_PLOT,"stacked-bars":Icons.VIS_STACKED_BARS,table:Icons.VIS_TABLE,totals:Icons.VIS_TOTALS,treemap:Icons.VIS_TREEMAP}},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(341))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var constants_1=__webpack_require__(47);exports.SECTION_WIDTH=constants_1.CORE_ITEM_WIDTH+constants_1.CORE_ITEM_GAP;function getMaxItems(maxWidth,itemsLength){var initialMax=Math.floor((maxWidth-constants_1.OVERFLOW_WIDTH)/exports.SECTION_WIDTH);if(initialMax<itemsLength){var widthPlusOverflow=initialMax*exports.SECTION_WIDTH+constants_1.OVERFLOW_WIDTH+constants_1.CORE_ITEM_GAP;var maxItems=null;if(maxWidth<widthPlusOverflow){maxItems=initialMax-1}else if(itemsLength-initialMax===1){maxItems=Math.floor(maxWidth/exports.SECTION_WIDTH)}else{maxItems=initialMax}return maxItems}else{return initialMax}}exports.getMaxItems=getMaxItems},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(__webpack_require__(77));__export(__webpack_require__(345));__export(__webpack_require__(75));__export(__webpack_require__(344))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var chronoshift_1=__webpack_require__(16);var React=__webpack_require__(1);var strings_1=__webpack_require__(15);var bubble_menu_1=__webpack_require__(34);__webpack_require__(423);var AUTO_REFRESH_LABELS={null:"Off",undefined:"Off",PT5S:"Every 5 seconds",PT15S:"Every 15 seconds",PT1M:"Every minute",PT5M:"Every 5 minutes",PT10M:"Every 10 minutes",PT30M:"Every 30 minutes"};var REFRESH_DURATIONS=[null,chronoshift_1.Duration.fromJS("PT5S"),chronoshift_1.Duration.fromJS("PT15S"),chronoshift_1.Duration.fromJS("PT1M"),chronoshift_1.Duration.fromJS("PT5M"),chronoshift_1.Duration.fromJS("PT10M"),chronoshift_1.Duration.fromJS("PT30M")];var OptionsMenu=function(_super){tslib_1.__extends(OptionsMenu,_super);function OptionsMenu(){return _super.call(this)||this}OptionsMenu.prototype.changeTimezone=function(newTimezone){var _a=this.props,onClose=_a.onClose,changeTimezone=_a.changeTimezone;changeTimezone(newTimezone);onClose()};OptionsMenu.prototype.renderTimezonesDropdown=function(){var _a=this.props,timezone=_a.timezone,customization=_a.customization;var TimezoneDropdown=caladan_1.Dropdown.specialize();return React.createElement(TimezoneDropdown,{className:"timezone-dropdown",label:strings_1.STRINGS.timezone,selectedItem:timezone,renderItem:function(d){return d.toString().replace(/_/g," ")},items:customization.getTimezones(),onSelect:this.changeTimezone.bind(this)})};OptionsMenu.prototype.renderRefreshControls=function(){var _a=this.props,onRefreshMaxTime=_a.onRefreshMaxTime,autoRefreshRate=_a.autoRefreshRate,setAutoRefreshRate=_a.setAutoRefreshRate;if(!onRefreshMaxTime||!setAutoRefreshRate)return null;var DurationDropdown=caladan_1.Dropdown.specialize();return React.createElement("div",{className:"refresh-controls"},React.createElement(DurationDropdown,{label:strings_1.STRINGS.autoUpdate,items:REFRESH_DURATIONS,selectedItem:autoRefreshRate,renderItem:function(d){return AUTO_REFRESH_LABELS[String(d)]||"Custom "+d},onSelect:setAutoRefreshRate}),React.createElement(caladan_1.Button,{svg:Icons.FULL_REFRESH,type:"secondary",className:"update-now-button",onClick:onRefreshMaxTime}))};OptionsMenu.prototype.render=function(){var _a=this.props,openOn=_a.openOn,onClose=_a.onClose,refreshText=_a.refreshText;return React.createElement(bubble_menu_1.BubbleMenu,{className:"options-menu",direction:"down",stage:beltful_1.Stage.fromSize(240,200),openOn:openOn,onClose:onClose},this.renderTimezonesDropdown(),this.renderRefreshControls(),refreshText?React.createElement("div",{className:"update-info"},refreshText):null)};return OptionsMenu}(React.Component);exports.OptionsMenu=OptionsMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var little_pictures_1=__webpack_require__(11);var classNames=__webpack_require__(9);var Q=__webpack_require__(49);var React=__webpack_require__(1);var ReactDOM=__webpack_require__(20);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var constants_1=__webpack_require__(47);var dom_1=__webpack_require__(48);var drag_manager_1=__webpack_require__(91);var formatter_1=__webpack_require__(124);var pill_tile_1=__webpack_require__(220);var bubble_menu_1=__webpack_require__(34);var fancy_drag_indicator_1=__webpack_require__(148);var filter_menu_1=__webpack_require__(208);__webpack_require__(411);var FILTER_CLASS_NAME="filter";var ANIMATION_DURATION=400;function formatLabelDummy(dimension){return dimension.title}var FilterTile=function(_super){tslib_1.__extends(FilterTile,_super);function FilterTile(){var _this=_super.call(this)||this;_this.overflowMenuId=dom_1.uniqueId("overflow-menu-");_this.state={menuOpenOn:null,menuDimension:null,menuInside:null,overflowMenuOpenOn:null,dragPosition:null,possibleDimension:null,possiblePosition:null};return _this}FilterTile.prototype.componentDidMount=function(){this.calculateSize()};FilterTile.prototype.componentDidUpdate=function(){var _a=this.state,possibleDimension=_a.possibleDimension,overflowMenuOpenOn=_a.overflowMenuOpenOn;if(possibleDimension){this.dummyDeferred.resolve(null)}if(overflowMenuOpenOn){var overflowMenu=this.getOverflowMenu();if(overflowMenu)this.overflowMenuDeferred.resolve(overflowMenu)}};FilterTile.prototype.calculateSize=function(){if(!this.itemsDOM)return;var itemStage=this.state.itemStage;var newItemStage=beltful_1.Stage.fromClientRect(this.itemsDOM.getBoundingClientRect());if(!newItemStage.equals(itemStage)){this.setState({itemStage:newItemStage})}};FilterTile.prototype.getOverflowMenu=function(){return document.getElementById(this.overflowMenuId)};FilterTile.prototype.clickDimension=function(dimension,e){var target=dom_1.findParentWithClass(e.target,FILTER_CLASS_NAME);this.openMenu(dimension,target)};FilterTile.prototype.openMenuOnDimension=function(dimension){var _this=this;var targetRef=this.refs[dimension.name];if(targetRef){var target=ReactDOM.findDOMNode(targetRef);if(!target)return;this.openMenu(dimension,target)}else{var overflowButtonTarget=this.overflowDOM;if(overflowButtonTarget){this.openOverflowMenu(overflowButtonTarget).then(function(){var target=ReactDOM.findDOMNode(_this.refs[dimension.name]);if(!target)return;_this.openMenu(dimension,target)})}}};FilterTile.prototype.openMenu=function(dimension,target){var menuOpenOn=this.state.menuOpenOn;if(menuOpenOn===target){this.closeMenu();return}var overflowMenu=this.getOverflowMenu();var menuInside=null;if(overflowMenu&&beltful_1.DOMUtils.isInside(target,overflowMenu)){menuInside=overflowMenu}this.setState({menuOpenOn:target,menuDimension:dimension,menuInside:menuInside})};FilterTile.prototype.closeMenu=function(){var _a=this.state,menuOpenOn=_a.menuOpenOn,possibleDimension=_a.possibleDimension;if(!menuOpenOn)return;var newState={menuOpenOn:null,menuDimension:null,menuInside:null,possibleDimension:null,possiblePosition:null};if(possibleDimension){newState.overflowMenuOpenOn=null}this.setState(newState)};FilterTile.prototype.openOverflowMenu=function(target){if(!target)return Q(null);var overflowMenuOpenOn=this.state.overflowMenuOpenOn;if(overflowMenuOpenOn===target){this.closeOverflowMenu();return Q(null)}this.overflowMenuDeferred=Q.defer();this.setState({overflowMenuOpenOn:target});return this.overflowMenuDeferred.promise};FilterTile.prototype.closeOverflowMenu=function(){var overflowMenuOpenOn=this.state.overflowMenuOpenOn;if(!overflowMenuOpenOn)return;this.setState({overflowMenuOpenOn:null})};FilterTile.prototype.removeFilter=function(itemBlank,e){var _a=this.props,essence=_a.essence,clicker=_a.clicker;if(itemBlank.clause){if(itemBlank.source==="from-highlight"){clicker.dropHighlight()}else{clicker.changeFilter(essence.filter.remove(itemBlank.clause.dimension))}}this.closeMenu();this.closeOverflowMenu();e.stopPropagation()};FilterTile.prototype.dragStart=function(dimension,clause,e){var _a=this.props,essence=_a.essence,getUrlPrefix=_a.getUrlPrefix;var dataTransfer=e.dataTransfer;dataTransfer.effectAllowed="all";if(getUrlPrefix){var newUrl=getUrlPrefix()+essence.getURL();dataTransfer.setData("text/url-list",newUrl);dataTransfer.setData("text/plain",newUrl)}drag_manager_1.DragManager.setDragDimension(dimension,"filter-tile");beltful_1.DOMUtils.setDragGhost(dataTransfer,dimension.title);this.closeMenu();this.closeOverflowMenu()};FilterTile.prototype.calculateDragPosition=function(e){var essence=this.props.essence;var numItems=essence.filter.length();var rect=this.itemsDOM.getBoundingClientRect();var offset=beltful_1.EventUtils.getXFromEvent(e)-rect.left;return models_1.DragPosition.calculateFromOffset(offset,numItems,constants_1.CORE_ITEM_WIDTH,constants_1.CORE_ITEM_GAP)};FilterTile.prototype.canDrop=function(e){return Boolean(drag_manager_1.DragManager.getDragDimension())};FilterTile.prototype.dragEnter=function(e){if(!this.canDrop(e))return;e.preventDefault();var dragPosition=this.calculateDragPosition(e);if(dragPosition.equals(this.state.dragPosition))return;this.setState({dragPosition:dragPosition})};FilterTile.prototype.dragOver=function(e){if(!this.canDrop(e))return;e.dataTransfer.dropEffect="move";e.preventDefault();var dragPosition=this.calculateDragPosition(e);if(dragPosition.equals(this.state.dragPosition))return;this.setState({dragPosition:dragPosition})};FilterTile.prototype.dragLeave=function(e){this.setState({dragPosition:null})};FilterTile.prototype.drop=function(e){var _this=this;if(!this.canDrop(e))return;e.preventDefault();var _a=this.props,clicker=_a.clicker,essence=_a.essence;var filter=essence.filter,dataCube=essence.dataCube;var newState={dragPosition:null};var dimension=drag_manager_1.DragManager.getDragDimension();if(dimension){var dragPosition=this.calculateDragPosition(e);var tryingToReplaceMandatory=false;if(dragPosition.replace!==null){var targetClause=filter.clauses[dragPosition.replace];tryingToReplaceMandatory=targetClause&&dataCube.isMandatoryFilter(targetClause.dimension)}var existingClause=filter.clauseForDimension(dimension.name);if(existingClause){var newFilter=void 0;if(dragPosition.isReplace()){newFilter=filter.replaceByIndex(dragPosition.replace,existingClause)}else{newFilter=filter.insertByIndex(dragPosition.insert,existingClause)}var newFilterSame=filter.equals(newFilter);if(!newFilterSame){clicker.changeFilter(newFilter)}if(drag_manager_1.DragManager.getDragOrigin()!=="filter-tile"){if(newFilterSame){this.filterMenuRequest(dimension)}else{setTimeout(function(){_this.filterMenuRequest(dimension)},ANIMATION_DURATION+50)}}}else{if(dragPosition&&!tryingToReplaceMandatory){this.addDummy(dimension,dragPosition)}}}this.setState(newState)};FilterTile.prototype.addDummy=function(dimension,possiblePosition){var _this=this;this.dummyDeferred=Q.defer();this.setState({possibleDimension:dimension,possiblePosition:possiblePosition});this.dummyDeferred.promise.then(function(){_this.openMenuOnDimension(dimension)})};FilterTile.prototype.filterMenuRequest=function(dimension){var filter=this.props.essence.filter;if(filter.filteredOn(dimension.name)){this.openMenuOnDimension(dimension)}else{this.addDummy(dimension,new models_1.DragPosition({insert:filter.length()}))}};FilterTile.prototype.overflowButtonClick=function(){this.openOverflowMenu(this.overflowDOM)};FilterTile.prototype.renderMenu=function(maxItems){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,clicker=_a.clicker;var _b=this.state,menuOpenOn=_b.menuOpenOn,menuDimension=_b.menuDimension,menuInside=_b.menuInside,possiblePosition=_b.possiblePosition;if(!menuDimension)return null;if(possiblePosition&&possiblePosition.replace===maxItems){possiblePosition=new models_1.DragPosition({insert:possiblePosition.replace})}return React.createElement(filter_menu_1.FilterMenu,{clicker:clicker,essence:essence,timekeeper:timekeeper,openOn:menuOpenOn,dimension:menuDimension,changePosition:possiblePosition,onClose:this.closeMenu.bind(this),inside:menuInside})};FilterTile.prototype.renderOverflowMenu=function(overflowItemBlanks){var _this=this;var overflowMenuOpenOn=this.state.overflowMenuOpenOn;if(!overflowMenuOpenOn)return null;var segmentHeight=29+constants_1.CORE_ITEM_GAP;var itemY=constants_1.CORE_ITEM_GAP;var filterItems=overflowItemBlanks.map(function(itemBlank){var style=dom_1.transformStyle(0,itemY);itemY+=segmentHeight;return _this.renderItemBlank(itemBlank,style)});return React.createElement(bubble_menu_1.BubbleMenu,{className:"overflow-menu",id:this.overflowMenuId,direction:"down",stage:beltful_1.Stage.fromSize(208,itemY),fixedSize:true,openOn:overflowMenuOpenOn,onClose:this.closeOverflowMenu.bind(this)},filterItems)};FilterTile.prototype.renderOverflow=function(overflowItemBlanks,itemX){var _this=this;var style=dom_1.transformStyle(itemX,0);return React.createElement("div",{className:classNames("overflow",{"all-continuous":overflowItemBlanks.every(function(item){return item.dimension.isContinuous()})}),ref:function(e){return _this.overflowDOM=e},key:"overflow",style:style,onClick:this.overflowButtonClick.bind(this)},React.createElement("div",{className:"count"},"+"+overflowItemBlanks.length),this.renderOverflowMenu(overflowItemBlanks))};FilterTile.prototype.renderRemoveButton=function(itemBlank){var essence=this.props.essence;var dataCube=essence.dataCube;if(dataCube.isMandatoryFilter(itemBlank.dimension.name))return null;return React.createElement("div",{className:"remove",onClick:this.removeFilter.bind(this,itemBlank)},React.createElement(caladan_1.SvgIcon,{svg:little_pictures_1.X}))};FilterTile.prototype.renderItemLabel=function(dimension,clause,timezone){var _a=formatter_1.getFormattedClause(dimension,clause,timezone),title=_a.title,values=_a.values;return React.createElement("div",{className:"reading"},title?React.createElement("span",{className:"dimension-title"},title):null,React.createElement("span",{className:"values"},values))};FilterTile.prototype.renderItemBlank=function(itemBlank,style){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,clicker=_a.clicker;var menuDimension=this.state.menuDimension;var dimension=itemBlank.dimension,clause=itemBlank.clause,source=itemBlank.source;var dimensionName=dimension.name;var className=[FILTER_CLASS_NAME,"type-"+dimension.kind,source,clause&&clause.getExclude()?"excluded":"included",dimension===menuDimension?"selected":undefined].filter(Boolean).join(" ");var timezone=essence.timezone;if(source==="from-highlight"){return React.createElement("div",{className:className,key:dimensionName,ref:dimensionName,onClick:clicker.acceptHighlight.bind(clicker),style:style},this.renderItemLabel(dimension,clause,timezone),this.renderRemoveButton(itemBlank))}if(clause){return React.createElement("div",{className:className,key:dimensionName,ref:dimensionName,draggable:true,onClick:this.clickDimension.bind(this,dimension),onDragStart:this.dragStart.bind(this,dimension,clause),style:style},this.renderItemLabel(dimension,clause,timezone),this.renderRemoveButton(itemBlank))}else{return React.createElement("div",{className:className,key:dimensionName,ref:dimensionName,style:style},React.createElement("div",{className:"reading"},formatLabelDummy(dimension)),this.renderRemoveButton(itemBlank))}};FilterTile.prototype.getItemBlankCount=function(){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper;var possiblePosition=this.state.possiblePosition;return essence.getEffectiveFilter(timekeeper).clauses.length+Number(Boolean(possiblePosition))};FilterTile.prototype.getItemBlanks=function(maxItems){var essence=this.props.essence;var _a=this.state,possibleDimension=_a.possibleDimension,possiblePosition=_a.possiblePosition;var filter=essence.filter,highlight=essence.highlight;var itemBlanks=filter.clauses.map(function(clause){var dimension=essence.getDimension(clause.dimension);if(!dimension)return null;return{dimension:dimension,source:"from-filter",clause:clause}}).filter(Boolean);if(highlight){highlight.delta.clauses.forEach(function(clause){var added=false;itemBlanks=itemBlanks.map(function(blank){if(clause.dimension===blank.clause.dimension){added=true;return{dimension:blank.dimension,source:"from-highlight",clause:clause}}else{return blank}});if(!added){var dimension=essence.getDimension(clause.dimension);if(dimension){itemBlanks.push({dimension:dimension,source:"from-highlight",clause:clause})}}})}if(possibleDimension&&possiblePosition){var dummyBlank={dimension:possibleDimension,source:"from-drag"};if(possiblePosition.replace===maxItems){possiblePosition=new models_1.DragPosition({insert:possiblePosition.replace})}if(possiblePosition.isInsert()){itemBlanks.splice(possiblePosition.insert,0,dummyBlank)}else{itemBlanks[possiblePosition.replace]=dummyBlank}}return itemBlanks};FilterTile.prototype.render=function(){var _this=this;var _a=this.state,dragPosition=_a.dragPosition,itemStage=_a.itemStage;var maxItems=itemStage?pill_tile_1.getMaxItems(itemStage.width,this.getItemBlankCount()):20;var itemBlanks=this.getItemBlanks(maxItems);var itemX=0;var filterItems=itemBlanks.slice(0,maxItems).map(function(item){var style=dom_1.transformStyle(itemX,0);itemX+=pill_tile_1.SECTION_WIDTH;return _this.renderItemBlank(item,style)});var overflow=itemBlanks.slice(maxItems);if(overflow.length>0){var overFlowStart=filterItems.length*pill_tile_1.SECTION_WIDTH;filterItems.push(this.renderOverflow(overflow,overFlowStart))}return React.createElement("div",{className:"filter-tile",onDragEnter:this.dragEnter.bind(this)},React.createElement(caladan_1.GlobalEventListener,{resize:this.calculateSize.bind(this)}),React.createElement("div",{className:"title"},strings_1.STRINGS.filter),React.createElement("div",{className:"items",ref:function(e){return _this.itemsDOM=e}},filterItems),dragPosition?React.createElement(fancy_drag_indicator_1.FancyDragIndicator,{dragPosition:dragPosition}):null,dragPosition?React.createElement("div",{className:"drag-mask",onDragOver:this.dragOver.bind(this),onDragLeave:this.dragLeave.bind(this),onDragExit:this.dragLeave.bind(this),onDrop:this.drop.bind(this)}):null,this.renderMenu(maxItems))};return FilterTile}(React.Component);exports.FilterTile=FilterTile},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var segment_action_buttons_1=__webpack_require__(150);var shpitz_1=__webpack_require__(151);__webpack_require__(431);var OFFSET_V=-10;var PIXELS_PER_LETTER=8;var SegmentBubble=function(_super){tslib_1.__extends(SegmentBubble,_super);function SegmentBubble(){return _super.call(this)||this}SegmentBubble.getTinyIndicator=function(props){var left=props.left,top=props.top,direction=props.direction,label=props.label,onClick=props.onClick;return React.createElement(caladan_1.BodyPortal,{left:left,top:top+OFFSET_V},React.createElement("div",{className:classNames("segment-bubble tiny",direction),onClick:onClick},React.createElement("div",{className:"text"},label),React.createElement(shpitz_1.Shpitz,{direction:direction})))};SegmentBubble.prototype.onSelect=function(){var _a=this.props,onClose=_a.onClose,clicker=_a.clicker;clicker.acceptHighlight();if(onClose)onClose()};SegmentBubble.prototype.onCancel=function(){var _a=this.props,onClose=_a.onClose,clicker=_a.clicker;if(clicker)clicker.dropHighlight();if(onClose)onClose()};SegmentBubble.prototype.onMouseLeave=function(){if(this.props.onMouseLeave)this.props.onMouseLeave()};SegmentBubble.prototype.render=function(){var _a=this.props,left=_a.left,top=_a.top,dimensions=_a.dimensions,segmentLabel=_a.segmentLabel,measureLabel=_a.measureLabel,clicker=_a.clicker,openRawDataModal=_a.openRawDataModal,onClose=_a.onClose,onMouseLeave=_a.onMouseLeave,disableExclusion=_a.disableExclusion;var textElement;if(segmentLabel){var minTextWidth=beltful_1.NumberUtils.clamp(segmentLabel.length*PIXELS_PER_LETTER,80,300);textElement=React.createElement("div",{className:"text",style:{minWidth:minTextWidth}},React.createElement("div",{className:"segment"},segmentLabel),measureLabel?React.createElement("div",{className:"measure-value"},measureLabel):null)}var actionsElement=null;if(clicker){actionsElement=React.createElement(segment_action_buttons_1.SegmentActionButtons,{clicker:clicker,dimensions:dimensions,segmentLabel:segmentLabel,openRawDataModal:openRawDataModal,onClose:onClose,disableExclusion:disableExclusion})}var needsPointerEvents=!!clicker||!!onMouseLeave;return React.createElement(caladan_1.BodyPortal,{left:left,top:top+OFFSET_V,disablePointerEvents:!needsPointerEvents},React.createElement("div",{className:"segment-bubble",ref:"bubble",onMouseLeave:this.onMouseLeave.bind(this)},React.createElement(caladan_1.GlobalEventListener,{escape:this.onCancel.bind(this),enter:this.onSelect.bind(this)}),textElement,actionsElement,React.createElement(shpitz_1.Shpitz,{direction:"up"})))};return SegmentBubble}(React.Component);SegmentBubble.defaultProps={left:0,top:0};exports.SegmentBubble=SegmentBubble},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var filesaver=__webpack_require__(317);function getMIMEType(fileType){switch(fileType){case"csv":return"text/csv";case"tsv":return"text/tsv";default:return"application/json"}}exports.getMIMEType=getMIMEType;function download(dataset,fileName,fileFormat){var type=getMIMEType(fileFormat)+";charset=utf-8";var blob=new Blob([datasetToFileString(dataset,fileFormat)],{type:type});if(!fileName)fileName=new Date+"-data";fileName+="."+fileFormat;filesaver.saveAs(blob,fileName,true)}exports.download=download;function datasetToFileString(dataset,fileFormat){if(fileFormat==="csv"){return dataset.toCSV({columnOrdering:"keys-first"})}else if(fileFormat==="tsv"){return dataset.toTSV({columnOrdering:"keys-first"})}else{return JSON.stringify(dataset.toJS(),null,2)}}exports.datasetToFileString=datasetToFileString;function makeFileName(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var nameComponents=[];args.forEach(function(arg){if(arg)nameComponents.push(arg.toLowerCase())});var nameString=nameComponents.join("_");return nameString.length<200?nameString:nameString.substr(0,200)}exports.makeFileName=makeFileName},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function replaceHash(newHash){window.history.replaceState(undefined,undefined,newHash)}exports.replaceHash=replaceHash},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var React=__webpack_require__(1);var dom_1=__webpack_require__(48);__webpack_require__(397);var TICK_HEIGHT=5;var BucketMarks=function(_super){tslib_1.__extends(BucketMarks,_super);function BucketMarks(){return _super.call(this)||this}BucketMarks.prototype.render=function(){var _a=this.props,stage=_a.stage,ticks=_a.ticks,scale=_a.scale;var stageWidth=stage.width;var lines=[];function addLine(x,key){if(stageWidth<x)return;lines.push(React.createElement("line",{key:key,x1:x,y1:0,x2:x,y2:TICK_HEIGHT}))}for(var _i=0,ticks_1=ticks;_i<ticks_1.length;_i++){var tick=ticks_1[_i];var x=dom_1.roundToHalfInteger(scale(String(tick)));addLine(x,"_"+tick)}if(ticks.length){var x=dom_1.roundToHalfInteger(scale(String(ticks[ticks.length-1]))+scale.bandwidth());addLine(x,"last")}return React.createElement("g",{className:"bucket-marks",transform:stage.getTransform()},lines)};return BucketMarks}(React.Component);exports.BucketMarks=BucketMarks},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var d3_shape_1=__webpack_require__(448);var immutable_class_1=__webpack_require__(2);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);__webpack_require__(398);var lineFn=d3_shape_1.line();var ChartLine=function(_super){tslib_1.__extends(ChartLine,_super);function ChartLine(){return _super.call(this)||this}ChartLine.prototype.render=function(){var _a=this.props,stage=_a.stage,dataset=_a.dataset,getY=_a.getY,getX=_a.getX,scaleX=_a.scaleX,scaleY=_a.scaleY,color=_a.color,showArea=_a.showArea,hoverRange=_a.hoverRange;if(!dataset||!color)return null;var dataPoints=[];var hoverDataPoint=null;var ds=dataset.data;for(var i=0;i<ds.length;i++){var datum=ds[i];var range=getX(datum);if(!range||!plywood_1.Range.isRange(range))return null;var rangeMidpoint=range.midpoint();var measureValue=getY(datum);var prevDatum=ds[i-1];if(prevDatum){var prevRange=getX(prevDatum);if(prevRange.end.valueOf()<range.start.valueOf()){dataPoints.push([scaleX(rangeMidpoint.valueOf()-(range.end.valueOf()-range.start.valueOf())),scaleY(0)])}}
var y=scaleY(measureValue);var dataPoint=[scaleX(rangeMidpoint),isNaN(y)?0:y];dataPoints.push(dataPoint);if(hoverRange&&immutable_class_1.immutableEqual(hoverRange,range)){hoverDataPoint=dataPoint}var nextDatum=ds[i+1];if(nextDatum){var nextRange=getX(nextDatum);if(range.end.valueOf()<nextRange.start.valueOf()){dataPoints.push([scaleX(rangeMidpoint.valueOf()+(range.end.valueOf()-range.start.valueOf())),scaleY(0)])}}}var strokeStyle=null;var fillStyle=null;if(color!=="default"){strokeStyle={stroke:color};fillStyle={fill:color}}var areaPath=null;var linePath=null;var singletonCircle=null;if(dataPoints.length>1){if(showArea){var areaFn=d3_shape_1.area().y0(scaleY(0));areaPath=React.createElement("path",{className:"area",d:areaFn(dataPoints)})}linePath=React.createElement("path",{className:"line",d:lineFn(dataPoints),style:strokeStyle})}else if(dataPoints.length===1){singletonCircle=React.createElement("circle",{className:"singleton",cx:dataPoints[0][0],cy:dataPoints[0][1],r:"2",style:fillStyle})}var hoverCircle=null;if(hoverDataPoint){hoverCircle=React.createElement("circle",{className:"hover",cx:hoverDataPoint[0],cy:hoverDataPoint[1],r:"2.5",style:strokeStyle})}return React.createElement("g",{className:"chart-line",transform:stage.getTransform()},areaPath,linePath,singletonCircle,hoverCircle)};return ChartLine}(React.Component);exports.ChartLine=ChartLine},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var immutable_ui_1=__webpack_require__(69);var classNames=__webpack_require__(9);var React=__webpack_require__(1);__webpack_require__(399);var ClusterSourcePicker=function(_super){tslib_1.__extends(ClusterSourcePicker,_super);function ClusterSourcePicker(){var _this=_super.call(this)||this;_this.state={};return _this}ClusterSourcePicker.prototype.onClusterSourceChange=function(newSource){var _a=this.props,onChange=_a.onChange,dataCube=_a.dataCube;var newDataCube=dataCube.change("clusterName",newSource.clusterName).change("source",newSource.source);onChange(newDataCube)};ClusterSourcePicker.prototype.initFromProps=function(props){var dataCube=props.dataCube;if(dataCube){this.setState({fileMode:dataCube.clusterName==="native"});this.originalSource=this.originalSource||dataCube.source;this.originalClusterName=this.originalClusterName||dataCube.clusterName}};ClusterSourcePicker.prototype.componentWillMount=function(){this.initFromProps(this.props)};ClusterSourcePicker.prototype.componentWillReceiveProps=function(nextProps){this.initFromProps(nextProps)};ClusterSourcePicker.prototype.getClusterSource=function(){var _a=this.props,dataCube=_a.dataCube,clusterSources=_a.clusterSources;if(!dataCube||!dataCube.clusterName)return null;var clusterName=dataCube.clusterName,source=dataCube.source;return clusterSources.find(function(cs){return cs.clusterName===clusterName&&cs.source===source})||{clusterName:clusterName,source:source}};ClusterSourcePicker.prototype.toggleMode=function(){var fileMode=this.state.fileMode;this.onClusterSourceChange({clusterName:fileMode?this.originalClusterName:"native",source:this.originalSource})};ClusterSourcePicker.prototype.onFileChange=function(newInstance,valid){this.props.onChange(newInstance,valid)};ClusterSourcePicker.prototype.onKeyDown=function(event){if(event.metaKey&&event.shiftKey&&event.keyCode===70){this.toggleMode();event.preventDefault()}};ClusterSourcePicker.prototype.render=function(){var _a=this.props,clusterSources=_a.clusterSources,dataCube=_a.dataCube,className=_a.className;var fileMode=this.state.fileMode;if(!clusterSources||!dataCube)return null;var MyDropdown=caladan_1.Dropdown.specialize();var fileNameValidator=function(path){return!!path};return React.createElement("div",{className:classNames("cluster-source-picker",className)},React.createElement(caladan_1.GlobalEventListener,{keyDown:this.onKeyDown.bind(this)}),fileMode?React.createElement(immutable_ui_1.ImmutableTextInput,{instance:dataCube,path:"source",className:"source actionable",onChange:this.onFileChange.bind(this),validator:fileNameValidator}):React.createElement(MyDropdown,{items:clusterSources,selectedItem:this.getClusterSource(),equal:function(a,b){return a&&b&&a.clusterName===b.clusterName&&a.source===b.source},renderItem:function(cs){return cs?(cs.clusterTitle||cs.clusterName)+": "+cs.source:""},keyItem:function(cs){return cs?cs.clusterName+"_"+cs.source:""},onSelect:this.onClusterSourceChange.bind(this)}))};return ClusterSourcePicker}(React.Component);exports.ClusterSourcePicker=ClusterSourcePicker},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var React=__webpack_require__(1);var segment_action_buttons_1=__webpack_require__(150);__webpack_require__(400);var LEFT_OFFSET=22;var ColorSegmentBubble=function(_super){tslib_1.__extends(ColorSegmentBubble,_super);function ColorSegmentBubble(){return _super.call(this)||this}ColorSegmentBubble.prototype.renderColorSwabs=function(){var colorEntries=this.props.colorEntries;if(!colorEntries||!colorEntries.length)return null;var colorSwabs=colorEntries.map(function(colorEntry){var color=colorEntry.color,segmentLabel=colorEntry.segmentLabel,measureLabel=colorEntry.measureLabel;var swabStyle={background:color};return React.createElement("div",{className:"color",key:segmentLabel},React.createElement("div",{className:"color-swab",style:swabStyle}),React.createElement("div",{className:"color-name"},segmentLabel),React.createElement("div",{className:"color-value"},measureLabel))});return React.createElement("div",{className:"colors"},colorSwabs)};ColorSegmentBubble.prototype.render=function(){var _a=this.props,left=_a.left,top=_a.top,dimensions=_a.dimensions,segmentLabel=_a.segmentLabel,clicker=_a.clicker,onClose=_a.onClose;return React.createElement(caladan_1.BodyPortal,{left:left+LEFT_OFFSET,top:top,disablePointerEvents:!clicker},React.createElement("div",{className:"color-segment-bubble"},React.createElement("div",{className:"bucket"},segmentLabel),this.renderColorSwabs(),clicker?React.createElement(segment_action_buttons_1.SegmentActionButtons,{clicker:clicker,dimensions:dimensions,segmentLabel:segmentLabel,disableMoreMenu:true,onClose:onClose}):null))};return ColorSegmentBubble}(React.Component);exports.ColorSegmentBubble=ColorSegmentBubble},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var React=__webpack_require__(1);var components_1=__webpack_require__(203);__webpack_require__(403);var Description=function(_super){tslib_1.__extends(Description,_super);function Description(){var _this=_super.call(this)||this;_this.state={isOpen:false};return _this}Description.prototype.onOpen=function(e){var isOpen=this.state.isOpen;e.stopPropagation();this.setState({isOpen:!isOpen})};Description.prototype.renderMenu=function(){var _this=this;var description=this.props.description;var isOpen=this.state.isOpen;if(!isOpen)return null;var onClose=function(){_this.setState({isOpen:false})};return React.createElement(components_1.BubbleMenu,{className:"description-menu",direction:"down",stage:beltful_1.Stage.fromSize(200,200),openOn:isOpen?this.containerDOM:null,onClose:onClose},React.createElement("p",{className:"info"},description))};Description.prototype.render=function(){var _this=this;var description=this.props.description;if(!description)return null;var isOpen=this.state.isOpen;return React.createElement("div",{className:"description",ref:function(e){return _this.containerDOM=e},onClick:this.onOpen.bind(this)},React.createElement(caladan_1.SvgIcon,{className:isOpen?"open":"closed",svg:Icons.HELP_2}),this.renderMenu())};return Description}(React.Component);exports.Description=Description},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var constants_1=__webpack_require__(47);var dynamic_dimension_modal_1=__webpack_require__(343);var dom_1=__webpack_require__(48);var drag_manager_1=__webpack_require__(91);var dimension_actions_menu_1=__webpack_require__(206);var highlight_string_1=__webpack_require__(76);var searchable_tile_1=__webpack_require__(125);__webpack_require__(405);var DIMENSION_CLASS_NAME="dimension";var DimensionListTile=function(_super){tslib_1.__extends(DimensionListTile,_super);function DimensionListTile(){var _this=_super.call(this)||this;_this.state={menuOpenOn:null,menuDimension:null,highlightDimension:null,showSearch:false,searchText:"",openGroups:{}};return _this}DimensionListTile.prototype.clickDimension=function(dimension,e){var menuOpenOn=this.state.menuOpenOn;var target=dom_1.findParentWithClass(e.target,DIMENSION_CLASS_NAME);if(menuOpenOn===target){this.closeMenu();return}this.setState({menuOpenOn:target,menuDimension:dimension})};DimensionListTile.prototype.closeMenu=function(){var menuOpenOn=this.state.menuOpenOn;if(!menuOpenOn)return;this.setState({menuOpenOn:null,menuDimension:null})};DimensionListTile.prototype.dragStart=function(dimension,e){var _a=this.props,essence=_a.essence,getUrlPrefix=_a.getUrlPrefix;var filter=essence.filter;var dataTransfer=e.dataTransfer;dataTransfer.effectAllowed="all";if(getUrlPrefix){var newSplit=models_1.SplitCombine.fromDimensionAndFilterAndMeasure(dimension,filter,essence.getSortMeasure());var newUrl=getUrlPrefix()+essence.addSplit(newSplit).getURL();dataTransfer.setData("text/url-list",newUrl);dataTransfer.setData("text/plain",newUrl)}drag_manager_1.DragManager.setDragDimension(dimension,"dimension-list-tile");beltful_1.DOMUtils.setDragGhost(dataTransfer,dimension.title);this.closeMenu()};DimensionListTile.prototype.onMouseOver=function(dimension){var highlightDimension=this.state.highlightDimension;if(highlightDimension===dimension)return;this.setState({highlightDimension:dimension})};DimensionListTile.prototype.onMouseLeave=function(dimension){var highlightDimension=this.state.highlightDimension;if(highlightDimension!==dimension)return;this.setState({highlightDimension:null})};DimensionListTile.prototype.toggleSearch=function(){var showSearch=this.state.showSearch;this.setState({showSearch:!showSearch});this.onSearchChange("")};DimensionListTile.prototype.onSearchChange=function(text){var searchText=this.state.searchText;var newSearchText=text.substr(0,constants_1.MAX_SEARCH_LENGTH);if(searchText===newSearchText)return;this.setState({searchText:newSearchText})};DimensionListTile.prototype.renderMenu=function(){var _a=this.props,essence=_a.essence,clicker=_a.clicker,triggerFilterMenu=_a.triggerFilterMenu,triggerSplitMenu=_a.triggerSplitMenu,timekeeper=_a.timekeeper;var _b=this.state,menuOpenOn=_b.menuOpenOn,menuDimension=_b.menuDimension;if(!menuDimension)return null;var onClose=this.closeMenu.bind(this);return React.createElement(dimension_actions_menu_1.DimensionActionsMenu,{clicker:clicker,essence:essence,direction:"right",openOn:menuOpenOn,dimension:menuDimension,triggerFilterMenu:triggerFilterMenu,triggerSplitMenu:triggerSplitMenu,onClose:onClose,timekeeper:timekeeper})};DimensionListTile.prototype.closeDynDimensionModal=function(){this.setState({dynDimensionModalType:null})};DimensionListTile.prototype.openDynDimensionModal=function(type){this.setState({dynDimensionModalType:type})};DimensionListTile.prototype.renderDynDimensionModal=function(){var _a=this.props,essence=_a.essence,clicker=_a.clicker,timekeeper=_a.timekeeper;var dynDimensionModalType=this.state.dynDimensionModalType;if(!dynDimensionModalType)return null;return React.createElement(dynamic_dimension_modal_1.DynamicDimensionModal,{essence:essence,clicker:clicker,timekeeper:timekeeper,type:dynDimensionModalType,onClose:this.closeDynDimensionModal.bind(this)})};DimensionListTile.prototype.renderDimension=function(dimension){var _a=this.state,menuDimension=_a.menuDimension,highlightDimension=_a.highlightDimension,searchText=_a.searchText;var className=classNames(DIMENSION_CLASS_NAME,"type-"+dimension.kind,{highlight:dimension===highlightDimension,selected:dimension===menuDimension});return React.createElement("div",{className:className,key:dimension.name,onClick:this.clickDimension.bind(this,dimension),onMouseOver:this.onMouseOver.bind(this,dimension),onMouseLeave:this.onMouseLeave.bind(this,dimension),draggable:true,onDragStart:this.dragStart.bind(this,dimension)},React.createElement("div",{className:"icon"},React.createElement(caladan_1.SvgIcon,{svg:dimension.getIcon()})),React.createElement("div",{className:"item-title"},React.createElement(highlight_string_1.HighlightString,{className:"label",text:dimension.title,highlight:searchText})))};DimensionListTile.prototype.renderDimensionGroup=function(dimensions,forceOpen){var _this=this;var openGroups=this.state.openGroups;var groupName=dimensions[0].group;var isOpen=openGroups[groupName]||forceOpen;var toggle=function(e){openGroups[groupName]=!isOpen;_this.setState({openGroups:openGroups})};return React.createElement("div",{key:groupName,className:classNames("dimension-group",{open:isOpen,closed:!isOpen})},React.createElement("div",{className:"group-header",onClick:toggle},React.createElement("div",{className:"icon group-icon"},React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_CARET_BOTTOM})),React.createElement("div",{className:"item-title group-title"},React.createElement("div",{className:"label"},groupName))),React.createElement("div",{className:"group-items"},dimensions.map(this.renderDimension,this)))};DimensionListTile.prototype.getGroupedDimensions=function(dimensions){var items=[];var lastGroup;dimensions.forEach(function(d){if(d.group){if(d.group===lastGroup){items[items.length-1].push(d)}else{lastGroup=d.group;items.push([d])}}else{items.push(d)}});return items};DimensionListTile.prototype.getActions=function(){var essence=this.props.essence;if(true)return[];var actions=[{label:"New boolean dimension",onClick:this.openDynDimensionModal.bind(this,"make-boolean")},{label:"New case dimension",onClick:this.openDynDimensionModal.bind(this,"make-case")}];if(essence.getCustomDimensions().some(function(d){return d.expression.op==="fallback"})){actions.push({label:"Add to case dimension",onClick:this.openDynDimensionModal.bind(this,"add-case")})}return actions};DimensionListTile.prototype.renderDimensions=function(){var _this=this;var essence=this.props.essence;var searchText=this.state.searchText;var shownDimensions=essence.getDimensions();if(searchText){shownDimensions=shownDimensions.filter(function(r){return r.title.toLowerCase().indexOf(searchText.toLowerCase())!==-1})}var items=this.getGroupedDimensions(shownDimensions);var forceOpen=Boolean(searchText);return items.map(function(item){if(Array.isArray(item))return _this.renderDimensionGroup(item,forceOpen);return _this.renderDimension(item)})};DimensionListTile.prototype.render=function(){var _a=this.props,essence=_a.essence,style=_a.style;var _b=this.state,showSearch=_b.showSearch,searchText=_b.searchText;var dimensionItems=this.renderDimensions();var message=null;if(searchText&&!dimensionItems.length){message=React.createElement("div",{className:"message"},"No "+strings_1.STRINGS.dimensions.toLowerCase()+' for "'+searchText+'"')}var icons=[{name:"search",ref:"search",onClick:this.toggleSearch.bind(this),svg:Icons.FULL_SEARCH,active:showSearch}];return React.createElement(searchable_tile_1.SearchableTile,{style:style,title:strings_1.STRINGS.dimensions,toggleChangeFn:this.toggleSearch.bind(this),onSearchChange:this.onSearchChange.bind(this),searchText:searchText,showSearch:showSearch,icons:icons,actions:this.getActions(),className:"dimension-list-tile"},React.createElement("div",{className:"items",ref:"items"},dimensionItems,message),this.renderMenu(),this.renderDynDimensionModal())};return DimensionListTile}(React.Component);exports.DimensionListTile=DimensionListTile},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var little_pictures_1=__webpack_require__(11);var React=__webpack_require__(1);__webpack_require__(407);var DropIndicator=function(_super){tslib_1.__extends(DropIndicator,_super);function DropIndicator(){return _super.call(this)||this}DropIndicator.prototype.render=function(){return React.createElement("div",{className:"drop-indicator"},React.createElement("div",{className:"white-out"}),React.createElement("div",{className:"action"},React.createElement(caladan_1.SvgIcon,{svg:little_pictures_1.SPLIT_REPLACE})))};return DropIndicator}(React.Component);exports.DropIndicator=DropIndicator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var immutable_ui_1=__webpack_require__(69);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var labels_1=__webpack_require__(78);__webpack_require__(412);var FormulaInput=function(_super){tslib_1.__extends(FormulaInput,_super);function FormulaInput(){var _this=_super.call(this)||this;_this.state={newInstance:new models_1.MeasureFormula};_this.delegate=new immutable_ui_1.ImmutableFormDelegate(_this);_this.delegate.onAnyChange(_this.onChange.bind(_this));return _this}FormulaInput.prototype.onChange=function(newFormula,isValid,formulaPath,error){if(isValid===void 0){isValid=true}if(formulaPath===void 0){formulaPath="formula"}if(error===void 0){error=null}var newMeasure=isValid?this.props.measure.changeFormula(newFormula.toFormula()):this.props.measure;if(this.props.onChange)this.props.onChange(newMeasure,isValid,formulaPath,error)};FormulaInput.prototype.componentWillMount=function(){this.initFromProps(this.props)};FormulaInput.prototype.initFromProps=function(props){var measure=props.measure,columns=props.columns;if(!measure||!columns)return;var simpleFormula=models_1.MeasureFormula.fromFormula(measure.formula);this.setState({isNotSimpleFormula:!simpleFormula,newInstance:simpleFormula?simpleFormula.changePossibleColumns(columns.map(function(c){return c.name})):null})};FormulaInput.prototype.componentWillReceiveProps=function(nextProps){this.initFromProps(nextProps)};FormulaInput.prototype.renderFilter=function(simpleColumns){var _a=this.state,newInstance=_a.newInstance,errors=_a.errors;if(!newInstance.filter)return null;var makeInput=immutable_ui_1.ImmutableTextInput.simpleGenerator(newInstance,this.delegate.onChange,labels_1.SIMPLE_MEASURE_FORMULA,errors);var makeDropdown=immutable_ui_1.ImmutableDropdown.simpleGenerator(newInstance,this.delegate.onChange,labels_1.SIMPLE_MEASURE_FORMULA,errors);return React.createElement("div",{className:"grid-row"},React.createElement("div",{className:"grid-col-33 h-padded"},caladan_1.FormLabel.dumbLabel(labels_1.SIMPLE_MEASURE_FORMULA["filter.column"].label),makeDropdown("filter.column",simpleColumns)),React.createElement("div",{className:"grid-col-33 h-padded"},caladan_1.FormLabel.dumbLabel(labels_1.SIMPLE_MEASURE_FORMULA["filter.operator"].label),makeDropdown("filter.operator",models_1.MeasureFilter.OPERATORS)),React.createElement("div",{className:"grid-col-33 h-padded"},caladan_1.FormLabel.dumbLabel(labels_1.SIMPLE_MEASURE_FORMULA["filter.value"].label),makeInput("filter.value",/[a-zA-Z]*/)))};FormulaInput.prototype.getFirstNonTimeColumn=function(){var columns=this.props.columns;if(!columns)return null;return columns.filter(function(c){return c.type!=="TIME"})[0]};FormulaInput.prototype.toggleFilter=function(){var _this=this;var newInstance=this.state.newInstance;this.setState({newInstance:newInstance.filter?newInstance.removeFilter():newInstance.createDefaultFilter(this.getFirstNonTimeColumn().name)},function(){_this.onChange(_this.state.newInstance)})};FormulaInput.prototype.convertToSimpleFormula=function(){var _this=this;this.setState({isNotSimpleFormula:false,newInstance:models_1.MeasureFormula.fromJS({column:this.getFirstNonTimeColumn().name,aggregation:models_1.MeasureFormula.DEFAULT_AGGREGATION})},function(){_this.onChange(_this.state.newInstance,true,"formula",undefined)})};FormulaInput.prototype.renderPlaceholder=function(){var goToAdvanced=this.props.goToAdvanced;return React.createElement("div",{className:"formula-input placeholder"},React.createElement("div",{className:"title"},"This measure's formula can only be displayed in advanced mode"),React.createElement("div",{className:"actions"},React.createElement("div",{className:"action"},React.createElement("span",{onClick:goToAdvanced},"Switch to advanced mode")),React.createElement("div",{className:"action"},React.createElement("span",{onClick:this.convertToSimpleFormula.bind(this)},"Convert to a simple formula"))))};FormulaInput.prototype.render=function(){var _a=this.props,columns=_a.columns,measure=_a.measure,focusOnStartup=_a.focusOnStartup;var _b=this.state,newInstance=_b.newInstance,errors=_b.errors,isNotSimpleFormula=_b.isNotSimpleFormula;if(isNotSimpleFormula)return this.renderPlaceholder();var simpleColumns=(columns||[]).map(models_1.listItemize("name","name"));var makeLabel=caladan_1.FormLabel.simpleGenerator(labels_1.SIMPLE_MEASURE_FORMULA,errors);var makeDropdown=immutable_ui_1.ImmutableDropdown.simpleGenerator(newInstance,this.delegate.onChange,labels_1.SIMPLE_MEASURE_FORMULA,errors);return React.createElement("div",{className:"formula-input"},React.createElement("div",{className:"grid-row"},React.createElement("div",{className:"grid-col-50 h-padded"},makeLabel("aggregation"),makeDropdown("aggregation",models_1.MeasureFormula.AGGREGATIONS,focusOnStartup)),React.createElement("div",{className:"grid-col-50 h-padded"},makeLabel("column","column",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["aggregation","column"]})),React.cloneElement(makeDropdown("column",simpleColumns),{disabled:!newInstance.canHaveColumn()}))),React.createElement("div",{className:"grid-row"},React.createElement("div",{className:"grid-col-100"},React.createElement(caladan_1.Checkbox,{onClick:this.toggleFilter.bind(this),selected:!!newInstance.filter,type:"check",label:"Filter"}))),this.renderFilter(simpleColumns))};return FormulaInput}(React.Component);exports.FormulaInput=FormulaInput},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var dom_1=__webpack_require__(48);__webpack_require__(413);var GridLines=function(_super){tslib_1.__extends(GridLines,_super);function GridLines(){return _super.call(this)||this}GridLines.prototype.render=function(){var _a=this.props,orientation=_a.orientation,stage=_a.stage,ticks=_a.ticks,scale=_a.scale;var lines=ticks.map(function(tick){var lineProps={key:String(tick)};if(orientation==="horizontal"){var y=dom_1.roundToHalfInteger(scale(tick));lineProps.x1=0;lineProps.x2=stage.width;lineProps.y1=y;lineProps.y2=y}else{var x=dom_1.roundToHalfInteger(scale(tick));lineProps.x1=x;lineProps.x2=x;lineProps.y1=0;lineProps.y2=stage.height}return React.createElement("line",lineProps)});return React.createElement("g",{className:classNames("grid-lines",orientation),transform:stage.getTransform()},lines)};return GridLines}(React.Component);exports.GridLines=GridLines},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var React=__webpack_require__(1);var strings_1=__webpack_require__(15);var download_1=__webpack_require__(315);var bubble_menu_1=__webpack_require__(34);__webpack_require__(415);var HilukMenu=function(_super){tslib_1.__extends(HilukMenu,_super);function HilukMenu(){var _this=_super.call(this)||this;_this.state={url:null,specificUrl:null};return _this}HilukMenu.prototype.componentDidMount=function(){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,getUrlPrefix=_a.getUrlPrefix;var urlPrefix=getUrlPrefix();var url=urlPrefix+essence.getURL();var specificUrl=essence.filter.isDynamic()?urlPrefix+essence.convertToSpecificFilter(timekeeper).getURL():null;this.setState({url:url,specificUrl:specificUrl})};HilukMenu.prototype.openRawDataModal=function(){var _a=this.props,openRawDataModal=_a.openRawDataModal,onClose=_a.onClose;openRawDataModal();onClose()};HilukMenu.prototype.onExport=function(){var _a=this.props,onClose=_a.onClose,getDownloadableDataset=_a.getDownloadableDataset,essence=_a.essence,timekeeper=_a.timekeeper;var dataCube=essence.dataCube,splits=essence.splits;if(!getDownloadableDataset)return;var specialTimeDimension=dataCube.getSpecialTimeDimension();var filters=essence.getEffectiveFilter(timekeeper).getFileString(specialTimeDimension?specialTimeDimension.name:null);var splitsString=splits.toArray().map(function(split){return strings_1.STRINGS.splitDelimiter+"_"+split.dimension}).join("_");download_1.download(getDownloadableDataset(),download_1.makeFileName(dataCube.name,filters,splitsString),"csv");onClose()};HilukMenu.prototype.render=function(){var _a=this.props,openOn=_a.openOn,onClose=_a.onClose,externalViews=_a.externalViews,essence=_a.essence,getDownloadableDataset=_a.getDownloadableDataset;var _b=this.state,url=_b.url,specificUrl=_b.specificUrl;var shareOptions=[];shareOptions.push(React.createElement("li",{className:"copy-url clipboard",key:"copy-url","data-clipboard-text":url,onClick:onClose},strings_1.STRINGS.copyUrl));if(specificUrl){shareOptions.push(React.createElement("li",{className:"copy-specific-url clipboard",key:"copy-specific-url","data-clipboard-text":specificUrl,onClick:onClose},strings_1.STRINGS.copySpecificUrl))}if(getDownloadableDataset()){shareOptions.push(React.createElement("li",{className:"export",key:"export",onClick:this.onExport.bind(this)},strings_1.STRINGS.exportToCSV))}shareOptions.push(React.createElement("li",{className:"view-raw-data",key:"view-raw-data",onClick:this.openRawDataModal.bind(this)},strings_1.STRINGS.viewRawData));if(externalViews){externalViews.forEach(function(externalView,i){var url=externalView.linkGeneratorFn(essence.dataCube,essence.timezone,essence.filter,essence.splits);if(typeof url!=="string")return;var title=strings_1.STRINGS.openIn+" "+externalView.title;var target=externalView.sameWindow?"_self":"_blank";shareOptions.push(React.createElement("li",{key:"custom-url-"+i},React.createElement("a",{href:url,target:target},title)))})}var stage=beltful_1.Stage.fromSize(200,200);return React.createElement(bubble_menu_1.BubbleMenu,{className:"hiluk-menu",direction:"down",stage:stage,openOn:openOn,onClose:onClose},React.createElement("ul",{className:"bubble-list"},shareOptions))};return HilukMenu}(React.Component);exports.HilukMenu=HilukMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var React=__webpack_require__(1);var time_1=__webpack_require__(75);var dom_1=__webpack_require__(48);__webpack_require__(416);var TICK_HEIGHT=5;var TEXT_OFFSET=12;var LABEL_Y=TICK_HEIGHT+TEXT_OFFSET;var BOUNDARY_Y_OFFSET=14;var LineChartAxis=function(_super){tslib_1.__extends(LineChartAxis,_super);function LineChartAxis(){return _super.call(this)||this}LineChartAxis.prototype.renderBoundaryTick=function(x,d){var value=d.value,boundary=d.boundary;return React.createElement("text",{x:x,y:LABEL_Y,key:value+boundary},React.createElement("tspan",{x:x,y:LABEL_Y},value),React.createElement("tspan",{x:x,y:LABEL_Y+BOUNDARY_Y_OFFSET},boundary))};LineChartAxis.prototype.render=function(){var _this=this;var _a=this.props,stage=_a.stage,ticks=_a.ticks,scale=_a.scale,tickFormatter=_a.tickFormatter;var lines=ticks.map(function(tick){var x=dom_1.roundToHalfInteger(scale(tick));return React.createElement("line",{key:String(tick),x1:x,y1:0,x2:x,y2:TICK_HEIGHT})});var labels=ticks.map(function(tick){var x=scale(tick);var formatted=tickFormatter(tick);if(time_1.isBoundaryTick(formatted)){return _this.renderBoundaryTick(x,formatted)}return React.createElement("text",{key:String(tick),x:x,y:LABEL_Y},formatted)});return React.createElement("g",{className:"line-chart-axis",transform:stage.getTransform()},lines,labels)};return LineChartAxis}(React.Component);exports.LineChartAxis=LineChartAxis},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var little_pictures_1=__webpack_require__(11);var React=__webpack_require__(1);__webpack_require__(417);var LineLoader=function(_super){tslib_1.__extends(LineLoader,_super);function LineLoader(){return _super.call(this)||this}LineLoader.prototype.render=function(){return React.createElement("div",{className:"line-loader"},React.createElement(caladan_1.SvgIcon,{svg:little_pictures_1.LINE_LOADER}))};return LineLoader}(React.Component);exports.LineLoader=LineLoader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var immutable_class_1=__webpack_require__(2);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);__webpack_require__(418);var ManualFallback=function(_super){tslib_1.__extends(ManualFallback,_super);function ManualFallback(){return _super.call(this)||this}ManualFallback.prototype.onSplitResolutionClick=function(resolution){var clicker=this.props.clicker;clicker.changeSplits(resolution.adjustment.splits,models_1.VisStrategy.KeepAlways)};ManualFallback.prototype.onVisualizationClick=function(visualizationName){var clicker=this.props.clicker;var visualization=immutable_class_1.NamedArray.findByName(models_1.MANIFESTS,visualizationName);if(!visualization)return;clicker.summonVisualization(visualization)};ManualFallback.prototype.render=function(){var _this=this;var essence=this.props.essence;var visResolve=essence.visResolve;if(!visResolve.rejectedDimensions()&&!visResolve.rejectedCombines())return null;var onClick=null;var getDescription=null;if(visResolve.rejectedDimensions()){var splits_1=essence.splits;onClick=this.onSplitResolutionClick;getDescription=function(r){var returnStr=strings_1.STRINGS.try+" "+r.description;if(!splits_1.isSubsetOf(r.adjustment.splits)){returnStr+=" "+strings_1.STRINGS.instead}return returnStr}}else{onClick=this.onVisualizationClick;getDescription=function(r){var vis=immutable_class_1.NamedArray.findByName(models_1.MANIFESTS,r);return vis?strings_1.STRINGS.try+" the "+vis.title+" "+strings_1.STRINGS.instead:"?"}}var items=visResolve.resolutions.map(function(r,i){return React.createElement("li",{key:i,onClick:onClick.bind(_this,r)},getDescription(r))});return React.createElement("div",{className:"manual-fallback"},React.createElement("div",{className:"message"},visResolve.message),React.createElement("ul",null,items))};return ManualFallback}(React.Component);exports.ManualFallback=ManualFallback},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var classNames=__webpack_require__(9);var immutable_class_1=__webpack_require__(2);var React=__webpack_require__(1);var strings_1=__webpack_require__(15);var constants_1=__webpack_require__(47)
;var highlight_string_1=__webpack_require__(76);var searchable_tile_1=__webpack_require__(125);__webpack_require__(419);var MeasuresTile=function(_super){tslib_1.__extends(MeasuresTile,_super);function MeasuresTile(){var _this=_super.call(this)||this;_this.state={showSearch:false,searchText:"",openGroups:{}};return _this}MeasuresTile.prototype.measureClick=function(measure){var clicker=this.props.clicker;clicker.toggleEffectiveMeasure(measure)};MeasuresTile.prototype.toggleSearch=function(){var showSearch=this.state.showSearch;this.setState({showSearch:!showSearch});this.onSearchChange("")};MeasuresTile.prototype.onSearchChange=function(text){var searchText=this.state.searchText;var newSearchText=text.substr(0,constants_1.MAX_SEARCH_LENGTH);if(searchText===newSearchText)return;this.setState({searchText:newSearchText})};MeasuresTile.prototype.toggleMultiMeasure=function(){var clicker=this.props.clicker;if(!clicker.toggleMultiMeasureMode)return;clicker.toggleMultiMeasureMode()};MeasuresTile.prototype.getGroupedMeasures=function(measures){var items=[];var lastGroup;measures.forEach(function(d){if(d.group){if(d.group===lastGroup){items[items.length-1].push(d)}else{lastGroup=d.group;items.push([d])}}else{items.push(d)}});return items};MeasuresTile.prototype.renderMeasure=function(measure,checkboxType){var essence=this.props.essence;var _a=this.state,showSearch=_a.showSearch,searchText=_a.searchText;var selectedMeasures=essence.getEffectiveSelectedMeasure();var measureName=measure.name;var selected=immutable_class_1.SimpleArray.contains(selectedMeasures,measureName);return React.createElement("div",{className:classNames("measure",{selected:selected}),key:measureName,onClick:this.measureClick.bind(this,measure)},React.createElement(caladan_1.Checkbox,{type:checkboxType,selected:selected}),React.createElement(highlight_string_1.HighlightString,{className:"label",text:measure.getTitleWithUnits(),highlight:searchText}))};MeasuresTile.prototype.renderMeasureGroup=function(measures,checkboxType){var _this=this;var openGroups=this.state.openGroups;var groupName=measures[0].group;var isOpen=openGroups[groupName];var toggle=function(e){openGroups[groupName]=!isOpen;_this.setState({openGroups:openGroups})};return React.createElement("div",{key:groupName,className:classNames("measure-group",{open:isOpen,closed:!isOpen})},React.createElement("div",{className:"grid-row",onClick:toggle},React.createElement("div",{className:"icon group-icon grid-col-fit-content middle"},React.createElement("div",{className:"pouet"},React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_CARET_BOTTOM}))),React.createElement("div",{className:"item-title group-title grid-col-auto-expand middle"},React.createElement("div",{className:"label"},groupName))),React.createElement("div",{className:"group-items"},measures.map(function(m){return _this.renderMeasure(m,checkboxType)})))};MeasuresTile.prototype.renderMeasures=function(){var _this=this;var essence=this.props.essence;var _a=this.state,showSearch=_a.showSearch,searchText=_a.searchText;var dataCube=essence.dataCube;var checkboxType=essence.getMeasureMode()==="multi"?"check":"radio";var shownMeasures=dataCube.getMeasures();if(searchText){shownMeasures=shownMeasures.filter(function(m){return m.getTitleWithUnits().toLowerCase().indexOf(searchText.toLowerCase())!==-1})}var items=this.getGroupedMeasures(shownMeasures);return items.map(function(item){if(Array.isArray(item))return _this.renderMeasureGroup(item,checkboxType);return _this.renderMeasure(item,checkboxType)})};MeasuresTile.prototype.render=function(){var _this=this;var _a=this.props,essence=_a.essence,style=_a.style;var _b=this.state,showSearch=_b.showSearch,searchText=_b.searchText;var measureMode=essence.getMeasureMode();var rows=this.renderMeasures();var message=null;if(searchText&&!rows.length){message=React.createElement("div",{className:"message"},"No "+strings_1.STRINGS.measures.toLowerCase()+' for "'+searchText+'"')}var icons=[{name:"multi",onClick:function(){return _this.toggleMultiMeasure()},svg:Icons.FULL_MULTI,active:measureMode==="multi"}];icons.push({name:"search",ref:"search",onClick:this.toggleSearch.bind(this),svg:Icons.FULL_SEARCH,active:showSearch});return React.createElement(searchable_tile_1.SearchableTile,{style:style,title:strings_1.STRINGS.measures,toggleChangeFn:this.toggleSearch.bind(this),onSearchChange:this.onSearchChange.bind(this),searchText:searchText,showSearch:showSearch,icons:icons,className:"measures-tile"},React.createElement("div",{className:"rows"},rows,message))};return MeasuresTile}(React.Component);exports.MeasuresTile=MeasuresTile},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var classNames=__webpack_require__(9);var React=__webpack_require__(1);__webpack_require__(420);var NavList=function(_super){tslib_1.__extends(NavList,_super);function NavList(){return _super!==null&&_super.apply(this,arguments)||this}NavList.prototype.renderIcon=function(iconSvg){if(!iconSvg)return null;return React.createElement("span",{className:"icon"},React.createElement(caladan_1.SvgIcon,{svg:iconSvg}))};NavList.prototype.renderA=function(isSelected,navLink){var _a=this.props,onClose=_a.onClose,iconSvg=_a.iconSvg;return React.createElement("a",{className:classNames("item",{selected:isSelected}),key:navLink.name,title:navLink.tooltip,href:navLink.href,target:navLink.newTab?"_blank":null,onClick:isSelected?onClose:navLink.onClick},this.renderIcon(iconSvg),navLink.title)};NavList.prototype.renderDIV=function(isSelected,navLink){var _a=this.props,onClose=_a.onClose,iconSvg=_a.iconSvg;return React.createElement("div",{className:classNames("item",{selected:isSelected}),key:navLink.name,title:navLink.tooltip,href:navLink.href,target:navLink.newTab?"_blank":null,onClick:isSelected?onClose:navLink.onClick},this.renderIcon(iconSvg),navLink.title)};NavList.prototype.renderNavList=function(){var _this=this;var _a=this.props,navLinks=_a.navLinks,iconSvg=_a.iconSvg,selected=_a.selected,onClose=_a.onClose;return navLinks.map(function(navLink){var isSelected=selected&&selected===navLink.name;return navLink.href?_this.renderA(isSelected,navLink):_this.renderDIV(isSelected,navLink)})};NavList.prototype.render=function(){var title=this.props.title;var className="nav-list";var titleSection=null;if(title){titleSection=React.createElement("div",{className:"group-title"},title)}else{className+=" no-title"}return React.createElement("div",{className:className},titleSection,React.createElement("div",{className:"items"},this.renderNavList()))};return NavList}(React.Component);exports.NavList=NavList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var little_pictures_1=__webpack_require__(11);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var drag_manager_1=__webpack_require__(91);var dimension_tile_1=__webpack_require__(207);var pinboard_measure_tile_1=__webpack_require__(211);__webpack_require__(425);var PinboardPanel=function(_super){tslib_1.__extends(PinboardPanel,_super);function PinboardPanel(){var _this=_super.call(this)||this;_this.state={dragOver:false};return _this}PinboardPanel.prototype.canDrop=function(e){var dimension=drag_manager_1.DragManager.getDragDimension();if(dimension){var pinnedDimensions=this.props.essence.pinnedDimensions;return pinnedDimensions.indexOf(dimension.name)===-1}return false};PinboardPanel.prototype.dragEnter=function(e){if(!this.canDrop(e))return;e.preventDefault();this.setState({dragOver:true})};PinboardPanel.prototype.dragOver=function(e){if(!this.canDrop(e))return;e.dataTransfer.dropEffect="move";e.preventDefault()};PinboardPanel.prototype.dragLeave=function(e){if(!this.canDrop(e))return;this.setState({dragOver:false})};PinboardPanel.prototype.drop=function(e){if(!this.canDrop(e))return;e.preventDefault();var dimension=drag_manager_1.DragManager.getDragDimension();if(dimension){this.props.clicker.pin(dimension)}this.setState({dragOver:false})};PinboardPanel.prototype.getColorsSortOn=function(){var essence=this.props.essence;var dataCube=essence.dataCube;var split=essence.getEffectiveColorSplit();if(split){return models_1.SortOn.fromSortAction(split.sortAction,dataCube,essence.getDimension(split.dimension))}return null};PinboardPanel.prototype.onLegendSortOnSelect=function(sortOn){var _a=this.props,clicker=_a.clicker,essence=_a.essence;var splits=essence.splits;var colorSplit=essence.getEffectiveColorSplit();if(colorSplit){var sortAction=colorSplit.sortAction;var direction=sortAction?sortAction.direction:plywood_1.SortExpression.DESCENDING;var newSplit=colorSplit.changeSortAction(plywood_1.Expression._.sort(sortOn.getExpression(),direction));var newColors=models_1.Colors.fromLimit(colorSplit.dimension,5);clicker.changeSplits(splits.replace(colorSplit,newSplit),models_1.VisStrategy.UnfairGame,newColors)}};PinboardPanel.prototype.onPinboardSortOnSelect=function(sortOn){if(!sortOn.measure)return;var clicker=this.props.clicker;clicker.changePinnedSortMeasure(sortOn.measure)};PinboardPanel.prototype.onRemoveLegend=function(){var _a=this.props,clicker=_a.clicker,essence=_a.essence;var splits=essence.splits;var colors=essence.getEffectiveColors();if(colors){var split=splits.findSplitForDimension(colors.dimension);if(split){clicker.changeSplits(splits.removeSplit(split),models_1.VisStrategy.UnfairGame,null)}}};PinboardPanel.prototype.render=function(){var _a=this.props,clicker=_a.clicker,essence=_a.essence,timekeeper=_a.timekeeper,customColors=_a.customColors,getUrlPrefix=_a.getUrlPrefix,style=_a.style;var dragOver=this.state.dragOver;var pinnedDimensions=essence.pinnedDimensions;var colors=essence.getEffectiveColors();var legendMeasureSelector=null;var legendDimensionTile=null;var colorDimension=colors?colors.dimension:null;if(colorDimension){var dimension=essence.getDimension(colorDimension);if(dimension){var colorsSortOn=this.getColorsSortOn();legendMeasureSelector=React.createElement(pinboard_measure_tile_1.PinboardMeasureTile,{essence:essence,title:"Legend",dimension:dimension,sortOn:colorsSortOn,onSelect:this.onLegendSortOnSelect.bind(this)});legendDimensionTile=React.createElement(dimension_tile_1.DimensionTile,{clicker:clicker,essence:essence,timekeeper:timekeeper,dimension:dimension,sortOn:colorsSortOn,colorSplit:essence.getEffectiveColorSplit(),colors:colors&&colors.isLimitMode()&&customColors?customColors:colors,onClose:this.onRemoveLegend.bind(this),getUrlPrefix:getUrlPrefix})}}var pinnedSortOn=models_1.SortOn.fromMeasure(essence.getPinnedSortMeasure());var dimensionTiles=[];pinnedDimensions.forEach(function(dimensionName){var dimension=essence.getDimension(dimensionName);if(!dimension)return null;dimensionTiles.push(React.createElement(dimension_tile_1.DimensionTile,{key:dimension.name,clicker:clicker,essence:essence,timekeeper:timekeeper,dimension:dimension,sortOn:pinnedSortOn,onClose:clicker.unpin?clicker.unpin.bind(clicker,dimension):null,getUrlPrefix:getUrlPrefix}))});var placeholder=null;if(!dragOver&&!dimensionTiles.length){placeholder=React.createElement("div",{className:"placeholder"},React.createElement(caladan_1.SvgIcon,{svg:little_pictures_1.PREVIEW_PIN}),React.createElement("div",{className:"placeholder-message"},strings_1.STRINGS.pinboardPlaceholder))}return React.createElement("div",{className:"pinboard-panel",onDragEnter:this.dragEnter.bind(this),style:style},legendMeasureSelector,legendDimensionTile,React.createElement(pinboard_measure_tile_1.PinboardMeasureTile,{essence:essence,title:strings_1.STRINGS.pinboard,sortOn:pinnedSortOn,onSelect:this.onPinboardSortOnSelect.bind(this)}),dimensionTiles,dragOver?React.createElement("div",{className:"drop-indicator-tile"}):null,placeholder,dragOver?React.createElement("div",{className:"drag-mask",onDragOver:this.dragOver.bind(this),onDragLeave:this.dragLeave.bind(this),onDragExit:this.dragLeave.bind(this),onDrop:this.drop.bind(this)}):null)};return PinboardPanel}(React.Component);exports.PinboardPanel=PinboardPanel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var classNames=__webpack_require__(9);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var general_1=__webpack_require__(77);var constants_1=__webpack_require__(47);var query_runner_1=__webpack_require__(90);var highlight_string_1=__webpack_require__(76);var loader_1=__webpack_require__(70);var query_error_1=__webpack_require__(92);__webpack_require__(426);var TOP_N=100;function getRegexError(text){try{new RegExp(text);return null}catch(e){return e.message}}var PreviewStringFilterMenu=function(_super){tslib_1.__extends(PreviewStringFilterMenu,_super);function PreviewStringFilterMenu(){var _this=_super.call(this)||this;_this.state={loading:false,dataset:null,queryError:null,fetchQueued:false,regexErrorMessage:null};_this.collectTriggerSearch=general_1.collect(constants_1.SEARCH_WAIT,function(){if(!_this.mounted)return;var _a=_this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension,filterMode=_a.filterMode,searchText=_a.searchText;var regexErrorMessage=_this.state.regexErrorMessage;if(regexErrorMessage)return;_this.fetchData(essence,timekeeper,dimension,filterMode,searchText)});return _this}PreviewStringFilterMenu.prototype.fetchData=function(essence,timekeeper,dimension,filterMode,searchText){var _this=this;var dimensions=essence.getDimensions();var dataCube=essence.dataCube;var nativeCount=dataCube.getMeasure("count");var measureExpression=nativeCount?nativeCount.expression:plywood_1.$("main").count();var filter=essence.getEffectiveFilter(timekeeper,null,dimension);if(searchText){if(filterMode===models_1.Filter.CONTAINS){filter=filter.setSearch(dimension.name,"contains",searchText)}else if(filterMode===models_1.Filter.REGEX){filter=filter.setSearch(dimension.name,"match",searchText)}}var query=plywood_1.$("main").filter(filter.toExpression(dimensions)).split(dimension.expression,dimension.name).apply("MEASURE",measureExpression).sort(plywood_1.$("MEASURE"),plywood_1.SortExpression.DESCENDING).limit(TOP_N+1);this.setState({loading:true,fetchQueued:false});query_runner_1.QueryRunner.fetch(dataCube,query,essence.timezone).then(function(dataset){if(!_this.mounted)return;_this.setState({loading:false,dataset:dataset,queryError:null})},function(error){if(!_this.mounted)return;_this.setState({loading:false,dataset:null,queryError:error})})};PreviewStringFilterMenu.prototype.componentWillMount=function(){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension,searchText=_a.searchText,filterMode=_a.filterMode;if(searchText&&filterMode===models_1.Filter.REGEX){var regexErrorMessage=getRegexError(searchText);if(regexErrorMessage){this.setState({regexErrorMessage:regexErrorMessage});return}}this.fetchData(essence,timekeeper,dimension,filterMode,searchText)};PreviewStringFilterMenu.prototype.componentDidMount=function(){this.mounted=true};PreviewStringFilterMenu.prototype.componentWillUnmount=function(){this.mounted=false};PreviewStringFilterMenu.prototype.componentWillReceiveProps=function(nextProps){var _a=this.props,searchText=_a.searchText,filterMode=_a.filterMode;var incomingSearchText=nextProps.searchText;var _b=this.state,fetchQueued=_b.fetchQueued,loading=_b.loading,dataset=_b.dataset;var regexErrorMessage=incomingSearchText&&filterMode===models_1.Filter.REGEX?getRegexError(incomingSearchText):null;if(regexErrorMessage){this.setState({regexErrorMessage:regexErrorMessage});return}if(incomingSearchText&&incomingSearchText.indexOf(searchText)!==-1&&filterMode===models_1.Filter.CONTAINS&&!fetchQueued&&!loading&&dataset&&dataset.data.length<TOP_N)return;this.setState({fetchQueued:true,regexErrorMessage:null});this.collectTriggerSearch()};PreviewStringFilterMenu.prototype.constructFilter=function(){var _a=this.props,dimension=_a.dimension,filterMode=_a.filterMode,onClauseChange=_a.onClauseChange,searchText=_a.searchText;var name=dimension.name;var clause=null;if(searchText){if(filterMode===models_1.Filter.REGEX){clause=new models_1.FilterClause({dimension:name,action:"match",search:searchText})}else if(filterMode===models_1.Filter.CONTAINS){clause=new models_1.FilterClause({dimension:name,action:"contains",search:searchText})}}return onClauseChange(clause)};PreviewStringFilterMenu.prototype.onOkClick=function(){if(!this.actionEnabled())return;var _a=this.props,clicker=_a.clicker,onClose=_a.onClose;clicker.changeFilter(this.constructFilter());onClose()};PreviewStringFilterMenu.prototype.onCancelClick=function(){var onClose=this.props.onClose;onClose()};PreviewStringFilterMenu.prototype.actionEnabled=function(){var regexErrorMessage=this.state.regexErrorMessage;var essence=this.props.essence;if(regexErrorMessage)return false;return!essence.filter.equals(this.constructFilter())};PreviewStringFilterMenu.prototype.renderRows=function(){var _a=this.state,loading=_a.loading,dataset=_a.dataset,fetchQueued=_a.fetchQueued,regexErrorMessage=_a.regexErrorMessage;var _b=this.props,dimension=_b.dimension,searchText=_b.searchText,filterMode=_b.filterMode;var rows=[];var search=null;if(dataset){var rowStrings=dataset.data.slice(0,TOP_N).map(function(d){return d[dimension.name]});if(searchText){rowStrings=rowStrings.filter(function(d){if(filterMode===models_1.Filter.REGEX){try{var escaped=searchText.replace(/\\[^\\]]/g,"\\\\");search=new RegExp(escaped);return search.test(String(d))}catch(e){return false}}else if(filterMode===models_1.Filter.CONTAINS){search=searchText;return String(d).toLowerCase().indexOf(searchText.toLowerCase())!==-1}return false})}rows=rowStrings.map(function(segmentValue){var segmentValueStr=String(segmentValue);return React.createElement("div",{className:"row no-select",key:segmentValueStr,title:segmentValueStr},React.createElement("div",{className:"row-wrapper"},React.createElement(highlight_string_1.HighlightString,{className:"label",text:segmentValueStr,highlight:search})))})}var grayMessage=null;if(regexErrorMessage){grayMessage=React.createElement("div",{className:"message"},regexErrorMessage)}else if(!loading&&dataset&&!fetchQueued&&searchText&&!rows.length){grayMessage=React.createElement("div",{className:"message"},'No results for "'+searchText+'"')}return React.createElement("div",{className:"rows"},rows.length===0||!searchText?null:React.createElement("div",{className:"matching-values-message"},"Matching Values"),rows,grayMessage)};PreviewStringFilterMenu.prototype.render=function(){var filterMode=this.props.filterMode;var _a=this.state,dataset=_a.dataset,loading=_a.loading,queryError=_a.queryError;var hasMore=dataset&&dataset.data.length>TOP_N;return React.createElement("div",{className:classNames("string-filter-menu",filterMode)},React.createElement(caladan_1.GlobalEventListener,{enter:this.onOkClick.bind(this)}),React.createElement("div",{className:classNames("menu-table",hasMore?"has-more":"no-more")},this.renderRows(),queryError?React.createElement(query_error_1.QueryError,{error:queryError}):null,loading?React.createElement(loader_1.Loader,null):null),React.createElement("div",{className:"ok-cancel-bar"},React.createElement(caladan_1.Button,{type:"primary",title:strings_1.STRINGS.ok,onClick:this.onOkClick.bind(this),disabled:!this.actionEnabled()}),React.createElement(caladan_1.Button,{type:"secondary",title:strings_1.STRINGS.cancel,onClick:this.onCancelClick.bind(this)})))};return PreviewStringFilterMenu}(React.Component);exports.PreviewStringFilterMenu=PreviewStringFilterMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var classNames=__webpack_require__(9);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var general_1=__webpack_require__(77);var constants_1=__webpack_require__(47);var query_runner_1=__webpack_require__(90);var highlight_string_1=__webpack_require__(76);var loader_1=__webpack_require__(70);var query_error_1=__webpack_require__(92);__webpack_require__(432);var TOP_N=100;var SelectableStringFilterMenu=function(_super){tslib_1.__extends(SelectableStringFilterMenu,_super);function SelectableStringFilterMenu(){var _this=_super.call(this)||this;_this.state={loading:false,dataset:null,error:null,fetchQueued:false,selectedValues:null,promotedValues:null};_this.collectTriggerSearch=general_1.collect(constants_1.SEARCH_WAIT,function(){if(!_this.mounted)return;var _a=_this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension,searchText=_a.searchText;_this.fetchData(essence,timekeeper,dimension,searchText)});return _this}SelectableStringFilterMenu.prototype.fetchData=function(essence,timekeeper,dimension,searchText){var _this=this;var dataCube=essence.dataCube;var dimensions=essence.getDimensions();var nativeCount=dataCube.getMeasure("count");var measureExpression=nativeCount?nativeCount.expression:plywood_1.$("main").count();var filter=essence.getEffectiveFilter(timekeeper,null,dimension);if(searchText){filter=filter.setSearch(dimension.name,"contains",searchText)}var query=plywood_1.$("main").filter(filter.toExpression(dimensions)).split(dimension.expression,dimension.name).apply("MEASURE",measureExpression).sort(plywood_1.$("MEASURE"),plywood_1.SortExpression.DESCENDING).limit(TOP_N+1);this.setState({loading:true,fetchQueued:false});query_runner_1.QueryRunner.fetch(dataCube,query,essence.timezone).then(function(dataset){if(!_this.mounted)return;_this.setState({loading:false,dataset:dataset,error:null})},function(error){if(!_this.mounted)return;_this.setState({loading:false,dataset:null,error:error})})};SelectableStringFilterMenu.prototype.componentWillMount=function(){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,dimension=_a.dimension,searchText=_a.searchText;var filter=essence.filter;var selectedValues=filter.getLiteralSet(dimension.name)||plywood_1.Set.EMPTY;this.setState({selectedValues:selectedValues,promotedValues:selectedValues});this.fetchData(essence,timekeeper,dimension,searchText)};SelectableStringFilterMenu.prototype.componentDidMount=function(){this.mounted=true};SelectableStringFilterMenu.prototype.componentWillUnmount=function(){this.mounted=false};SelectableStringFilterMenu.prototype.componentWillReceiveProps=function(nextProps){var searchText=this.props.searchText;var _a=this.state,fetchQueued=_a.fetchQueued,loading=_a.loading,dataset=_a.dataset;if(nextProps.searchText&&nextProps.searchText.indexOf(searchText)!==-1&&!fetchQueued&&!loading&&dataset&&dataset.data.length<TOP_N){return}else{this.setState({fetchQueued:true});this.collectTriggerSearch()}};SelectableStringFilterMenu.prototype.constructFilter=function(){var _a=this.props,dimension=_a.dimension,filterMode=_a.filterMode,onClauseChange=_a.onClauseChange;var selectedValues=this.state.selectedValues;var clause=null;if(selectedValues.size()){clause=new models_1.FilterClause({dimension:dimension.name,values:selectedValues,exclude:filterMode===models_1.Filter.EXCLUDE})}return onClauseChange(clause)};SelectableStringFilterMenu.prototype.onValueClick=function(value,e){var selectedValues=this.state.selectedValues;if(e.altKey||e.ctrlKey||e.metaKey){if(selectedValues.contains(value)&&selectedValues.size()===1){selectedValues=plywood_1.Set.EMPTY}else{selectedValues=plywood_1.Set.EMPTY.add(value)}}else{selectedValues=selectedValues.toggle(value)}this.setState({selectedValues:selectedValues})};SelectableStringFilterMenu.prototype.onOkClick=function(){if(!this.actionEnabled())return;var _a=this.props,clicker=_a.clicker,onClose=_a.onClose;clicker.changeFilter(this.constructFilter());onClose()};SelectableStringFilterMenu.prototype.onCancelClick=function(){var onClose=this.props.onClose;onClose()};SelectableStringFilterMenu.prototype.actionEnabled=function(){var essence=this.props.essence;return!essence.filter.equals(this.constructFilter())};SelectableStringFilterMenu.prototype.renderRows=function(){var _this=this;var _a=this.state,loading=_a.loading,dataset=_a.dataset,fetchQueued=_a.fetchQueued,selectedValues=_a.selectedValues,promotedValues=_a.promotedValues;var _b=this.props,dimension=_b.dimension,filterMode=_b.filterMode,searchText=_b.searchText;var rows=[];if(dataset){var promotedElements_1=promotedValues?promotedValues.elements:[];var rowData=dataset.data.slice(0,TOP_N).filter(function(d){return promotedElements_1.indexOf(d[dimension.name])===-1});var rowStrings=promotedElements_1.concat(rowData.map(function(d){return d[dimension.name]}));if(searchText){var searchTextLower_1=searchText.toLowerCase();rowStrings=rowStrings.filter(function(d){return String(d).toLowerCase().indexOf(searchTextLower_1)!==-1})}var checkboxType_1=filterMode===models_1.Filter.EXCLUDE?"cross":"check";rows=rowStrings.map(function(segmentValue){var segmentValueStr=String(segmentValue);var selected=selectedValues&&selectedValues.contains(segmentValue);return React.createElement("div",{className:classNames("row",{selected:selected}),key:segmentValueStr,title:segmentValueStr,onClick:_this.onValueClick.bind(_this,segmentValue)},React.createElement("div",{className:"row-wrapper"},React.createElement(caladan_1.Checkbox,{type:checkboxType_1,selected:selected}),React.createElement(highlight_string_1.HighlightString,{className:"label",text:segmentValueStr,highlight:searchText})))})}var message=null;if(!loading&&dataset&&!fetchQueued&&searchText&&!rows.length){message=React.createElement("div",{className:"message"},'No results for "'+searchText+'"')}return React.createElement("div",{className:"rows"},rows,message)};SelectableStringFilterMenu.prototype.render=function(){var filterMode=this.props.filterMode;var _a=this.state,dataset=_a.dataset,loading=_a.loading,error=_a.error;var hasMore=dataset&&dataset.data.length>TOP_N;return React.createElement("div",{className:classNames("string-filter-menu",filterMode)},React.createElement(caladan_1.GlobalEventListener,{enter:this.onOkClick.bind(this)}),React.createElement("div",{className:classNames("menu-table",hasMore?"has-more":"no-more")},this.renderRows(),error?React.createElement(query_error_1.QueryError,{error:error}):null,loading?React.createElement(loader_1.Loader,null):null),React.createElement("div",{className:"ok-cancel-bar"},React.createElement(caladan_1.Button,{type:"primary",title:strings_1.STRINGS.ok,onClick:this.onOkClick.bind(this),disabled:!this.actionEnabled()}),React.createElement(caladan_1.Button,{type:"secondary",title:strings_1.STRINGS.cancel,onClick:this.onCancelClick.bind(this)})))};return SelectableStringFilterMenu}(React.Component);exports.SelectableStringFilterMenu=SelectableStringFilterMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var little_pictures_1=__webpack_require__(11);var classNames=__webpack_require__(9);var Q=__webpack_require__(49);var React=__webpack_require__(1);var ReactDOM=__webpack_require__(20);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var constants_1=__webpack_require__(47);var dom_1=__webpack_require__(48);var drag_manager_1=__webpack_require__(91);var pill_tile_1=__webpack_require__(220);var bubble_menu_1=__webpack_require__(34);var fancy_drag_indicator_1=__webpack_require__(148);var split_menu_1=__webpack_require__(213);__webpack_require__(435);var SPLIT_CLASS_NAME="split";var SplitTile=function(_super){tslib_1.__extends(SplitTile,_super);function SplitTile(){var _this=_super.call(this)||this;_this.overflowMenuId=dom_1.uniqueId("overflow-menu-");_this.state={menuOpenOn:null,menuDimension:null,dragPosition:null};return _this}SplitTile.prototype.componentDidMount=function(){this.calculateSize()};SplitTile.prototype.calculateSize=function(){if(!this.itemsDOM)return;var itemStage=this.state.itemStage;var newItemStage=beltful_1.Stage.fromClientRect(this.itemsDOM.getBoundingClientRect());if(!newItemStage.equals(itemStage)){this.setState({itemStage:newItemStage})}};SplitTile.prototype.componentDidUpdate=function(){var overflowMenuOpenOn=this.state.overflowMenuOpenOn;if(overflowMenuOpenOn){var overflowMenu=this.getOverflowMenu();if(overflowMenu)this.overflowMenuDeferred.resolve(overflowMenu)}};SplitTile.prototype.selectDimensionSplit=function(dimension,split,e){var target=dom_1.findParentWithClass(e.target,SPLIT_CLASS_NAME);this.openMenu(dimension,split,target)};SplitTile.prototype.openMenu=function(dimension,split,target){var menuOpenOn=this.state.menuOpenOn;if(menuOpenOn===target){this.closeMenu();return}var overflowMenu=this.getOverflowMenu();var menuInside=null;if(overflowMenu&&beltful_1.DOMUtils.isInside(target,overflowMenu)){menuInside=overflowMenu}this.setState({menuOpenOn:target,menuDimension:dimension,menuSplit:split,menuInside:menuInside})};SplitTile.prototype.closeMenu=function(){var menuOpenOn=this.state.menuOpenOn;if(!menuOpenOn)return;this.setState({menuOpenOn:null,menuDimension:null,menuInside:null,menuSplit:null})};SplitTile.prototype.getOverflowMenu=function(){return document.getElementById(this.overflowMenuId)};SplitTile.prototype.openOverflowMenu=function(target){if(!target)return Q(null);var overflowMenuOpenOn=this.state.overflowMenuOpenOn;if(overflowMenuOpenOn===target){this.closeOverflowMenu();return Q(null)}this.overflowMenuDeferred=Q.defer();this.setState({overflowMenuOpenOn:target});return this.overflowMenuDeferred.promise};SplitTile.prototype.closeOverflowMenu=function(){var overflowMenuOpenOn=this.state.overflowMenuOpenOn;if(!overflowMenuOpenOn)return;this.setState({overflowMenuOpenOn:null})};SplitTile.prototype.removeSplit=function(split,e){var clicker=this.props.clicker;clicker.removeSplit(split);this.closeMenu();this.closeOverflowMenu();e.stopPropagation()};SplitTile.prototype.dragStart=function(dimension,split,splitIndex,e){var _a=this.props,essence=_a.essence,getUrlPrefix=_a.getUrlPrefix;var filter=essence.filter;var dataTransfer=e.dataTransfer;dataTransfer.effectAllowed="all";if(getUrlPrefix){var newUrl=getUrlPrefix()+essence.addSplit(models_1.SplitCombine.fromDimensionAndFilterAndMeasure(dimension,filter,essence.getSortMeasure()),models_1.VisStrategy.FairGame).getURL();dataTransfer.setData("text/url-list",newUrl);dataTransfer.setData("text/plain",newUrl)}drag_manager_1.DragManager.setDragSplit(split,"filter-tile");drag_manager_1.DragManager.setDragDimension(dimension,"filter-tile");beltful_1.DOMUtils.setDragGhost(dataTransfer,dimension.title);this.closeMenu();this.closeOverflowMenu()};SplitTile.prototype.calculateDragPosition=function(e){var essence=this.props.essence;var numItems=essence.splits.length();var rect=this.itemsDOM.getBoundingClientRect();var x=beltful_1.EventUtils.getXFromEvent(e);var offset=x-rect.left;return models_1.DragPosition.calculateFromOffset(offset,numItems,constants_1.CORE_ITEM_WIDTH,constants_1.CORE_ITEM_GAP)};SplitTile.prototype.canDrop=function(e){return Boolean(drag_manager_1.DragManager.getDragSplit()||drag_manager_1.DragManager.getDragDimension())};SplitTile.prototype.dragEnter=function(e){if(!this.canDrop(e))return;e.preventDefault();this.setState({dragPosition:this.calculateDragPosition(e)})};SplitTile.prototype.dragOver=function(e){if(!this.canDrop(e))return;e.dataTransfer.dropEffect="move";e.preventDefault();var dragPosition=this.calculateDragPosition(e);if(dragPosition.equals(this.state.dragPosition))return;this.setState({
dragPosition:dragPosition})};SplitTile.prototype.dragLeave=function(e){if(!this.canDrop(e))return;this.setState({dragPosition:null})};SplitTile.prototype.drop=function(e){if(!this.canDrop(e))return;e.preventDefault();var _a=this.props,clicker=_a.clicker,essence=_a.essence;var splits=essence.splits,filter=essence.filter;var newSplitCombine=null;var splitDimension=drag_manager_1.DragManager.getDragDimension();if(drag_manager_1.DragManager.getDragSplit()){newSplitCombine=drag_manager_1.DragManager.getDragSplit()}else if(splitDimension){newSplitCombine=models_1.SplitCombine.fromDimensionAndFilterAndMeasure(splitDimension,filter,essence.getSortMeasure())}if(newSplitCombine){var dragPosition=this.calculateDragPosition(e);var newSplits=null;if(dragPosition.isReplace()){newSplits=splits.replaceByIndex(dragPosition.replace,newSplitCombine)}else{newSplits=splits.insertByIndex(dragPosition.insert,newSplitCombine)}clicker.changeSplits(newSplits)}this.setState({dragPosition:null})};SplitTile.prototype.splitMenuRequest=function(dimension){var essence=this.props.essence;var splits=essence.splits;var split=splits.findSplitForDimension(dimension.name);if(!split)return;var targetRef=this.refs[dimension.name];if(!targetRef)return;var target=ReactDOM.findDOMNode(targetRef);if(!target)return;this.openMenu(dimension,split,target)};SplitTile.prototype.overflowButtonClick=function(){this.openOverflowMenu(this.overflowDOM)};SplitTile.prototype.renderMenu=function(){var _a=this.props,essence=_a.essence,clicker=_a.clicker;var _b=this.state,menuOpenOn=_b.menuOpenOn,menuDimension=_b.menuDimension,menuSplit=_b.menuSplit,menuInside=_b.menuInside;if(!menuDimension)return null;var onClose=this.closeMenu.bind(this);return React.createElement(split_menu_1.SplitMenu,{clicker:clicker,essence:essence,openOn:menuOpenOn,dimension:menuDimension,split:menuSplit,displayLimit:essence.getSplitForDimension(menuDimension.name).getLimitAction(),onClose:onClose,inside:menuInside})};SplitTile.prototype.renderOverflowMenu=function(splits){var _this=this;var overflowMenuOpenOn=this.state.overflowMenuOpenOn;if(!overflowMenuOpenOn)return null;var segmentHeight=29+constants_1.CORE_ITEM_GAP;var itemY=constants_1.CORE_ITEM_GAP;var filterItems=splits.map(function(split,i){var style=dom_1.transformStyle(0,itemY);itemY+=segmentHeight;return _this.renderSplit(split,style,i)});return React.createElement(bubble_menu_1.BubbleMenu,{className:"overflow-menu",id:this.overflowMenuId,direction:"down",stage:beltful_1.Stage.fromSize(208,itemY),fixedSize:true,openOn:overflowMenuOpenOn,onClose:this.closeOverflowMenu.bind(this)},filterItems)};SplitTile.prototype.renderOverflow=function(items,itemX){var _this=this;var essence=this.props.essence;var style=dom_1.transformStyle(itemX,0);return React.createElement("div",{className:classNames("overflow",{"all-continuous":items.every(function(item){return item.getDimension(essence.getDimensions()).isContinuous()})}),ref:function(e){return _this.overflowDOM=e},key:"overflow",style:style,onClick:this.overflowButtonClick.bind(this)},React.createElement("div",{className:"count"},"+"+items.length),this.renderOverflowMenu(items))};SplitTile.prototype.renderSplit=function(split,style,i){var essence=this.props.essence;var menuDimension=this.state.menuDimension;var dimensions=essence.getDimensions();var dimension=split.getDimension(dimensions);if(!dimension)throw new Error("dimension not found");var dimensionName=dimension.name;var classNames=[SPLIT_CLASS_NAME,"type-"+dimension.kind];if(dimension===menuDimension)classNames.push("selected");return React.createElement("div",{className:classNames.join(" "),key:split.toKey(),ref:dimensionName,draggable:true,onClick:this.selectDimensionSplit.bind(this,dimension,split),onDragStart:this.dragStart.bind(this,dimension,split,i),style:style},React.createElement("div",{className:"reading"},split.getTitle(dimensions)),React.createElement("div",{className:"remove",onClick:this.removeSplit.bind(this,split)},React.createElement(caladan_1.SvgIcon,{svg:little_pictures_1.X})))};SplitTile.prototype.render=function(){var _this=this;var essence=this.props.essence;var _a=this.state,dragPosition=_a.dragPosition,itemStage=_a.itemStage;var splits=essence.splits;var splitsArray=splits.toArray();var maxItems=itemStage?pill_tile_1.getMaxItems(itemStage.width,splits.toArray().length):20;var itemX=0;var splitItems=splitsArray.slice(0,maxItems).map(function(split,i){var style=dom_1.transformStyle(itemX,0);itemX+=pill_tile_1.SECTION_WIDTH;return _this.renderSplit(split,style,i)});var overflowItems=splitsArray.slice(maxItems);if(overflowItems.length>0){var overFlowStart=splitItems.length*pill_tile_1.SECTION_WIDTH;splitItems.push(this.renderOverflow(overflowItems,overFlowStart))}return React.createElement("div",{className:"split-tile",onDragEnter:this.dragEnter.bind(this)},React.createElement(caladan_1.GlobalEventListener,{resize:this.calculateSize.bind(this)}),React.createElement("div",{className:"title"},strings_1.STRINGS.split),React.createElement("div",{className:"items",ref:function(e){return _this.itemsDOM=e}},splitItems),dragPosition?React.createElement(fancy_drag_indicator_1.FancyDragIndicator,{dragPosition:dragPosition}):null,dragPosition?React.createElement("div",{className:"drag-mask",onDragOver:this.dragOver.bind(this),onDragLeave:this.dragLeave.bind(this),onDragExit:this.dragLeave.bind(this),onDrop:this.drop.bind(this)}):null,this.renderMenu())};return SplitTile}(React.Component);exports.SplitTile=SplitTile},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var React=__webpack_require__(1);var strings_1=__webpack_require__(15);var bubble_menu_1=__webpack_require__(34);__webpack_require__(439);var UserMenu=function(_super){tslib_1.__extends(UserMenu,_super);function UserMenu(){return _super.call(this)||this}UserMenu.prototype.logout=function(){var customization=this.props.customization;caladan_1.GateKeeper.checkAndCall(function(){return window.open(customization.getLogoutHref(),"_self")})};UserMenu.prototype.render=function(){var _a=this.props,openOn=_a.openOn,onClose=_a.onClose,user=_a.user,showSettings=_a.showSettings;if(!user)return null;var stage=beltful_1.Stage.fromSize(200,200);var settingsLink=React.createElement("div",null,React.createElement("div",{className:"separator"}),React.createElement("a",{href:"/settings"},React.createElement("li",{className:"simple-item"},strings_1.STRINGS.generalSettings)));return React.createElement(bubble_menu_1.BubbleMenu,{className:"user-menu",direction:"down",stage:stage,openOn:openOn,onClose:onClose},React.createElement("ul",{className:"bubble-list"},React.createElement("li",{className:"display-name"},user.getDisplayName()),React.createElement("li",{className:"logout"},React.createElement("div",{onClick:this.logout.bind(this)},strings_1.STRINGS.logout)),showSettings?settingsLink:null))};return UserMenu}(React.Component);exports.UserMenu=UserMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var dom_1=__webpack_require__(48);var formatter_1=__webpack_require__(124);__webpack_require__(440);var TICK_WIDTH=5;var TEXT_OFFSET=2;var VerticalAxis=function(_super){tslib_1.__extends(VerticalAxis,_super);function VerticalAxis(){return _super.call(this)||this}VerticalAxis.prototype.render=function(){var _a=this.props,stage=_a.stage,ticks=_a.ticks,scale=_a.scale,topLineExtend=_a.topLineExtend,hideZero=_a.hideZero;if(hideZero)ticks=ticks.filter(function(tick){return tick!==0});var formatter=formatter_1.formatterFromData(ticks,models_1.Measure.DEFAULT_FORMAT);var lines=ticks.map(function(tick){var y=dom_1.roundToHalfInteger(scale(tick));return React.createElement("line",{className:"tick",key:String(tick),x1:0,y1:y,x2:TICK_WIDTH,y2:y})});var labelX=TICK_WIDTH+TEXT_OFFSET;var dy="0.31em";var labels=ticks.map(function(tick){var y=scale(tick);return React.createElement("text",{className:"tick",key:String(tick),x:labelX,y:y,dy:dy},formatter(tick))});return React.createElement("g",{className:"vertical-axis",transform:stage.getTransform()},React.createElement("line",{className:"border",x1:.5,y1:-topLineExtend,x2:.5,y2:stage.height}),lines,labels)};return VerticalAxis}(React.Component);VerticalAxis.defaultProps={topLineExtend:0};exports.VerticalAxis=VerticalAxis},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var React=__webpack_require__(1);__webpack_require__(441);var VisMeasureLabel=function(_super){tslib_1.__extends(VisMeasureLabel,_super);function VisMeasureLabel(){return _super.call(this)||this}VisMeasureLabel.prototype.render=function(){var _a=this.props,measure=_a.measure,datum=_a.datum,onClick=_a.onClick;return React.createElement("div",{onClick:onClick,className:"vis-measure-label"},React.createElement("span",{className:"measure-title"},measure.title),React.createElement("span",{className:"colon"},": "),React.createElement("span",{className:"measure-value"},measure.formatFn(datum[measure.name])))};return VisMeasureLabel}(React.Component);exports.VisMeasureLabel=VisMeasureLabel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var icons_1=__webpack_require__(218);var dom_1=__webpack_require__(48);var vis_selector_menu_1=__webpack_require__(217);__webpack_require__(443);var VisSelector=function(_super){tslib_1.__extends(VisSelector,_super);function VisSelector(){var _this=_super.call(this)||this;_this.state={menuOpenOn:null};return _this}VisSelector.prototype.openMenu=function(e){var menuOpenOn=this.state.menuOpenOn;var target=dom_1.findParentWithClass(e.target,"vis-selector");if(menuOpenOn===target){this.closeMenu();return}this.setState({menuOpenOn:target})};VisSelector.prototype.closeMenu=function(){this.setState({menuOpenOn:null})};VisSelector.prototype.render=function(){var _a=this.props,clicker=_a.clicker,essence=_a.essence;var menuOpenOn=this.state.menuOpenOn;var visualization=essence.visualization;var menu=null;if(menuOpenOn){menu=React.createElement(vis_selector_menu_1.VisSelectorMenu,{clicker:clicker,essence:essence,openOn:menuOpenOn,onClose:this.closeMenu.bind(this)})}return React.createElement("div",{className:classNames("vis-selector",{active:!!menuOpenOn}),onClick:this.openMenu.bind(this)},React.createElement("div",{className:"vis-item selected"},React.createElement(caladan_1.SvgIcon,{svg:icons_1.VISUALIZATIONS[visualization.name]}),React.createElement("div",{className:"vis-title"},visualization.title)),menu)};return VisSelector}(React.Component);exports.VisSelector=VisSelector},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Q=__webpack_require__(49);var DEFAULT_DELAY=100;var LoadingMessageDelegate=function(){function LoadingMessageDelegate(component,delay){if(delay===void 0){delay=DEFAULT_DELAY}this.delay=DEFAULT_DELAY;this.component=component;this.delay=delay}LoadingMessageDelegate.prototype.setState=function(state,callback){return this.component.setState.call(this.component,state,callback)};LoadingMessageDelegate.prototype.start=function(message){var _this=this;this.timeoutId=window.setTimeout(function(){_this.timeoutId=undefined;_this.setState({isLoading:true,loadingMessage:message})},this.delay)};LoadingMessageDelegate.prototype.startNow=function(message){this.setState({isLoading:true,loadingMessage:message})};LoadingMessageDelegate.prototype.stop=function(){var deferred=Q.defer();if(this.timeoutId){window.clearTimeout(this.timeoutId);deferred.resolve()}else{this.setState({isLoading:false,loadingMessage:undefined},function(){return deferred.resolve()})}return deferred.promise};LoadingMessageDelegate.prototype.unmount=function(){if(this.timeoutId){window.clearTimeout(this.timeoutId)}};return LoadingMessageDelegate}();exports.LoadingMessageDelegate=LoadingMessageDelegate},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var React=__webpack_require__(1);var strings_1=__webpack_require__(15);__webpack_require__(444);var AboutModal=function(_super){tslib_1.__extends(AboutModal,_super);function AboutModal(){return _super.call(this)||this}AboutModal.prototype.render=function(){var _a=this.props,version=_a.version,onClose=_a.onClose;return React.createElement(caladan_1.Modal,{className:"about-modal",title:"About Pivot",onClose:onClose},React.createElement("div",{className:"p-group"},React.createElement("p",null,React.createElement("a",{href:"http://pivot.imply.io",target:"_blank"},"Pivot")," (version ",version,") is built and maintained with great care by ",React.createElement("a",{href:"https://imply.io/",target:"_blank"},"imply.io"),"."),React.createElement("p",null,"For feedback and support please visit the ",React.createElement("a",{href:"https://groups.google.com/forum/#!forum/imply-user-group",target:"_blank"},"Imply User Group"),".")),React.createElement("div",{className:"button-bar"},React.createElement(caladan_1.Button,{type:"primary",onClick:onClose,title:strings_1.STRINGS.close})))};return AboutModal}(React.Component);exports.AboutModal=AboutModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var little_pictures_1=__webpack_require__(11);var classNames=__webpack_require__(9);var immutable_class_1=__webpack_require__(2);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var formatter_1=__webpack_require__(124);__webpack_require__(445);var TITLES={"make-boolean":"Make Boolean Dimension","make-case":"Make Case Dimension","add-case":"Add to Case Dimension"};var DynamicDimensionModal=function(_super){tslib_1.__extends(DynamicDimensionModal,_super);function DynamicDimensionModal(){var _this=_super.call(this)||this;_this.state={};return _this}DynamicDimensionModal.prototype.getNewDimensionName=function(essence){var customDimensions=essence.getCustomDimensions();return beltful_1.StringUtils.generateUniqueName("custom_d",function(name){return!immutable_class_1.NamedArray.findByName(customDimensions,name)})};DynamicDimensionModal.prototype.componentDidMount=function(){var _a=this.props,type=_a.type,essence=_a.essence,timekeeper=_a.timekeeper;this.setState({filter:essence.getEffectiveFilter(timekeeper),dimensionToAddTo:type==="add-case"?essence.getCustomDimensions()[0]:null})};DynamicDimensionModal.prototype.removeClause=function(clause){var filter=this.state.filter;this.setState({filter:filter.remove(clause.dimension)})};DynamicDimensionModal.prototype.onSave=function(){var _a=this.props,type=_a.type,onClose=_a.onClose,clicker=_a.clicker,essence=_a.essence;var _b=this.state,filter=_b.filter,name=_b.name,label=_b.label,dimensionToAddTo=_b.dimensionToAddTo;var labelEx;if(type!=="make-boolean"){if(!label)return;if(label==="$self"){if(filter.clauses.length===1){labelEx=essence.getDimension(filter.clauses[0].dimension).expression}else{return}}else{labelEx=plywood_1.r(label)}}var filterEx=filter.toExpression(essence.getDimensions());var dim;switch(type){case"make-boolean":dim=new models_1.Dimension({name:this.getNewDimensionName(essence),title:name,formula:JSON.stringify(filterEx),type:"BOOLEAN"});break;case"make-case":dim=new models_1.Dimension({name:this.getNewDimensionName(essence),title:name,formula:JSON.stringify(filterEx.then(labelEx).fallback("Other")),type:"STRING"});break;case"add-case":var extraDimEx=dimensionToAddTo.expression.operand.fallback(filterEx.then(labelEx)).fallback("Other");dim=dimensionToAddTo.changeFormula(JSON.stringify(extraDimEx));break}clicker.changeCustomDimensions(immutable_class_1.NamedArray.overrideByName(essence.getCustomDimensions(),dim));onClose()};DynamicDimensionModal.prototype.renderClauses=function(){var _this=this;var essence=this.props.essence;var filter=this.state.filter;var timezone=essence.timezone;if(!filter)return[];if(filter.clauses.length===1){var clause=filter.clauses[0];var dimension=essence.getDimension(clause.dimension);var _a=formatter_1.getFormattedClause(dimension,clause,timezone),title=_a.title,values=_a.values;return[React.createElement("div",{className:classNames("clause deaf","type-"+dimension.kind,clause&&clause.getExclude()?"excluded":"included")},React.createElement("div",{className:"reading"},React.createElement("span",{className:"dimension-title"},title),React.createElement("span",{className:"values"},values)))]}return filter.clauses.map(function(clause,i){var dimension=essence.getDimension(clause.dimension);var _a=formatter_1.getFormattedClause(dimension,clause,timezone),title=_a.title,values=_a.values;return React.createElement("div",{className:classNames("clause","type-"+dimension.kind,clause&&clause.getExclude()?"excluded":"included"),onClick:_this.removeClause.bind(_this,clause)},React.createElement("div",{className:"remove"},React.createElement(caladan_1.SvgIcon,{svg:little_pictures_1.X})),React.createElement("div",{className:"reading"},React.createElement("span",{className:"dimension-title"},title),React.createElement("span",{className:"values"},values)))})};DynamicDimensionModal.prototype.renderRightSide=function(){var _this=this;var _a=this.props,type=_a.type,essence=_a.essence;var _b=this.state,name=_b.name,label=_b.label,dimensionToAddTo=_b.dimensionToAddTo;var caseDimensions=essence.getCustomDimensions().filter(function(d){return d.expression.op==="fallback"});var elements=[];if(dimensionToAddTo){var select=function(d){return _this.setState({dimensionToAddTo:d})};var DimensionDropDown=caladan_1.Dropdown.specialize();elements.push(caladan_1.FormLabel.dumbLabel("Dimension"),React.createElement(DimensionDropDown,{items:caseDimensions,onSelect:select,renderItem:function(d){return d?d.title:"-"},renderSelectedItem:function(d){return d?d.title:"-"},selectedItem:dimensionToAddTo}))}else{var onNameChange=function(e){_this.setState({name:e.target.value})};elements.push(caladan_1.FormLabel.dumbLabel("New dimension name"),React.createElement("input",{type:"text",value:name,onChange:onNameChange}))}if(type!=="make-boolean"){var onLabelChange=function(e){_this.setState({label:e.target.value})};elements.push(caladan_1.FormLabel.dumbLabel("Case label"),React.createElement("input",{type:"text",value:label,onChange:onLabelChange}))}return elements};DynamicDimensionModal.prototype.renderButtons=function(){var onClose=this.props.onClose;return React.createElement("div",{className:"button-bar"},React.createElement(caladan_1.Button,{className:"cancel",title:"Cancel",type:"secondary",onClick:onClose}),React.createElement(caladan_1.Button,{className:"save",title:"OK",type:"primary",onClick:this.onSave.bind(this)}))};DynamicDimensionModal.prototype.render=function(){var _a=this.props,onClose=_a.onClose,type=_a.type;return React.createElement(caladan_1.Modal,{className:"dynamic-dimension-modal",title:TITLES[type],onClose:onClose,onEnter:this.onSave.bind(this)},React.createElement("div",{className:"grid-row"},React.createElement("div",{className:"grid-col-50 vertical top h-padded clauses"},caladan_1.FormLabel.dumbLabel("Filters"),this.renderClauses()),React.createElement("div",{className:"grid-col-50 top h-padded form"},this.renderRightSide())),this.renderButtons())};return DynamicDimensionModal}(React.Component);exports.DynamicDimensionModal=DynamicDimensionModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var beltful_1=__webpack_require__(5);var ImmutableUtils=function(){function ImmutableUtils(){}ImmutableUtils.setProperty=function(instance,path,newValue){var bits=path.split(".");var lastObject=newValue;var currentObject;var getLastObject=function(){var o=instance;for(var i=0;i<bits.length;i++){o=o[bits[i]]}return o};while(bits.length){var bit=bits.pop();currentObject=getLastObject();if(currentObject.change instanceof Function){lastObject=currentObject.change(bit,lastObject)}else{var message="Can't find `change()` method on "+currentObject.constructor.name;console.error(message);throw new Error(message)}}return lastObject};ImmutableUtils.getProperty=function(instance,path){var value=instance;var bits=path.split(".");var bit;while(bit=bits.shift()){var specializedGetterName="get"+beltful_1.StringUtils.firstUp(bit);var specializedGetter=value[specializedGetterName];value=specializedGetter?specializedGetter.call(value):value.get?value.get(bit):value[bit]}return value};return ImmutableUtils}();exports.ImmutableUtils=ImmutableUtils},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var d3_dsv_1=__webpack_require__(447);function parseCSV(text){return d3_dsv_1.csvParse(text)}exports.parseCSV=parseCSV;function parseTSV(text){return d3_dsv_1.tsvParse(text)}exports.parseTSV=parseTSV;function parseJSON(text){text=text.trim();var firstChar=text[0];if(firstChar[0]==="["){try{return JSON.parse(text)}catch(e){throw new Error("could not parse")}}else if(firstChar[0]==="{"){return text.split(/\r?\n/).map(function(line,i){try{return JSON.parse(line)}catch(e){throw new Error("problem in line: "+i+": '"+line+"'")}})}else{throw new Error("Unsupported start, starts with '"+firstChar[0]+"'")}}exports.parseJSON=parseJSON;function parseData(text,type){type=type.replace(".","");switch(type){case"csv":case"text/csv":return parseCSV(text);case"tsv":case"text/tsv":case"text/tab-separated-values":return parseTSV(text);case"json":case"application/json":return parseJSON(text);default:throw new Error("Unsupported file type '"+type+"'")}}exports.parseData=parseData},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,"",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".bucket-marks{pointer-events:none}.bucket-marks line{pointer-events:none;stroke:#ccc}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".chart-line{pointer-events:none}.chart-line .area{stroke:none;fill:rgba(30,163,230,0.14);fill-opacity:.9}.chart-line .line{fill:none;stroke:#1ea3e6;stroke-width:1.6px}.chart-line .singleton{fill:#1ea3e6;stroke:none}.chart-line .hover{fill:#fff;stroke:#1ea3e6;stroke-width:2}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".cluster-source-picker input.source{margin-bottom:0px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".color-segment-bubble{background:#fff;border-radius:2px;box-shadow:0 3px 10px 0 rgba(0,0,0,0.26),0 0 3px 0 rgba(0,0,0,0.16)}.color-segment-bubble{background:rgba(255,255,255,0.9);position:absolute;width:200px;padding:8px}.color-segment-bubble .bucket{color:#a6a6a6;margin-bottom:6px}.color-segment-bubble .color .color-swab{position:absolute;top:1px;left:0;width:15px;height:15px;border-radius:2px}.color-segment-bubble .color .color-name{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;display:inline-block;margin-left:22px;line-height:18px;width:108px}.color-segment-bubble .color .color-value{position:absolute;top:0;bottom:0;right:0;width:60px;line-height:18px;text-align:right}.color-segment-bubble .segment-action-buttons{margin-top:7px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".date-range-input .input-field{border:1px solid #d4d4d4;border-radius:2px;box-shadow:inset 0 1px 1px rgba(0,0,0,0.13);padding-left:6px;padding-right:6px;width:100%;height:30px}.date-range-input .input-field:hover{border-color:#b8b8b8}.date-range-input .input-field:focus{border-color:#1ea3e6}.date-range-input .error.input-field{border-color:#e24c4c}.date-range-input .disabled.input-field{pointer-events:none;background:#f2f2f2}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".date-range-picker .side-by-side{display:-webkit-box;display:-ms-flexbox;display:flex}.date-range-picker .side-by-side .date-range-input{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1;-ms-flex-preferred-size:0;flex-basis:0}.date-range-picker .side-by-side :not(:last-child){margin-right:8px}.date-range-picker .calendar{padding-left:4px;padding-right:4px}.date-range-picker .calendar .calendar-nav{margin-top:18px;margin-bottom:12px;text-align:center;line-height:23px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.date-range-picker .calendar .calendar-nav .caret{position:absolute;top:0;padding:3px 3px;cursor:pointer}.date-range-picker .calendar .calendar-nav .caret svg{width:19px}.date-range-picker .calendar .calendar-nav .caret svg path{fill:#777}.date-range-picker .calendar .calendar-nav .caret:hover svg path{fill:#555}.date-range-picker .calendar .calendar-nav .caret.left{left:0}.date-range-picker .calendar .calendar-nav .caret.right{right:0}.date-range-picker .calendar .week{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%}.date-range-picker .calendar .week .day{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;text-align:center;height:26px;line-height:26px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.date-range-picker .calendar .week .day.label{color:#bbb;pointer-events:none}.date-range-picker .calendar .week .day.value.selectable,.date-range-picker .calendar .week .day.value.selected{background:rgba(30,163,230,0.26)}.date-range-picker .calendar .week .day.value.selectable.past:not(.selected-edge),.date-range-picker .calendar .week .day.value.selectable.future:not(.selected-edge),.date-range-picker .calendar .week .day.value.selected.past:not(.selected-edge),.date-range-picker .calendar .week .day.value.selected.future:not(.selected-edge){color:#87acbf}.date-range-picker .calendar .week .day.value:hover:not(.selectable)::after{position:absolute;top:0;bottom:0;left:0;right:0;content:'';pointer-events:none;background:rgba(0,0,0,0.06)}.date-range-picker .calendar .week .day.value:hover:not(.selectable).beyond-max-range::after{background:rgba(0,0,0,0.1)}.date-range-picker .calendar .week .day.value.beyond-max-range::after{position:absolute;top:0;bottom:0;left:0;right:0;content:'';pointer-events:none;background:rgba(0,0,0,0.05)}.date-range-picker .calendar .week .day.value.past,.date-range-picker .calendar .week .day.value.future{color:#bbb}.date-range-picker .calendar .week .day.value.selected-edge{background:#1ea3e6;color:#fff}.date-range-picker .calendar .week .day span.space{color:transparent}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".description{cursor:pointer}.description svg{pointer-events:none;width:19px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".dimension-actions-menu{padding:8px}.dimension-actions-menu .action{display:inline-block;width:50px;height:50px;cursor:pointer;text-align:center;color:#1ea3e6;font-size:12px}.dimension-actions-menu .action svg{width:18px;padding-top:7px;padding-bottom:4px}.dimension-actions-menu .action svg path{fill:#1ea3e6}.dimension-actions-menu .action:hover::before{content:'';position:absolute;top:3px;bottom:3px;left:3px;right:3px;background:#e3f4fc}.dimension-actions-menu .preview{position:absolute;top:0;bottom:0;left:0;right:0;top:108px;border-top:1px solid #e6e6e6;height:30px;color:#999;text-align:center}.dimension-actions-menu .preview .preview-text{top:9px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".dimension-list-tile{overflow:hidden}.dimension-list-tile .items{position:absolute;top:36px;bottom:0;width:100%;overflow:auto;color:#000}.dimension-list-tile .items .dimension,.dimension-list-tile .items .dimension-group .group-header{transition:height 0.2s;height:27px;background:#fff;cursor:pointer;overflow:hidden}.dimension-list-tile .items .dimension:last-child,.dimension-list-tile .items .dimension-group .group-header:last-child{margin-bottom:12px}.dimension-list-tile .items .dimension.highlight,.dimension-list-tile .items .dimension-group .group-header.highlight{background:#e3f4fc}.dimension-list-tile .items .dimension.selected,.dimension-list-tile .items .dimension-group .group-header.selected{background:#c3e7f8}.dimension-list-tile .items .dimension>*,.dimension-list-tile .items .dimension-group .group-header>*{top:4px}.dimension-list-tile .items .dimension .icon,.dimension-list-tile .items .dimension-group .group-header .icon{position:absolute;width:19px;height:19px;padding:0;left:10px}.dimension-list-tile .items .dimension .icon svg,.dimension-list-tile .items .dimension-group .group-header .icon svg{width:19px}.dimension-list-tile .items .dimension .icon svg path,.dimension-list-tile .items .dimension-group .group-header .icon svg path{fill:rgba(0,0,0,0.3)}.dimension-list-tile .items .dimension .item-title,.dimension-list-tile .items .dimension-group .group-header .item-title{position:absolute;left:35px;right:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:20px}.dimension-list-tile .items .dimension .item-title .label,.dimension-list-tile .items .dimension-group .group-header .item-title .label{width:100%;overflow-x:hidden;text-overflow:ellipsis;height:20px;line-height:20px}.dimension-list-tile .items .dimension-group{height:initial}.dimension-list-tile .items .dimension-group .dimension .icon{left:30px}.dimension-list-tile .items .dimension-group .dimension .item-title{left:55px}.dimension-list-tile .items .dimension-group .dimension:first-child{margin-top:0px}.dimension-list-tile .items .dimension-group .dimension:last-child{margin-bottom:0px}.dimension-list-tile .items .dimension-group.closed .group-icon{-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg)}.dimension-list-tile .items .dimension-group.closed .group-items .dimension{height:0px;overflow:hidden}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined)
;exports.push([module.i,".dimension-tile{min-height:94px;overflow-y:hidden}.dimension-tile.has-folder .rows{bottom:32px}.dimension-tile .folder{position:absolute;bottom:0;left:0;right:0;height:32px;cursor:pointer;color:#1ea3e6;padding-left:12px;padding-top:9px;z-index:2;border-top:1px solid #e6e6e6}.dimension-tile .folder svg{width:11px;margin-right:6px;margin-top:2px}.dimension-tile .folder svg path{fill:#1ea3e6}.dimension-tile .folder.folded svg{margin-top:1px;-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.dimension-tile .folder:hover{background:#e3f4fc}.dimension-tile .row{height:25px;cursor:pointer}.dimension-tile .row:hover{background:#e3f4fc}.dimension-tile .row:last-child{margin-bottom:12px}.dimension-tile .row.not-selected{color:#a6a6a6}.dimension-tile .row .highlight-controls{position:absolute;top:-29px;right:1px;z-index:4}.dimension-tile .row:nth-child(1) .highlight-controls,.dimension-tile .row:nth-child(2) .highlight-controls{top:auto;bottom:-34px}.dimension-tile .segment-value{position:absolute;top:0;bottom:0;left:0;right:80px;left:14px;overflow:hidden;white-space:nowrap}.dimension-tile .segment-value .checkbox{margin-top:1px}.dimension-tile .segment-value .label{display:inline-block;vertical-align:top;padding-top:6px}.dimension-tile .measure-value{position:absolute;top:0;bottom:0;right:0;width:80px;text-align:right;padding-top:6px;padding-right:14px;white-space:nowrap}.dimension-tile .loader,.dimension-tile .query-error{position:absolute;top:37px;bottom:0;left:0;right:0}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".drop-indicator .white-out{position:absolute;top:8px;bottom:8px;left:8px;right:8px;background:rgba(102,102,102,0.14);border-radius:4px}.drop-indicator .action{position:absolute;display:inline-block;padding:7px;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%);background:#fff;border-radius:4px}.drop-indicator .action svg{width:30px}.drop-indicator .action path{fill:#666}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".fancy-drag-indicator{pointer-events:none}.fancy-drag-indicator .drag-ghost-element{position:absolute;top:4px;bottom:4px;width:192px;background:rgba(102,102,102,0.14);border-radius:4px}.fancy-drag-indicator .drag-ghost-arrow{position:absolute;top:-12px;width:16px;margin-left:-8px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".filter-menu .button-bar{margin-top:12px}.filter-menu .button-bar button{min-width:70px}.filter-menu .button-bar button:not(:last-child){margin-right:6px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".filter-options-dropdown .selected-item{padding:8px 16px 0 4px}.filter-options-dropdown .selected-item .icon{padding:0;bottom:4px}.filter-options-dropdown .selected-item .caret-icon{right:6px}.filter-options-dropdown .dropdown-menu{width:180px}.filter-options-dropdown .dropdown-menu .filter-option{display:block}.filter-options-dropdown .dropdown-menu .filter-option .option-label{display:inline-block;padding:2px 10px}.filter-options-dropdown svg.icon{display:inline-block;padding:5px 0;cursor:pointer;width:19px}.filter-options-dropdown svg.icon path{fill:#888}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".filter-tile .overflow,.overflow-menu .split,.overflow-menu .filter,.filter-tile .items .filter{padding:0 0 0 9px;background:#b6e3fc;border:1px solid transparent;border-radius:4px;cursor:pointer;overflow:hidden;transition:-webkit-transform 0.1s ease-in-out;transition:transform 0.1s ease-in-out;transition:transform 0.1s ease-in-out, -webkit-transform 0.1s ease-in-out;width:192px}.filter-tile .overflow .reading,.overflow-menu .split .reading,.overflow-menu .filter .reading,.filter-tile .items .filter .reading{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;pointer-events:none;white-space:nowrap;margin-right:20px;height:16px;margin-top:7px}.filter-tile .overflow .remove,.overflow-menu .split .remove,.overflow-menu .filter .remove,.filter-tile .items .filter .remove{position:absolute;top:0;bottom:0;right:0;width:27px;text-align:center;padding-top:9px;cursor:pointer}.filter-tile .overflow .remove svg,.overflow-menu .split .remove svg,.overflow-menu .filter .remove svg,.filter-tile .items .filter .remove svg{width:10px}.filter-tile .overflow .remove path,.overflow-menu .split .remove path,.overflow-menu .filter .remove path,.filter-tile .items .filter .remove path{fill:rgba(0,0,0,0.2)}.filter-tile .overflow .remove:hover path,.overflow-menu .split .remove:hover path,.overflow-menu .filter .remove:hover path,.filter-tile .items .filter .remove:hover path{fill:rgba(0,0,0,0.5)}.filter-tile .overflow:hover,.overflow-menu .split:hover,.overflow-menu .filter:hover,.filter-tile .items .filter:hover,.filter-tile .selected.overflow,.overflow-menu .selected.split,.overflow-menu .selected.filter,.filter-tile .items .selected.filter{background-color:#98d8fb}.filter-tile .type-time.overflow,.overflow-menu .type-time.split,.overflow-menu .type-time.filter,.filter-tile .items .type-time.filter,.filter-tile .type-number.overflow,.overflow-menu .type-number.split,.overflow-menu .type-number.filter,.filter-tile .items .type-number.filter{background:#c2eac4}.filter-tile .type-time.overflow:hover,.overflow-menu .type-time.split:hover,.overflow-menu .type-time.filter:hover,.filter-tile .items .type-time.filter:hover,.filter-tile .type-time.selected.overflow,.overflow-menu .type-time.selected.split,.overflow-menu .type-time.selected.filter,.filter-tile .items .type-time.selected.filter,.filter-tile .type-number.overflow:hover,.overflow-menu .type-number.split:hover,.overflow-menu .type-number.filter:hover,.filter-tile .items .type-number.filter:hover,.filter-tile .type-number.selected.overflow,.overflow-menu .type-number.selected.split,.overflow-menu .type-number.selected.filter,.filter-tile .items .type-number.selected.filter{background-color:#abe2ad}.filter-tile .overflow,.filter-tile .items .filter{top:4px;bottom:4px}.filter-tile{background:#fff}.filter-tile .title{position:absolute;top:0;bottom:0;left:0;width:64px;padding:12px 0 0 14px;font-size:12px;text-transform:uppercase;color:#999}.filter-tile .overflow{position:absolute;left:0;padding:0 10px;width:40px}.filter-tile .all-continuous.overflow{background:#c2eac4}.filter-tile .overflow .count{pointer-events:none;white-space:nowrap;height:16px;margin-top:7px}.overflow-menu .split,.overflow-menu .filter{position:absolute;left:8px;top:0;height:29px}.overflow-menu .split.from-highlight,.overflow-menu .filter.from-highlight{border:1px dashed #168bc5;background:rgba(182,227,252,0.5)}.overflow-menu .split.from-highlight.type-time,.overflow-menu .split.from-highlight.type-number,.overflow-menu .filter.from-highlight.type-time,.overflow-menu .filter.from-highlight.type-number{border:1px dashed #449c53;background:rgba(194,234,196,0.5)}.filter-tile .drag-mask{position:absolute;top:0;bottom:0;left:0;right:0}.filter-tile .items{position:absolute;top:0;bottom:0;left:64px;right:0;transition:height 0.1s ease-in-out;overflow:hidden}.filter-tile .items .filter{position:absolute;left:0}.filter-tile .items .filter.from-highlight{border:1px dashed #168bc5;background:rgba(182,227,252,0.5)}.filter-tile .items .filter.from-highlight.type-time,.filter-tile .items .filter.from-highlight.type-number{border:1px dashed #449c53;background:rgba(194,234,196,0.5)}.filter-tile .items .filter .dimension-title{margin-right:5px}.filter-tile .items .filter.excluded .values{text-decoration:line-through}.filter-tile .fancy-drag-indicator{position:absolute;top:0;bottom:0;left:64px;right:0}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".formula-input .filter-input input.filter-value{border:1px solid #d4d4d4;border-radius:2px;box-shadow:inset 0 1px 1px rgba(0,0,0,0.13);padding-left:6px;padding-right:6px;width:100%;height:30px}.formula-input .filter-input input.filter-value:hover{border-color:#b8b8b8}.formula-input .filter-input input.filter-value:focus{border-color:#1ea3e6}.formula-input .filter-input input.error.filter-value{border-color:#e24c4c}.formula-input .filter-input input.disabled.filter-value{pointer-events:none;background:#f2f2f2}.formula-input .dropdown-menu{max-height:230px;overflow:auto}.formula-input.placeholder{height:163px;padding:25px 20px 0px 20px;border:1px solid #e6e6e6}.formula-input.placeholder .title{text-align:center;margin-bottom:10px;font-style:italic;line-height:20px;color:#999}.formula-input.placeholder .actions .action{text-align:center;padding:5px;color:#1ea3e6}.formula-input.placeholder .actions .action span{cursor:pointer}.formula-input.placeholder .actions .action span:hover{border-bottom:1px dashed}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".grid-lines line{pointer-events:none;stroke:#ebebeb}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".highlight-string .bold{border-bottom:1px solid #000}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,"",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".line-chart-axis{position:absolute;top:0;bottom:0;left:0;right:0}.line-chart-axis line{pointer-events:none}.line-chart-axis line{stroke:#ccc}.line-chart-axis text{text-anchor:middle;font-size:12px;fill:#666}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".line-loader{position:absolute;top:0;bottom:0;left:0;right:0}.line-loader svg{position:absolute;top:50%;left:50%;width:25px;height:15px;margin-left:-12.5px;margin-top:-7.5px;-webkit-animation-name:loader-appears;animation-name:loader-appears;-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-timing-function:linear;animation-timing-function:linear}.line-loader svg circle{-webkit-animation-name:loader-circle;animation-name:loader-circle;-webkit-animation-duration:0.5s;animation-duration:0.5s;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-direction:alternate;animation-direction:alternate}@-webkit-keyframes loader-circle{0%{fill-opacity:1}100%{fill-opacity:0.2}}@keyframes loader-circle{0%{fill-opacity:1}100%{fill-opacity:0.2}}@-webkit-keyframes loader-appears{0%{opacity:0}100%{opacity:1}}@keyframes loader-appears{0%{opacity:0}100%{opacity:1}}.line-loader svg circle:nth-child(1){-webkit-animation-delay:-400s;animation-delay:-400s}.line-loader svg circle:nth-child(2){-webkit-animation-delay:-300ms;animation-delay:-300ms}.line-loader svg circle:nth-child(3){-webkit-animation-delay:-100ms;animation-delay:-100ms}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".manual-fallback{text-align:center;padding:100px 30px}.manual-fallback .message{font-size:20px;color:#666}.manual-fallback ul{margin-top:24px}.manual-fallback li{font-size:14px;cursor:pointer;color:#1ea3e6;margin-bottom:10px}.manual-fallback li:hover{text-decoration:underline}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".measures-tile .measure{transition:height 0.2s;padding-left:14px;height:27px;cursor:pointer;overflow:hidden;white-space:nowrap}.measures-tile .measure:last-child{margin-bottom:12px}.measures-tile .measure .label{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;position:absolute;top:7px;bottom:0;left:37px;right:10px}.measures-tile .measure:hover{background:#e3f4fc}.measures-tile .checkbox{margin-top:2px}.measures-tile .checkbox.selected .checkbox-body{background:rgba(0,0,0,0.45)}.measures-tile .measure-group{height:initial}.measures-tile .measure-group>.grid-row{padding-left:12px;cursor:pointer}.measures-tile .measure-group .group-icon{transition:-webkit-transform 0.2s;transition:transform 0.2s;transition:transform 0.2s, -webkit-transform 0.2s;width:19px;height:19px;padding:0}.measures-tile .measure-group .group-icon svg{width:19px}.measures-tile .measure-group .group-icon svg path{fill:rgba(0,0,0,0.3)}.measures-tile .measure-group .group-title{padding:5px 0px 5px 5px}.measures-tile .measure-group .measure{padding-left:30px}.measures-tile .measure-group .measure:first-child{margin-top:0px}.measures-tile .measure-group .measure:last-child{margin-bottom:0px}.measures-tile .measure-group .measure .label{left:57px}.measures-tile .measure-group.closed .group-icon{-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg)}.measures-tile .measure-group.closed .group-items .measure{height:0px;overflow:hidden}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".nav-list{border-top:1px solid #ddd}.nav-list:first-child{border-top:0}.nav-list svg{height:19px;width:19px}.nav-list .group-title{padding-left:18px;text-transform:uppercase;font-size:12px;padding-top:15px;padding-bottom:12px;color:#999}.nav-list .group-title .icons{position:absolute;padding-right:18px;top:1px;right:0;cursor:pointer}.nav-list .group-title .icons .icon{display:inline-block;padding:10px 1px}.nav-list .group-title .icons .icon:not(:first-child){margin-left:4px}.nav-list .group-title .icons .icon:hover svg path{fill:#888}.nav-list .items .item{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:34px;padding-left:18px;padding-right:18px;cursor:pointer}.nav-list .items .item .icon{display:inline-block;top:7px;left:0;margin-right:9px}.nav-list .items .item:hover{background:rgba(30,163,230,0.12)}.nav-list .items .selected{background:rgba(30,163,230,0.14)}.nav-list .items .selected .icon svg path{fill:#1ea3e6}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".number-filter-menu .side-by-side{display:-webkit-box;display:-ms-flexbox;display:flex}.number-filter-menu .side-by-side>*{margin-right:5px}.number-filter-menu .side-by-side>*:last-child{margin-right:0}.number-filter-menu .input-top-label{text-transform:uppercase;font-size:12px;color:#a6a6a6;margin-bottom:5px}.number-filter-menu input{border:1px solid #d4d4d4;border-radius:2px;box-shadow:inset 0 1px 1px rgba(0,0,0,0.13);padding-left:6px;padding-right:6px;width:100%;height:30px}.number-filter-menu input:hover{border-color:#b8b8b8}.number-filter-menu input:focus{border-color:#1ea3e6}.number-filter-menu input.error{border-color:#e24c4c}.number-filter-menu input.disabled{pointer-events:none;background:#f2f2f2}.number-filter-menu .group{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.number-filter-menu input.gray{color:#ccc}.number-filter-menu input,.number-filter-menu .filter-options-dropdown{margin-top:6px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".number-range-picker{margin:10px 0;height:25px}.number-range-picker .range-bar{position:absolute;top:6px;height:6px}.number-range-picker .range-bar.full{background-color:#dedede;left:8px;right:8px}.number-range-picker .range-bar.selected{background-color:#1ea3e6}.number-range-picker.inverted .range-bar.full{background-color:#1ea3e6}.number-range-picker.inverted .range-bar.selected{background-color:#dedede}.number-range-picker .range-handle{position:absolute}.number-range-picker .loader,.number-range-picker .query-error{position:absolute;top:0;bottom:0;left:0;right:0}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".options-menu .update-info{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;height:30px;line-height:28px;background:#f2f2f2;border-radius:2px;color:#909090;text-align:center;padding-left:8px;padding-right:8px}.options-menu .timezone-dropdown{margin-bottom:15px}.options-menu .refresh-controls{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:100%}.options-menu .refresh-controls .dropdown{-webkit-box-flex:2;-ms-flex:2;flex:2;margin-right:5px}.options-menu .refresh-controls .button{top:17px;width:30px}.options-menu .update-info{-webkit-box-flex:1;-ms-flex:1;flex:1;margin-top:8px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".pinboard-measure-tile .dropdown .selected-item:hover{background:#fff;border:1px solid #d1d1d1;border-radius:2px;cursor:pointer;box-shadow:0 1px 1px 0 rgba(0,0,0,0.1)}.pinboard-measure-tile .dropdown .selected-item:hover{border-color:#bababa}.pinboard-measure-tile{background:#fff}.pinboard-measure-tile{height:36px;margin-bottom:1px}.pinboard-measure-tile .title{margin-left:14px;margin-top:12px;font-size:12px;color:#999;text-transform:uppercase}.pinboard-measure-tile .dropdown{display:inline-block;position:absolute;top:5px;right:5px;font-size:12px;border-radius:2px}.pinboard-measure-tile .dropdown .selected-item{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;line-height:19px;padding:2px 22px 2px 7px;border:1px solid transparent;color:#999;max-width:104px;height:auto;box-shadow:none}.pinboard-measure-tile .dropdown .selected-item .caret-icon{position:absolute;right:7px;bottom:6px}.pinboard-measure-tile .dropdown .selected-item .caret-icon path{fill:#bababa}.pinboard-measure-tile .dropdown .selected-item:hover{color:#000}.pinboard-measure-tile .dropdown .selected-item:hover .caret-icon path{fill:#999}.pinboard-measure-tile .dropdown .dropdown-menu{margin-top:1px;right:0;width:190px;max-height:600px;overflow-y:auto}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".pinboard-panel .placeholder{background:#fff}.pinboard-panel{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:10px 10px 0 10px}@media only screen and (max-width: 1080px){.pinboard-panel{padding:0 0 0 1px;font-size:0.9em}}.pinboard-panel .dimension-tile,.pinboard-panel .drop-indicator-tile{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;margin-bottom:1px}.pinboard-panel .dimension-tile.has-colors{margin-bottom:5px}.pinboard-panel .drop-indicator-tile{pointer-events:none}.pinboard-panel .drop-indicator-tile::after{position:absolute;top:4px;bottom:4px;left:0;right:0;content:'';background:rgba(102,102,102,0.14);border-radius:2px}.pinboard-panel .placeholder{border-radius:0 0 2px 2px;max-height:280px;min-height:150px;-webkit-box-flex:1;-ms-flex:1;flex:1;pointer-events:none}.pinboard-panel .placeholder::after{position:absolute;top:10px;bottom:10px;left:10px;right:10px;content:'';border-radius:5px}.pinboard-panel .placeholder svg{position:absolute;width:40px;left:50%;top:50%;margin-left:-20px;margin-top:-63px}.pinboard-panel .placeholder svg path{fill:#d4d4d4}.pinboard-panel .placeholder .placeholder-message{position:absolute;top:50%;width:100%;height:16px;margin-top:-15px;padding-left:30px;padding-right:30px;font-style:italic;line-height:20px;color:#a6a6a6;text-align:center}.pinboard-panel .drag-mask{position:absolute;top:0;bottom:0;left:0;right:0}.pinboard-panel .checkbox.selected .checkbox-body{background:rgba(0,0,0,0.45)}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".string-filter-menu .row.no-select{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.string-filter-menu .matching-values-message{padding:4px 10px;color:#999}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".query-error{text-align:center}.query-error .whiteout{position:absolute;top:0;bottom:0;left:0;right:0;background:#fff;opacity:0.5}.query-error .error-container{position:absolute;top:50%;left:50%;width:180px;height:50px;margin-left:-90px;margin-top:-25px;color:red;text-align:left}.query-error .error-container .error{font-size:14px}.query-error .error-container .message{margin-top:5px;font-size:13px;overflow:hidden}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".range-handle{width:16px;height:16px;background:#1ea3e6;border-radius:50%;border:2px solid #1ea3e6;z-index:2}.range-handle.empty{background:#fff}.range-handle.beyond::before{border-style:solid;border-color:#ededed;border-width:2.5px 2.5px 0 0;content:'';display:inline-block;height:4px;position:relative;top:2.5px;vertical-align:top;width:4px}.range-handle.beyond.min::before{top:3px;left:4px;-webkit-transform:rotate(-135deg);-ms-transform:rotate(-135deg);transform:rotate(-135deg)}.range-handle.beyond.max::before{left:2px;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".searchable-tile .search-box .clearable-input{background:#fff;border:1px solid #d1d1d1;border-radius:2px;box-shadow:inset 0 1px 1px 0 rgba(0,0,0,0.1)}.searchable-tile{background:#fff}.searchable-tile::after{position:absolute;top:0;bottom:0;left:0;right:0;content:'';pointer-events:none;box-shadow:inset 0 -20px 10px -10px #fff;border-radius:2px}.searchable-tile .rows{position:absolute;top:36px;bottom:0;left:0;right:0;overflow:auto}.searchable-tile .search-box{position:absolute;top:36px;left:0;right:0;height:26px;padding:0 14px;margin-bottom:4px}.searchable-tile .search-box .clearable-input{width:100%;height:26px;padding-left:6px}.searchable-tile .search-box .clearable-input .clear{top:3px}.searchable-tile.has-search .rows{top:65px}.searchable-tile.has-search .items{top:65px}.searchable-tile .message{padding:4px 10px;color:#999;font-style:italic}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".segment-action-buttons{white-space:nowrap}.segment-action-buttons .button{margin-right:5px}.segment-action-buttons .button.main{width:65px}.segment-action-buttons .button:last-child{margin-right:0}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".segment-bubble{background:#fff;border-radius:2px;box-shadow:0 3px 10px 0 rgba(0,0,0,0.26),0 0 3px 0 rgba(0,0,0,0.16)}.segment-bubble{position:absolute;background:rgba(255,255,255,0.9);padding:10px;text-align:center;-webkit-transform:translate(-50%, -100%);-ms-transform:translate(-50%, -100%);transform:translate(-50%, -100%);max-width:400px}.segment-bubble .text .segment{color:#999;line-height:17px;display:block;padding-bottom:2px;overflow:hidden;word-wrap:break-word}.segment-bubble .text .measure-value{white-space:nowrap}.segment-bubble .segment-action-buttons:nth-child(n+2){margin-top:7px}.segment-bubble .shpitz{left:50%;top:100%}.segment-bubble.tiny{cursor:pointer}.segment-bubble.tiny .text{white-space:nowrap}.segment-bubble.tiny.down{-webkit-transform:translate(-50%, 50%);-ms-transform:translate(-50%, 50%);transform:translate(-50%, 50%)}.segment-bubble.tiny.down .shpitz{top:0px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".string-filter-menu .row{height:24px;cursor:pointer;padding:0 14px}.string-filter-menu .row:hover{background:#e3f4fc}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".shpitz{position:absolute;width:40px;height:40px;overflow:hidden;pointer-events:none}.shpitz .rectangle{position:absolute}.shpitz .rectangle::after{content:'';position:absolute;width:12px;height:12px;-webkit-transform:translate(-50%, -50%) rotate(45deg);-ms-transform:translate(-50%, -50%) rotate(45deg);transform:translate(-50%, -50%) rotate(45deg);background:#fff;box-shadow:0 0 4px 0 rgba(0,0,0,0.35)}.shpitz.up{margin-bottom:-40px;margin-left:-20px}.shpitz.up .rectangle{bottom:100%;left:50%}.shpitz.down{margin-top:-40px;margin-left:-20px}.shpitz.down .rectangle{top:100%;left:50%}.shpitz.left{margin-right:-40px;margin-top:-20px}.shpitz.left .rectangle{right:100%;top:50%}.shpitz.right{margin-left:-40px;margin-top:-20px}.shpitz.right .rectangle{left:100%;top:50%}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".split-menu .sort-direction .direction{background:#fff;border:1px solid #d1d1d1;border-radius:2px;cursor:pointer;box-shadow:0 1px 1px 0 rgba(0,0,0,0.1)}.split-menu .sort-direction .direction:hover{border-color:#bababa}.split-menu input{border:1px solid #d4d4d4;border-radius:2px;box-shadow:inset 0 1px 1px rgba(0,0,0,0.13);padding-left:6px;padding-right:6px;width:100%;height:30px}.split-menu input:hover{border-color:#b8b8b8}.split-menu input:focus{border-color:#1ea3e6}.split-menu input.error{border-color:#e24c4c}.split-menu input.disabled{pointer-events:none;background:#f2f2f2}.split-menu .dropdown{margin-bottom:12px}.split-menu .sort-direction .dropdown{margin-right:38px}.split-menu .sort-direction .direction{position:absolute;right:0;bottom:0;width:32px;height:30px}.split-menu .sort-direction .direction svg{position:absolute;height:13px;top:7px;left:11px}.split-menu .sort-direction .direction.ascending svg{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.split-menu .button-bar .ok{min-width:60px;margin-right:8px}.split-menu input{margin-bottom:12px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".split-tile .overflow,.overflow-menu .split,.overflow-menu .filter,.split-tile .items .split{padding:0 0 0 9px;background:#b6e3fc;border:1px solid transparent;border-radius:4px;cursor:pointer;overflow:hidden;transition:-webkit-transform 0.1s ease-in-out;transition:transform 0.1s ease-in-out;transition:transform 0.1s ease-in-out, -webkit-transform 0.1s ease-in-out;width:192px}.split-tile .overflow .reading,.overflow-menu .split .reading,.overflow-menu .filter .reading,.split-tile .items .split .reading{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;pointer-events:none;white-space:nowrap;margin-right:20px;height:16px;margin-top:7px}.split-tile .overflow .remove,.overflow-menu .split .remove,.overflow-menu .filter .remove,.split-tile .items .split .remove{position:absolute;top:0;bottom:0;right:0;width:27px;text-align:center;padding-top:9px;cursor:pointer}.split-tile .overflow .remove svg,.overflow-menu .split .remove svg,.overflow-menu .filter .remove svg,.split-tile .items .split .remove svg{width:10px}.split-tile .overflow .remove path,.overflow-menu .split .remove path,.overflow-menu .filter .remove path,.split-tile .items .split .remove path{fill:rgba(0,0,0,0.2)}.split-tile .overflow .remove:hover path,.overflow-menu .split .remove:hover path,.overflow-menu .filter .remove:hover path,.split-tile .items .split .remove:hover path{fill:rgba(0,0,0,0.5)}.split-tile .overflow:hover,.overflow-menu .split:hover,.overflow-menu .filter:hover,.split-tile .items .split:hover,.split-tile .selected.overflow,.overflow-menu .selected.split,.overflow-menu .selected.filter,.split-tile .items .selected.split{background-color:#98d8fb}.split-tile .type-time.overflow,.overflow-menu .type-time.split,.overflow-menu .type-time.filter,.split-tile .items .type-time.split,.split-tile .type-number.overflow,.overflow-menu .type-number.split,.overflow-menu .type-number.filter,.split-tile .items .type-number.split{background:#c2eac4}.split-tile .type-time.overflow:hover,.overflow-menu .type-time.split:hover,.overflow-menu .type-time.filter:hover,.split-tile .items .type-time.split:hover,.split-tile .type-time.selected.overflow,.overflow-menu .type-time.selected.split,.overflow-menu .type-time.selected.filter,.split-tile .items .type-time.selected.split,.split-tile .type-number.overflow:hover,.overflow-menu .type-number.split:hover,.overflow-menu .type-number.filter:hover,.split-tile .items .type-number.split:hover,.split-tile .type-number.selected.overflow,.overflow-menu .type-number.selected.split,.overflow-menu .type-number.selected.filter,.split-tile .items .type-number.selected.split{background-color:#abe2ad}.split-tile .overflow,.split-tile .items .split{top:4px;bottom:4px}.split-tile{background:#fff}.split-tile .title{position:absolute;top:0;bottom:0;left:0;width:64px;padding:12px 0 0 14px;font-size:12px;text-transform:uppercase;color:#999}.split-tile .overflow{position:absolute;left:0;padding:0 10px;width:40px}.split-tile .all-continuous.overflow{background:#c2eac4}.split-tile .overflow .count{pointer-events:none;white-space:nowrap;height:16px;margin-top:7px}.overflow-menu .split,.overflow-menu .filter{position:absolute;left:8px;top:0;height:29px}.overflow-menu .split.from-highlight,.overflow-menu .filter.from-highlight{border:1px dashed #168bc5;background:rgba(182,227,252,0.5)}.overflow-menu .split.from-highlight.type-time,.overflow-menu .split.from-highlight.type-number,.overflow-menu .filter.from-highlight.type-time,.overflow-menu .filter.from-highlight.type-number{border:1px dashed #449c53;background:rgba(194,234,196,0.5)}.split-tile .drag-mask{position:absolute;top:0;bottom:0;left:0;right:0}.split-tile .items{position:absolute;top:0;bottom:0;left:64px;right:0;transition:height 0.1s ease-in-out;overflow:hidden}.split-tile .items .split{position:absolute;left:0}.split-tile .fancy-drag-indicator{position:absolute;top:0;bottom:0;left:64px;right:0}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined)
;exports.push([module.i,".string-filter-menu .side-by-side{display:-webkit-box;display:-ms-flexbox;display:flex}.string-filter-menu .side-by-side>*{margin-right:5px}.string-filter-menu .side-by-side>*:last-child{margin-right:0}.string-filter-menu .search-box .clearable-input{background:#fff;border:1px solid #d1d1d1;border-radius:2px;box-shadow:inset 0 1px 1px 0 rgba(0,0,0,0.1)}.string-filter-menu .menu-table::after{position:absolute;top:0;bottom:0;left:0;right:0;content:'';pointer-events:none;box-shadow:inset 0 -20px 10px -10px #fff;border-radius:2px}.string-filter-menu .side-by-side :not(:last-child){margin-right:0}.string-filter-menu .search-box{height:30px;margin-left:6px;width:100%}.string-filter-menu .search-box .clearable-input{width:100%;height:30px;padding-left:6px}.string-filter-menu .menu-table{background:#fff;color:#000}.string-filter-menu .menu-table::after{position:absolute;top:0;bottom:0;left:-14px;right:-14px}.string-filter-menu .menu-table .rows{height:280px;margin-top:10px;margin-left:-14px;margin-right:-14px;overflow:auto}.string-filter-menu .menu-table .row{height:24px;cursor:pointer;padding:0 14px}.string-filter-menu .menu-table .row .row-wrapper{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;height:100%}.string-filter-menu .menu-table .row .row-wrapper .label{display:inline-block;vertical-align:top;padding-top:4px}.string-filter-menu .menu-table .row:hover{background:#e3f4fc}.string-filter-menu .menu-table .row:last-child{margin-bottom:12px}.string-filter-menu .menu-table .row.no-select{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.string-filter-menu .menu-table .row .checkbox.selected .checkbox-body{background:rgba(0,0,0,0.45)}.string-filter-menu .menu-table .message{padding:4px 14px;color:#999;font-style:italic}.string-filter-menu .menu-table .matching-values-message{padding:4px 14px;color:#999}.string-filter-menu .menu-table .loader,.string-filter-menu .menu-table .query-error{position:absolute;top:0;bottom:0;left:0;right:0}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".tile-header .title{padding:15px 14px 10px 14px;font-size:12px;text-transform:uppercase;color:#000;cursor:default}.tile-header .icons{position:absolute;top:1px;right:10px}.tile-header .icons .icon{display:inline-block;padding:10px 0;cursor:pointer;width:19px;margin-left:3px}.tile-header .icons .icon svg path{fill:#bbb}.tile-header .icons .icon:hover svg path,.tile-header .icons .icon.active svg path{fill:#888}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".time-filter-menu .cont .type{text-transform:uppercase;font-size:12px;color:#a6a6a6;margin-bottom:5px}.time-filter-menu .cont .preview{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;height:30px;line-height:28px;background:#f2f2f2;border-radius:2px;color:#909090;text-align:center;padding-left:8px;padding-right:8px}.time-filter-menu .cont{margin-top:18px}.time-filter-menu .cont .buttons{margin-bottom:14px}.time-filter-menu .cont .buttons button{min-width:0;padding:0;width:17.5%;margin-right:3%}.time-filter-menu .cont .buttons button.selected{min-width:0;padding:0}.time-filter-menu .cont .buttons button:last-child{margin-right:0}.time-filter-menu.multiple .range{color:#666;margin-bottom:10px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".user-menu ul.bubble-list li.display-name{pointer-events:none;color:#a6a6a6}.user-menu .separator{height:1px;margin:11px 0 11px 0;border-top:1px solid #dedede}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".vertical-axis{pointer-events:none}.vertical-axis line.border{stroke:#ccc}.vertical-axis line.tick{stroke:#ccc}.vertical-axis text{font-size:12px;fill:#666}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".vis-measure-label{pointer-events:none;white-space:nowrap}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".vis-selector-menu{background:#fff;border-radius:2px;box-shadow:0 3px 10px 0 rgba(0,0,0,0.26),0 0 3px 0 rgba(0,0,0,0.16)}.vis-selector-menu{z-index:8;font-size:0;width:272px;padding:16px}.vis-selector-menu .vis-item{margin:1px;border-radius:2px}.vis-selector-menu .vis-item:hover{box-shadow:inset 0 0 0 1px #dedede}.vis-selector-menu .vis-item.selected{box-shadow:inset 0 0 0 1px #d1d1d1}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".vis-selector{background:#fff}.vis-selector::before{position:absolute;top:0;bottom:0;left:0;right:0;content:'';z-index:6;background-color:rgba(255,255,255,0.65);pointer-events:none;opacity:0}.vis-selector::after{width:0;height:0;border-top:9px solid #666;border-bottom:0;border-left:7px solid transparent;border-right:7px solid transparent;content:'';z-index:7;position:absolute;top:50%;left:50%;margin-top:-6px;margin-left:-7px;pointer-events:none;opacity:0}.vis-selector:hover::after,.vis-selector:hover::before,.vis-selector.active::after,.vis-selector.active::before{opacity:1}.vis-selector .vis-item{display:inline-block;width:78px;height:70px;cursor:pointer}.vis-selector .vis-item .vis-title{position:absolute;left:0;right:0;bottom:7px;text-align:center;font-size:11px;font-weight:400;color:#666}.vis-selector .vis-item svg{position:absolute;top:3px;left:50%;width:53px;height:53px;margin-left:-27px}.vis-selector .vis-selector-menu{position:absolute;top:100%;right:0}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".about-modal p{margin-bottom:14px;line-height:20px}.about-modal p:last-child{margin-bottom:0}.about-modal a{color:#1ea3e6;cursor:pointer}.about-modal a:hover{text-decoration:underline}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".dynamic-dimension-modal .clause{padding:0 0 0 9px;background:#b6e3fc;border:1px solid transparent;border-radius:4px;cursor:pointer;overflow:hidden;transition:-webkit-transform 0.1s ease-in-out;transition:transform 0.1s ease-in-out;transition:transform 0.1s ease-in-out, -webkit-transform 0.1s ease-in-out;width:192px}.dynamic-dimension-modal .clause .reading{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;pointer-events:none;white-space:nowrap;margin-right:20px;height:16px;margin-top:7px}.dynamic-dimension-modal .clause .remove{position:absolute;top:0;bottom:0;right:0;width:27px;text-align:center;padding-top:9px;cursor:pointer}.dynamic-dimension-modal .clause .remove svg{width:10px}.dynamic-dimension-modal .clause .remove path{fill:rgba(0,0,0,0.2)}.dynamic-dimension-modal .clause .remove:hover path{fill:rgba(0,0,0,0.5)}.dynamic-dimension-modal .clause:hover,.dynamic-dimension-modal .selected.clause{background-color:#98d8fb}.dynamic-dimension-modal .type-time.clause,.dynamic-dimension-modal .type-number.clause{background:#c2eac4}.dynamic-dimension-modal .type-time.clause:hover,.dynamic-dimension-modal .type-time.selected.clause,.dynamic-dimension-modal .type-number.clause:hover,.dynamic-dimension-modal .type-number.selected.clause{background-color:#abe2ad}.dynamic-dimension-modal input{border:1px solid rgba(0,0,0,0.14);margin-bottom:10px}.dynamic-dimension-modal .column-label{font-size:13px;margin-bottom:10px;text-transform:uppercase}.dynamic-dimension-modal .clauses{min-height:200px}.dynamic-dimension-modal .clause{height:28px}.dynamic-dimension-modal .clause .dimension-title{margin-right:5px}.dynamic-dimension-modal .clause.excluded .values{text-decoration:line-through}.dynamic-dimension-modal .clause:not(:last-child){margin-bottom:5px}.dynamic-dimension-modal .button-bar{text-align:right}.dynamic-dimension-modal .modal-window{width:570px}\n",""])},function(module,exports,__webpack_require__){var content=__webpack_require__(346);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./bubble-menu.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./bubble-menu.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(347);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./bucket-marks.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./bucket-marks.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(348);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./chart-line.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./chart-line.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(349);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./cluster-source-picker.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./cluster-source-picker.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(350);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./color-segment-bubble.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./color-segment-bubble.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(351);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./date-range-input.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./date-range-input.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(352);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./date-range-picker.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./date-range-picker.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(353);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./description.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./description.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(354);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./dimension-actions-menu.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./dimension-actions-menu.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(355);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./dimension-list-tile.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./dimension-list-tile.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(356);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./dimension-tile.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./dimension-tile.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(357);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./drop-indicator.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./drop-indicator.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(358);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./fancy-drag-indicator.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./fancy-drag-indicator.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(359);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./filter-menu.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./filter-menu.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(360);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./filter-options-dropdown.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./filter-options-dropdown.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(361);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./filter-tile.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./filter-tile.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(362);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./formula-input.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./formula-input.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(363);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./grid-lines.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./grid-lines.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(364);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./highlight-string.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./highlight-string.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(365);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./hiluk-menu.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./hiluk-menu.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(366);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./line-chart-axis.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./line-chart-axis.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(367);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./line-loader.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./line-loader.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(368);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./manual-fallback.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./manual-fallback.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(369);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./measures-tile.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./measures-tile.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(370);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./nav-list.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./nav-list.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(371);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./number-filter-menu.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./number-filter-menu.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(372);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./number-range-picker.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./number-range-picker.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(373);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./options-menu.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./options-menu.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(374);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./pinboard-measure-tile.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./pinboard-measure-tile.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(375);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./pinboard-panel.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./pinboard-panel.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(376);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./preview-string-filter-menu.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./preview-string-filter-menu.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(377);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./query-error.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./query-error.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(378);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./range-handle.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./range-handle.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(379);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./searchable-tile.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./searchable-tile.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(380);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./segment-action-buttons.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./segment-action-buttons.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(381);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./segment-bubble.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./segment-bubble.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(382);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./selectable-string-filter-menu.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./selectable-string-filter-menu.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(383);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./shpitz.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./shpitz.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(384);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./split-menu.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./split-menu.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(385);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./split-tile.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./split-tile.css")
;if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(386);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./string-filter-menu.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./string-filter-menu.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(387);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./tile-header.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./tile-header.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(388);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./time-filter-menu.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./time-filter-menu.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(389);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./user-menu.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./user-menu.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(390);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./vertical-axis.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./vertical-axis.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(391);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./vis-measure-label.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./vis-measure-label.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(392);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./vis-selector-menu.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./vis-selector-menu.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(393);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./vis-selector.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./vis-selector.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(394);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./about-modal.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./about-modal.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(395);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./dynamic-dimension-modal.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./dynamic-dimension-modal.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=newInterval;var t0=new Date,t1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=new Date(+date)),date}interval.floor=interval;interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date};interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1};interval.offset=function(date,step){return offseti(date=new Date(+date),step==null?1:Math.floor(step)),date};interval.range=function(start,stop,step){var range=[];start=interval.ceil(start);step=step==null?1:Math.floor(step);if(!(start<stop)||!(step>0))return range;do{range.push(new Date(+start))}while(offseti(start,step),floori(start),start<stop);return range};interval.filter=function(test){return newInterval(function(date){if(date>=date)while(floori(date),!test(date))date.setTime(date-1)},function(date,step){if(date>=date)while(--step>=0)while(offseti(date,1),!test(date)){}})};if(count){interval.count=function(start,end){t0.setTime(+start),t1.setTime(+end);floori(t0),floori(t1);return Math.floor(count(t0,t1))};interval.every=function(step){step=Math.floor(step);return!isFinite(step)||!(step>0)?null:!(step>1)?interval:interval.filter(field?function(d){return field(d)%step===0}:function(d){return interval.count(0,d)%step===0})}}return interval}},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});var __WEBPACK_IMPORTED_MODULE_0__src_bisect__=__webpack_require__(777);__webpack_require__.d(__webpack_exports__,"bisect",function(){return __WEBPACK_IMPORTED_MODULE_0__src_bisect__["a"]});__webpack_require__.d(__webpack_exports__,"bisectRight",function(){return __WEBPACK_IMPORTED_MODULE_0__src_bisect__["b"]});__webpack_require__.d(__webpack_exports__,"bisectLeft",function(){return __WEBPACK_IMPORTED_MODULE_0__src_bisect__["c"]});var __WEBPACK_IMPORTED_MODULE_1__src_ascending__=__webpack_require__(752);__webpack_require__.d(__webpack_exports__,"ascending",function(){return __WEBPACK_IMPORTED_MODULE_1__src_ascending__["a"]});var __WEBPACK_IMPORTED_MODULE_2__src_bisector__=__webpack_require__(778);__webpack_require__.d(__webpack_exports__,"bisector",function(){return __WEBPACK_IMPORTED_MODULE_2__src_bisector__["a"]});var __WEBPACK_IMPORTED_MODULE_3__src_cross__=__webpack_require__(872);__webpack_require__.d(__webpack_exports__,"cross",function(){return __WEBPACK_IMPORTED_MODULE_3__src_cross__["a"]});var __WEBPACK_IMPORTED_MODULE_4__src_descending__=__webpack_require__(873);__webpack_require__.d(__webpack_exports__,"descending",function(){return __WEBPACK_IMPORTED_MODULE_4__src_descending__["a"]});var __WEBPACK_IMPORTED_MODULE_5__src_deviation__=__webpack_require__(779);__webpack_require__.d(__webpack_exports__,"deviation",function(){return __WEBPACK_IMPORTED_MODULE_5__src_deviation__["a"]});var __WEBPACK_IMPORTED_MODULE_6__src_extent__=__webpack_require__(780);__webpack_require__.d(__webpack_exports__,"extent",function(){return __WEBPACK_IMPORTED_MODULE_6__src_extent__["a"]});var __WEBPACK_IMPORTED_MODULE_7__src_histogram__=__webpack_require__(874);__webpack_require__.d(__webpack_exports__,"histogram",function(){return __WEBPACK_IMPORTED_MODULE_7__src_histogram__["a"]});var __WEBPACK_IMPORTED_MODULE_8__src_threshold_freedmanDiaconis__=__webpack_require__(884);__webpack_require__.d(__webpack_exports__,"thresholdFreedmanDiaconis",function(){return __WEBPACK_IMPORTED_MODULE_8__src_threshold_freedmanDiaconis__["a"]});var __WEBPACK_IMPORTED_MODULE_9__src_threshold_scott__=__webpack_require__(885);__webpack_require__.d(__webpack_exports__,"thresholdScott",function(){return __WEBPACK_IMPORTED_MODULE_9__src_threshold_scott__["a"]});var __WEBPACK_IMPORTED_MODULE_10__src_threshold_sturges__=__webpack_require__(784);__webpack_require__.d(__webpack_exports__,"thresholdSturges",function(){return __WEBPACK_IMPORTED_MODULE_10__src_threshold_sturges__["a"]});var __WEBPACK_IMPORTED_MODULE_11__src_max__=__webpack_require__(876);__webpack_require__.d(__webpack_exports__,"max",function(){return __WEBPACK_IMPORTED_MODULE_11__src_max__["a"]});var __WEBPACK_IMPORTED_MODULE_12__src_mean__=__webpack_require__(877);__webpack_require__.d(__webpack_exports__,"mean",function(){return __WEBPACK_IMPORTED_MODULE_12__src_mean__["a"]});var __WEBPACK_IMPORTED_MODULE_13__src_median__=__webpack_require__(878);__webpack_require__.d(__webpack_exports__,"median",function(){return __WEBPACK_IMPORTED_MODULE_13__src_median__["a"]});var __WEBPACK_IMPORTED_MODULE_14__src_merge__=__webpack_require__(879);__webpack_require__.d(__webpack_exports__,"merge",function(){return __WEBPACK_IMPORTED_MODULE_14__src_merge__["a"]});var __WEBPACK_IMPORTED_MODULE_15__src_min__=__webpack_require__(781);__webpack_require__.d(__webpack_exports__,"min",function(){return __WEBPACK_IMPORTED_MODULE_15__src_min__["a"]});var __WEBPACK_IMPORTED_MODULE_16__src_pairs__=__webpack_require__(782);__webpack_require__.d(__webpack_exports__,"pairs",function(){return __WEBPACK_IMPORTED_MODULE_16__src_pairs__["a"]});var __WEBPACK_IMPORTED_MODULE_17__src_permute__=__webpack_require__(880);__webpack_require__.d(__webpack_exports__,"permute",function(){return __WEBPACK_IMPORTED_MODULE_17__src_permute__["a"]});var __WEBPACK_IMPORTED_MODULE_18__src_quantile__=__webpack_require__(763);__webpack_require__.d(__webpack_exports__,"quantile",function(){return __WEBPACK_IMPORTED_MODULE_18__src_quantile__["a"]});var __WEBPACK_IMPORTED_MODULE_19__src_range__=__webpack_require__(783);__webpack_require__.d(__webpack_exports__,"range",function(){return __WEBPACK_IMPORTED_MODULE_19__src_range__["a"]});var __WEBPACK_IMPORTED_MODULE_20__src_scan__=__webpack_require__(881);__webpack_require__.d(__webpack_exports__,"scan",function(){return __WEBPACK_IMPORTED_MODULE_20__src_scan__["a"]});var __WEBPACK_IMPORTED_MODULE_21__src_shuffle__=__webpack_require__(882);__webpack_require__.d(__webpack_exports__,"shuffle",function(){return __WEBPACK_IMPORTED_MODULE_21__src_shuffle__["a"]});var __WEBPACK_IMPORTED_MODULE_22__src_sum__=__webpack_require__(883);__webpack_require__.d(__webpack_exports__,"sum",function(){return __WEBPACK_IMPORTED_MODULE_22__src_sum__["a"]});var __WEBPACK_IMPORTED_MODULE_23__src_ticks__=__webpack_require__(785);__webpack_require__.d(__webpack_exports__,"ticks",function(){return __WEBPACK_IMPORTED_MODULE_23__src_ticks__["a"]});__webpack_require__.d(__webpack_exports__,"tickIncrement",function(){return __WEBPACK_IMPORTED_MODULE_23__src_ticks__["b"]});__webpack_require__.d(__webpack_exports__,"tickStep",function(){return __WEBPACK_IMPORTED_MODULE_23__src_ticks__["c"]});var __WEBPACK_IMPORTED_MODULE_24__src_transpose__=__webpack_require__(786);__webpack_require__.d(__webpack_exports__,"transpose",function(){return __WEBPACK_IMPORTED_MODULE_24__src_transpose__["a"]});var __WEBPACK_IMPORTED_MODULE_25__src_variance__=__webpack_require__(787);__webpack_require__.d(__webpack_exports__,"variance",function(){return __WEBPACK_IMPORTED_MODULE_25__src_variance__["a"]});var __WEBPACK_IMPORTED_MODULE_26__src_zip__=__webpack_require__(886);__webpack_require__.d(__webpack_exports__,"zip",function(){return __WEBPACK_IMPORTED_MODULE_26__src_zip__["a"]})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",function(){return durationSecond});__webpack_require__.d(__webpack_exports__,"d",function(){return durationMinute});__webpack_require__.d(__webpack_exports__,"c",function(){return durationHour});__webpack_require__.d(__webpack_exports__,"b",function(){return durationDay});__webpack_require__.d(__webpack_exports__,"a",function(){return durationWeek});var durationSecond=1e3;var durationMinute=6e4;var durationHour=36e5;var durationDay=864e5;var durationWeek=6048e5},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__src_color__=__webpack_require__(765);__webpack_require__.d(__webpack_exports__,"f",function(){return __WEBPACK_IMPORTED_MODULE_0__src_color__["h"]});__webpack_require__.d(__webpack_exports__,"e",function(){return __WEBPACK_IMPORTED_MODULE_0__src_color__["g"]});__webpack_require__.d(__webpack_exports__,"d",function(){return __WEBPACK_IMPORTED_MODULE_0__src_color__["f"]});var __WEBPACK_IMPORTED_MODULE_1__src_lab__=__webpack_require__(894);__webpack_require__.d(__webpack_exports__,"c",function(){return __WEBPACK_IMPORTED_MODULE_1__src_lab__["b"]});__webpack_require__.d(__webpack_exports__,"b",function(){return __WEBPACK_IMPORTED_MODULE_1__src_lab__["a"]});var __WEBPACK_IMPORTED_MODULE_2__src_cubehelix__=__webpack_require__(893);__webpack_require__.d(__webpack_exports__,"a",function(){return __WEBPACK_IMPORTED_MODULE_2__src_cubehelix__["a"]})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return map});__webpack_require__.d(__webpack_exports__,"b",function(){return slice});var array=Array.prototype;var map=array.map;var slice=array.slice},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var classNames=__webpack_require__(9);var immutable_class_1=__webpack_require__(2);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var components_1=__webpack_require__(203);var constants_1=__webpack_require__(47);var query_runner_1=__webpack_require__(90);__webpack_require__(970);function getSecretHavingFilter(){if(typeof window.secretHaving==="string"){try{return plywood_1.Expression.parse(window.secretHaving)}catch(e){console.log("Could not parse secretHaving: "+e.message);return null}}return null}var BaseVisualization=function(_super){tslib_1.__extends(BaseVisualization,_super);function BaseVisualization(){var _this=_super.call(this)||this;_this.lastRenderResult=null;_this.id=_this.constructor.visName;_this.state=_this.getDefaultState();return _this}BaseVisualization.prototype.getDefaultState=function(){return{datasetLoad:{},scrollLeft:0,scrollTop:0,hoverMeasure:null,selectionMode:"single"}};BaseVisualization.prototype.queryExtra=function(query,splitIndex,essence,timekeeper){return null};BaseVisualization.prototype.sameLevelFilter=function(filterA,filterB){if(!filterA||!filterB)return false;var segmentsA=filterA.clauses.map(function(clause){return clause.values});var segmentsB=filterB.clauses.map(function(clause){return clause.values});segmentsA.pop();segmentsB.pop();return immutable_class_1.immutableArraysEqual(segmentsA,segmentsB)};BaseVisualization.prototype.getMultiFilter=function(essence,clicker,row){var splits=essence.splits;if(row["__nest"]===0)return null;var rowHighlight;var currentFilter=essence.highlight.delta;if(this.sameLevelFilter(currentFilter,this.getFilterFromDatum(essence.splits,row))){rowHighlight=this.toggleDatumInFilter(currentFilter,splits,row)}else{rowHighlight=this.getFilterFromDatum(essence.splits,row)}return rowHighlight};BaseVisualization.prototype.flatDatumForPath=function(splits,path){var flatDatum={__nest:path.length};path.forEach(function(p,i){var dimension=splits.get(i).dimension;flatDatum[dimension]=path[i][dimension]});return flatDatum};BaseVisualization.prototype.isDatumInFilter=function(filter,splits,flatDatum){var datumFilter=this.getFilterFromDatum(splits,flatDatum);if(!datumFilter)return false;if(!this.sameLevelFilter(filter,datumFilter))return false;var filterClauses=filter.clauses;var datumFilterClauses=datumFilter.clauses;var datumFilterLastElements=datumFilterClauses[datumFilterClauses.length-1].getLiteralSet();var filterLastElements=filterClauses[filterClauses.length-1].getLiteralSet();return filterLastElements.contains(datumFilterLastElements)};BaseVisualization.prototype.isDatumSelected=function(filter,splits,flatDatum){var newFilter=this.getFilterFromDatum(splits,flatDatum);var sameFilter=filter.equals(newFilter);var invertedFilter=filter.equals(newFilter.toggleMode());var includingFilter=this.isDatumInFilter(filter,splits,flatDatum);return sameFilter||invertedFilter||includingFilter};BaseVisualization.prototype.toggleDatumInFilter=function(filter,splits,datum){var nest=datum["__nest"];var value=datum[splits.get(nest-1).dimension];var lastClause=filter.clauses[filter.clauses.length-1];var newElements=this.isDatumInFilter(filter,splits,datum)?lastClause.values.remove(value):lastClause.values.add(value);if(newElements.size()===0)return null;lastClause=lastClause.changeValues(plywood_1.Set.fromJS(newElements));return filter.replaceByIndex(filter.clauses.length-1,lastClause)};BaseVisualization.prototype.getFilterFromDatum=function(splits,flatDatum){var nest=flatDatum["__nest"];if(nest===0)return null;var segments=[];for(var i=0;i<nest;i++){segments.push(flatDatum[splits.get(i).dimension])}return new models_1.Filter({clauses:segments.map(function(segment,i){return new models_1.FilterClause({action:"overlap",dimension:splits.get(i).dimension,values:plywood_1.Set.fromJS([segment])})})})};BaseVisualization.prototype.makeQuery=function(essence,timekeeper){var _this=this;var dimensions=essence.getDimensions();var measures=essence.getEffectiveMeasures();var splits=essence.getEffectiveSplits();var colors=essence.getEffectiveColors();var $main=plywood_1.$("main");var query=plywood_1.ply().apply("main",$main.filter(essence.getEffectiveFilter(timekeeper,this.id).toExpression(dimensions)));query=this.queryExtra(query,-1,essence,timekeeper)||query;measures.forEach(function(measure){query=query.performAction(measure.toApplyAction())});var makeSubQuery=function(i){var split=splits.get(i);var splitDimension=essence.getDimension(split.dimension);var sortAction=split.sortAction,limitAction=split.limitAction;if(!sortAction){throw new Error("something went wrong during query generation")}var subQuery=$main.split(split.toSplitExpression(dimensions),splitDimension.name);if(colors&&colors.dimension===splitDimension.name){var havingFilter=colors.toHavingFilter(splitDimension.name);if(havingFilter){subQuery=subQuery.performAction(havingFilter)}}subQuery=_this.queryExtra(subQuery,i,essence,timekeeper)||subQuery;measures.forEach(function(measure){subQuery=subQuery.performAction(measure.toApplyAction())});var applyForSort=essence.getApplyForSort(sortAction);if(applyForSort){subQuery=subQuery.performAction(applyForSort)}subQuery=subQuery.performAction(sortAction);var secretHaving=getSecretHavingFilter();if(secretHaving)subQuery=subQuery.filter(secretHaving);if(colors&&colors.dimension===splitDimension.name){subQuery=subQuery.performAction(colors.toLimitAction())}else if(limitAction){subQuery=subQuery.performAction(limitAction)}else if(splitDimension.getKind()==="number"){subQuery=subQuery.limit(5e3)}if(i+1<splits.length()){subQuery=subQuery.apply(constants_1.SPLIT,makeSubQuery(i+1))}return subQuery};return query.apply(constants_1.SPLIT,makeSubQuery(0))};BaseVisualization.prototype.fetchData=function(essence,timekeeper){var _this=this;var registerDownloadableDataset=this.props.registerDownloadableDataset;var query=this.makeQuery(essence,timekeeper);this.precalculate(this.props,{loading:true});query_runner_1.QueryRunner.fetch(essence.dataCube,query,essence.timezone).then(function(dataset){if(!_this.mounted)return;_this.precalculate(_this.props,{loading:false,dataset:dataset,error:null})},function(error){if(registerDownloadableDataset)registerDownloadableDataset(null);if(!_this.mounted)return;_this.precalculate(_this.props,{loading:false,dataset:null,error:error})}).done()};BaseVisualization.prototype.componentWillMount=function(){var id=this.props.id;if(id)this.id=id;this.precalculate(this.props)};BaseVisualization.prototype.componentDidMount=function(){this.mounted=true;var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper;this.calculateSize();this.fetchData(essence,timekeeper)};BaseVisualization.prototype.componentWillReceiveProps=function(nextProps){this.precalculate(nextProps);var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper;var nextEssence=nextProps.essence;var nextTimekeeper=nextProps.timekeeper;if(nextEssence.differentDataCube(essence)||nextEssence.differentEffectiveFilter(essence,timekeeper,nextTimekeeper,this.id)||nextEssence.differentEffectiveSplits(essence)||nextEssence.differentColors(essence)||nextEssence.newEffectiveMeasures(essence)){this.fetchData(nextEssence,nextTimekeeper)}};BaseVisualization.prototype.componentWillUnmount=function(){this.mounted=false};BaseVisualization.prototype.calculateSize=function(){var stage=this.state.stage;if(!this.containerDOM)return;var newStage=beltful_1.Stage.fromClientRect(this.containerDOM.getBoundingClientRect());if(!newStage.equals(stage)){this.setState({stage:newStage})}};BaseVisualization.prototype.globalMouseMoveListener=function(e){};BaseVisualization.prototype.globalMouseUpListener=function(e){};BaseVisualization.prototype.globalKeyDownListener=function(e){};BaseVisualization.prototype.globalEscapeListener=function(e){};BaseVisualization.prototype.renderInternals=function(){return null};BaseVisualization.prototype.precalculate=function(props,datasetLoad){if(datasetLoad===void 0){datasetLoad=null}};BaseVisualization.prototype.render=function(){var _this=this;var _a=this.state,stage=_a.stage,datasetLoad=_a.datasetLoad;if(stage&&(!datasetLoad.loading||!this.lastRenderResult)){this.lastRenderResult=this.renderInternals()}return React.createElement("div",{className:classNames("base-visualization",this.constructor.visName,this.id),ref:function(e){return _this.containerDOM=e}},React.createElement(caladan_1.GlobalEventListener,{resize:this.calculateSize.bind(this),mouseMove:this.globalMouseMoveListener.bind(this),mouseUp:this.globalMouseUpListener.bind(this),keyDown:this.globalKeyDownListener.bind(this),escape:this.globalEscapeListener.bind(this)}),this.lastRenderResult,datasetLoad.error?React.createElement(components_1.QueryError,{error:datasetLoad.error}):null,datasetLoad.loading?React.createElement(caladan_1.Loader,null):null)};return BaseVisualization}(React.Component);exports.BaseVisualization=BaseVisualization},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(x){return x===null?NaN:+x}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__src_value__=__webpack_require__(769);__webpack_require__.d(__webpack_exports__,"b",function(){return __WEBPACK_IMPORTED_MODULE_0__src_value__["a"]});var __WEBPACK_IMPORTED_MODULE_1__src_array__=__webpack_require__(794);var __WEBPACK_IMPORTED_MODULE_2__src_basis__=__webpack_require__(768);var __WEBPACK_IMPORTED_MODULE_3__src_basisClosed__=__webpack_require__(795);var __WEBPACK_IMPORTED_MODULE_4__src_date__=__webpack_require__(797);var __WEBPACK_IMPORTED_MODULE_5__src_number__=__webpack_require__(759);__webpack_require__.d(__webpack_exports__,"a",function(){return __WEBPACK_IMPORTED_MODULE_5__src_number__["a"]});var __WEBPACK_IMPORTED_MODULE_6__src_object__=__webpack_require__(798);var __WEBPACK_IMPORTED_MODULE_7__src_round__=__webpack_require__(909);__webpack_require__.d(__webpack_exports__,"c",function(){return __WEBPACK_IMPORTED_MODULE_7__src_round__["a"]});var __WEBPACK_IMPORTED_MODULE_8__src_string__=__webpack_require__(800);var __WEBPACK_IMPORTED_MODULE_9__src_transform_index__=__webpack_require__(911);var __WEBPACK_IMPORTED_MODULE_10__src_zoom__=__webpack_require__(913);var __WEBPACK_IMPORTED_MODULE_11__src_rgb__=__webpack_require__(799);var __WEBPACK_IMPORTED_MODULE_12__src_hsl__=__webpack_require__(906);var __WEBPACK_IMPORTED_MODULE_13__src_lab__=__webpack_require__(907);var __WEBPACK_IMPORTED_MODULE_14__src_hcl__=__webpack_require__(905);var __WEBPACK_IMPORTED_MODULE_15__src_cubehelix__=__webpack_require__(904);__webpack_require__.d(__webpack_exports__,"d",function(){return __WEBPACK_IMPORTED_MODULE_15__src_cubehelix__["a"]});var __WEBPACK_IMPORTED_MODULE_16__src_quantize__=__webpack_require__(908)},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__constant__=__webpack_require__(796);__webpack_exports__["b"]=hue;__webpack_exports__["c"]=gamma;__webpack_exports__["a"]=nogamma;function linear(a,d){return function(t){return a+t*d}}function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}function hue(a,b){var d=b-a;return d?linear(a,d>180||d<-180?d-360*Math.round(d/360):d):__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__constant__["a"])(isNaN(a)?b:a)}function gamma(y){return(y=+y)===1?nogamma:function(a,b){return b-a?exponential(a,b,y):__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__constant__["a"])(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__constant__["a"])(isNaN(a)?b:a)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(s){return s.match(/.{6}/g).map(function(x){return"#"+x})}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_array__=__webpack_require__(747);var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__=__webpack_require__(754);var __WEBPACK_IMPORTED_MODULE_2__continuous__=__webpack_require__(761);var __WEBPACK_IMPORTED_MODULE_3__tickFormat__=__webpack_require__(928);__webpack_exports__["b"]=linearish;__webpack_exports__["a"]=linear;function linearish(scale){var domain=scale.domain;scale.ticks=function(count){var d=domain();return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["ticks"])(d[0],d[d.length-1],count==null?10:count)};scale.tickFormat=function(count,specifier){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__tickFormat__["a"])(domain(),count,specifier)};scale.nice=function(count){var d=domain(),i=d.length-1,n=count==null?10:count,start=d[0],stop=d[i],step=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["tickStep"])(start,stop,n);if(step){step=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["tickStep"])(Math.floor(start/step)*step,Math.ceil(stop/step)*step,n);d[0]=Math.floor(start/step)*step;d[i]=Math.ceil(stop/step)*step;domain(d)}return scale};return scale}function linear(){var scale=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__continuous__["a"])(__WEBPACK_IMPORTED_MODULE_2__continuous__["b"],__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["a"]);scale.copy=function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__continuous__["c"])(scale,linear())};return linearish(scale)}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__formatDecimal__=__webpack_require__(767);__webpack_exports__["a"]=function(x){return x=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__formatDecimal__["a"])(Math.abs(x)),x?x[1]:NaN}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(a,b){return a=+a,b-=a,function(t){return a+b*t}}},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});var __WEBPACK_IMPORTED_MODULE_0__src_band__=__webpack_require__(914);__webpack_require__.d(__webpack_exports__,"scaleBand",function(){return __WEBPACK_IMPORTED_MODULE_0__src_band__["a"]});__webpack_require__.d(__webpack_exports__,"scalePoint",function(){return __WEBPACK_IMPORTED_MODULE_0__src_band__["b"]});var __WEBPACK_IMPORTED_MODULE_1__src_identity__=__webpack_require__(920);__webpack_require__.d(__webpack_exports__,"scaleIdentity",function(){return __WEBPACK_IMPORTED_MODULE_1__src_identity__["a"]});var __WEBPACK_IMPORTED_MODULE_2__src_linear__=__webpack_require__(757);__webpack_require__.d(__webpack_exports__,"scaleLinear",function(){return __WEBPACK_IMPORTED_MODULE_2__src_linear__["a"]});var __WEBPACK_IMPORTED_MODULE_3__src_log__=__webpack_require__(921);__webpack_require__.d(__webpack_exports__,"scaleLog",function(){return __WEBPACK_IMPORTED_MODULE_3__src_log__["a"]});var __WEBPACK_IMPORTED_MODULE_4__src_ordinal__=__webpack_require__(803);__webpack_require__.d(__webpack_exports__,"scaleOrdinal",function(){return __WEBPACK_IMPORTED_MODULE_4__src_ordinal__["a"]});__webpack_require__.d(__webpack_exports__,"scaleImplicit",function(){return __WEBPACK_IMPORTED_MODULE_4__src_ordinal__["b"]});var __WEBPACK_IMPORTED_MODULE_5__src_pow__=__webpack_require__(922);__webpack_require__.d(__webpack_exports__,"scalePow",function(){return __WEBPACK_IMPORTED_MODULE_5__src_pow__["a"]});__webpack_require__.d(__webpack_exports__,"scaleSqrt",function(){return __WEBPACK_IMPORTED_MODULE_5__src_pow__["b"]});var __WEBPACK_IMPORTED_MODULE_6__src_quantile__=__webpack_require__(923);__webpack_require__.d(__webpack_exports__,"scaleQuantile",function(){return __WEBPACK_IMPORTED_MODULE_6__src_quantile__["a"]});var __WEBPACK_IMPORTED_MODULE_7__src_quantize__=__webpack_require__(924);__webpack_require__.d(__webpack_exports__,"scaleQuantize",function(){return __WEBPACK_IMPORTED_MODULE_7__src_quantize__["a"]});var __WEBPACK_IMPORTED_MODULE_8__src_threshold__=__webpack_require__(927);__webpack_require__.d(__webpack_exports__,"scaleThreshold",function(){
return __WEBPACK_IMPORTED_MODULE_8__src_threshold__["a"]});var __WEBPACK_IMPORTED_MODULE_9__src_time__=__webpack_require__(804);__webpack_require__.d(__webpack_exports__,"scaleTime",function(){return __WEBPACK_IMPORTED_MODULE_9__src_time__["a"]});var __WEBPACK_IMPORTED_MODULE_10__src_utcTime__=__webpack_require__(929);__webpack_require__.d(__webpack_exports__,"scaleUtc",function(){return __WEBPACK_IMPORTED_MODULE_10__src_utcTime__["a"]});var __WEBPACK_IMPORTED_MODULE_11__src_category10__=__webpack_require__(915);__webpack_require__.d(__webpack_exports__,"schemeCategory10",function(){return __WEBPACK_IMPORTED_MODULE_11__src_category10__["a"]});var __WEBPACK_IMPORTED_MODULE_12__src_category20b__=__webpack_require__(917);__webpack_require__.d(__webpack_exports__,"schemeCategory20b",function(){return __WEBPACK_IMPORTED_MODULE_12__src_category20b__["a"]});var __WEBPACK_IMPORTED_MODULE_13__src_category20c__=__webpack_require__(918);__webpack_require__.d(__webpack_exports__,"schemeCategory20c",function(){return __WEBPACK_IMPORTED_MODULE_13__src_category20c__["a"]});var __WEBPACK_IMPORTED_MODULE_14__src_category20__=__webpack_require__(916);__webpack_require__.d(__webpack_exports__,"schemeCategory20",function(){return __WEBPACK_IMPORTED_MODULE_14__src_category20__["a"]});var __WEBPACK_IMPORTED_MODULE_15__src_cubehelix__=__webpack_require__(919);__webpack_require__.d(__webpack_exports__,"interpolateCubehelixDefault",function(){return __WEBPACK_IMPORTED_MODULE_15__src_cubehelix__["a"]});var __WEBPACK_IMPORTED_MODULE_16__src_rainbow__=__webpack_require__(925);__webpack_require__.d(__webpack_exports__,"interpolateRainbow",function(){return __WEBPACK_IMPORTED_MODULE_16__src_rainbow__["a"]});__webpack_require__.d(__webpack_exports__,"interpolateWarm",function(){return __WEBPACK_IMPORTED_MODULE_16__src_rainbow__["b"]});__webpack_require__.d(__webpack_exports__,"interpolateCool",function(){return __WEBPACK_IMPORTED_MODULE_16__src_rainbow__["c"]});var __WEBPACK_IMPORTED_MODULE_17__src_viridis__=__webpack_require__(930);__webpack_require__.d(__webpack_exports__,"interpolateViridis",function(){return __WEBPACK_IMPORTED_MODULE_17__src_viridis__["a"]});__webpack_require__.d(__webpack_exports__,"interpolateMagma",function(){return __WEBPACK_IMPORTED_MODULE_17__src_viridis__["b"]});__webpack_require__.d(__webpack_exports__,"interpolateInferno",function(){return __WEBPACK_IMPORTED_MODULE_17__src_viridis__["c"]});__webpack_require__.d(__webpack_exports__,"interpolatePlasma",function(){return __WEBPACK_IMPORTED_MODULE_17__src_viridis__["d"]});var __WEBPACK_IMPORTED_MODULE_18__src_sequential__=__webpack_require__(926);__webpack_require__.d(__webpack_exports__,"scaleSequential",function(){return __WEBPACK_IMPORTED_MODULE_18__src_sequential__["a"]})},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_array__=__webpack_require__(747);var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__=__webpack_require__(754);var __WEBPACK_IMPORTED_MODULE_2__array__=__webpack_require__(750);var __WEBPACK_IMPORTED_MODULE_3__constant__=__webpack_require__(770);var __WEBPACK_IMPORTED_MODULE_4__number__=__webpack_require__(802);__webpack_exports__["b"]=deinterpolateLinear;__webpack_exports__["c"]=copy;__webpack_exports__["a"]=continuous;var unit=[0,1];function deinterpolateLinear(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__constant__["a"])(b)}function deinterpolateClamp(deinterpolate){return function(a,b){var d=deinterpolate(a=+a,b=+b);return function(x){return x<=a?0:x>=b?1:d(x)}}}function reinterpolateClamp(reinterpolate){return function(a,b){var r=reinterpolate(a=+a,b=+b);return function(t){return t<=0?a:t>=1?b:r(t)}}}function bimap(domain,range,deinterpolate,reinterpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];if(d1<d0)d0=deinterpolate(d1,d0),r0=reinterpolate(r1,r0);else d0=deinterpolate(d0,d1),r0=reinterpolate(r0,r1);return function(x){return r0(d0(x))}}function polymap(domain,range,deinterpolate,reinterpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;if(domain[j]<domain[0]){domain=domain.slice().reverse();range=range.slice().reverse()}while(++i<j){d[i]=deinterpolate(domain[i],domain[i+1]);r[i]=reinterpolate(range[i],range[i+1])}return function(x){var i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["bisect"])(domain,x,1,j)-1;return r[i](d[i](x))}}function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp())}function continuous(deinterpolate,reinterpolate){var domain=unit,range=unit,interpolate=__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["b"],clamp=false,piecewise,output,input;function rescale(){piecewise=Math.min(domain.length,range.length)>2?polymap:bimap;output=input=null;return scale}function scale(x){return(output||(output=piecewise(domain,range,clamp?deinterpolateClamp(deinterpolate):deinterpolate,interpolate)))(+x)}scale.invert=function(y){return(input||(input=piecewise(range,domain,deinterpolateLinear,clamp?reinterpolateClamp(reinterpolate):reinterpolate)))(+y)};scale.domain=function(_){return arguments.length?(domain=__WEBPACK_IMPORTED_MODULE_2__array__["a"].call(_,__WEBPACK_IMPORTED_MODULE_4__number__["a"]),rescale()):domain.slice()};scale.range=function(_){return arguments.length?(range=__WEBPACK_IMPORTED_MODULE_2__array__["b"].call(_),rescale()):range.slice()};scale.rangeRound=function(_){return range=__WEBPACK_IMPORTED_MODULE_2__array__["b"].call(_),interpolate=__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["c"],rescale()};scale.clamp=function(_){return arguments.length?(clamp=!!_,rescale()):clamp};scale.interpolate=function(_){return arguments.length?(interpolate=_,rescale()):interpolate};return rescale()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var immutable_class_1=__webpack_require__(2);var bar_chart_1=__webpack_require__(830);var geo_1=__webpack_require__(833);var heatmap_1=__webpack_require__(834);var line_chart_1=__webpack_require__(836);var table_1=__webpack_require__(837);var totals_1=__webpack_require__(838);var VIS_COMPONENTS=[totals_1.Totals,table_1.Table,line_chart_1.LineChart,bar_chart_1.BarChart,heatmap_1.Heatmap,geo_1.Geo];function getVisualizationComponent(manifest){var manifestName=manifest.name;return immutable_class_1.SimpleArray.find(VIS_COMPONENTS,function(v){return v.visName===manifestName})}exports.getVisualizationComponent=getVisualizationComponent},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__number__=__webpack_require__(753);__webpack_exports__["a"]=function(values,p,valueof){if(valueof==null)valueof=__WEBPACK_IMPORTED_MODULE_0__number__["a"];if(!(n=values.length))return;if((p=+p)<=0||n<2)return+valueof(values[0],0,values);if(p>=1)return+valueof(values[n-1],n-1,values);var n,i=(n-1)*p,i0=Math.floor(i),value0=+valueof(values[i0],i0,values),value1=+valueof(values[i0+1],i0+1,values);return value0+(value1-value0)*(i-i0)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return prefix});var prefix="$";function Map(){}Map.prototype=map.prototype={constructor:Map,has:function(key){return prefix+key in this},get:function(key){return this[prefix+key]},set:function(key,value){this[prefix+key]=value;return this},remove:function(key){var property=prefix+key;return property in this&&delete this[property]},clear:function(){for(var property in this)if(property[0]===prefix)delete this[property]},keys:function(){var keys=[];for(var property in this)if(property[0]===prefix)keys.push(property.slice(1));return keys},values:function(){var values=[];for(var property in this)if(property[0]===prefix)values.push(this[property]);return values},entries:function(){var entries=[];for(var property in this)if(property[0]===prefix)entries.push({key:property.slice(1),value:this[property]});return entries},size:function(){var size=0;for(var property in this)if(property[0]===prefix)++size;return size},empty:function(){for(var property in this)if(property[0]===prefix)return false;return true},each:function(f){for(var property in this)if(property[0]===prefix)f(this[property],property.slice(1),this)}};function map(object,f){var map=new Map;if(object instanceof Map)object.each(function(value,key){map.set(key,value)});else if(Array.isArray(object)){var i=-1,n=object.length,o;if(f==null)while(++i<n)map.set(i,object[i]);else while(++i<n)map.set(f(o=object[i],i,object),o)}else if(object)for(var key in object)map.set(key,object[key]);return map}__webpack_exports__["a"]=map},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__define__=__webpack_require__(766);__webpack_exports__["c"]=Color;__webpack_require__.d(__webpack_exports__,"e",function(){return darker});__webpack_require__.d(__webpack_exports__,"d",function(){return brighter});__webpack_exports__["h"]=color;__webpack_exports__["b"]=rgbConvert;__webpack_exports__["g"]=rgb;__webpack_exports__["a"]=Rgb;__webpack_exports__["f"]=hsl;function Color(){}var darker=.7;var brighter=1/darker;var reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex3=/^#([0-9a-f]{3})$/,reHex6=/^#([0-9a-f]{6})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$");var named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__define__["a"])(Color,color,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}});function color(format){var m;format=(format+"").trim().toLowerCase();return(m=reHex3.exec(format))?(m=parseInt(m[1],16),new Rgb(m>>8&15|m>>4&240,m>>4&15|m&240,(m&15)<<4|m&15,1)):(m=reHex6.exec(format))?rgbn(parseInt(m[1],16)):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(m[1]*255/100,m[2]*255/100,m[3]*255/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(m[1]*255/100,m[2]*255/100,m[3]*255/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):format==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,n&255,1)}function rgba(r,g,b,a){if(a<=0)r=g=b=NaN;return new Rgb(r,g,b,a)}function rgbConvert(o){if(!(o instanceof Color))o=color(o);if(!o)return new Rgb;o=o.rgb();return new Rgb(o.r,o.g,o.b,o.opacity)}function rgb(r,g,b,opacity){return arguments.length===1?rgbConvert(r):new Rgb(r,g,b,opacity==null?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r;this.g=+g;this.b=+b;this.opacity=+opacity}__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__define__["a"])(Rgb,rgb,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__define__["b"])(Color,{brighter:function(k){k=k==null?brighter:Math.pow(brighter,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){k=k==null?darker:Math.pow(darker,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&(0<=this.g&&this.g<=255)&&(0<=this.b&&this.b<=255)&&(0<=this.opacity&&this.opacity<=1)},toString:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(a===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(a===1?")":", "+a+")")}}));function hsla(h,s,l,a){if(a<=0)h=s=l=NaN;else if(l<=0||l>=1)h=s=NaN;else if(s<=0)h=NaN;return new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(!(o instanceof Color))o=color(o);if(!o)return new Hsl;if(o instanceof Hsl)return o;o=o.rgb();var r=o.r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;if(s){if(r===max)h=(g-b)/s+(g<b)*6;else if(g===max)h=(b-r)/s+2;else h=(r-g)/s+4;s/=l<.5?max+min:2-max-min;h*=60}else{s=l>0&&l<1?0:h}return new Hsl(h,s,l,o.opacity)}function hsl(h,s,l,opacity){return arguments.length===1?hslConvert(h):new Hsl(h,s,l,opacity==null?1:opacity)}function Hsl(h,s,l,opacity){this.h=+h;this.s=+s;this.l=+l;this.opacity=+opacity}__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__define__["a"])(Hsl,hsl,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__define__["b"])(Color,{brighter:function(k){k=k==null?brighter:Math.pow(brighter,k);return new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){k=k==null?darker:Math.pow(darker,k);return new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=this.h%360+(this.h<0)*360,s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)}}));function hsl2rgb(h,m1,m2){return(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)*255}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["b"]=extend;__webpack_exports__["a"]=function(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype;prototype.constructor=constructor};function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["b"]=basis;function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}__webpack_exports__["a"]=function(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_color__=__webpack_require__(749);var __WEBPACK_IMPORTED_MODULE_1__rgb__=__webpack_require__(799);var __WEBPACK_IMPORTED_MODULE_2__array__=__webpack_require__(794);var __WEBPACK_IMPORTED_MODULE_3__date__=__webpack_require__(797);var __WEBPACK_IMPORTED_MODULE_4__number__=__webpack_require__(759);var __WEBPACK_IMPORTED_MODULE_5__object__=__webpack_require__(798);var __WEBPACK_IMPORTED_MODULE_6__string__=__webpack_require__(800);var __WEBPACK_IMPORTED_MODULE_7__constant__=__webpack_require__(796);__webpack_exports__["a"]=function(a,b){var t=typeof b,c;return b==null||t==="boolean"?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__constant__["a"])(b):(t==="number"?__WEBPACK_IMPORTED_MODULE_4__number__["a"]:t==="string"?(c=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["f"])(b))?(b=c,__WEBPACK_IMPORTED_MODULE_1__rgb__["a"]):__WEBPACK_IMPORTED_MODULE_6__string__["a"]:b instanceof __WEBPACK_IMPORTED_MODULE_0_d3_color__["f"]?__WEBPACK_IMPORTED_MODULE_1__rgb__["a"]:b instanceof Date?__WEBPACK_IMPORTED_MODULE_3__date__["a"]:Array.isArray(b)?__WEBPACK_IMPORTED_MODULE_2__array__["a"]:isNaN(b)?__WEBPACK_IMPORTED_MODULE_5__object__["a"]:__WEBPACK_IMPORTED_MODULE_4__number__["a"])(a,b)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(x){return function(){return x}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__locale__=__webpack_require__(807);__webpack_require__.d(__webpack_exports__,"c",function(){return timeFormat});__webpack_require__.d(__webpack_exports__,"a",function(){return utcFormat});__webpack_require__.d(__webpack_exports__,"b",function(){return utcParse});var locale;var timeFormat;var timeParse;var utcFormat;var utcParse;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(definition){locale=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__locale__["a"])(definition);timeFormat=locale.format;timeParse=locale.parse;utcFormat=locale.utcFormat;utcParse=locale.utcParse;return locale}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__src_interval__=__webpack_require__(746);var __WEBPACK_IMPORTED_MODULE_1__src_millisecond__=__webpack_require__(934);__webpack_require__.d(__webpack_exports__,"t",function(){return __WEBPACK_IMPORTED_MODULE_1__src_millisecond__["a"]});__webpack_require__.d(__webpack_exports__,"h",function(){return __WEBPACK_IMPORTED_MODULE_1__src_millisecond__["a"]});var __WEBPACK_IMPORTED_MODULE_2__src_second__=__webpack_require__(937);__webpack_require__.d(__webpack_exports__,"s",function(){return __WEBPACK_IMPORTED_MODULE_2__src_second__["a"]});__webpack_require__.d(__webpack_exports__,"g",function(){return __WEBPACK_IMPORTED_MODULE_2__src_second__["a"]});var __WEBPACK_IMPORTED_MODULE_3__src_minute__=__webpack_require__(935);__webpack_require__.d(__webpack_exports__,"r",function(){return __WEBPACK_IMPORTED_MODULE_3__src_minute__["a"]});var __WEBPACK_IMPORTED_MODULE_4__src_hour__=__webpack_require__(933);__webpack_require__.d(__webpack_exports__,"q",function(){return __WEBPACK_IMPORTED_MODULE_4__src_hour__["a"]});var __WEBPACK_IMPORTED_MODULE_5__src_day__=__webpack_require__(932);__webpack_require__.d(__webpack_exports__,"i",function(){return __WEBPACK_IMPORTED_MODULE_5__src_day__["a"]});var __WEBPACK_IMPORTED_MODULE_6__src_week__=__webpack_require__(944);__webpack_require__.d(__webpack_exports__,"p",function(){return __WEBPACK_IMPORTED_MODULE_6__src_week__["a"]});__webpack_require__.d(__webpack_exports__,"k",function(){return __WEBPACK_IMPORTED_MODULE_6__src_week__["a"]});__webpack_require__.d(__webpack_exports__,"l",function(){return __WEBPACK_IMPORTED_MODULE_6__src_week__["b"]});var __WEBPACK_IMPORTED_MODULE_7__src_month__=__webpack_require__(936);__webpack_require__.d(__webpack_exports__,"o",function(){return __WEBPACK_IMPORTED_MODULE_7__src_month__["a"]});var __WEBPACK_IMPORTED_MODULE_8__src_year__=__webpack_require__(945);__webpack_require__.d(__webpack_exports__,"j",function(){return __WEBPACK_IMPORTED_MODULE_8__src_year__["a"]});var __WEBPACK_IMPORTED_MODULE_9__src_utcMinute__=__webpack_require__(940);__webpack_require__.d(__webpack_exports__,"f",function(){return __WEBPACK_IMPORTED_MODULE_9__src_utcMinute__["a"]});var __WEBPACK_IMPORTED_MODULE_10__src_utcHour__=__webpack_require__(939);__webpack_require__.d(__webpack_exports__,"e",function(){return __WEBPACK_IMPORTED_MODULE_10__src_utcHour__["a"]});var __WEBPACK_IMPORTED_MODULE_11__src_utcDay__=__webpack_require__(938);__webpack_require__.d(__webpack_exports__,"d",function(){return __WEBPACK_IMPORTED_MODULE_11__src_utcDay__["a"]});var __WEBPACK_IMPORTED_MODULE_12__src_utcWeek__=__webpack_require__(942);__webpack_require__.d(__webpack_exports__,"c",function(){return __WEBPACK_IMPORTED_MODULE_12__src_utcWeek__["a"]});__webpack_require__.d(__webpack_exports__,"m",function(){return __WEBPACK_IMPORTED_MODULE_12__src_utcWeek__["a"]});__webpack_require__.d(__webpack_exports__,"n",function(){return __WEBPACK_IMPORTED_MODULE_12__src_utcWeek__["b"]});var __WEBPACK_IMPORTED_MODULE_13__src_utcMonth__=__webpack_require__(941);__webpack_require__.d(__webpack_exports__,"b",function(){return __WEBPACK_IMPORTED_MODULE_13__src_utcMonth__["a"]});var __WEBPACK_IMPORTED_MODULE_14__src_utcYear__=__webpack_require__(943);__webpack_require__.d(__webpack_exports__,"a",function(){return __WEBPACK_IMPORTED_MODULE_14__src_utcYear__["a"]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function get(key){try{return JSON.parse(localStorage[key])}catch(e){return undefined}}exports.get=get;function set(key,value){try{localStorage[key]=JSON.stringify(value)}catch(e){}}exports.set=set},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var components_1=__webpack_require__(203);var visualizations_1=__webpack_require__(762);__webpack_require__(957);var CollectionTileCard=function(_super){tslib_1.__extends(CollectionTileCard,_super);function CollectionTileCard(){var _this=_super.call(this)||this;_this.state={};return _this}CollectionTileCard.prototype.calculateSize=function(){var visComponent=this.visComponent;if(!visComponent)return;visComponent.calculateSize()};CollectionTileCard.prototype.onTitleChange=function(e){var _a=this.props,tile=_a.tile,onTileChange=_a.onTileChange;if(!onTileChange)return;var value=e.target.value;onTileChange(tile.changeTitle(value))};CollectionTileCard.prototype.renderTitle=function(){var _a=this.props,editing=_a.editing,tile=_a.tile;return React.createElement("div",{className:classNames("title",{editing:editing})},React.createElement("span",{className:"static"},tile.title),editing?React.createElement("input",{className:"edit",value:tile.title,onChange:this.onTitleChange.bind(this)}):null)};CollectionTileCard.prototype.renderEditRight=function(){var _this=this;var _a=this.props,tile=_a.tile,onTileDelete=_a.onTileDelete,onSuperviseDataCube=_a.onSuperviseDataCube;var myEditVis=function(){onSuperviseDataCube({title:tile.title,initEssence:tile.essence,onCancel:function(){},saveLabel:strings_1.STRINGS.save,onSave:function(newEssence){var _a=_this.props,tile=_a.tile,onTileChange=_a.onTileChange;onTileChange(tile.changeEssence(newEssence))}})};return React.createElement("div",{className:"right"},React.createElement("div",{className:"edit-button",onClick:myEditVis},React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_EDIT})),React.createElement("div",{className:"delete-button",onClick:onTileDelete},React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_DELETE})))};CollectionTileCard.prototype.renderDisplayRight=function(){return React.createElement("div",{className:"right"},React.createElement("div",{className:"expand-button"},React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_EXPAND})))};CollectionTileCard.prototype.render=function(){var _this=this;var _a=this.props,tile=_a.tile,commonEssence=_a.commonEssence,timekeeper=_a.timekeeper,clicker=_a.clicker,editing=_a.editing,isThumbnail=_a.isThumbnail,noScroll=_a.noScroll,controller=_a.controller;if(!tile)return null;var essence=tile.getEffectiveEssence(commonEssence);var visElement=null;if(essence.visResolve.proceedWithDimensions()){if(!models_1.Manifest.isTotals(essence.visualization)&&essence.getMeasureMode()==="multi"){essence=essence.toggleMultiMeasureMode()}var visProps={ref:function(e){return _this.visComponent=e},id:tile.name,clicker:clicker,essence:essence,timekeeper:timekeeper,deviceSize:models_1.Device.getSize(),isThumbnail:isThumbnail,noScroll:noScroll};visElement=React.createElement(visualizations_1.getVisualizationComponent(essence.visualization),visProps)}return React.createElement("div",{className:classNames("collection-tile-card",{editing:editing})},React.createElement("div",{className:"headband",onClick:editing?null:function(){return controller.openDataCube(essence.dataCube,essence)}},React.createElement("div",{className:"left"},this.renderTitle(),React.createElement(components_1.Description,{description:tile.getDescription()})),editing?this.renderEditRight():this.renderDisplayRight()),React.createElement("div",{className:"content"},visElement))};return CollectionTileCard}(React.Component);exports.CollectionTileCard=CollectionTileCard},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var chronoshift_1=__webpack_require__(16);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var components_1=__webpack_require__(203);var raw_data_modal_1=__webpack_require__(814);var drag_manager_1=__webpack_require__(91);var localStorage=__webpack_require__(773);var query_runner_1=__webpack_require__(90);var visualizations_1=__webpack_require__(762);var cube_header_bar_1=__webpack_require__(823);var supervised_cube_header_bar_1=__webpack_require__(824);__webpack_require__(962);var PADDING=10;var MIN_PANEL_WIDTH=240;var MAX_PANEL_WIDTH=400;var CubeView=function(_super){tslib_1.__extends(CubeView,_super);function CubeView(){var _this=_super.call(this)||this;_this.state={essence:null,dragOver:false,showRawDataModal:false,layout:_this.getStoredLayout(),updatingMaxTime:false};_this.clicker={changeTimezone:function(timezone){var essence=_this.state.essence;essence=essence.changeTimezone(timezone);_this.setState({essence:essence})},changeFilter:function(filter){var essence=_this.state.essence;essence=essence.changeFilter(filter);_this.setState({essence:essence})},changeSplits:function(splits,strategy,colors){var essence=_this.state.essence;if(colors)essence=essence.changeColors(colors);_this.setState({essence:essence.updateWithNewSplits(splits,strategy)})},changeSplit:function(split,strategy){var essence=_this.state.essence;_this.setState({essence:essence.changeSplit(split,strategy)})},addSplit:function(split,strategy){var essence=_this.state.essence;_this.setState({essence:essence.addSplit(split,strategy)})},removeSplit:function(split,strategy){var essence=_this.state.essence;_this.setState({essence:essence.removeSplit(split,strategy)})},changeColors:function(colors){var essence=_this.state.essence;_this.setState({essence:essence.changeColors(colors)})},summonVisualization:function(visualization){var essence=_this.state.essence;_this.setState({essence:essence.summonVisualization(visualization)})},pin:function(dimension){var essence=_this.state.essence;_this.setState({essence:essence.pin(dimension)})},unpin:function(dimension){var essence=_this.state.essence;_this.setState({essence:essence.unpin(dimension)})},changePinnedSortMeasure:function(measure){var essence=_this.state.essence;_this.setState({essence:essence.changePinnedSortMeasure(measure)})},toggleMultiMeasureMode:function(){var essence=_this.state.essence;var newEssence=essence.toggleMultiMeasureMode();var defaultMeasureMode=localStorage.get("multi-measure")||models_1.Essence.DEFAULT_DEFAULT_MEASURE_MODE;if(Object.prototype.toString.call(defaultMeasureMode)!=="[object Object]")defaultMeasureMode={};defaultMeasureMode[newEssence.visualization.name]=newEssence.measureMode;localStorage.set("multi-measure",defaultMeasureMode);_this.setState({essence:newEssence.updateDefaultMeasureModes(defaultMeasureMode)})},toggleEffectiveMeasure:function(measure){var essence=_this.state.essence;_this.setState({essence:essence.toggleEffectiveMeasure(measure)})},switchToMeasure:function(measure){var essence=_this.state.essence;_this.setState({essence:essence.switchToMeasure(measure)})},changeHighlight:function(highlight){var essence=_this.state.essence;_this.setState({essence:essence.changeHighlight(highlight)})},acceptHighlight:function(){var essence=_this.state.essence;_this.setState({essence:essence.acceptHighlight()})},dropHighlight:function(){var essence=_this.state.essence;_this.setState({essence:essence.dropHighlight()})},invertHighlight:function(){var essence=_this.state.essence;if(!essence.canInvertHighlight())return false;_this.setState({essence:essence.invertHighlight()});return true},acceptInvertedHighlight:function(){var essence=_this.state.essence;if(essence.canInvertHighlight()){_this.setState({essence:essence.invertHighlight().acceptHighlight()})}},changeCustomDimensions:function(dimensions){var essence=_this.state.essence;_this.setState({essence:essence.changeCustomDimensions(dimensions)})}};return _this}CubeView.prototype.onRefreshMaxTime=function(){var _this=this;var _a=this.state,essence=_a.essence,timekeeper=_a.timekeeper;if(!essence)return;var dataCube=essence.dataCube;var maxTimeQuery=dataCube.getMaxTimeQuery();if(!maxTimeQuery)return;this.setState({updatingMaxTime:true})
;query_runner_1.QueryRunner.fetch(dataCube,maxTimeQuery,chronoshift_1.Timezone.UTC).then(models_1.DataCube.processMaxTimeQuery).then(function(updatedMaxTime){if(!_this.mounted)return;_this.setState({timekeeper:timekeeper.addOrUpdateTimeTagFor(dataCube.name,updatedMaxTime),updatingMaxTime:false})})};CubeView.prototype.componentWillMount=function(){this.initFromProps(this.props)};CubeView.prototype.componentDidMount=function(){this.mounted=true;drag_manager_1.DragManager.init();this.globalResizeListener();var _a=this.props,dataCube=_a.dataCube,initTimekeeper=_a.initTimekeeper;if(dataCube&&dataCube.getMaxTimeQuery()&&!initTimekeeper.hasTime(dataCube.name)){setTimeout(this.onRefreshMaxTime.bind(this),9)}};CubeView.prototype.initFromProps=function(props){var hash=props.hash,dataCube=props.dataCube,initTimekeeper=props.initTimekeeper,changeHash=props.changeHash;if(!dataCube)return;var essence=this.getEssenceFromHash(dataCube,hash);if(!essence){essence=this.getEssenceFromDataCube(dataCube);if(changeHash)changeHash(essence.getURL(),true)}this.setState({essence:essence,timekeeper:initTimekeeper||models_1.Timekeeper.EMPTY})};CubeView.prototype.updateFromProps=function(oldProps,nextProps){if(oldProps.dataCube.name!==nextProps.dataCube.name||oldProps.hash!==nextProps.hash){var hashEssence=this.getEssenceFromHash(nextProps.dataCube,nextProps.hash);if(!hashEssence){hashEssence=this.getEssenceFromDataCube(nextProps.dataCube)}this.setState({essence:hashEssence})}};CubeView.prototype.componentWillReceiveProps=function(nextProps){if(!nextProps.dataCube)return;if(!this.props.dataCube&&nextProps.dataCube){this.initFromProps(nextProps);return}this.updateFromProps(this.props,nextProps)};CubeView.prototype.componentWillUpdate=function(nextProps,nextState){var changeHash=this.props.changeHash;var essence=this.state.essence;if(!nextState.essence||!essence)return;if(changeHash&&!nextState.essence.equals(essence)){changeHash(nextState.essence.getURL())}};CubeView.prototype.componentWillUnmount=function(){this.mounted=false};CubeView.prototype.getEssenceFromDataCube=function(dataCube){return models_1.Essence.fromDataCube(dataCube,{dataCube:dataCube,visualizations:models_1.MANIFESTS,defaultMeasureModes:localStorage.get("multi-measure")})};CubeView.prototype.getEssenceFromHash=function(dataCube,hash){if(!dataCube||!hash)return null;return models_1.Essence.fromHash(hash,{dataCube:dataCube,visualizations:models_1.MANIFESTS,defaultMeasureModes:localStorage.get("multi-measure")})};CubeView.prototype.globalResizeListener=function(){this.setState({deviceSize:models_1.Device.getSize()})};CubeView.prototype.canDrop=function(e){return Boolean(drag_manager_1.DragManager.getDragDimension())};CubeView.prototype.dragEnter=function(e){if(!this.canDrop(e))return;e.preventDefault();this.setState({dragOver:true})};CubeView.prototype.dragOver=function(e){if(!this.canDrop(e))return;e.dataTransfer.dropEffect="move";e.preventDefault()};CubeView.prototype.dragLeave=function(e){this.setState({dragOver:false})};CubeView.prototype.drop=function(e){var essence=this.state.essence;if(!this.canDrop(e))return;e.preventDefault();var dimension=drag_manager_1.DragManager.getDragDimension();if(dimension){this.clicker.changeSplits(models_1.Splits.fromSplitCombine(models_1.SplitCombine.fromDimensionAndFilterAndMeasure(dimension,essence.filter,essence.getSortMeasure())),models_1.VisStrategy.FairGame)}this.setState({dragOver:false})};CubeView.prototype.triggerFilterMenu=function(dimension){if(!dimension)return;this.filterTile.filterMenuRequest(dimension)};CubeView.prototype.triggerSplitMenu=function(dimension){if(!dimension)return;this.splitTile.splitMenuRequest(dimension)};CubeView.prototype.getStoredLayout=function(){var layout=localStorage.get("cube-view-layout")||CubeView.DEFAULT_LAYOUT;if(Object.prototype.toString.call(layout)!=="[object Object]")layout=CubeView.DEFAULT_LAYOUT;return Object.assign({},CubeView.DEFAULT_LAYOUT,layout)};CubeView.prototype.storeLayout=function(layout){localStorage.set("cube-view-layout",layout)};CubeView.prototype.onDimensionPanelResize=function(value){var layout=this.state.layout;layout.dimensionPanelWidth=value;this.setState({layout:layout});this.storeLayout(layout)};CubeView.prototype.onDimensionRatioChange=function(value){var layout=this.state.layout;layout.dimensionsPanelRatio=value;this.setState({layout:layout});this.storeLayout(layout)};CubeView.prototype.onPinboardPanelResize=function(value){var layout=this.state.layout;layout.pinboardWidth=value;this.setState({layout:layout});this.storeLayout(layout)};CubeView.prototype.onPanelResizeEnd=function(){if(this.visualization)this.visualization.calculateSize();if(this.filterTile)this.filterTile.calculateSize();if(this.splitTile)this.splitTile.calculateSize()};CubeView.prototype.getUrlPrefix=function(){var url=window.location;var urlBase=url.origin+url.pathname;return urlBase+"#"};CubeView.prototype.renderRawDataModal=function(){var _this=this;var _a=this.state,showRawDataModal=_a.showRawDataModal,essence=_a.essence,timekeeper=_a.timekeeper;if(!showRawDataModal)return null;return React.createElement(raw_data_modal_1.RawDataModal,{essence:essence,timekeeper:timekeeper,onClose:function(){return _this.setState({showRawDataModal:false})}})};CubeView.prototype.renderHeaderBar=function(){var _this=this;var _a=this.props,settings=_a.settings,controller=_a.controller,user=_a.user,userMode=_a.userMode,customization=_a.customization,supervisor=_a.supervisor,stateful=_a.stateful,dataCube=_a.dataCube;var _b=this.state,essence=_b.essence,timekeeper=_b.timekeeper,updatingMaxTime=_b.updatingMaxTime;if(supervisor){return React.createElement(supervised_cube_header_bar_1.SupervisedCubeHeaderBar,{clicker:this.clicker,essence:essence,customization:customization,supervisor:supervisor})}else{return React.createElement(cube_header_bar_1.CubeHeaderBar,{settings:settings,controller:controller,clicker:this.clicker,essence:essence,timekeeper:timekeeper,user:user,userMode:userMode,onEditClick:function(){return controller.editDataCube(dataCube,"update")},getUrlPrefix:this.getUrlPrefix.bind(this),onRefreshMaxTime:this.onRefreshMaxTime.bind(this),openRawDataModal:function(){return _this.setState({showRawDataModal:true})},customization:customization,getDownloadableDataset:function(){return _this.downloadableDataset},updatingMaxTime:updatingMaxTime,stateful:stateful})}};CubeView.prototype.render=function(){var _this=this;var clicker=this.clicker;var _a=this.state,deviceSize=_a.deviceSize,layout=_a.layout,essence=_a.essence,customColors=_a.customColors,timekeeper=_a.timekeeper,dragOver=_a.dragOver;if(!essence)return null;var visualization=essence.visualization;var visElement=null;if(essence.visResolve.proceedWithDimensions()){var visProps={ref:function(e){return _this.visualization=e},clicker:clicker,timekeeper:timekeeper,essence:essence,deviceSize:deviceSize,openRawDataModal:function(){return _this.setState({showRawDataModal:true})},registerDownloadableDataset:function(dataset){_this.downloadableDataset=dataset},registerCustomColors:function(colors){var customColors=_this.state.customColors;if(colors.equals(customColors))return;_this.setState({customColors:colors})}};visElement=React.createElement(visualizations_1.getVisualizationComponent(visualization),visProps)}var manualFallback=null;if(essence.visResolve.rejectedDimensions()||essence.visResolve.rejectedCombines()){manualFallback=React.createElement(components_1.ManualFallback,{clicker:clicker,essence:essence})}var styles={dimensionMeasurePanel:{width:layout.dimensionPanelWidth-2*PADDING,dimensionTile:{height:layout.dimensionsPanelRatio+"%"},measureTile:{top:layout.dimensionsPanelRatio+"%"}},centerPanel:{left:layout.dimensionPanelWidth,right:layout.pinboardWidth},pinboardPanel:{width:layout.pinboardWidth}};if(deviceSize==="small"){styles={dimensionMeasurePanel:{width:200,dimensionTile:{height:layout.dimensionsPanelRatio+"%"},measureTile:{top:layout.dimensionsPanelRatio+"%"}},centerPanel:{left:200,right:200},pinboardPanel:{width:200}}}return React.createElement("div",{className:"cube-view"},React.createElement(caladan_1.GlobalEventListener,{resize:this.globalResizeListener.bind(this)}),this.renderHeaderBar(),React.createElement("div",{className:"container",ref:"container"},React.createElement("div",{className:"dimension-measure-panel",style:styles.dimensionMeasurePanel},React.createElement(components_1.DimensionListTile,{style:styles.dimensionMeasurePanel.dimensionTile,clicker:clicker,essence:essence,timekeeper:timekeeper,triggerFilterMenu:function(d){return _this.triggerFilterMenu(d)},triggerSplitMenu:function(d){return _this.triggerSplitMenu(d)},getUrlPrefix:function(){return _this.getUrlPrefix()}}),React.createElement(caladan_1.ResizeHandle,{side:"top",initialValue:layout.dimensionsPanelRatio,onResize:this.onDimensionRatioChange.bind(this),mode:"percentage",min:20,max:80}),React.createElement(components_1.MeasuresTile,{style:styles.dimensionMeasurePanel.measureTile,clicker:clicker,essence:essence})),deviceSize!=="small"?React.createElement(caladan_1.ResizeHandle,{side:"left",initialValue:layout.dimensionPanelWidth,onResize:this.onDimensionPanelResize.bind(this),onResizeEnd:this.onPanelResizeEnd.bind(this),min:MIN_PANEL_WIDTH,max:MAX_PANEL_WIDTH}):null,React.createElement("div",{className:"center-panel",style:styles.centerPanel},React.createElement("div",{className:"center-top-bar"},React.createElement("div",{className:"filter-split-section"},React.createElement(components_1.FilterTile,{ref:function(e){return _this.filterTile=e},clicker:clicker,essence:essence,timekeeper:timekeeper,getUrlPrefix:this.getUrlPrefix.bind(this)}),React.createElement(components_1.SplitTile,{ref:function(e){return _this.splitTile=e},clicker:clicker,essence:essence,getUrlPrefix:this.getUrlPrefix.bind(this)})),React.createElement(components_1.VisSelector,{clicker:clicker,essence:essence})),React.createElement("div",{className:"center-main",onDragEnter:this.dragEnter.bind(this)},React.createElement("div",{className:"visualization"},visElement),manualFallback,dragOver?React.createElement(components_1.DropIndicator,null):null,dragOver?React.createElement("div",{className:"drag-mask",onDragOver:this.dragOver.bind(this),onDragLeave:this.dragLeave.bind(this),onDragExit:this.dragLeave.bind(this),onDrop:this.drop.bind(this)}):null)),deviceSize!=="small"?React.createElement(caladan_1.ResizeHandle,{side:"right",initialValue:layout.pinboardWidth,onResize:this.onPinboardPanelResize.bind(this),onResizeEnd:this.onPanelResizeEnd.bind(this),min:MIN_PANEL_WIDTH,max:MAX_PANEL_WIDTH}):null,React.createElement(components_1.PinboardPanel,{style:styles.pinboardPanel,clicker:clicker,essence:essence,customColors:customColors,timekeeper:timekeeper,getUrlPrefix:this.getUrlPrefix.bind(this)})),this.renderRawDataModal())};return CubeView}(React.Component);CubeView.DEFAULT_LAYOUT={dimensionPanelWidth:240,pinboardWidth:240,dimensionsPanelRatio:60};exports.CubeView=CubeView},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return slice});__webpack_require__.d(__webpack_exports__,"a",function(){return map});var array=Array.prototype;var slice=array.slice;var map=array.map},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__ascending__=__webpack_require__(752);var __WEBPACK_IMPORTED_MODULE_1__bisector__=__webpack_require__(778);__webpack_require__.d(__webpack_exports__,"b",function(){return bisectRight});__webpack_require__.d(__webpack_exports__,"c",function(){return bisectLeft});var ascendingBisect=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__bisector__["a"])(__WEBPACK_IMPORTED_MODULE_0__ascending__["a"]);var bisectRight=ascendingBisect.right;var bisectLeft=ascendingBisect.left;__webpack_exports__["a"]=bisectRight},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__ascending__=__webpack_require__(752);__webpack_exports__["a"]=function(compare){if(compare.length===1)compare=ascendingComparator(compare);return{left:function(a,x,lo,hi){if(lo==null)lo=0;if(hi==null)hi=a.length;while(lo<hi){var mid=lo+hi>>>1;if(compare(a[mid],x)<0)lo=mid+1;else hi=mid}return lo},right:function(a,x,lo,hi){if(lo==null)lo=0;if(hi==null)hi=a.length;while(lo<hi){var mid=lo+hi>>>1;if(compare(a[mid],x)>0)hi=mid;else lo=mid+1}return lo}}};function ascendingComparator(f){return function(d,x){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__ascending__["a"])(f(d),x)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__variance__=__webpack_require__(787);__webpack_exports__["a"]=function(array,f){var v=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__variance__["a"])(array,f);return v?Math.sqrt(v):v}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(values,valueof){var n=values.length,i=-1,value,min,max;if(valueof==null){while(++i<n){if((value=values[i])!=null&&value>=value){min=max=value;while(++i<n){if((value=values[i])!=null){if(min>value)min=value;if(max<value)max=value}}}}}else{while(++i<n){if((value=valueof(values[i],i,values))!=null&&value>=value){min=max=value;while(++i<n){if((value=valueof(values[i],i,values))!=null){if(min>value)min=value;if(max<value)max=value}}}}}return[min,max]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(values,valueof){var n=values.length,i=-1,value,min;if(valueof==null){while(++i<n){if((value=values[i])!=null&&value>=value){min=value;while(++i<n){if((value=values[i])!=null&&min>value){min=value}}}}}else{while(++i<n){if((value=valueof(values[i],i,values))!=null&&value>=value){min=value;while(++i<n){if((value=valueof(values[i],i,values))!=null&&min>value){min=value}}}}}return min}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["b"]=pair;__webpack_exports__["a"]=function(array,f){if(f==null)f=pair;var i=0,n=array.length-1,p=array[0],pairs=new Array(n<0?0:n);while(i<n)pairs[i]=f(p,p=array[++i]);return pairs};function pair(a,b){return[a,b]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;var i=-1,n=Math.max(0,Math.ceil((stop-start)/step))|0,range=new Array(n);while(++i<n){range[i]=start+i*step}return range}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(values){return Math.ceil(Math.log(values.length)/Math.LN2)+1}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["b"]=tickIncrement;__webpack_exports__["c"]=tickStep;var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);__webpack_exports__["a"]=function(start,stop,count){var reverse=stop<start,i=-1,n,ticks,step;if(reverse)n=start,start=stop,stop=n;if((step=tickIncrement(start,stop,count))===0||!isFinite(step))return[];if(step>0){start=Math.ceil(start/step);stop=Math.floor(stop/step);ticks=new Array(n=Math.ceil(stop-start+1));while(++i<n)ticks[i]=(start+i)*step}else{start=Math.floor(start*step);stop=Math.ceil(stop*step);ticks=new Array(n=Math.ceil(start-stop+1));while(++i<n)ticks[i]=(start-i)/step}if(reverse)ticks.reverse();return ticks};function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;if(error>=e10)step1*=10;else if(error>=e5)step1*=5;else if(error>=e2)step1*=2;return stop<start?-step1:step1}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__min__=__webpack_require__(781);__webpack_exports__["a"]=function(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__min__["a"])(matrix,length),transpose=new Array(m);++i<m;){for(var j=-1,n,row=transpose[i]=new Array(n);++j<n;){row[j]=matrix[j][i]}}return transpose};function length(d){return d.length}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__number__=__webpack_require__(753);__webpack_exports__["a"]=function(values,valueof){var n=values.length,m=0,i=-1,mean=0,value,delta,sum=0;if(valueof==null){while(++i<n){if(!isNaN(value=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__number__["a"])(values[i]))){delta=value-mean;mean+=delta/++m;sum+=delta*(value-mean)}}}else{while(++i<n){if(!isNaN(value=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__number__["a"])(valueof(values[i],i,values)))){delta=value-mean;mean+=delta/++m;sum+=delta*(value-mean)}}}if(m>1)return sum/(m-1)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return deg2rad});__webpack_require__.d(__webpack_exports__,"a",function(){return rad2deg});var deg2rad=Math.PI/180;var rad2deg=180/Math.PI},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__src_defaultLocale__=__webpack_require__(895);__webpack_require__.d(__webpack_exports__,"f",function(){return __WEBPACK_IMPORTED_MODULE_0__src_defaultLocale__["a"]});__webpack_require__.d(__webpack_exports__,"c",function(){return __WEBPACK_IMPORTED_MODULE_0__src_defaultLocale__["b"]});var __WEBPACK_IMPORTED_MODULE_1__src_locale__=__webpack_require__(793);var __WEBPACK_IMPORTED_MODULE_2__src_formatSpecifier__=__webpack_require__(791);__webpack_require__.d(__webpack_exports__,"a",function(){return __WEBPACK_IMPORTED_MODULE_2__src_formatSpecifier__["a"]});var __WEBPACK_IMPORTED_MODULE_3__src_precisionFixed__=__webpack_require__(901);__webpack_require__.d(__webpack_exports__,"e",function(){return __WEBPACK_IMPORTED_MODULE_3__src_precisionFixed__["a"]});var __WEBPACK_IMPORTED_MODULE_4__src_precisionPrefix__=__webpack_require__(902);__webpack_require__.d(__webpack_exports__,"b",function(){return __WEBPACK_IMPORTED_MODULE_4__src_precisionPrefix__["a"]});var __WEBPACK_IMPORTED_MODULE_5__src_precisionRound__=__webpack_require__(903);__webpack_require__.d(__webpack_exports__,"d",function(){return __WEBPACK_IMPORTED_MODULE_5__src_precisionRound__["a"]})},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__formatDecimal__=__webpack_require__(767);__webpack_require__.d(__webpack_exports__,"b",function(){return prefixExponent});var prefixExponent;__webpack_exports__["a"]=function(x,p){var d=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__formatDecimal__["a"])(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(exponent/3)))*3)+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__formatDecimal__["a"])(x,Math.max(0,p+i-1))[0]}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__formatTypes__=__webpack_require__(792);__webpack_exports__["a"]=formatSpecifier;var re=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function formatSpecifier(specifier){return new FormatSpecifier(specifier)}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match,fill=match[1]||" ",align=match[2]||">",sign=match[3]||"-",symbol=match[4]||"",zero=!!match[5],width=match[6]&&+match[6],comma=!!match[7],precision=match[8]&&+match[8].slice(1),type=match[9]||"";if(type==="n")comma=true,type="g";else if(!__WEBPACK_IMPORTED_MODULE_0__formatTypes__["a"][type])type="";if(zero||fill==="0"&&align==="=")zero=true,fill="0",align="=";this.fill=fill;this.align=align;this.sign=sign;this.symbol=symbol;this.zero=zero;this.width=width;this.comma=comma;this.precision=precision;this.type=type}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__formatDefault__=__webpack_require__(896);var __WEBPACK_IMPORTED_MODULE_1__formatPrefixAuto__=__webpack_require__(790);var __WEBPACK_IMPORTED_MODULE_2__formatRounded__=__webpack_require__(899);__webpack_exports__["a"]={"":__WEBPACK_IMPORTED_MODULE_0__formatDefault__["a"],"%":function(x,p){return(x*100).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function(x){return Math.round(x).toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__formatRounded__["a"])(x*100,p)},r:__WEBPACK_IMPORTED_MODULE_2__formatRounded__["a"],s:__WEBPACK_IMPORTED_MODULE_1__formatPrefixAuto__["a"],X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__exponent__=__webpack_require__(758);var __WEBPACK_IMPORTED_MODULE_1__formatGroup__=__webpack_require__(897);var __WEBPACK_IMPORTED_MODULE_2__formatNumerals__=__webpack_require__(898);var __WEBPACK_IMPORTED_MODULE_3__formatSpecifier__=__webpack_require__(791);var __WEBPACK_IMPORTED_MODULE_4__formatTypes__=__webpack_require__(792);var __WEBPACK_IMPORTED_MODULE_5__formatPrefixAuto__=__webpack_require__(790);var __WEBPACK_IMPORTED_MODULE_6__identity__=__webpack_require__(900);var prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];__webpack_exports__["a"]=function(locale){var group=locale.grouping&&locale.thousands?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__formatGroup__["a"])(locale.grouping,locale.thousands):__WEBPACK_IMPORTED_MODULE_6__identity__["a"],currency=locale.currency,decimal=locale.decimal,numerals=locale.numerals?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__formatNumerals__["a"])(locale.numerals):__WEBPACK_IMPORTED_MODULE_6__identity__["a"],percent=locale.percent||"%";function newFormat(specifier){specifier=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__formatSpecifier__["a"])(specifier);var fill=specifier.fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,type=specifier.type;var prefix=symbol==="$"?currency[0]:symbol==="#"&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix=symbol==="$"?currency[1]:/[%p]/.test(type)?percent:"";var formatType=__WEBPACK_IMPORTED_MODULE_4__formatTypes__["a"][type],maybeSuffix=!type||/[defgprs%]/.test(type);precision=precision==null?type?6:12:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision));function format(value){var valuePrefix=prefix,valueSuffix=suffix,i,n,c;if(type==="c"){valueSuffix=formatType(value)+valueSuffix;value=""}else{value=+value;var valueNegative=value<0;value=formatType(Math.abs(value),precision);if(valueNegative&&+value===0)valueNegative=false;valuePrefix=(valueNegative?sign==="("?sign:"-":sign==="-"||sign==="("?"":sign)+valuePrefix;valueSuffix=valueSuffix+(type==="s"?prefixes[8+__WEBPACK_IMPORTED_MODULE_5__formatPrefixAuto__["b"]/3]:"")+(valueNegative&&sign==="("?")":"");if(maybeSuffix){i=-1,n=value.length;while(++i<n){if(c=value.charCodeAt(i),48>c||c>57){valueSuffix=(c===46?decimal+value.slice(i+1):value.slice(i))+valueSuffix;value=value.slice(0,i);break}}}}if(comma&&!zero)value=group(value,Infinity);var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";if(comma&&zero)value=group(padding+value,padding.length?width-valueSuffix.length:Infinity),padding="";switch(align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix;break}return numerals(value)}format.toString=function(){return specifier+""};return format}function formatPrefix(specifier,value){var f=newFormat((specifier=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__formatSpecifier__["a"])(specifier),specifier.type="f",specifier)),e=Math.max(-8,Math.min(8,Math.floor(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__exponent__["a"])(value)/3)))*3,k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}return{format:newFormat,formatPrefix:formatPrefix}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__value__=__webpack_require__(769);__webpack_exports__["a"]=function(a,b){var nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(nb),c=new Array(nb),i;for(i=0;i<na;++i)x[i]=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__value__["a"])(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__basis__=__webpack_require__(768);__webpack_exports__["a"]=function(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__basis__["b"])((t-i/n)*n,v0,v1,v2,v3)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(x){return function(){return x}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(a,b){var d=new Date;return a=+a,b-=a,function(t){return d.setTime(a+b*t),d}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__value__=__webpack_require__(769);__webpack_exports__["a"]=function(a,b){var i={},c={},k;if(a===null||typeof a!=="object")a={};if(b===null||typeof b!=="object")b={};for(k in b){if(k in a){i[k]=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__value__["a"])(a[k],b[k])}else{c[k]=b[k]}}return function(t){for(k in i)c[k]=i[k](t);return c}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_color__=__webpack_require__(749);var __WEBPACK_IMPORTED_MODULE_1__basis__=__webpack_require__(768);var __WEBPACK_IMPORTED_MODULE_2__basisClosed__=__webpack_require__(795);var __WEBPACK_IMPORTED_MODULE_3__color__=__webpack_require__(755);__webpack_exports__["a"]=function rgbGamma(y){var color=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__color__["c"])(y);function rgb(start,end){var r=color((start=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["e"])(start)).r,(end=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["e"])(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__color__["a"])(start.opacity,end.opacity);return function(t){start.r=r(t);start.g=g(t);start.b=b(t);start.opacity=opacity(t);return start+""}}rgb.gamma=rgbGamma;return rgb}(1);function rgbSpline(spline){return function(colors){var n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n),i,color;for(i=0;i<n;++i){color=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["e"])(colors[i]);r[i]=color.r||0;g[i]=color.g||0;b[i]=color.b||0}r=spline(r);g=spline(g);b=spline(b);color.opacity=1;return function(t){color.r=r(t);color.g=g(t);color.b=b(t);return color+""}}}var rgbBasis=rgbSpline(__WEBPACK_IMPORTED_MODULE_1__basis__["a"]);var rgbBasisClosed=rgbSpline(__WEBPACK_IMPORTED_MODULE_2__basisClosed__["a"])},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__number__=__webpack_require__(759);var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(b){return function(){return b}}function one(b){return function(t){return b(t)+""}}__webpack_exports__["a"]=function(a,b){var bi=reA.lastIndex=reB.lastIndex=0,am,bm,bs,i=-1,s=[],q=[];a=a+"",b=b+"";while((am=reA.exec(a))&&(bm=reB.exec(b))){if((bs=bm.index)>bi){bs=b.slice(bi,bs);if(s[i])s[i]+=bs;else s[++i]=bs}if((am=am[0])===(bm=bm[0])){if(s[i])s[i]+=bm;else s[++i]=bm}else{s[++i]=null;q.push({i:i,x:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__number__["a"])(am,bm)})}bi=reB.lastIndex}if(bi<b.length){bs=b.slice(bi);if(s[i])s[i]+=bs;else s[++i]=bs}return s.length<2?q[0]?one(q[0].x):zero(b):(b=q.length,function(t){for(var i=0,o;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(domain,interval){domain=domain.slice();var i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1],t;if(x1<x0){t=i0,i0=i1,i1=t;t=x0,x0=x1,x1=t}domain[i0]=interval.floor(x0);domain[i1]=interval.ceil(x1);return domain}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(x){return+x}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_collection__=__webpack_require__(887);var __WEBPACK_IMPORTED_MODULE_1__array__=__webpack_require__(750);__webpack_require__.d(__webpack_exports__,"b",function(){return implicit});__webpack_exports__["a"]=ordinal;var implicit={name:"implicit"};function ordinal(range){var index=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_collection__["a"])(),domain=[],unknown=implicit;range=range==null?[]:__WEBPACK_IMPORTED_MODULE_1__array__["b"].call(range);function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit)return unknown;index.set(key,i=domain.push(d))}return range[(i-1)%range.length]}scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_collection__["a"])();var i=-1,n=_.length,d,key;while(++i<n)if(!index.has(key=(d=_[i])+""))index.set(key,domain.push(d));return scale};scale.range=function(_){return arguments.length?(range=__WEBPACK_IMPORTED_MODULE_1__array__["b"].call(_),scale):range.slice()};scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown};scale.copy=function(){return ordinal().domain(domain).range(range).unknown(unknown)};return scale}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_array__=__webpack_require__(747);var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__=__webpack_require__(754);var __WEBPACK_IMPORTED_MODULE_2_d3_time__=__webpack_require__(772);var __WEBPACK_IMPORTED_MODULE_3_d3_time_format__=__webpack_require__(805);var __WEBPACK_IMPORTED_MODULE_4__array__=__webpack_require__(750);var __WEBPACK_IMPORTED_MODULE_5__continuous__=__webpack_require__(761);var __WEBPACK_IMPORTED_MODULE_6__nice__=__webpack_require__(801);__webpack_exports__["b"]=calendar;var durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365;function date(t){return new Date(t)}function number(t){
return t instanceof Date?+t:+new Date(+t)}function calendar(year,month,week,day,hour,minute,second,millisecond,format){var scale=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__continuous__["a"])(__WEBPACK_IMPORTED_MODULE_5__continuous__["b"],__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["a"]),invert=scale.invert,domain=scale.domain;var formatMillisecond=format(".%L"),formatSecond=format(":%S"),formatMinute=format("%I:%M"),formatHour=format("%I %p"),formatDay=format("%a %d"),formatWeek=format("%b %d"),formatMonth=format("%B"),formatYear=format("%Y");var tickIntervals=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[minute,1,durationMinute],[minute,5,5*durationMinute],[minute,15,15*durationMinute],[minute,30,30*durationMinute],[hour,1,durationHour],[hour,3,3*durationHour],[hour,6,6*durationHour],[hour,12,12*durationHour],[day,1,durationDay],[day,2,2*durationDay],[week,1,durationWeek],[month,1,durationMonth],[month,3,3*durationMonth],[year,1,durationYear]];function tickFormat(date){return(second(date)<date?formatMillisecond:minute(date)<date?formatSecond:hour(date)<date?formatMinute:day(date)<date?formatHour:month(date)<date?week(date)<date?formatDay:formatWeek:year(date)<date?formatMonth:formatYear)(date)}function tickInterval(interval,start,stop,step){if(interval==null)interval=10;if(typeof interval==="number"){var target=Math.abs(stop-start)/interval,i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["bisector"])(function(i){return i[2]}).right(tickIntervals,target);if(i===tickIntervals.length){step=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["tickStep"])(start/durationYear,stop/durationYear,interval);interval=year}else if(i){i=tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i];step=i[1];interval=i[0]}else{step=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["tickStep"])(start,stop,interval);interval=millisecond}}return step==null?interval:interval.every(step)}scale.invert=function(y){return new Date(invert(y))};scale.domain=function(_){return arguments.length?domain(__WEBPACK_IMPORTED_MODULE_4__array__["a"].call(_,number)):domain().map(date)};scale.ticks=function(interval,step){var d=domain(),t0=d[0],t1=d[d.length-1],r=t1<t0,t;if(r)t=t0,t0=t1,t1=t;t=tickInterval(interval,t0,t1,step);t=t?t.range(t0,t1+1):[];return r?t.reverse():t};scale.tickFormat=function(count,specifier){return specifier==null?tickFormat:format(specifier)};scale.nice=function(interval,step){var d=domain();return(interval=tickInterval(interval,d[0],d[d.length-1],step))?domain(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__nice__["a"])(d,interval)):scale};scale.copy=function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__continuous__["c"])(scale,calendar(year,month,week,day,hour,minute,second,millisecond,format))};return scale}__webpack_exports__["a"]=function(){return calendar(__WEBPACK_IMPORTED_MODULE_2_d3_time__["j"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["o"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["p"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["i"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["q"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["r"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["s"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["t"],__WEBPACK_IMPORTED_MODULE_3_d3_time_format__["b"]).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__src_defaultLocale__=__webpack_require__(771);__webpack_require__.d(__webpack_exports__,"b",function(){return __WEBPACK_IMPORTED_MODULE_0__src_defaultLocale__["c"]});__webpack_require__.d(__webpack_exports__,"a",function(){return __WEBPACK_IMPORTED_MODULE_0__src_defaultLocale__["a"]});var __WEBPACK_IMPORTED_MODULE_1__src_locale__=__webpack_require__(807);var __WEBPACK_IMPORTED_MODULE_2__src_isoFormat__=__webpack_require__(806);var __WEBPACK_IMPORTED_MODULE_3__src_isoParse__=__webpack_require__(931)},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__defaultLocale__=__webpack_require__(771);__webpack_require__.d(__webpack_exports__,"a",function(){return isoSpecifier});var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(date){return date.toISOString()}var formatIso=Date.prototype.toISOString?formatIsoNative:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__defaultLocale__["a"])(isoSpecifier);var _unused_webpack_default_export=formatIso},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_time__=__webpack_require__(772);__webpack_exports__["a"]=formatLocale;function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);date.setFullYear(d.y);return date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));date.setUTCFullYear(d.y);return date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newYear(y){return{y:y,m:0,d:1,H:0,M:0,S:0,L:0}}function formatLocale(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths;var periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths);var formats={a:formatShortWeekday,A:formatWeekday,b:formatShortMonth,B:formatMonth,c:null,d:formatDayOfMonth,e:formatDayOfMonth,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:formatPeriod,S:formatSeconds,U:formatWeekNumberSunday,w:formatWeekdayNumber,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent};var utcFormats={a:formatUTCShortWeekday,A:formatUTCWeekday,b:formatUTCShortMonth,B:formatUTCMonth,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:formatUTCPeriod,S:formatUTCSeconds,U:formatUTCWeekNumberSunday,w:formatUTCWeekdayNumber,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent};var parses={a:parseShortWeekday,A:parseWeekday,b:parseShortMonth,B:parseMonth,c:parseLocaleDateTime,d:parseDayOfMonth,e:parseDayOfMonth,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:parsePeriod,S:parseSeconds,U:parseWeekNumberSunday,w:parseWeekdayNumber,W:parseWeekNumberMonday,x:parseLocaleDate,X:parseLocaleTime,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};formats.x=newFormat(locale_date,formats);formats.X=newFormat(locale_time,formats);formats.c=newFormat(locale_dateTime,formats);utcFormats.x=newFormat(locale_date,utcFormats);utcFormats.X=newFormat(locale_time,utcFormats);utcFormats.c=newFormat(locale_dateTime,utcFormats);function newFormat(specifier,formats){return function(date){var string=[],i=-1,j=0,n=specifier.length,c,pad,format;if(!(date instanceof Date))date=new Date(+date);while(++i<n){if(specifier.charCodeAt(i)===37){string.push(specifier.slice(j,i));if((pad=pads[c=specifier.charAt(++i)])!=null)c=specifier.charAt(++i);else pad=c==="e"?" ":"0";if(format=formats[c])c=format(date,pad);string.push(c);j=i+1}}string.push(specifier.slice(j,i));return string.join("")}}function newParse(specifier,newDate){return function(string){var d=newYear(1900),i=parseSpecifier(d,specifier,string+="",0);if(i!=string.length)return null;if("p"in d)d.H=d.H%12+d.p*12;if("W"in d||"U"in d){if(!("w"in d))d.w="W"in d?1:0;var day="Z"in d?utcDate(newYear(d.y)).getUTCDay():newDate(newYear(d.y)).getDay();d.m=0;d.d="W"in d?(d.w+6)%7+d.W*7-(day+5)%7:d.w+d.U*7-(day+6)%7}if("Z"in d){d.H+=d.Z/100|0;d.M+=d.Z%100;return utcDate(d)}return newDate(d)}}function parseSpecifier(d,specifier,string,j){var i=0,n=specifier.length,m=string.length,c,parse;while(i<n){if(j>=m)return-1;c=specifier.charCodeAt(i++);if(c===37){c=specifier.charAt(i++);parse=parses[c in pads?specifier.charAt(i++):c];if(!parse||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++)){return-1}}return j}function parsePeriod(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseShortWeekday(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseWeekday(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseShortMonth(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseMonth(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1}function parseLocaleDateTime(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)}function parseLocaleDate(d,string,i){return parseSpecifier(d,locale_date,string,i)}function parseLocaleTime(d,string,i){return parseSpecifier(d,locale_time,string,i)}function formatShortWeekday(d){return locale_shortWeekdays[d.getDay()]}function formatWeekday(d){return locale_weekdays[d.getDay()]}function formatShortMonth(d){return locale_shortMonths[d.getMonth()]}function formatMonth(d){return locale_months[d.getMonth()]}function formatPeriod(d){return locale_periods[+(d.getHours()>=12)]}function formatUTCShortWeekday(d){return locale_shortWeekdays[d.getUTCDay()]}function formatUTCWeekday(d){return locale_weekdays[d.getUTCDay()]}function formatUTCShortMonth(d){return locale_shortMonths[d.getUTCMonth()]}function formatUTCMonth(d){return locale_months[d.getUTCMonth()]}function formatUTCPeriod(d){return locale_periods[+(d.getUTCHours()>=12)]}return{format:function(specifier){var f=newFormat(specifier+="",formats);f.toString=function(){return specifier};return f},parse:function(specifier){var p=newParse(specifier+="",localDate);p.toString=function(){return specifier};return p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);f.toString=function(){return specifier};return f},utcParse:function(specifier){var p=newParse(specifier,utcDate);p.toString=function(){return specifier};return p}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){var map={},i=-1,n=names.length;while(++i<n)map[names[i].toLowerCase()]=i;return map}function parseWeekdayNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function formatDayOfMonth(d,p){return pad(d.getDate(),p,2)}function formatHour24(d,p){return pad(d.getHours(),p,2)}function formatHour12(d,p){return pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return pad(1+__WEBPACK_IMPORTED_MODULE_0_d3_time__["i"].count(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_time__["j"])(d),d),p,3)}function formatMilliseconds(d,p){return pad(d.getMilliseconds(),p,3)}function formatMonthNumber(d,p){return pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return pad(d.getSeconds(),p,2)}function formatWeekNumberSunday(d,p){return pad(__WEBPACK_IMPORTED_MODULE_0_d3_time__["k"].count(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_time__["j"])(d),d),p,2)}function formatWeekdayNumber(d){return d.getDay()}function formatWeekNumberMonday(d,p){return pad(__WEBPACK_IMPORTED_MODULE_0_d3_time__["l"].count(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_time__["j"])(d),d),p,2)}function formatYear(d,p){return pad(d.getFullYear()%100,p,2)}function formatFullYear(d,p){return pad(d.getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+pad(z/60|0,"0",2)+pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return pad(1+__WEBPACK_IMPORTED_MODULE_0_d3_time__["d"].count(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_time__["a"])(d),d),p,3)}function formatUTCMilliseconds(d,p){return pad(d.getUTCMilliseconds(),p,3)}function formatUTCMonthNumber(d,p){return pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return pad(d.getUTCSeconds(),p,2)}function formatUTCWeekNumberSunday(d,p){return pad(__WEBPACK_IMPORTED_MODULE_0_d3_time__["m"].count(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_time__["a"])(d),d),p,2)}function formatUTCWeekdayNumber(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return pad(__WEBPACK_IMPORTED_MODULE_0_d3_time__["n"].count(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_time__["a"])(d),d),p,2)}function formatUTCYear(d,p){return pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var immutable_ui_1=__webpack_require__(69);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var models=__webpack_require__(10);var strings_1=__webpack_require__(15);__webpack_require__(947);var LABELS=models.LABELS.ATTRIBUTE;function checkSpecialTimeAttribute(attributeInfo,isSpecialTimeAttribute){return!isSpecialTimeAttribute||attributeInfo.type==="TIME"}function toListItem(v){return{label:v,value:v}}var AttributeModal=function(_super){tslib_1.__extends(AttributeModal,_super);function AttributeModal(){var _this=_super.call(this)||this;_this.delegate=new immutable_ui_1.ImmutableFormDelegate(_this);return _this}AttributeModal.prototype.componentWillMount=function(){this.initFromProps(this.props)};AttributeModal.prototype.componentWillReceiveProps=function(nextProps){this.initFromProps(nextProps)};AttributeModal.prototype.initFromProps=function(props){if(props.attribute){this.setState({newInstance:props.attribute,canSave:props.mode==="create",errors:{},isSpecialTimeSelected:props.isSpecialTimeAttribute})}};AttributeModal.prototype.save=function(){var _a=this.props,onSave=_a.onSave,isSpecialTimeAttribute=_a.isSpecialTimeAttribute;var _b=this.state,canSave=_b.canSave,newInstance=_b.newInstance;var isSpecialTimeToggled=this.isSpecialTimeToggled();if(!canSave&&!isSpecialTimeToggled||!checkSpecialTimeAttribute(newInstance,isSpecialTimeAttribute))return;onSave(newInstance,isSpecialTimeToggled)};AttributeModal.prototype.toggleSplittable=function(){var newInstance=this.state.newInstance;var toggled=newInstance.change("unsplitable",!newInstance.unsplitable);return this.delegate.onChange(toggled,true,"unsplitable",undefined)};AttributeModal.prototype.isSpecialTimeToggled=function(){var isSpecialTimeAttribute=this.props.isSpecialTimeAttribute;var isSpecialTimeSelected=this.state.isSpecialTimeSelected;return isSpecialTimeSelected!==isSpecialTimeAttribute};AttributeModal.prototype.toggleIsPrimary=function(){this.setState({isSpecialTimeSelected:!this.state.isSpecialTimeSelected})};AttributeModal.prototype.renderIsPrimaryCheckbox=function(){var _a=this.state,newInstance=_a.newInstance,isSpecialTimeSelected=_a.isSpecialTimeSelected;if(newInstance.type!=="TIME")return null;return React.createElement("div",{className:"row"},React.createElement(caladan_1.Checkbox,{onClick:this.toggleIsPrimary.bind(this),label:LABELS.isPrimary.label,selected:isSpecialTimeSelected,helpText:LABELS.isPrimary.description}))};AttributeModal.prototype.renderButtons=function(){var _a=this.props,attribute=_a.attribute,onClose=_a.onClose;var _b=this.state,newInstance=_b.newInstance,canSave=_b.canSave;var saveButtonDisabled=!canSave||attribute.equals(newInstance);return React.createElement("div",{className:"button-bar"},React.createElement(caladan_1.Button,{className:"cancel",title:"Cancel",type:"secondary",onClick:onClose}),React.createElement(caladan_1.Button,{className:classNames("save",{disabled:saveButtonDisabled}),title:"OK",type:"primary",onClick:this.save.bind(this)}))};AttributeModal.prototype.render=function(){var _a=this.props,onClose=_a.onClose,mode=_a.mode,clusterType=_a.clusterType;var _b=this.state,newInstance=_b.newInstance,errors=_b.errors;if(!newInstance)return null;var unsplittable=newInstance.getUnsplitable();var makeLabel=caladan_1.FormLabel.simpleGenerator(LABELS,errors);var makeDropdownInput=immutable_ui_1.ImmutableDropdown.simpleGenerator(newInstance,this.delegate.onChange,LABELS,errors);var makeTextInput=immutable_ui_1.ImmutableTextInput.simpleGenerator(newInstance,this.delegate.onChange,LABELS,errors);var nativeTypes=AttributeModal.NATIVE_TYPES[clusterType]||AttributeModal.NATIVE_TYPES["druid"];return React.createElement(caladan_1.Modal,{className:"attribute-modal",title:mode==="create"?strings_1.STRINGS.createColumn:strings_1.STRINGS.editColumn,onClose:onClose,onEnter:this.save.bind(this)},React.createElement("form",null,makeLabel("name","name",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["name"]})),makeTextInput("name",/^.+$/,true),makeLabel("nativeType","nativeType",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["nativeType"]})),makeDropdownInput("nativeType",nativeTypes.map(toListItem)),React.createElement("div",{className:"row"},React.createElement(caladan_1.Checkbox,{onClick:this.toggleSplittable.bind(this),label:LABELS.unsplittable.label,helpText:LABELS.unsplittable.description,selected:unsplittable}))),this.renderButtons())};return AttributeModal}(React.Component);AttributeModal.NATIVE_TYPES={druid:["__time","LONG","FLOAT","STRING","hyperUnique","approximateHistogram","thetaSketch"],druidsql:["TIMESTAMP","DATE","VARCHAR","FLOAT","BIGINT"],mysql:["datetime","timestamp","varchar","int","bigint","decimal","float","double","tinyint"],postgress:["timestamp","character varying","integer","bigint","double precision","float","boolean"]};AttributeModal.defaultProps={mode:"edit"};exports.AttributeModal=AttributeModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var ajax_1=__webpack_require__(45);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var immutable_class_1=__webpack_require__(2);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var components_1=__webpack_require__(203);var delegates_1=__webpack_require__(219);__webpack_require__(948);var DataCubeSeedModal=function(_super){tslib_1.__extends(DataCubeSeedModal,_super);function DataCubeSeedModal(){var _this=_super.call(this)||this;_this.mounted=false;_this.state={autoFill:true,clusterSources:[]};_this.loadingDelegate=new delegates_1.LoadingMessageDelegate(_this,500);return _this}DataCubeSeedModal.prototype.initFromProps=function(props){var dataCubes=props.dataCubes;this.setState({newInstance:models_1.DataCube.fromJS({name:beltful_1.StringUtils.generateUniqueName("dc",function(name){return immutable_class_1.NamedArray.findIndexByName(dataCubes,name)===-1}),clusterName:null,source:null})})};DataCubeSeedModal.prototype.componentWillMount=function(){this.initFromProps(this.props)};DataCubeSeedModal.prototype.componentWillReceiveProps=function(nextProps){this.initFromProps(nextProps)};DataCubeSeedModal.prototype.componentDidMount=function(){var _this=this;this.mounted=true;if(document.activeElement)document.activeElement.blur();this.loadingDelegate.start("Loading clusters...");ajax_1.Ajax.query({method:"GET",url:"settings/cluster-sources"}).then(function(resp){if(!_this.mounted)return;var newInstance=_this.state.newInstance;_this.loadingDelegate.stop();var updatedInstance;if(resp.clusterSources.length){var _a=resp.clusterSources[0],clusterName=_a.clusterName,source=_a.source;updatedInstance=newInstance.change("clusterName",clusterName).change("source",source)}else{updatedInstance=newInstance.change("clusterName","native").change("source","")}_this.setState({clusterSources:resp.clusterSources,newInstance:updatedInstance})},function(e){if(!_this.mounted)return;_this.loadingDelegate.stop();caladan_1.Notifier.failure("Sorry","There was a problem loading sources: "+e.message)}).done()};DataCubeSeedModal.prototype.componentWillUnmount=function(){this.mounted=false};DataCubeSeedModal.prototype.onNext=function(){var _this=this;var dataCubes=this.props.dataCubes;var _a=this.state,newInstance=_a.newInstance,autoFill=_a.autoFill;this.loadingDelegate.start("Creating cube...");ajax_1.Ajax.query({method:"POST",url:"settings/attributes",data:{clusterName:newInstance.clusterName,source:newInstance.source}}).then(function(resp){var finalInstance=newInstance.changeTitle(newInstance.guessTitle()).changeName(beltful_1.StringUtils.generateUniqueName(newInstance.guessName(),function(name){return immutable_class_1.NamedArray.findIndexByName(dataCubes,name)===-1},{suffixIfAlreadyUnique:false,startAt:1,separator:"-"}));var attributes=plywood_1.AttributeInfo.fromJSs(resp.attributes);if(autoFill){finalInstance=finalInstance.fillAllFromAttributes(attributes)}_this.loadingDelegate.stop();_this.props.onNext(finalInstance)},function(e){_this.loadingDelegate.stop();caladan_1.Notifier.failure("Woops","Could not get attributes: "+e.message)}).done()};DataCubeSeedModal.prototype.toggleAutoFill=function(){this.setState({autoFill:!this.state.autoFill})};DataCubeSeedModal.prototype.onClusterSourceChange=function(newInstance){this.setState({newInstance:newInstance})};DataCubeSeedModal.prototype.render=function(){var onCancel=this.props.onCancel;var _a=this.state,newInstance=_a.newInstance,autoFill=_a.autoFill,clusterSources=_a.clusterSources,loadingMessage=_a.loadingMessage,isLoading=_a.isLoading;return React.createElement(caladan_1.Modal,{className:"data-cube-seed-modal",title:strings_1.STRINGS.createDataCube,onClose:this.props.onCancel,onEnter:this.onNext.bind(this),deaf:isLoading},React.createElement("form",null,caladan_1.FormLabel.dumbLabel("Source"),React.createElement(components_1.ClusterSourcePicker,{dataCube:newInstance,clusterSources:clusterSources,onChange:this.onClusterSourceChange.bind(this)}),React.createElement(caladan_1.Checkbox,{selected:autoFill,onClick:this.toggleAutoFill.bind(this),label:strings_1.STRINGS.autoFillDimensionsAndMeasures})),isLoading?React.createElement(caladan_1.LoadingBar,{label:loadingMessage}):React.createElement("div",{className:"button-bar right"},React.createElement(caladan_1.Button,{className:"cancel",title:"Cancel",type:"secondary",onClick:onCancel}),React.createElement(caladan_1.Button,{type:"primary",title:strings_1.STRINGS.next+": "+strings_1.STRINGS.configureDataCube,disabled:!newInstance||!newInstance.source,onClick:this.onNext.bind(this)})))};return DataCubeSeedModal}(React.Component);exports.DataCubeSeedModal=DataCubeSeedModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var immutable_ui_1=__webpack_require__(69);var classNames=__webpack_require__(9);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models=__webpack_require__(10);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);__webpack_require__(949);var LABELS=models.LABELS.DIMENSION;var DimensionModal=function(_super){tslib_1.__extends(DimensionModal,_super);function DimensionModal(){var _this=_super.call(this)||this;_this.tabs=[{label:"Simple dimension",value:"simple",render:_this.renderSimple},{label:"Advanced (formula)",value:"formula",render:_this.renderFormula},{label:"Suggestions",value:"suggestions",render:_this.renderSuggestions}];_this.state={selectedTab:_this.tabs[0].value};_this.delegate=new immutable_ui_1.ImmutableFormDelegate(_this);return _this}DimensionModal.prototype.initStateFromProps=function(props){var newState={};if(props.dimension){newState.newInstance=props.dimension;var isSimple=props.dimension.expression instanceof plywood_1.RefExpression;newState.selectedTab=this.tabs[isSimple?0:1].value;newState.showUrl=Boolean(props.dimension.url)}if(props.suggestedDimensions){newState.selectedSuggestions={};props.suggestedDimensions.forEach(function(d){return newState.selectedSuggestions[d.name]=true})}this.setState(newState)};DimensionModal.prototype.componentWillReceiveProps=function(nextProps){this.initStateFromProps(nextProps)};DimensionModal.prototype.componentDidMount=function(){this.initStateFromProps(this.props)};DimensionModal.prototype.save=function(){if(!this.state.canSave)return;this.props.onSave(this.state.newInstance)};DimensionModal.prototype.saveMany=function(dimensions){this.props.onSaveMany(dimensions)};DimensionModal.prototype.changeTab=function(value){var _this=this;var newInstance=this.state.newInstance;this.setState({selectedTab:value,newInstance:undefined},function(){return _this.setState({newInstance:newInstance})})};DimensionModal.prototype.verifyFormula=function(formula){if(formula==="")return true;var clusterType=this.props.clusterType;var ex=plywood_1.Expression.parse(formula);var freeReferences=ex.getFreeReferences();if(freeReferences.length===0){throw new Error("can not have a constant formula, must have at least one attribute reference")}if(clusterType==="druid"&&freeReferences.length>1){throw new Error("can not have formula that uses more than one variable in a Druid data cube")}return true};DimensionModal.prototype.renderButtonGroup=function(){var _this=this;var _a=this.props,mode=_a.mode,suggestedDimensions=_a.suggestedDimensions;var selectedTab=this.state.selectedTab;var suggestionsLength=suggestedDimensions.length>9?"9+":String(suggestedDimensions.length);var items=this.tabs.filter(function(tab){return mode==="create"||tab.value!=="suggestions"}).map(function(tab){return{title:tab.label,active:selectedTab===tab.value,onClick:_this.changeTab.bind(_this,tab.value),badge:tab.value==="suggestions"?suggestionsLength:undefined}});return React.createElement(caladan_1.ButtonGroup,{items:items,canHaveFocus:false})};DimensionModal.prototype.renderTabContent=function(generators){var selectedTab=this.state.selectedTab;var tab=this.tabs.filter(function(t){return t.value===selectedTab})[0];if(!tab)return null;return tab.render.call(this,generators)};DimensionModal.prototype.renderTypeSpecificInputs=function(generators){var _this=this;var _a=this.state,newInstance=_a.newInstance,showUrl=_a.showUrl;var label=generators.label,input=generators.input,dropdown=generators.dropdown;var elements=[];elements.push(label("comboType","comboType",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["comboType"]})));elements.push(dropdown("comboType",models_1.Dimension.COMBO_TYPES_NORMAL));if(newInstance.isContinuous()){elements.push(label("bucketingStrategy","bucketingStrategy",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["bucketingStrategy"]})));elements.push(dropdown("bucketingStrategy",models_1.Dimension.BUCKETING_STRATEGIES));elements.push(label("granularities","granularities",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["granularities"]})));elements.push(React.cloneElement(input("granularities"),{converters:{valueToString:function(value){return value?value.map(models_1.granularityToString).join(", "):undefined},stringToValue:function(str){return str.split(/\s*,\s*/).map(models_1.granularityFromJS)}}}))}if(newInstance.isGeo()){elements.push(label("geoEncoding","geoEncoding",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["geoEncoding"]})));elements.push(dropdown("geoEncoding",models_1.Dimension.GEO_ENCODINGS.map(function(e){return{label:e,value:e}})))}if(!newInstance.isContinuous()){if(showUrl){elements.push(label("url","url",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["url"]})));elements.push(input("url"))}else{elements.push(React.createElement("div",{className:"add-url",onClick:function(){return _this.setState({showUrl:true})}},"Add URL"))}}return elements};DimensionModal.prototype.renderSimple=function(generators){var availableColumns=this.props.availableColumns;var _a=this.state,newInstance=_a.newInstance,errors=_a.errors;var label=generators.label,input=generators.input,dropdown=generators.dropdown;var columnSuggestions=(availableColumns||[]).map(function(attribute){return{label:attribute.name,value:attribute.name}});return React.createElement("form",{className:"general vertical"},label("title"),input("title",/.*/,true),label("column","column",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["column"]})),dropdown("column",columnSuggestions),this.renderTypeSpecificInputs(generators))};DimensionModal.prototype.renderFormula=function(generators){var label=generators.label,input=generators.input;return React.createElement("form",{className:"general vertical"},label("title"),input("title",/.*/,true),label("formula","formula",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["formula"]})),input("formula",this.verifyFormula.bind(this)),this.renderTypeSpecificInputs(generators))};DimensionModal.prototype.renderSuggestions=function(generators){var _this=this;var suggestedDimensions=this.props.suggestedDimensions;var selectedSuggestions=this.state.selectedSuggestions;if(suggestedDimensions.length===0){
return React.createElement("div",{className:"suggestions"},React.createElement("div",{className:"items"},React.createElement("div",{className:"message"},strings_1.STRINGS.thereAreNoSuggestionsAtTheMoment)))}var none=function(){_this.setState({selectedSuggestions:{}})};var all=function(){var allSuggestions={};suggestedDimensions.forEach(function(_a){var name=_a.name;return allSuggestions[name]=true});_this.setState({selectedSuggestions:allSuggestions})};var toggle=function(name){selectedSuggestions[name]=!selectedSuggestions[name];_this.setState({selectedSuggestions:selectedSuggestions})};var items=suggestedDimensions.map(function(_a){var title=_a.title,name=_a.name;return React.createElement("div",{className:"row",key:name,onClick:toggle.bind(_this,name)},React.createElement(caladan_1.Checkbox,{label:title,selected:selectedSuggestions[name]}))});return React.createElement("div",{className:"suggestions"},React.createElement("div",{className:"buttons"},React.createElement(caladan_1.Button,{type:"light-action",onClick:all,title:"Select all"}),React.createElement(caladan_1.Button,{type:"light-action",onClick:none,title:"Select none"})),React.createElement("div",{className:"items"},items))};DimensionModal.prototype.renderSuggestionsButtons=function(){var _a=this.props,dimension=_a.dimension,onClose=_a.onClose,suggestedDimensions=_a.suggestedDimensions;var _b=this.state,selectedTab=_b.selectedTab,selectedSuggestions=_b.selectedSuggestions;var dimensionsToAdd=suggestedDimensions.filter(function(d){return selectedSuggestions[d.name]});var n=dimensionsToAdd.length;return React.createElement("div",{className:"button-bar"},React.createElement(caladan_1.Button,{className:"cancel",title:"Cancel",type:"secondary",onClick:onClose}),n>0?React.createElement(caladan_1.Button,{className:classNames("save",{disabled:dimensionsToAdd.length<=0}),title:"Add "+n+" dimension"+(n>1?"s":""),type:"primary",onClick:this.saveMany.bind(this,dimensionsToAdd)}):null)};DimensionModal.prototype.renderButtons=function(){var _a=this.props,dimension=_a.dimension,onClose=_a.onClose;var _b=this.state,newInstance=_b.newInstance,canSave=_b.canSave,selectedTab=_b.selectedTab;if(selectedTab===this.tabs[2].value){return this.renderSuggestionsButtons()}var saveButtonDisabled=!canSave||dimension.equals(newInstance);return React.createElement("div",{className:"button-bar"},React.createElement(caladan_1.Button,{className:"cancel",title:"Cancel",type:"secondary",onClick:onClose}),React.createElement(caladan_1.Button,{className:classNames("save",{disabled:saveButtonDisabled}),title:"OK",type:"primary",onClick:this.save.bind(this)}))};DimensionModal.prototype.render=function(){var _a=this.props,onClose=_a.onClose,mode=_a.mode;var _b=this.state,newInstance=_b.newInstance,errors=_b.errors;if(!newInstance)return null;var myLabels=LABELS;delete myLabels["title"].description;var generators={label:caladan_1.FormLabel.simpleGenerator(myLabels,errors),input:immutable_ui_1.ImmutableTextInput.simpleGenerator(newInstance,this.delegate.onChange,myLabels,errors),dropdown:immutable_ui_1.ImmutableDropdown.simpleGenerator(newInstance,this.delegate.onChange,myLabels,errors),checkbox:immutable_ui_1.ImmutableCheckbox.simpleGenerator(newInstance,this.delegate.onChange,myLabels,errors)};return React.createElement(caladan_1.Modal,{className:"dimension-modal",title:mode==="create"?strings_1.STRINGS.createDimension:strings_1.STRINGS.editDimension,onClose:onClose,onEnter:this.save.bind(this)},React.createElement("div",{className:"form general vertical"},this.renderButtonGroup(),this.renderTabContent(generators),this.renderButtons()))};return DimensionModal}(React.Component);exports.DimensionModal=DimensionModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var immutable_ui_1=__webpack_require__(69);var filesaver=__webpack_require__(317);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);__webpack_require__(950);var MY_LABELS=models_1.LABELS.COLLECTION;var EditCollectionModal=function(_super){tslib_1.__extends(EditCollectionModal,_super);function EditCollectionModal(){var _this=_super.call(this)||this;_this.delegate=new immutable_ui_1.ImmutableFormDelegate(_this);return _this}EditCollectionModal.prototype.initFromProps=function(props){if(!props.collection)return;this.setState({canSave:true,newInstance:props.collection,showDescription:Boolean(props.collection.description)})};EditCollectionModal.prototype.componentWillMount=function(){this.initFromProps(this.props)};EditCollectionModal.prototype.save=function(){if(this.state.canSave)this.props.onOk(this.state.newInstance)};EditCollectionModal.prototype.onExport=function(){var newInstance=this.state.newInstance;var blob=new Blob([JSON.stringify(newInstance,null,2)],{type:"application/json;charset=utf-8"});filesaver.saveAs(blob,"collection-"+newInstance.title+".json",true)};EditCollectionModal.prototype.renderLayoutPicker=function(){var _this=this;var newInstance=this.state.newInstance;if(!newInstance)return null;var layout=newInstance.getLayout();var buttons=EditCollectionModal.LAYOUTS.map(function(l){return{active:l.value===layout,onClick:function(){return _this.delegate.onChange(newInstance.changeLayout(l.value),true,"layout",null)},title:l.label}});return React.createElement(caladan_1.ButtonGroup,{className:"layout-picker",title:"Layout",items:buttons})};EditCollectionModal.prototype.renderExtra=function(){var _this=this;var _a=this.props,onDelete=_a.onDelete,onDuplicate=_a.onDuplicate;var newInstance=this.state.newInstance;return React.createElement("div",{className:"extra"},caladan_1.FormLabel.dumbLabel("More options"),React.createElement("div",{className:"checkbox-group"},React.createElement(immutable_ui_1.ImmutableCheckbox,{instance:newInstance,path:"shareFilter",onChange:this.delegate.onChange,label:"Share filter",helpTitle:"Share filter",helpText:"Make all the tiles use a common filter"})),caladan_1.FormLabel.dumbLabel("Collection actions"),React.createElement("div",{className:"action-buttons"},React.createElement(caladan_1.Button,{className:"delete secondary",title:strings_1.STRINGS.delete,type:"warn",onClick:onDelete}),React.createElement(caladan_1.Button,{className:"duplicate",title:strings_1.STRINGS.duplicate,type:"secondary",onClick:onDuplicate}),React.createElement(caladan_1.Button,{className:"export",title:strings_1.STRINGS.export,type:"secondary",onClick:function(){return _this.onExport()}})))};EditCollectionModal.prototype.render=function(){var _this=this;var onClose=this.props.onClose;var _a=this.state,canSave=_a.canSave,errors=_a.errors,newInstance=_a.newInstance,showDescription=_a.showDescription;if(!newInstance)return null;var makeTextInput=immutable_ui_1.ImmutableTextInput.simpleGenerator(newInstance,this.delegate.onChange,MY_LABELS,errors);var descriptionElement;if(showDescription){descriptionElement=React.createElement("div",null,caladan_1.FormLabel.dumbLabel(MY_LABELS["description"].label),makeTextInput("description",/.*/))}else{descriptionElement=React.createElement("div",{className:"add-description",onClick:function(){return _this.setState({showDescription:true})}},"Add description")}return React.createElement(caladan_1.Modal,{className:"edit-collection-modal",title:"Collection options",onClose:onClose,onEnter:this.save.bind(this)},React.createElement("form",{className:"general vertical"},caladan_1.FormLabel.dumbLabel(MY_LABELS["title"].label),makeTextInput("title",/.*/,true),descriptionElement,this.renderLayoutPicker(),this.renderExtra()),React.createElement("div",{className:"button-bar"},React.createElement(caladan_1.Button,{className:"close",title:strings_1.STRINGS.close,type:"secondary",onClick:onClose}),React.createElement(caladan_1.Button,{className:classNames("ok",{disabled:!canSave}),title:strings_1.STRINGS.ok,type:"primary",onClick:this.save.bind(this)})))};return EditCollectionModal}(React.Component);EditCollectionModal.LAYOUTS=[{label:"Album",value:"album"},{label:"Dashboard",value:"dashboard"}];exports.EditCollectionModal=EditCollectionModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var React=__webpack_require__(1);__webpack_require__(951);var ExpiredModal=function(_super){tslib_1.__extends(ExpiredModal,_super);function ExpiredModal(){return _super.call(this)||this}ExpiredModal.prototype.render=function(){var version=this.props.version;return React.createElement(caladan_1.Modal,{className:"expired-modal",title:"Pivot Expired",mandatory:true},React.createElement("div",null,React.createElement("p",null,"Your evaluation license for Pivot has expired. Please contact ",React.createElement("a",{href:"mailto:sales@imply.io"},"sales@imply.io")," to obtain a commercial license.")))};return ExpiredModal}(React.Component);exports.ExpiredModal=ExpiredModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var immutable_ui_1=__webpack_require__(69);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var models=__webpack_require__(10);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var components_1=__webpack_require__(203);__webpack_require__(952);var LABELS=models.LABELS.MEASURE;var MeasureModal=function(_super){tslib_1.__extends(MeasureModal,_super);function MeasureModal(){var _this=_super.call(this)||this;_this.tabs=[{label:"Simple measure",value:"simple",render:_this.renderSimple,enabled:function(mode){return true}},{label:"Advanced (formula)",value:"formula",render:_this.renderFormula,enabled:function(mode){return true}},{label:"Suggestions",value:"suggestions",render:_this.renderSuggestions,enabled:function(mode){return mode==="create"}}];_this.state={selectedTab:_this.tabs[0].value};_this.delegate=new immutable_ui_1.ImmutableFormDelegate(_this);return _this}MeasureModal.prototype.initFromProps=function(props){var newState={canSave:props.mode==="create"};if(props.measure){newState.newInstance=props.measure;var simpleFormula=models_1.MeasureFormula.fromFormula(props.measure.formula);if(!simpleFormula)newState.selectedTab=this.tabs[1].value}if(props.suggestedMeasures){newState.selectedSuggestions={};props.suggestedMeasures.forEach(function(d){return newState.selectedSuggestions[d.name]=true})}this.setState(newState)};MeasureModal.prototype.componentWillMount=function(){this.initFromProps(this.props)};MeasureModal.prototype.componentWillReceiveProps=function(nextProps){this.initFromProps(nextProps)};MeasureModal.prototype.save=function(){if(!this.state.canSave)return;this.props.onSave(this.state.newInstance)};MeasureModal.prototype.saveMany=function(measures){this.props.onSaveMany(measures)};MeasureModal.prototype.changeTab=function(value){var _this=this;var newInstance=this.state.newInstance;this.setState({selectedTab:value,newInstance:undefined},function(){return _this.setState({newInstance:newInstance})})};MeasureModal.prototype.renderButtonGroup=function(){var _this=this;var _a=this.props,mode=_a.mode,suggestedMeasures=_a.suggestedMeasures;var selectedTab=this.state.selectedTab;var suggestionsLength=suggestedMeasures.length>9?"9+":String(suggestedMeasures.length);var items=this.tabs.filter(function(tab){return tab.enabled(mode)}).map(function(tab){return{title:tab.label,active:selectedTab===tab.value,onClick:_this.changeTab.bind(_this,tab.value),badge:tab.value==="suggestions"?suggestionsLength:undefined}});return React.createElement(caladan_1.ButtonGroup,{items:items,canHaveFocus:false})};MeasureModal.prototype.renderTabContent=function(){var _a=this.state,selectedTab=_a.selectedTab,newInstance=_a.newInstance,errors=_a.errors;var myLabels=LABELS;delete myLabels["title"].description;var generators={label:caladan_1.FormLabel.simpleGenerator(myLabels,errors),input:immutable_ui_1.ImmutableTextInput.simpleGenerator(newInstance,this.delegate.onChange,myLabels,errors),dropdown:immutable_ui_1.ImmutableDropdown.simpleGenerator(newInstance,this.delegate.onChange,myLabels,errors)};var tab=this.tabs.filter(function(t){return t.value===selectedTab})[0];if(!tab)return null;return tab.render.call(this,generators)};MeasureModal.prototype.renderSimple=function(generators){var _this=this;var _a=this.props,validateFormula=_a.validateFormula,mode=_a.mode,availableColumns=_a.availableColumns;var _b=this.state,newInstance=_b.newInstance,errors=_b.errors;return React.createElement("div",{className:"general vertical form"},React.createElement("div",{className:"grid-row"},React.createElement("div",{className:"grid-col-70 h-padded"},generators.label("title"),generators.input("title",/^.+$/,true)),React.createElement("div",{className:"grid-col-30 h-padded"},generators.label("units","units",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["units"]})),generators.input("units"))),React.createElement(components_1.FormulaInput,{goToAdvanced:function(){return _this.changeTab(_this.tabs[1].value)},columns:availableColumns,measure:newInstance,onChange:this.delegate.onChange.bind(this)}))};MeasureModal.prototype.renderFormula=function(generators){var _a=this.props,validateFormula=_a.validateFormula,mode=_a.mode;var _b=this.state,newInstance=_b.newInstance,errors=_b.errors;function validateFormat(){return true}return React.createElement("div",{className:"general vertical form"},React.createElement("div",{className:"grid-row"},React.createElement("div",{className:"grid-col-70 h-padded"},generators.label("title"),generators.input("title",/.*/,true)),React.createElement("div",{className:"grid-col-30 h-padded"},generators.label("units","units",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["units"]})),generators.input("units"))),React.createElement("div",{className:"grid-row"},React.createElement("div",{className:"grid-col-100"},generators.label("formula","formula",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["formula"]})),generators.input("formula",validateFormula))),React.createElement("div",{className:"grid-row"},React.createElement("div",{className:"grid-col-100"},generators.label("format","format",React.createElement(caladan_1.InfoSpot,{bubbly:true,sourceIds:["format"]})),generators.input("format",validateFormat))))};MeasureModal.prototype.renderSuggestions=function(){var _this=this;var suggestedMeasures=this.props.suggestedMeasures;var selectedSuggestions=this.state.selectedSuggestions;if(suggestedMeasures.length===0){return React.createElement("div",{className:"suggestions"},React.createElement("div",{className:"items"},React.createElement("div",{className:"message"},strings_1.STRINGS.thereAreNoSuggestionsAtTheMoment)))}var none=function(){_this.setState({selectedSuggestions:{}})};var all=function(){var allSuggestions={};suggestedMeasures.forEach(function(_a){var name=_a.name;return allSuggestions[name]=true});_this.setState({selectedSuggestions:allSuggestions})};var toggle=function(name){selectedSuggestions[name]=!selectedSuggestions[name];_this.setState({selectedSuggestions:selectedSuggestions})};var items=suggestedMeasures.map(function(_a){var title=_a.title,name=_a.name;return React.createElement("div",{className:"row",key:name,onClick:toggle.bind(_this,name)},React.createElement(caladan_1.Checkbox,{label:title,selected:selectedSuggestions[name]}))});return React.createElement("div",{className:"suggestions"},React.createElement("div",{className:"buttons"},React.createElement(caladan_1.Button,{type:"light-action",onClick:all,title:"Select all"}),React.createElement(caladan_1.Button,{type:"light-action",onClick:none,title:"Select none"})),React.createElement("div",{className:"items"},items))};MeasureModal.prototype.renderSuggestionsButtons=function(){var _a=this.props,onClose=_a.onClose,suggestedMeasures=_a.suggestedMeasures;var selectedSuggestions=this.state.selectedSuggestions;var measuresToAdd=suggestedMeasures.filter(function(d){return selectedSuggestions[d.name]});var n=measuresToAdd.length;return React.createElement("div",{className:"button-bar"},React.createElement(caladan_1.Button,{className:"cancel",title:"Cancel",type:"secondary",onClick:onClose}),n>0?React.createElement(caladan_1.Button,{className:classNames("save",{disabled:measuresToAdd.length<=0}),title:"Add "+n+" measure"+(n>1?"s":""),type:"primary",onClick:this.saveMany.bind(this,measuresToAdd)}):null)};MeasureModal.prototype.renderButtons=function(){var _a=this.props,measure=_a.measure,onClose=_a.onClose;var _b=this.state,newInstance=_b.newInstance,canSave=_b.canSave,selectedTab=_b.selectedTab;if(selectedTab==="suggestions"){return this.renderSuggestionsButtons()}var saveButtonDisabled=!canSave||measure.equals(newInstance);return React.createElement("div",{className:"button-bar"},React.createElement(caladan_1.Button,{className:"cancel",title:"Cancel",type:"secondary",onClick:onClose}),React.createElement(caladan_1.Button,{className:classNames("save",{disabled:saveButtonDisabled}),title:"OK",type:"primary",onClick:this.save.bind(this)}))};MeasureModal.prototype.render=function(){var _a=this.props,measure=_a.measure,validateFormula=_a.validateFormula,mode=_a.mode;var _b=this.state,newInstance=_b.newInstance,canSave=_b.canSave,errors=_b.errors;var saveButtonDisabled=!canSave||mode!=="create"&&measure.equals(newInstance);if(!newInstance)return null;return React.createElement(caladan_1.Modal,{className:"measure-modal",title:mode==="create"?strings_1.STRINGS.createMeasure:strings_1.STRINGS.editMeasure,onClose:this.props.onClose,onEnter:this.save.bind(this)},this.renderButtonGroup(),this.renderTabContent(),this.renderButtons())};return MeasureModal}(React.Component);exports.MeasureModal=MeasureModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var chronoshift_1=__webpack_require__(16);var classNames=__webpack_require__(9);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var ReactDOM=__webpack_require__(20);var strings_1=__webpack_require__(15);var general_1=__webpack_require__(77);var components_1=__webpack_require__(203);var download_1=__webpack_require__(315);var formatter_1=__webpack_require__(124);var query_runner_1=__webpack_require__(90);var sizing_1=__webpack_require__(816);__webpack_require__(953);var HEADER_HEIGHT=30;var ROW_HEIGHT=30;var LIMIT=100;var TIME_COL_WIDTH=180;var BOOLEAN_COL_WIDTH=100;var NUMBER_COL_WIDTH=100;var DEFAULT_COL_WIDTH=200;function getColumnWidth(attribute){switch(attribute.type){case"BOOLEAN":return BOOLEAN_COL_WIDTH;case"NUMBER":return NUMBER_COL_WIDTH;case"TIME":return TIME_COL_WIDTH;default:return DEFAULT_COL_WIDTH}}function classFromAttribute(attribute){return classNames(String(attribute.type).toLowerCase().replace(/\//g,"-"),{unsplitable:attribute.getUnsplitable()})}var RawDataModal=function(_super){tslib_1.__extends(RawDataModal,_super);function RawDataModal(){var _this=_super.call(this)||this;_this.state={loading:false,dataset:null,scrollLeft:0,scrollTop:0,error:null,stage:null};_this.globalResizeListener=_this.globalResizeListener.bind(_this);return _this}RawDataModal.prototype.componentDidMount=function(){this.mounted=true;var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper;this.fetchData(essence,timekeeper);this.globalResizeListener()};RawDataModal.prototype.componentWillUnmount=function(){this.mounted=false};RawDataModal.prototype.fetchData=function(essence,timekeeper){var _this=this;var dataCube=essence.dataCube;var dimensions=essence.getDimensions();var $main=plywood_1.$("main");var query=$main.filter(essence.getEffectiveFilter(timekeeper).toExpression(dimensions)).limit(LIMIT);this.setState({loading:true});query_runner_1.QueryRunner.fetch(dataCube,query,essence.timezone).then(function(dataset){if(!_this.mounted)return;_this.setState({dataset:dataset,loading:false})},function(error){if(!_this.mounted)return;_this.setState({error:error,loading:false})})};RawDataModal.prototype.globalResizeListener=function(){var table=this.refs.table;var tableDOM=ReactDOM.findDOMNode(table);if(!tableDOM)return;this.setState({stage:beltful_1.Stage.fromClientRect(tableDOM.getBoundingClientRect())})};RawDataModal.prototype.onScroll=function(scrollTop,scrollLeft){this.setState({scrollLeft:scrollLeft,scrollTop:scrollTop})};RawDataModal.prototype.getStringifiedFilters=function(){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper;return essence.getEffectiveFilter(timekeeper).clauses.map(function(clause,i){var dimension=essence.getDimension(clause.dimension);if(!dimension)return null;var evaluatedClause=dimension.getKind()==="time"?essence.evaluateClause(clause,timekeeper):clause;return formatter_1.formatFilterClause(dimension,evaluatedClause,essence.timezone)})};RawDataModal.prototype.renderFilters=function(){var limit=React.createElement("li",{className:"limit",key:"limit"},"First ",LIMIT," events matching ");var filters=this.getStringifiedFilters().map(function(filter,i){return React.createElement("li",{className:"filter",key:i},filter)});return[limit].concat(filters)};RawDataModal.prototype.renderHeader=function(){var essence=this.props.essence;var dataset=this.state.dataset;if(!dataset)return null;return dataset.attributes.map(function(attribute,i){var name=attribute.name;var width=getColumnWidth(attribute);var style={width:width};var key=name;return React.createElement("div",{className:classNames("header-cell",classFromAttribute(attribute)),style:style,key:i},React.createElement("div",{className:"title-wrap"},general_1.makeTitle(key)))})};RawDataModal.prototype.getVisibleIndices=function(rowCount,height){var scrollTop=this.state.scrollTop;return[Math.max(0,Math.floor(scrollTop/ROW_HEIGHT)),Math.min(rowCount,Math.ceil((scrollTop+height)/ROW_HEIGHT))]};RawDataModal.prototype.renderRows=function(){var _a=this.state,dataset=_a.dataset,scrollLeft=_a.scrollLeft,stage=_a.stage;if(!dataset)return null;var rawData=dataset.data;var attributes=dataset.attributes;var _b=this.getVisibleIndices(rawData.length,stage.height),firstRowToShow=_b[0],lastRowToShow=_b[1];var rows=rawData.slice(firstRowToShow,lastRowToShow);var attributeWidths=attributes.map(getColumnWidth);var _c=sizing_1.getVisibleSegments(attributeWidths,scrollLeft,stage.width),startIndex=_c.startIndex,shownColumns=_c.shownColumns;var leftOffset=general_1.arraySum(attributeWidths.slice(0,startIndex));attributes=attributes.slice(startIndex,startIndex+shownColumns);var rowY=firstRowToShow*ROW_HEIGHT;return rows.map(function(datum,i){var cols=[];attributes.forEach(function(attribute){var name=attribute.name;var value=datum[name];var colStyle={width:getColumnWidth(attribute)};var displayValue=value;if(chronoshift_1.isDate(datum[name])){displayValue=datum[name].toISOString()}cols.push(React.createElement("div",{className:classNames("cell",classFromAttribute(attribute)),key:name,style:colStyle},React.createElement("span",{className:"cell-value"},String(displayValue))))});var rowStyle={top:rowY,left:leftOffset};rowY+=ROW_HEIGHT;return React.createElement("div",{className:"row",style:rowStyle,key:i},cols)})};RawDataModal.prototype.render=function(){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,onClose=_a.onClose;var _b=this.state,dataset=_b.dataset,loading=_b.loading,error=_b.error;var dataCube=essence.dataCube;var title=general_1.makeTitle(strings_1.STRINGS.segment)+" "+strings_1.STRINGS.rawData;var specialTimeDimension=dataCube.getSpecialTimeDimension();var filtersString=essence.getEffectiveFilter(timekeeper).getFileString(specialTimeDimension?specialTimeDimension.name:null);var scrollerLayout={bodyWidth:dataset?general_1.arraySum(dataset.attributes.map(getColumnWidth)):0,bodyHeight:(dataset?dataset.data.length:0)*ROW_HEIGHT,top:HEADER_HEIGHT,right:0,bottom:0,left:0};return React.createElement(caladan_1.Modal,{className:"raw-data-modal",title:title,onClose:onClose},React.createElement("div",{className:"content"},React.createElement("ul",{className:"filters"},this.renderFilters()),React.createElement(caladan_1.Scroller,{ref:"table",layout:scrollerLayout,topGutter:this.renderHeader(),body:this.renderRows(),onScroll:this.onScroll.bind(this)}),error?React.createElement(components_1.QueryError,{error:error}):null,loading?React.createElement(caladan_1.Loader,null):null,React.createElement("div",{className:"button-bar"},React.createElement(caladan_1.Button,{type:"primary",className:"close",onClick:onClose,title:strings_1.STRINGS.close}),React.createElement(caladan_1.Button,{type:"secondary",className:"download",onClick:function(){return download_1.download(dataset,download_1.makeFileName(dataCube.name,filtersString,"raw"),"csv")},title:strings_1.STRINGS.download,disabled:Boolean(loading||error)}))))};return RawDataModal}(React.Component);exports.RawDataModal=RawDataModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var React=__webpack_require__(1);var strings_1=__webpack_require__(15);__webpack_require__(954);var WelcomeModal=function(_super){tslib_1.__extends(WelcomeModal,_super);function WelcomeModal(){return _super.call(this)||this}WelcomeModal.prototype.render=function(){var _a=this.props,version=_a.version,onClose=_a.onClose;return React.createElement(caladan_1.Modal,{className:"welcome-modal",title:"Welcome to Pivot!",onClose:onClose},React.createElement("p",null,"You have connected to an evaluation server which will expire in 30 days. If you already have a license, please install it now. To obtain a license, contact ",React.createElement("a",{href:"mailto:sales@imply.io"},"sales@imply.io"),"."),React.createElement("p",null,"We hope you enjoy your trial!"),React.createElement("div",{className:"button-bar"},React.createElement(caladan_1.Button,{type:"primary",onClick:onClose,title:strings_1.STRINGS.close})))};return WelcomeModal}(React.Component);exports.WelcomeModal=WelcomeModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function getVisibleSegments(segmentWidths,offset,visibleSize){var startIndex=0;var shownColumns=0;var curWidth=0;for(var i=0;i<segmentWidths.length;i++){var segmentWidth=segmentWidths[i];var afterWidth=curWidth+segmentWidth;if(afterWidth<offset){startIndex++}else if(curWidth<offset+visibleSize){shownColumns++}curWidth=afterWidth}return{startIndex:startIndex,shownColumns:shownColumns}}exports.getVisibleSegments=getVisibleSegments},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var little_pictures_1=__webpack_require__(11);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var strings_1=__webpack_require__(15);var collection_tile_card_1=__webpack_require__(774);__webpack_require__(955);var AlbumLayout=function(_super){tslib_1.__extends(AlbumLayout,_super);function AlbumLayout(){var _this=_super.call(this)||this;_this.state={dropIndex:-1};return _this}AlbumLayout.getActualDropIndex=function(originalIndex,dropIndex,dropAfter){if(dropIndex>originalIndex){if(!dropAfter&&dropIndex!==0)return dropIndex-1}else{if(dropAfter)return dropIndex+1}return dropIndex};AlbumLayout.prototype.dragStart=function(tile,e){this.setState({draggedTile:tile});var dataTransfer=e.dataTransfer;dataTransfer.effectAllowed="move";dataTransfer.setData("text/html",tile.title);beltful_1.DOMUtils.setDragGhost(dataTransfer,tile.title)};AlbumLayout.prototype.shouldDropAfter=function(e){var targetRect=e.currentTarget.getBoundingClientRect();return beltful_1.EventUtils.getXFromEvent(e)-targetRect.left>=targetRect.width/2};AlbumLayout.prototype.dragOver=function(tile,e){e.preventDefault();var collection=this.props.collection;var _a=this.state,draggedTile=_a.draggedTile,dropIndex=_a.dropIndex,dropAfter=_a.dropAfter;var tiles=collection.tiles;if(dropIndex===-1&&tile===draggedTile)return;var targetIndex=tiles.indexOf(tile);var newDropIndex=targetIndex;var shouldDropAfter=this.shouldDropAfter(e);if(newDropIndex!==dropIndex||shouldDropAfter!==dropAfter){this.setState({dropIndex:newDropIndex,dropAfter:shouldDropAfter})}};AlbumLayout.prototype.dragEnd=function(e){var _a=this.props,onCollectionChange=_a.onCollectionChange,collection=_a.collection;var _b=this.state,draggedTile=_b.draggedTile,dropIndex=_b.dropIndex,dropAfter=_b.dropAfter;if(!onCollectionChange)return;var originalIndex=collection.tiles.indexOf(draggedTile);dropIndex=AlbumLayout.getActualDropIndex(originalIndex,dropIndex,dropAfter);this.setState({draggedTile:undefined,dropIndex:-1,dropAfter:undefined});if(dropIndex>-1){var tiles=collection.tiles.concat();tiles.splice(dropIndex,0,tiles.splice(originalIndex,1)[0]);onCollectionChange(collection.changeTiles(tiles))}};AlbumLayout.prototype.onTileChange=function(newTile){var _a=this.props,onCollectionChange=_a.onCollectionChange,collection=_a.collection;if(!onCollectionChange)return;onCollectionChange(collection.addOrUpdateTile(newTile))};AlbumLayout.prototype.onTileDelete=function(tileName){var _a=this.props,onCollectionChange=_a.onCollectionChange,collection=_a.collection;if(!onCollectionChange)return;onCollectionChange(collection.deleteTile(tileName))};AlbumLayout.prototype.renderTile=function(tile,i){var _this=this;var _a=this.props,timekeeper=_a.timekeeper,commonEssence=_a.commonEssence,clicker=_a.clicker,onCollectionChange=_a.onCollectionChange,controller=_a.controller,onSuperviseDataCube=_a.onSuperviseDataCube;var _b=this.state,draggedTile=_b.draggedTile,dropIndex=_b.dropIndex,dropAfter=_b.dropAfter;var editing=Boolean(onCollectionChange);return React.createElement("div",{className:classNames("tile-wrapper",{edition:editing,dragged:draggedTile===tile,"drop-before":dropIndex===i&&!dropAfter,"drop-after":dropIndex===i&&dropAfter}),onDragOver:this.dragOver.bind(this,tile),draggable:editing,onDragStart:this.dragStart.bind(this,tile),key:tile.name},React.createElement(collection_tile_card_1.CollectionTileCard,{tile:tile,commonEssence:commonEssence,timekeeper:timekeeper,clicker:clicker,controller:controller,onSuperviseDataCube:onSuperviseDataCube,isThumbnail:true,noScroll:true,onTileChange:function(newTile){return _this.onTileChange(newTile)},onTileDelete:function(){return _this.onTileDelete(tile.name)},editing:editing}))};AlbumLayout.prototype.renderEmpty=function(){return React.createElement("div",{className:"album-layout empty"},React.createElement("div",{className:"container"},React.createElement(caladan_1.SvgIcon,{svg:little_pictures_1.FULL_COLLECTION}),React.createElement("div",{className:"placeholder"},strings_1.STRINGS.noTilesInThisAlbum)))};AlbumLayout.prototype.render=function(){var _a=this.props,collection=_a.collection,onScroll=_a.onScroll;if(!collection)return null;if(!collection.tiles.length)return this.renderEmpty();return React.createElement("div",{className:"album-layout",onDragEnd:this.dragEnd.bind(this),onScroll:onScroll},React.createElement("div",{className:"container"},collection.tiles.map(this.renderTile,this)))};return AlbumLayout}(React.Component);exports.AlbumLayout=AlbumLayout},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var classNames=__webpack_require__(9);var immutable_class_1=__webpack_require__(2)
;var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var components_1=__webpack_require__(203);var options_menu_1=__webpack_require__(312);__webpack_require__(956);var CollectionHeaderBar=function(_super){tslib_1.__extends(CollectionHeaderBar,_super);function CollectionHeaderBar(){var _this=_super.call(this)||this;_this.state={animating:false};return _this}CollectionHeaderBar.prototype.componentDidMount=function(){this.mounted=true};CollectionHeaderBar.prototype.componentWillReceiveProps=function(nextProps){var _this=this;if(!this.props.updatingMaxTime&&nextProps.updatingMaxTime){this.setState({animating:true});setTimeout(function(){if(!_this.mounted)return;_this.setState({animating:false})},1e3)}};CollectionHeaderBar.prototype.componentWillUnmount=function(){this.mounted=false;this.clearTimerIfExists()};CollectionHeaderBar.prototype.setAutoRefreshRate=function(rate){var autoRefreshRate=this.state.autoRefreshRate;if(immutable_class_1.immutableEqual(autoRefreshRate,rate))return;this.clearTimerIfExists();var onRefreshMaxTime=this.props.onRefreshMaxTime;if(onRefreshMaxTime&&rate){this.autoRefreshTimer=setInterval(function(){onRefreshMaxTime()},rate.getCanonicalLength())}this.setState({autoRefreshRate:rate})};CollectionHeaderBar.prototype.clearTimerIfExists=function(){if(this.autoRefreshTimer){clearInterval(this.autoRefreshTimer);this.autoRefreshTimer=null}};CollectionHeaderBar.prototype.putIntoBubbleMenu=function(target,className,children){return React.createElement(components_1.BubbleMenu,{className:className,direction:"down",stage:beltful_1.Stage.fromSize(200,200),openOn:target},children)};CollectionHeaderBar.prototype.saveButtonTitle=function(){var _a=this.props,isDuplicate=_a.isDuplicate,collectionEditController=_a.collectionEditController;if(isDuplicate)return"Save duplicate";return collectionEditController.editMode==="update"?"Save":"Create"};CollectionHeaderBar.prototype.onTitleChange=function(e){var _a=this.props,collection=_a.collection,collectionEditController=_a.collectionEditController,onCollectionChange=_a.onCollectionChange;if(!collectionEditController)return;var value=e.target.value;onCollectionChange(collection.changeTitle(value))};CollectionHeaderBar.prototype.renderAddMenu=function(target){var _this=this;var dataCubes=this.props.dataCubes;var items=dataCubes.map(function(dataCube){return React.createElement("li",{className:"data-cube",key:dataCube.name,onClick:_this.props.onAddTile.bind(_this,dataCube)},dataCube.title)});return this.putIntoBubbleMenu(target,"add-menu",[React.createElement("div",{key:"title",className:"bubble-list-title"},strings_1.STRINGS.addFromCube,":"),React.createElement("ul",{key:"list",className:"bubble-list"},items)])};CollectionHeaderBar.prototype.renderUserMenu=function(target){var _a=this.props,user=_a.user,customization=_a.customization;var canEdit=user&&user.canAccessSettings()&&customization.getSettingsMode()!==models_1.Customization.SETTINGS_MODE_SUPPRESSED;return React.createElement(components_1.UserMenu,{showSettings:canEdit,customization:customization,openOn:target,user:user})};CollectionHeaderBar.prototype.renderOptionsMenu=function(target){var _a=this.props,clicker=_a.clicker,customization=_a.customization,essence=_a.essence,onRefreshMaxTime=_a.onRefreshMaxTime;var autoRefreshRate=this.state.autoRefreshRate;return React.createElement(options_menu_1.OptionsMenu,{timezone:essence.timezone,customization:customization,changeTimezone:clicker.changeTimezone,autoRefreshRate:autoRefreshRate,setAutoRefreshRate:this.setAutoRefreshRate.bind(this),onRefreshMaxTime:onRefreshMaxTime,openOn:target})};CollectionHeaderBar.prototype.renderTitle=function(){var _a=this.props,collection=_a.collection,collectionEditController=_a.collectionEditController;return React.createElement("div",{className:classNames("title-cont",{editing:Boolean(collectionEditController)})},React.createElement("span",{className:"static"},collection.getTitle()),collectionEditController?React.createElement("input",{className:"edit",value:collection.getTitle(),onChange:this.onTitleChange.bind(this)}):null)};CollectionHeaderBar.prototype.render=function(){var _a=this.props,controller=_a.controller,user=_a.user,userMode=_a.userMode,collectionEditController=_a.collectionEditController,onNavClick=_a.onNavClick,customization=_a.customization,collection=_a.collection,onAddTile=_a.onAddTile,onMore=_a.onMore,essence=_a.essence;var animating=this.state.animating;var userButton={id:"user-button",className:"icon-button user",tooltip:"Me",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_USER}),renderMenu:this.renderUserMenu.bind(this)};var leftChildren=[{id:"menu-icon",className:"menu-icon",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.MENU}),onClick:onNavClick},{id:"title",className:"title-wrapper",content:this.renderTitle(),onClick:collectionEditController?null:onNavClick},collection.description?{id:"description",className:"description-wrapper",content:React.createElement(components_1.Description,{description:collection.description})}:null].filter(Boolean);var rightChildren=[];if(collectionEditController){if(onAddTile){rightChildren.push({id:"add-item",className:"icon-button add",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_ADD_FRAMED}),tooltip:"Add a tile",renderMenu:this.renderAddMenu.bind(this)})}rightChildren.push({id:"button-group",className:"button-group",content:[React.createElement(caladan_1.Button,{key:"more",className:"more",title:"Options...",type:"secondary",onClick:onMore}),React.createElement(caladan_1.Button,{key:"cancel",className:"cancel",title:"Cancel",type:"secondary",onClick:collectionEditController.onCancel}),React.createElement(caladan_1.Button,{key:"save",className:"save",title:this.saveButtonTitle(),type:"primary",onClick:function(){return collectionEditController.onSave(collection)}})]})}else{if(animating){rightChildren.push({id:"auto-refresh",className:classNames("icon-button","auto-refresh","refreshing"),content:React.createElement(caladan_1.SvgIcon,{className:"auto-refresh-icon",svg:Icons.FULL_REFRESH}),tooltip:"Refreshing"})}if(onAddTile){rightChildren.push({id:"add-item",className:"icon-button add",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_ADD_FRAMED}),tooltip:"Add a tile",renderMenu:this.renderAddMenu.bind(this)})}rightChildren.push({id:"edit-collection",className:"icon-button edit",tooltip:"Edit this collection",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_EDIT}),onClick:function(){return controller.editCollection(collection,"update")}});if(models_1.User.modeNeedsUserButton(userMode)){rightChildren.push(userButton)}else{rightChildren.push({id:"settings",className:"icon-button settings",content:React.createElement(caladan_1.SvgIcon,{className:"settings-icon",svg:Icons.FULL_SETTINGS}),tooltip:"Settings",onClick:function(){return controller.openSettings()}})}}return React.createElement(caladan_1.HeaderBar,{className:"collection-header-bar",style:customization.getHeaderStyle(),leftChildren:leftChildren,rightChildren:rightChildren})};return CollectionHeaderBar}(React.Component);exports.CollectionHeaderBar=CollectionHeaderBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var build_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var filter_tile_1=__webpack_require__(313);var edit_collection_modal_1=__webpack_require__(811);var cube_view_1=__webpack_require__(775);var album_layout_1=__webpack_require__(817);var collection_header_bar_1=__webpack_require__(818);var dashboard_layout_1=__webpack_require__(820);__webpack_require__(958);var CollectionView=function(_super){tslib_1.__extends(CollectionView,_super);function CollectionView(){var _this=_super.call(this)||this;_this.state={scrolled:false,updatingMaxTime:false};_this.clicker={changeTimezone:function(timezone){var essence=_this.state.essence;essence=essence.changeTimezone(timezone);_this.setState({essence:essence})},changeFilter:function(filter){var essence=_this.state.essence;essence=essence.changeFilter(filter);_this.setState({essence:essence})},changeHighlight:function(highlight){var essence=_this.state.essence;_this.setState({essence:essence.changeHighlight(highlight)})},acceptHighlight:function(){var essence=_this.state.essence;_this.setState({essence:essence.acceptHighlight()})},dropHighlight:function(){var essence=_this.state.essence;_this.setState({essence:essence.dropHighlight()})}};return _this}CollectionView.prototype.initFromProps=function(props){var _a=this.state,currentCollection=_a.currentCollection,essence=_a.essence;if(props.collection){this.setState({currentCollection:currentCollection||props.collection,essence:essence||props.collection.getCommonEssence()})}};CollectionView.prototype.onRefreshMaxTime=function(){var _a=this.state,essence=_a.essence,timekeeper=_a.timekeeper;if(!essence)return;var dataCube=essence.dataCube;var maxTimeQuery=dataCube.getMaxTimeQuery();if(!maxTimeQuery)return};CollectionView.prototype.componentWillMount=function(){this.initFromProps(this.props)};CollectionView.prototype.componentWillReceiveProps=function(nextProps){this.initFromProps(nextProps)};CollectionView.prototype.onSuperviseDataCube=function(supervisor){var _this=this;this.setState({cubeViewSupervisor:{title:supervisor.title,initEssence:supervisor.initEssence,saveLabel:supervisor.saveLabel,onCancel:function(){_this.setState({cubeViewSupervisor:null});supervisor.onCancel()},onSave:function(newEssence){_this.setState({cubeViewSupervisor:null});supervisor.onSave(newEssence)}}})};CollectionView.prototype.updateCurrentCollection=function(newCollection){var dashboardLayout=this.dashboardLayout;var currentCollection=this.state.currentCollection;var callback=null;if(dashboardLayout&&currentCollection.shareFilter!==newCollection.shareFilter){callback=function(){return dashboardLayout.calculateSize()}}this.setState({currentCollection:newCollection},callback)};CollectionView.prototype.renderEditionModal=function(){var _this=this;var collectionEditController=this.props.collectionEditController;var _a=this.state,currentCollection=_a.currentCollection,showEditCollectionModal=_a.showEditCollectionModal;if(!showEditCollectionModal)return null;var closeModal=function(){_this.setState({showEditCollectionModal:false})};var updateCollection=function(newCollection){closeModal();_this.updateCurrentCollection(newCollection)};return React.createElement(edit_collection_modal_1.EditCollectionModal,{collection:currentCollection,onClose:closeModal,onOk:updateCollection,onDuplicate:function(){var settings=_this.props.settings;var newName=build_1.StringUtils.generateUniqueName(currentCollection.name.replace(/\d+$/,""),function(name){return!settings.getDataCube(name)});updateCollection(currentCollection.makeDuplicate(newName))},onDelete:collectionEditController.onDelete})};CollectionView.prototype.onRemoveGlobalFilter=function(){var currentCollection=this.state.currentCollection;this.updateCurrentCollection(currentCollection.changeShareFilter(false))};CollectionView.prototype.onScroll=function(event){var scrolled=this.state.scrolled;var newScrolled=event.nativeEvent.target.scrollTop!==0;if(scrolled===newScrolled)return;this.setState({scrolled:newScrolled})};CollectionView.prototype.render=function(){var _this=this;var _a=this.props,collection=_a.collection,collectionEditController=_a.collectionEditController,settings=_a.settings,user=_a.user,userMode=_a.userMode,timekeeper=_a.timekeeper,customization=_a.customization,controller=_a.controller,dataCubes=_a.dataCubes;var _b=this.state,currentCollection=_b.currentCollection,essence=_b.essence,scrolled=_b.scrolled,updatingMaxTime=_b.updatingMaxTime,cubeViewSupervisor=_b.cubeViewSupervisor;if(!currentCollection)return null;var editing=Boolean(collectionEditController);if(cubeViewSupervisor){return React.createElement(cube_view_1.CubeView,{settings:settings,controller:controller,dataCube:cubeViewSupervisor.initEssence.dataCube,hash:cubeViewSupervisor.initEssence.toHash(),user:user,userMode:userMode,initTimekeeper:timekeeper,customization:customization,supervisor:cubeViewSupervisor,stateful:true})}var filterable=currentCollection.shareFilter;var onCollectionChange=editing?function(newCollection){return _this.setState({currentCollection:newCollection})}:null;var filterTile=null;if(filterable){if(editing){filterTile=React.createElement("div",{className:"filter-tile dummy"},React.createElement("div",{className:"placeholder"},"Common filter"),React.createElement("div",{className:"delete-icon",onClick:function(){return _this.onRemoveGlobalFilter()}},React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_DELETE})))}else{filterTile=React.createElement(filter_tile_1.FilterTile,{clicker:this.clicker,essence:essence,timekeeper:timekeeper})}}var onAddTile=function(dataCube){_this.onSuperviseDataCube({title:currentCollection.layout==="album"?strings_1.STRINGS.addToAlbum:strings_1.STRINGS.addToDashboard,saveLabel:strings_1.STRINGS.add,initEssence:models_1.Essence.fromDataCube(dataCube,{dataCube:dataCube,visualizations:models_1.MANIFESTS}),onCancel:function(){},onSave:function(newEssence){var name=build_1.StringUtils.generateUniqueName("t",function(name){return!currentCollection.getCollectionTile(name)});var newCollection=currentCollection.addOrUpdateTile(models_1.CollectionTile.fromEssence(name,newEssence));if(onCollectionChange){onCollectionChange(newCollection)}else{controller.editCollection(newCollection,"update",true)}}})};var clickerToPass=collection.getShareFilter()?this.clicker:{};return React.createElement("div",{ref:function(comp){return _this.componentDOM=comp},className:classNames("collection-view",{scrolled:scrolled,filterable:filterable})},React.createElement(collection_header_bar_1.CollectionHeaderBar,{controller:controller,clicker:this.clicker,essence:essence,user:user,userMode:userMode,onNavClick:controller.openSideDrawer,customization:customization,collection:currentCollection,onCollectionChange:onCollectionChange,dataCubes:dataCubes,collectionEditController:collectionEditController,isDuplicate:Boolean(currentCollection&&currentCollection.name!==collection.name),onMore:function(){return _this.setState({showEditCollectionModal:true})},onAddTile:onAddTile,onRefreshMaxTime:function(){return _this.onRefreshMaxTime()},updatingMaxTime:updatingMaxTime}),filterTile,currentCollection.getLayout()==="album"?React.createElement(album_layout_1.AlbumLayout,{collection:currentCollection,commonEssence:essence,timekeeper:timekeeper,clicker:clickerToPass,controller:controller,onSuperviseDataCube:this.onSuperviseDataCube.bind(this),onCollectionChange:onCollectionChange,onScroll:this.onScroll.bind(this)}):React.createElement(dashboard_layout_1.DashboardLayout,{ref:function(e){return _this.dashboardLayout=e},collection:currentCollection,commonEssence:essence,timekeeper:timekeeper,clicker:clickerToPass,controller:controller,onSuperviseDataCube:this.onSuperviseDataCube.bind(this),onCollectionChange:onCollectionChange}),this.renderEditionModal())};return CollectionView}(React.Component);exports.CollectionView=CollectionView},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var collection_tile_card_1=__webpack_require__(774);__webpack_require__(959);var MIN_UNIT_WIDTH=40;var MAX_UNIT_WIDTH=200;var MIN_UNIT_HEIGHT=40;var MAX_UNIT_HEIGHT=100;var MIN_WIDTH=3;var MIN_HEIGHT=3;var GAP=10;var POSITIONING_MODES=["move","resize-top","resize-top-left","resize-top-right","resize-left","resize-right","resize-bottom","resize-bottom-left","resize-bottom-right"];var DashboardLayout=function(_super){tslib_1.__extends(DashboardLayout,_super);function DashboardLayout(){var _this=_super.call(this)||this;_this.cardsToResize=[];_this.state={positioningMode:null,positioningTile:null,positioningPosition:null};return _this}DashboardLayout.prototype.componentDidMount=function(){this.calculateSize()};DashboardLayout.prototype.componentWillReceiveProps=function(nextProps){var collection=this.props.collection;if(!nextProps.collection.size.equals(collection.size)){this.cardsToResize=[]}};DashboardLayout.prototype.componentDidUpdate=function(){if(this.cardsToResize){this.cardsToResize.forEach(function(c){return c.calculateSize()});this.cardsToResize=null}};DashboardLayout.prototype.calculateSize=function(){if(!this.containerDOM)return;this.setState({containerStage:beltful_1.Stage.fromClientRect(this.containerDOM.getBoundingClientRect())})};DashboardLayout.prototype.positionToScreen=function(position){var _a=this,unitWidth=_a.unitWidth,unitHeight=_a.unitHeight;return new beltful_1.Stage({x:position.x*unitWidth+GAP,y:position.y*unitHeight+GAP,width:position.width*unitWidth-GAP,height:position.height*unitHeight-GAP})};DashboardLayout.prototype.tilePositioningStart=function(positioningMode,tile,e){var _a=this,cardsStage=_a.cardsStage,unitWidth=_a.unitWidth,unitHeight=_a.unitHeight;var containerStage=this.state.containerStage;this.mouseStartUnitX=Math.floor((e.clientX-containerStage.x-cardsStage.x+this.containerDOM.scrollLeft)/unitWidth);this.mouseStartUnitY=Math.floor((e.clientY-containerStage.y-cardsStage.x+this.containerDOM.scrollTop)/unitHeight);this.setState({positioningMode:positioningMode,positioningTile:tile,positioningPosition:tile.position})};DashboardLayout.prototype.onMouseMove=function(e){var _this=this;var _a=this,cardsStage=_a.cardsStage,unitWidth=_a.unitWidth,unitHeight=_a.unitHeight;var collection=this.props.collection;var _b=this.state,positioningMode=_b.positioningMode,positioningTile=_b.positioningTile,positioningPosition=_b.positioningPosition,containerStage=_b.containerStage;if(!positioningMode)return;var collectionSize=collection.size;var originalPosition=positioningTile.position;var mouseUnitX=Math.floor((e.clientX-containerStage.x-cardsStage.x+this.containerDOM.scrollLeft)/unitWidth);var mouseUnitY=Math.floor((e.clientY-containerStage.y-cardsStage.x+this.containerDOM.scrollTop)/unitHeight);var deltaUnitX=mouseUnitX-this.mouseStartUnitX;var deltaUnitY=mouseUnitY-this.mouseStartUnitY;var newX=beltful_1.NumberUtils.clamp(originalPosition.x+deltaUnitX,0,collectionSize.width-originalPosition.width);var newY=beltful_1.NumberUtils.clamp(originalPosition.y+deltaUnitY,0,collectionSize.height-originalPosition.height);var newAltX=beltful_1.NumberUtils.clamp(originalPosition.x+deltaUnitX,0,originalPosition.x+originalPosition.width-MIN_WIDTH);var newAltY=beltful_1.NumberUtils.clamp(originalPosition.y+deltaUnitY,0,originalPosition.y+originalPosition.height-MIN_HEIGHT);var newPositiveWidth=beltful_1.NumberUtils.clamp(originalPosition.width+deltaUnitX,MIN_WIDTH,collectionSize.width-originalPosition.x);var newNegativeWidth=beltful_1.NumberUtils.clamp(originalPosition.width-deltaUnitX,MIN_WIDTH,originalPosition.x+originalPosition.width);var newPositiveHeight=beltful_1.NumberUtils.clamp(originalPosition.height+deltaUnitY,MIN_HEIGHT,collectionSize.height-originalPosition.y);var newNegativeHeight=beltful_1.NumberUtils.clamp(originalPosition.height-deltaUnitY,MIN_HEIGHT,originalPosition.y+originalPosition.height);var newPosition=originalPosition;switch(positioningMode){case"move":newPosition=originalPosition.changeXY(newX,newY);break;case"resize-top":newPosition=originalPosition.changeY(newAltY).changeHeight(newNegativeHeight);break;case"resize-top-left":newPosition=originalPosition.changeXY(newX,newAltY).changeHeight(newNegativeHeight);break;case"resize-top-right":newPosition=originalPosition.changeY(newAltY).changeWidthHeight(newPositiveWidth,newNegativeHeight);break;case"resize-left":newPosition=originalPosition.changeX(newAltX).changeWidth(newNegativeWidth);break;case"resize-right":newPosition=originalPosition.changeWidth(newPositiveWidth);break;case"resize-bottom":newPosition=originalPosition.changeHeight(newPositiveHeight);break;case"resize-bottom-left":newPosition=originalPosition.changeX(newAltX).changeWidthHeight(newNegativeWidth,newPositiveHeight);break;case"resize-bottom-right":newPosition=originalPosition.changeWidthHeight(newPositiveWidth,newPositiveHeight);break}if(!newPosition.equals(positioningPosition)){this.setState({positioningPosition:newPosition},function(){if(_this.positioningTileCard)_this.positioningTileCard.calculateSize()})}};DashboardLayout.prototype.onMouseUp=function(e){var _a=this.props,collection=_a.collection,onCollectionChange=_a.onCollectionChange;var _b=this.state,positioningMode=_b.positioningMode,positioningTile=_b.positioningTile,positioningPosition=_b.positioningPosition;if(!onCollectionChange||!positioningMode)return;var positioningValid=this.isPositioningValid();this.positioningTileCard=null;this.setState({positioningMode:null,positioningTile:null,positioningPosition:null});if(positioningValid){onCollectionChange(collection.addOrUpdateTile(positioningTile.changePosition(positioningPosition)))}};DashboardLayout.prototype.isPositioningValid=function(){var collection=this.props.collection;var _a=this.state,positioningTile=_a.positioningTile,positioningPosition=_a.positioningPosition;if(!positioningTile)return true;return collection.tiles.every(function(tile){if(tile===positioningTile)return true;return!tile.position.overlapsWith(positioningPosition)})};DashboardLayout.prototype.onTileChange=function(newTile){var _a=this.props,onCollectionChange=_a.onCollectionChange,collection=_a.collection;if(!onCollectionChange)return;onCollectionChange(collection.addOrUpdateTile(newTile))};DashboardLayout.prototype.onTileDelete=function(tileName){var _a=this.props,onCollectionChange=_a.onCollectionChange,collection=_a.collection;if(!onCollectionChange)return;onCollectionChange(collection.deleteTile(tileName))};DashboardLayout.prototype.renderUnits=function(){var _a=this.props,collection=_a.collection,onCollectionChange=_a.onCollectionChange;if(!onCollectionChange||!collection)return null;var _b=collection.size,width=_b.width,height=_b.height;var units=[];for(var x=0;x<width;x++){for(var y=0;y<height;y++){var unitPosition=beltful_1.Stage.fromJS({x:x,y:y,width:1,height:1});units.push(React.createElement("div",{className:classNames("unit"),key:"unit-"+x+"-"+y,style:this.positionToScreen(unitPosition).getLeftTopWidthHeight()}))}}return units};DashboardLayout.prototype.renderUnitButtons=function(){var _a=this.props,collection=_a.collection,onCollectionChange=_a.onCollectionChange;if(!onCollectionChange)return null;var curHeight=collection.size.height;var minHeight=Math.max(models_1.Collection.DEFAULT_SIZE.height,collection.getMaxOccupiedRow());var maxHeight=models_1.Collection.DEFAULT_SIZE.height*10;var onAddRowsClick=function(){var collectionSize=collection.size;var newHeight=Math.min(curHeight+3,maxHeight);onCollectionChange(collection.changeSize(collectionSize.changeHeight(newHeight)))};var onRemoveRowsClick=function(){var collectionSize=collection.size;var newHeight=Math.max(curHeight-3,minHeight);onCollectionChange(collection.changeSize(collectionSize.changeHeight(newHeight)))};var canAdd=curHeight<maxHeight;var canRemove=minHeight<curHeight;return React.createElement("div",{className:"row-buttons"},canAdd?React.createElement("div",{className:"modify-rows add",onClick:onAddRowsClick},React.createElement(caladan_1.SvgIcon,{svg:Icons.ADD_ROWS}),React.createElement("span",null,"Add rows")):null,canRemove?React.createElement("div",{className:"modify-rows remove",onClick:onRemoveRowsClick},React.createElement(caladan_1.SvgIcon,{svg:Icons.ADD_ROWS}),React.createElement("span",null,"Remove rows")):null)};DashboardLayout.prototype.renderEditOverlayElements=function(tile){var _this=this;return[React.createElement("div",{className:"edit-overlay",key:"overlay"})].concat(POSITIONING_MODES.map(function(m){return React.createElement("div",{className:"edit-handle "+m,key:m,onMouseDown:_this.tilePositioningStart.bind(_this,m,tile)})}))};DashboardLayout.prototype.renderTile=function(tile){var _this=this;var _a=this.props,onCollectionChange=_a.onCollectionChange,timekeeper=_a.timekeeper,commonEssence=_a.commonEssence,clicker=_a.clicker,controller=_a.controller,onSuperviseDataCube=_a.onSuperviseDataCube;var _b=this.state,positioningTile=_b.positioningTile,positioningPosition=_b.positioningPosition;var editing=Boolean(onCollectionChange);var invalid=positioningTile===tile&&!this.isPositioningValid();var cardPosition;var positioning=tile===positioningTile;if(positioning){cardPosition=positioningPosition}else{cardPosition=tile.getPosition()}var cardStage=this.positionToScreen(cardPosition);return React.createElement("div",{className:classNames("tile-wrapper",{positioning:positioning,invalid:invalid,editing:editing}),style:cardStage.getLeftTopWidthHeight(),key:tile.name},React.createElement(collection_tile_card_1.CollectionTileCard,{ref:function(e){if(!e)return;if(_this.cardsToResize)_this.cardsToResize.push(e);if(positioning)_this.positioningTileCard=e},tile:tile,commonEssence:commonEssence,timekeeper:timekeeper,clicker:clicker,controller:controller,onSuperviseDataCube:onSuperviseDataCube,isThumbnail:true,onTileChange:function(newTile){return _this.onTileChange(newTile)},onTileDelete:function(){return _this.onTileDelete(tile.name)},editing:editing}),editing?this.renderEditOverlayElements(tile):null)};DashboardLayout.prototype.renderContent=function(){var _this=this;var cardsStage=this.cardsStage;var collection=this.props.collection;if(!collection)return null;this.cardsToResize=[];var cardElements=collection.tiles.map(function(tile){return _this.renderTile(tile)});return React.createElement("div",{className:"cards",style:cardsStage.getLeftTopWidthHeight(),key:"cards"},this.renderUnits(),cardElements,this.renderUnitButtons())};DashboardLayout.prototype.renderEmpty=function(){return React.createElement("div",{className:"dashboard-layout empty"},React.createElement("div",{className:"container"},React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_COLLECTION}),React.createElement("div",{className:"placeholder"},strings_1.STRINGS.noTilesInThisDashboard)))};DashboardLayout.prototype.render=function(){var _this=this;var _a=this.props,collection=_a.collection,onCollectionChange=_a.onCollectionChange;var containerStage=this.state.containerStage;if(!containerStage)return React.createElement("div",{className:"dashboard-layout",ref:function(e){return _this.containerDOM=e}});if(!onCollectionChange&&!collection.tiles.length)return this.renderEmpty();var collectionSize=collection.size;this.unitWidth=beltful_1.NumberUtils.clamp((containerStage.width-GAP)/collectionSize.width,MIN_UNIT_WIDTH,MAX_UNIT_WIDTH);this.unitHeight=beltful_1.NumberUtils.clamp((containerStage.height-GAP)/collectionSize.height,MIN_UNIT_HEIGHT,MAX_UNIT_HEIGHT);var totalWidth=this.unitWidth*collectionSize.width+GAP;var totalHeight=this.unitHeight*collectionSize.height+GAP;this.cardsStage=beltful_1.Stage.fromJS({x:Math.max(0,(containerStage.width-totalWidth)/2),y:Math.max(0,(containerStage.height-totalHeight)/2),width:totalWidth,height:totalHeight});return React.createElement("div",{className:"dashboard-layout",ref:function(e){return _this.containerDOM=e}},React.createElement(caladan_1.GlobalEventListener,{resize:this.calculateSize.bind(this,collection),mouseMove:this.onMouseMove.bind(this),mouseUp:this.onMouseUp.bind(this)}),this.renderContent())};return DashboardLayout}(React.Component);exports.DashboardLayout=DashboardLayout},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var components_1=__webpack_require__(203);var CubeEditHeaderBar=function(_super){tslib_1.__extends(CubeEditHeaderBar,_super);function CubeEditHeaderBar(){var _this=_super.call(this)||this;_this.state={};return _this}CubeEditHeaderBar.prototype.renderUserMenu=function(target){var _a=this.props,user=_a.user,customization=_a.customization;var canEdit=user&&user.canAccessSettings()&&customization.getSettingsMode()!==models_1.Customization.SETTINGS_MODE_SUPPRESSED;return React.createElement(components_1.UserMenu,{showSettings:canEdit,openOn:target,user:user,customization:customization})};CubeEditHeaderBar.prototype.renderDescriptionBubble=function(target){var dataCube=this.props.dataCube;return React.createElement(components_1.BubbleMenu,{className:"description-menu",direction:"down",stage:beltful_1.Stage.fromSize(200,200),openOn:target},React.createElement("div",{className:"message"},dataCube.description||"No description"))};CubeEditHeaderBar.prototype.getHeaderStyle=function(customization){var headerStyle=null;if(customization&&customization.headerBackground){headerStyle={background:customization.headerBackground}}return headerStyle};CubeEditHeaderBar.prototype.getRightChildren=function(){var _a=this.props,user=_a.user,userMode=_a.userMode;var userButton={id:"user-button",className:"icon-button user",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_USER}),tooltip:"Me",renderMenu:this.renderUserMenu.bind(this)};var items=[];if(models_1.User.modeNeedsUserButton(userMode))items.push(userButton);return items};CubeEditHeaderBar.prototype.render=function(){var _a=this.props,onNavClick=_a.onNavClick,dataCube=_a.dataCube,customization=_a.customization;var leftChildren=[{id:"menu-icon",className:"menu-icon",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.MENU}),onClick:onNavClick},{id:"title",className:"title",content:dataCube.title,onClick:onNavClick},dataCube.description?{id:"description",className:"description-icon",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.HELP_2}),renderMenu:this.renderDescriptionBubble.bind(this)}:null].filter(Boolean);return React.createElement(caladan_1.HeaderBar,{className:"cube-edit-header-bar",style:this.getHeaderStyle(customization),leftChildren:leftChildren,rightChildren:this.getRightChildren()})};return CubeEditHeaderBar}(React.Component);exports.CubeEditHeaderBar=CubeEditHeaderBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var ajax_1=__webpack_require__(45);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var immutable_ui_1=__webpack_require__(69);var Icons=__webpack_require__(11);var filesaver=__webpack_require__(317);var chronoshift_1=__webpack_require__(16);var classNames=__webpack_require__(9);var immutable_class_1=__webpack_require__(2);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var string_1=__webpack_require__(152);var components_1=__webpack_require__(203);var delegates_1=__webpack_require__(219);var attribute_modal_1=__webpack_require__(808);var dimension_modal_1=__webpack_require__(810);var measure_modal_1=__webpack_require__(813);var cube_edit_header_bar_1=__webpack_require__(821);__webpack_require__(960);var MY_LABELS=models_1.LABELS.DATA_CUBE;var CubeEditView=function(_super){tslib_1.__extends(CubeEditView,_super);function CubeEditView(){var _this=_super.call(this)||this;_this.tabs=[{label:"General",value:"general",icon:Icons.FULL_SETTINGS},{label:"Dimensions",value:"dimensions",icon:Icons.FULL_CUBE},{label:"Measures",value:"measures",icon:Icons.MEASURES},{label:"Advanced",
value:"advanced",icon:Icons.FULL_MORE}];_this.mounted=false;_this.formGrid=(new caladan_1.Grid).setColumns([{width:60},{width:40,vAlign:"top"}]);_this.state={crumbs:[_this.tabs[0].value]};_this.formDelegate=new immutable_ui_1.ImmutableFormDelegate(_this);_this.loadingDelegate=new delegates_1.LoadingMessageDelegate(_this);_this.formDelegate.onAnyChange(function(){var _a=_this.props,dataCube=_a.dataCube,onSave=_a.onSave,onCancel=_a.onCancel;var newInstance=_this.state.newInstance;if(dataCube.equals(newInstance)){caladan_1.GateKeeper.forget()}else{caladan_1.GateKeeper.update({save:function(){return onSave(newInstance)},cancel:onCancel})}});return _this}CubeEditView.prototype.componentWillMount=function(){this.initFromProps(this.props)};CubeEditView.prototype.componentWillReceiveProps=function(nextProps){this.initFromProps(nextProps)};CubeEditView.prototype.fetchClustersSources=function(){var _this=this;this.loadingDelegate.start("Loading clusters...");ajax_1.Ajax.query({method:"GET",url:"settings/cluster-sources"}).then(function(resp){if(!_this.mounted)return;_this.loadingDelegate.stop();_this.setState({clusterSources:resp.clusterSources})},function(e){if(!_this.mounted)return;_this.loadingDelegate.stop();caladan_1.Notifier.failure("Sorry","There was a problem loading sources "+e.message)}).done()};CubeEditView.prototype.fetchColumns=function(){var _this=this;var dataCube=this.props.dataCube;this.loadingDelegate.startNow("Loading columns...");ajax_1.Ajax.query({method:"POST",url:"settings/attributes",data:{clusterName:dataCube.clusterName,source:dataCube.source}}).then(function(resp){if(!_this.mounted)return;_this.loadingDelegate.stop();_this.setState({availableColumns:plywood_1.AttributeInfo.fromJSs(resp.attributes)})},function(e){if(!_this.mounted)return;_this.loadingDelegate.stop()}).done()};CubeEditView.prototype.componentDidMount=function(){this.mounted=true;this.fetchClustersSources();this.fetchColumns()};CubeEditView.prototype.componentWillUnmount=function(){this.mounted=false;caladan_1.GateKeeper.forget()};CubeEditView.prototype.initFromProps=function(props){var dataCube=props.dataCube;if(!dataCube)return;this.setState({newInstance:this.state.newInstance||new models_1.DataCube(props.dataCube.valueOf()),canSave:true,errors:{},modal:null})};CubeEditView.prototype.selectTab=function(tab){this.setState({crumbs:[tab.value]})};CubeEditView.prototype.isDuplicate=function(){var dataCube=this.props.dataCube;var newInstance=this.state.newInstance;return dataCube.name!==newInstance.name};CubeEditView.prototype.saveButtonTitle=function(){var editMode=this.props.editMode;if(this.isDuplicate())return"Save duplicate";return editMode==="update"?"Save":"Create cube"};CubeEditView.prototype.onDuplicate=function(){var settings=this.props.settings;var newInstance=this.state.newInstance;var newName=beltful_1.StringUtils.generateUniqueName(newInstance.name.replace(/\d+$/,""),function(name){return!settings.getDataCube(name)});this.setState({newInstance:newInstance.makeDuplicate(newName)})};CubeEditView.prototype.onExport=function(){var newInstance=this.state.newInstance;var blob=new Blob([JSON.stringify(newInstance,null,2)],{type:"application/json;charset=utf-8"});filesaver.saveAs(blob,"data-cube-"+newInstance.title+".json",true)};CubeEditView.prototype.renderTabs=function(){var _this=this;var crumbs=this.state.crumbs;return this.tabs.map(function(tab){return React.createElement(caladan_1.Button,{className:classNames(tab.value,{active:crumbs[0]&&crumbs[0]===tab.value}),title:tab.label,type:"primary",svg:tab.icon,key:tab.value,onClick:_this.selectTab.bind(_this,tab)})})};CubeEditView.prototype.renderGeneral=function(){var _this=this;var _a=this.props,customization=_a.customization,onDelete=_a.onDelete;var _b=this.state,newInstance=_b.newInstance,errors=_b.errors,clusterSources=_b.clusterSources;var makeLabel=caladan_1.FormLabel.simpleGenerator(MY_LABELS,errors);var makeTextInput=immutable_ui_1.ImmutableTextInput.simpleGenerator(newInstance,this.formDelegate.onChange,MY_LABELS,errors);var makeDropdownInput=immutable_ui_1.ImmutableDropdown.simpleGenerator(newInstance,this.formDelegate.onChange,MY_LABELS,errors);var timezones=customization.getTimezones().map(function(tz){return{label:tz.toString(),value:tz}});var onClusterSourceChange=function(newInstance,valid){_this.setState({newInstance:newInstance,canSave:valid!=null?valid:true})};return React.createElement("div",{className:"form general"},this.formGrid.row([caladan_1.FormLabel.dumbLabel(MY_LABELS["title"].label),makeTextInput("title",/.*/,true)],[]),this.formGrid.row([caladan_1.FormLabel.dumbLabel(MY_LABELS["description"].label),makeTextInput("description")],[]),this.formGrid.row([makeLabel("source"),React.createElement(components_1.ClusterSourcePicker,{key:"cluster-source-picker",className:"input",dataCube:newInstance,clusterSources:clusterSources,onChange:onClusterSourceChange})],React.createElement(caladan_1.InfoSpot,{sourceIds:["source"]})),this.formGrid.row([makeLabel("defaultTimezone"),makeDropdownInput("defaultTimezone",timezones)],React.createElement(caladan_1.InfoSpot,{sourceIds:["defaultTimezone"]})),this.isDuplicate()?null:React.createElement("div",{className:"buttons"},caladan_1.FormLabel.dumbLabel("Data cube actions"),React.createElement(caladan_1.Button,{type:"warn",className:"secondary",onClick:onDelete,title:strings_1.STRINGS.delete}),React.createElement(caladan_1.Button,{type:"secondary",onClick:function(){return _this.onDuplicate()},title:strings_1.STRINGS.duplicate}),React.createElement(caladan_1.Button,{type:"secondary",onClick:function(){return _this.onExport()},title:strings_1.STRINGS.export})))};CubeEditView.prototype.renderDimensions=function(){var _this=this;var settings=this.props.settings;var _a=this.state,newInstance=_a.newInstance,availableColumns=_a.availableColumns;var clusterType=newInstance.getClusterType(settings.clusters);var onChange=function(newCube){_this.setState({newInstance:newCube})};var onDimensionsChange=function(newDimensions){onChange(newInstance.changeDimensions(newDimensions))};var getModal=function(item){return React.createElement(dimension_modal_1.DimensionModal,{availableColumns:availableColumns,suggestedDimensions:newInstance.getSuggestedDimensions(availableColumns||[]),dimension:item,clusterType:clusterType})};var getNewDimension=function(){return models_1.Dimension.fromJS({name:string_1.generateUniqueName("d",function(name){return!immutable_class_1.NamedArray.findByName(newInstance.dimensions,name)}),title:"New dimension"})};var getDimensionsRows=function(items){return items.map(function(dimension){var fromColumn=dimension.fromColumn();return{title:dimension.title,description:fromColumn?"Column: "+fromColumn:"Derived: "+dimension.formula,icon:dimension.getIcon()}})};var DimensionsList=immutable_ui_1.ImmutableList.specialize();return React.createElement(DimensionsList,{groupField:"group",label:strings_1.STRINGS.dimensions,className:"dimension-list",items:newInstance.dimensions,onChange:onDimensionsChange,getModal:getModal,getNewItem:getNewDimension,getRows:getDimensionsRows,preAddHook:newInstance.straightenDimensionName.bind(newInstance)})};CubeEditView.prototype.renderMeasures=function(){var _this=this;var _a=this.state,newInstance=_a.newInstance,availableColumns=_a.availableColumns;var onChange=function(newMeasures){var defaultSortMeasure=newInstance.defaultSortMeasure;if(defaultSortMeasure){if(!immutable_class_1.NamedArray.findByName(newMeasures,defaultSortMeasure)){newInstance=newInstance.changeDefaultSortMeasure(null)}}var newCube=newInstance.changeMeasures(newMeasures);_this.setState({newInstance:newCube})};var getModal=function(item){return React.createElement(measure_modal_1.MeasureModal,{availableColumns:availableColumns,suggestedMeasures:newInstance.getSuggestedMeasures(availableColumns),measure:item,validateFormula:newInstance.validateMeasureFormula.bind(newInstance)})};var getNewItem=function(){var numericDimension=immutable_class_1.SimpleArray.find(newInstance.dimensions,function(a){return a.type==="NUMBER"});var attr=numericDimension?numericDimension.name:"column";return models_1.Measure.fromJS({name:string_1.generateUniqueName("m",function(name){return!newInstance.getMeasure(name)}),title:"New measure",formula:plywood_1.$("main").sum(plywood_1.$(attr)).toString()})};var getRows=function(items){return items.map(function(measure){return{title:measure.title,description:measure.formula,icon:Icons.MEASURES}})};var MeasuresList=immutable_ui_1.ImmutableList.specialize();return React.createElement(MeasuresList,{label:strings_1.STRINGS.measures,groupField:"group",className:"measure-list",items:newInstance.measures,onChange:onChange.bind(this),getModal:getModal,getNewItem:getNewItem,getRows:getRows,preAddHook:newInstance.straightenMeasureName.bind(newInstance)})};CubeEditView.prototype.validateSubsetFormula=function(formula){if(formula==="")return true;var newInstance=this.state.newInstance;return newInstance.validateFilterFormula(formula)};CubeEditView.prototype.renderAdvanced=function(){var _this=this;var settings=this.props.settings;var _a=this.state,newInstance=_a.newInstance,errors=_a.errors;var clusterType=newInstance.getClusterType(settings.clusters);var makeLabel=caladan_1.FormLabel.simpleGenerator(MY_LABELS,errors);var makeTextInput=immutable_ui_1.ImmutableTextInput.simpleGenerator(newInstance,this.formDelegate.onChange,MY_LABELS,errors);var makeDropdownInput=immutable_ui_1.ImmutableDropdown.simpleGenerator(newInstance,this.formDelegate.onChange,MY_LABELS,errors);var stringify=function(obj){var str=JSON.stringify(obj,null,2);return str==="{}"?"{\n\n}":str};var onChange=function(newCube){_this.setState({newInstance:newCube})};var onAttributesChange=function(attributes){onChange(newInstance.changeAttributes(attributes))};var getModal=function(item){return React.createElement(attribute_modal_1.AttributeModal,{clusterType:clusterType,attribute:item})};var getNewAttribute=function(){return plywood_1.AttributeInfo.fromJS({name:"column_name",type:"STRING"})};var getAttributeRows=function(items){return items.map(function(attribute){var type=attribute.type||"No Type";if(attribute.nativeType){type=type==="NULL"?attribute.nativeType:type+" ["+attribute.nativeType+"]"}return{title:attribute.name,description:type}})};var AttributesList=immutable_ui_1.ImmutableList.specialize();var arrayToString=function(value){return value?value.join(", "):null};var stringToArray=function(str){return str?str.split(/\s*,\s*/):null};var simpleArrayInput=function(pathName,validator){return makeTextInput(pathName,validator,false,{stringToValue:stringToArray,valueToString:arrayToString})};var validateFilter=function(filterString){if(filterString==="")return true;var filter=models_1.Filter.fromJS(filterString);return filter.clauses.every(function(c){return Boolean(immutable_class_1.NamedArray.findIndexByName(newInstance.dimensions,c.dimension))})};var splitContext={dimensions:newInstance.dimensions,measure:newInstance.getDefaultSortMeasure()};var splitsToString=function(splits){return arrayToString(splits.splitCombines.map(function(s){return s.dimension}))};var stringToSplits=function(str){if(!str)return models_1.Splits.EMPTY;var combinesJSes=stringToArray(str).map(function(combineJS){return models_1.SplitCombine.fromJS(combineJS,splitContext)});return models_1.Splits.fromJS(combinesJSes,splitContext)};var validateDims=function(dimArray){if(dimArray==="")return true;stringToArray(dimArray).forEach(function(d){if(!immutable_class_1.NamedArray.findByName(newInstance.dimensions,d)){throw new Error("Could not find dimension "+d)}});return true};var validateMeasures=function(measureArray){if(measureArray==="")return true;stringToArray(measureArray).forEach(function(m){if(!newInstance.getMeasure(m)){throw new Error("Could not find measure "+m)}});return true};var measureNames=newInstance.getMeasures().map(function(m){return{label:m.title,value:m.name}});return React.createElement("div",{className:"form advanced"},this.formGrid.row([makeLabel("subsetFormula"),makeTextInput("subsetFormula",this.validateSubsetFormula.bind(this))],React.createElement(caladan_1.InfoSpot,{sourceIds:["subsetFormula"]})),this.formGrid.row([makeLabel("defaultFilter"),React.createElement(immutable_ui_1.ImmutableTextInput,{key:"input-defaultFilter",type:"textarea",instance:newInstance,path:"defaultFilter",onChange:this.formDelegate.onChange,validator:validateFilter,converters:{valueToString:function(value){return value?JSON.stringify(value.toJS(),null,2):null},stringToValue:function(str){return str?models_1.Filter.fromJS(str):null}}})],React.createElement(caladan_1.InfoSpot,{sourceIds:["defaultFilter"]})),this.formGrid.row([makeLabel("defaultSplits"),makeTextInput("defaultSplits",validateDims,false,{stringToValue:stringToSplits,valueToString:splitsToString})],React.createElement(caladan_1.InfoSpot,{sourceIds:["defaultSplits"]})),this.formGrid.row([makeLabel("defaultDuration"),makeTextInput("defaultDuration",null,false,{stringToValue:function(s){return chronoshift_1.Duration.fromJS(s)},valueToString:function(v){return v.toJS()}})],React.createElement(caladan_1.InfoSpot,{sourceIds:["defaultDuration"]})),this.formGrid.row([makeLabel("defaultSortMeasure"),makeDropdownInput("defaultSortMeasure",measureNames)],React.createElement(caladan_1.InfoSpot,{sourceIds:["defaultSortMeasure"]})),this.formGrid.row([makeLabel("defaultSelectedMeasures"),simpleArrayInput("defaultSelectedMeasures",validateMeasures)],React.createElement(caladan_1.InfoSpot,{sourceIds:["defaultSelectedMeasures"]})),this.formGrid.row([makeLabel("defaultPinnedDimensions"),simpleArrayInput("defaultPinnedDimensions",validateDims)],React.createElement(caladan_1.InfoSpot,{sourceIds:["defaultPinnedDimensions"]})),this.formGrid.row([makeLabel("refreshRule"),makeDropdownInput("refreshRule",CubeEditView.REFRESH_RULES)],React.createElement(caladan_1.InfoSpot,{sourceIds:["refreshRule"]})),newInstance.getRefreshRule().isFixed()?this.formGrid.row([caladan_1.FormLabel.dumbLabel("time"),makeTextInput("refreshRule.time",function(str){return!isNaN(Date.parse(str))})],React.createElement(caladan_1.InfoSpot,{sourceIds:["time"]})):null,this.formGrid.row([makeLabel("options"),React.createElement(immutable_ui_1.ImmutableTextInput,{type:"textarea",key:"input-options",instance:newInstance,path:"options",onChange:this.formDelegate.onChange,converters:{valueToString:function(value){return value?stringify(value):undefined},stringToValue:function(str){return str?JSON.parse(str):undefined}}})],React.createElement(caladan_1.InfoSpot,{sourceIds:["options"]})),React.createElement(AttributesList,{label:strings_1.STRINGS.specialColumns,className:"columns",items:newInstance.attributes,onChange:onAttributesChange,getModal:getModal,getNewItem:getNewAttribute,getRows:getAttributeRows,disableReordering:true,preAddHook:newInstance.straightenDimensionName.bind(newInstance)}))};CubeEditView.prototype.renderButtons=function(){var _a=this.props,dataCube=_a.dataCube,editMode=_a.editMode,onCancel=_a.onCancel,onSave=_a.onSave;var _b=this.state,canSave=_b.canSave,newInstance=_b.newInstance;var hasChanged=!dataCube.equals(newInstance);var saveButtonEnabled=canSave&&(editMode!=="update"||hasChanged);return React.createElement("div",{className:"button-bar"},React.createElement(caladan_1.Button,{className:"cancel",title:"Cancel",type:"secondary",onClick:onCancel}),React.createElement(caladan_1.Button,{className:classNames("save",{disabled:!saveButtonEnabled}),title:this.saveButtonTitle(),type:"primary",onClick:function(){return onSave(newInstance)}}))};CubeEditView.prototype.getTitle=function(){var editMode=this.props.editMode;var newInstance=this.state.newInstance;var lastBit=newInstance.title?": "+newInstance.title:"";return(editMode==="create"?strings_1.STRINGS.createDataCube:strings_1.STRINGS.editDataCube)+lastBit};CubeEditView.prototype.setCrumbs=function(crumbs){if(caladan_1.RouterCore.areSameCrumbs(crumbs,this.state.crumbs))return;this.setState(crumbs)};CubeEditView.prototype.render=function(){var _this=this;var _a=this.props,dataCube=_a.dataCube,editMode=_a.editMode,user=_a.user,userMode=_a.userMode,customization=_a.customization,controller=_a.controller;var _b=this.state,crumbs=_b.crumbs,newInstance=_b.newInstance,modal=_b.modal;if(!newInstance||!dataCube)return null;return React.createElement("div",{className:"cube-edit-view"},React.createElement(cube_edit_header_bar_1.CubeEditHeaderBar,{user:user,userMode:userMode,customization:customization,dataCube:dataCube,onNavClick:controller.openSideDrawer}),React.createElement("div",{className:"cube-edit-content"},React.createElement("div",{className:"flat-modal"},React.createElement("div",{className:"tabs"},this.renderTabs()),React.createElement("div",{className:"tab-content"},React.createElement(caladan_1.RouterCore,{crumbs:crumbs,onChange:this.setCrumbs.bind(this)},React.createElement(caladan_1.Route,{fragment:"general"},React.createElement("div",{className:"tab-title"},this.tabs.filter(function(t){return t.value===_this.state.crumbs[0]})[0].label),this.renderGeneral()),React.createElement(caladan_1.Route,{fragment:"dimensions"},this.renderDimensions()),React.createElement(caladan_1.Route,{fragment:"measures"},this.renderMeasures()),React.createElement(caladan_1.Route,{fragment:"advanced"},React.createElement("div",{className:"tab-title"},this.tabs.filter(function(t){return t.value===_this.state.crumbs[0]})[0].label),this.renderAdvanced()))),this.renderButtons())),modal?modal.render.bind(this)():null)};return CubeEditView}(React.Component);CubeEditView.REFRESH_RULES=[models_1.RefreshRule.FIXED,models_1.RefreshRule.QUERY,models_1.RefreshRule.REALTIME].map(function(r){return{label:beltful_1.StringUtils.firstUp(r),value:models_1.RefreshRule.fromJS({rule:r})}});exports.CubeEditView=CubeEditView},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var chronoshift_1=__webpack_require__(16);var classNames=__webpack_require__(9);var immutable_class_1=__webpack_require__(2);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var components_1=__webpack_require__(203);var options_menu_1=__webpack_require__(312);var strings_1=__webpack_require__(15);var collection_tile_1=__webpack_require__(54);__webpack_require__(961);var CubeHeaderBar=function(_super){tslib_1.__extends(CubeHeaderBar,_super);function CubeHeaderBar(){var _this=_super.call(this)||this;_this.state={animating:false};return _this}CubeHeaderBar.prototype.componentDidMount=function(){this.mounted=true;var dataCube=this.props.essence.dataCube;this.setAutoRefreshFromDataCube(dataCube)};CubeHeaderBar.prototype.componentWillReceiveProps=function(nextProps){var _this=this;if(this.props.essence.dataCube.name!==nextProps.essence.dataCube.name){this.setAutoRefreshFromDataCube(nextProps.essence.dataCube)}if(!this.props.updatingMaxTime&&nextProps.updatingMaxTime){this.setState({animating:true});setTimeout(function(){if(!_this.mounted)return;_this.setState({animating:false})},1e3)}};CubeHeaderBar.prototype.componentWillUnmount=function(){this.mounted=false;this.clearTimerIfExists()};CubeHeaderBar.prototype.setAutoRefreshFromDataCube=function(dataCube){var refreshRule=dataCube.getRefreshRule();if(refreshRule.isFixed())return;this.setAutoRefreshRate(chronoshift_1.Duration.fromJS("PT5M"))};CubeHeaderBar.prototype.setAutoRefreshRate=function(rate){var autoRefreshRate=this.state.autoRefreshRate;if(immutable_class_1.immutableEqual(autoRefreshRate,rate))return;this.clearTimerIfExists();var onRefreshMaxTime=this.props.onRefreshMaxTime;if(onRefreshMaxTime&&rate){this.autoRefreshTimer=setInterval(function(){onRefreshMaxTime()},rate.getCanonicalLength())}this.setState({autoRefreshRate:rate})};CubeHeaderBar.prototype.clearTimerIfExists=function(){if(this.autoRefreshTimer){clearInterval(this.autoRefreshTimer);this.autoRefreshTimer=null}};CubeHeaderBar.prototype.renderAddToCollectionMenu=function(target){var _a=this.props,settings=_a.settings,controller=_a.controller,essence=_a.essence;var addToNew=function(layout){var newCollection=new models_1.Collection({name:beltful_1.StringUtils.generateUniqueName("c",function(name){return!settings.getCollection(name)}),layout:layout,tiles:[collection_tile_1.CollectionTile.fromEssence("t01",essence)],title:layout==="album"?"New album":"New dashboard"});controller.editCollection(newCollection,"create")};var addToExisting=function(collection){var newTileName=beltful_1.StringUtils.generateUniqueName("t",function(name){return!collection.getCollectionTile(name)});var newTile=collection_tile_1.CollectionTile.fromEssence(newTileName,essence);controller.editCollection(collection.addOrUpdateTile(newTile),"update",true)};return React.createElement(components_1.BubbleMenu,{className:"add-to-collection-menu",direction:"down",stage:beltful_1.Stage.fromSize(200,200),openOn:target},React.createElement("ul",{className:"bubble-list"},React.createElement("li",{className:"new-album",onClick:function(){return addToNew("album")}},strings_1.STRINGS.addToNewAlbum),React.createElement("li",{className:"new-dashboard",onClick:function(){return addToNew("dashboard")}},strings_1.STRINGS.addToNewDashboard),settings.collections.length?React.createElement("li",{className:"label"},"Add to existing collection:"):null,settings.collections.map(function(c){return React.createElement("li",{key:c.name,className:"existing",onClick:function(){return addToExisting(c)}},c.title)})))};CubeHeaderBar.prototype.renderHilukMenu=function(target){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper,getUrlPrefix=_a.getUrlPrefix,customization=_a.customization,openRawDataModal=_a.openRawDataModal,getDownloadableDataset=_a.getDownloadableDataset;var externalViews=null;if(customization&&customization.externalViews){externalViews=customization.externalViews}return React.createElement(components_1.HilukMenu,{essence:essence,timekeeper:timekeeper,openOn:target,getUrlPrefix:getUrlPrefix,openRawDataModal:openRawDataModal,externalViews:externalViews,getDownloadableDataset:getDownloadableDataset})};CubeHeaderBar.prototype.renderUserMenu=function(target){var _a=this.props,user=_a.user,customization=_a.customization,stateful=_a.stateful;var canEdit=user&&user.canAccessSettings()&&stateful&&customization.getSettingsMode()!==models_1.Customization.SETTINGS_MODE_SUPPRESSED;return React.createElement(components_1.UserMenu,{showSettings:canEdit,openOn:target,user:user,customization:customization})};CubeHeaderBar.prototype.renderOptionsMenu=function(target){var _a=this.props,clicker=_a.clicker,customization=_a.customization,essence=_a.essence,user=_a.user,stateful=_a.stateful,timekeeper=_a.timekeeper,onRefreshMaxTime=_a.onRefreshMaxTime;var autoRefreshRate=this.state.autoRefreshRate;return React.createElement(options_menu_1.OptionsMenu,{timezone:essence.timezone,customization:customization,changeTimezone:clicker.changeTimezone,autoRefreshRate:autoRefreshRate,setAutoRefreshRate:this.setAutoRefreshRate.bind(this),onRefreshMaxTime:onRefreshMaxTime,refreshText:essence.dataCube.updatedText(timekeeper,essence.timezone),openOn:target})};CubeHeaderBar.prototype.renderDescriptionBubble=function(target){var essence=this.props.essence;return React.createElement(components_1.BubbleMenu,{className:"description-menu",direction:"down",stage:beltful_1.Stage.fromSize(200,200),openOn:target},React.createElement("div",{className:"message"},essence.dataCube.description||"No description"))};CubeHeaderBar.prototype.getHeaderStyle=function(customization){var headerStyle=null;if(customization&&customization.headerBackground){headerStyle={background:customization.headerBackground}}return headerStyle};CubeHeaderBar.prototype.getRightChildren=function(){var _this=this;var _a=this.props,controller=_a.controller,user=_a.user,userMode=_a.userMode,onEditClick=_a.onEditClick,stateful=_a.stateful;var animating=this.state.animating;var items=[];if(animating){items.push({id:"auto-refresh",className:classNames("icon-button","auto-refresh","refreshing"),content:React.createElement(caladan_1.SvgIcon,{className:"auto-refresh-icon",svg:Icons.FULL_REFRESH}),tooltip:"Refreshing"})}if(stateful){items.push({id:"add-to-collection",className:"icon-button add-to-collection",content:React.createElement(caladan_1.SvgIcon,{className:"add-to-collection",svg:Icons.ADD_TO_COLLECTION}),renderMenu:function(target){return _this.renderAddToCollectionMenu(target)},tooltip:"Add to collection"})}items.push({id:"hiluk",className:"icon-button hiluk",content:React.createElement(caladan_1.SvgIcon,{className:"hiluk-icon",svg:Icons.FULL_HILUK}),renderMenu:function(target){return _this.renderHilukMenu(target)},tooltip:"Share link"},{id:"toggles",className:"icon-button toggles",content:React.createElement(caladan_1.SvgIcon,{className:"toggles-icon",svg:Icons.TOGGLES}),renderMenu:function(target){return _this.renderOptionsMenu(target)},tooltip:"Cube options"},{id:"edit",className:"icon-button edit",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_EDIT}),onClick:onEditClick,tooltip:"Edit this cube"});if(models_1.User.modeNeedsUserButton(userMode)){items.push({id:"user-button",className:"icon-button user",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_USER}),renderMenu:function(target){return _this.renderUserMenu(target)},tooltip:"Me"})}else{items.push({id:"settings",className:classNames("icon-button","settings"),content:React.createElement(caladan_1.SvgIcon,{className:"settings-icon",svg:Icons.FULL_SETTINGS}),tooltip:"Settings",onClick:function(){return controller.openSettings()}})}return items};CubeHeaderBar.prototype.render=function(){var _a=this.props,controller=_a.controller,essence=_a.essence,customization=_a.customization;var leftChildren=[{id:"menu-icon",className:"menu-icon",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.MENU}),onClick:controller.openSideDrawer},{id:"title",className:"title",content:essence.dataCube.title,onClick:controller.openSideDrawer},essence.dataCube.description?{id:"description",className:"description-icon",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.HELP_2}),renderMenu:this.renderDescriptionBubble.bind(this)}:null].filter(Boolean);return React.createElement(caladan_1.HeaderBar,{className:"cube-header-bar",style:this.getHeaderStyle(customization),leftChildren:leftChildren,rightChildren:this.getRightChildren()})};return CubeHeaderBar}(React.Component);exports.CubeHeaderBar=CubeHeaderBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var React=__webpack_require__(1);var options_menu_1=__webpack_require__(312);__webpack_require__(963);var SupervisedCubeHeaderBar=function(_super){tslib_1.__extends(SupervisedCubeHeaderBar,_super);function SupervisedCubeHeaderBar(){var _this=_super.call(this)||this;_this.state={};return _this}SupervisedCubeHeaderBar.prototype.renderOptionsMenu=function(target){var _a=this.props,clicker=_a.clicker,customization=_a.customization,essence=_a.essence;return React.createElement(options_menu_1.OptionsMenu,{timezone:essence.timezone,customization:customization,changeTimezone:clicker.changeTimezone,openOn:target})};SupervisedCubeHeaderBar.prototype.render=function(){var _a=this.props,supervisor=_a.supervisor,customization=_a.customization,essence=_a.essence;var headerStyle=null;if(customization&&customization.headerBackground){headerStyle={background:customization.headerBackground}}var leftChildren=[{id:"title",className:"title",content:supervisor.title}];var rightChildren=[{id:"toggles",className:"icon-button toggles",content:React.createElement(caladan_1.SvgIcon,{className:"toggles-icon",svg:Icons.TOGGLES}),renderMenu:this.renderOptionsMenu.bind(this),tooltip:"Cube options"},{id:"button-group",className:"button-group",content:[React.createElement(caladan_1.Button,{key:"cancel",className:"cancel",title:"Cancel",type:"secondary",onClick:supervisor.onCancel}),React.createElement(caladan_1.Button,{key:"save",className:"save",title:"Save",type:"primary",onClick:function(){return supervisor.onSave(essence)}})]}];return React.createElement(caladan_1.HeaderBar,{className:"supervised-cube-header-bar",style:headerStyle,leftChildren:leftChildren,rightChildren:rightChildren})};return SupervisedCubeHeaderBar}(React.Component);exports.SupervisedCubeHeaderBar=SupervisedCubeHeaderBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var components_1=__webpack_require__(203);__webpack_require__(964);var HomeHeaderBar=function(_super){tslib_1.__extends(HomeHeaderBar,_super);function HomeHeaderBar(){var _this=_super.call(this)||this;_this.state={};return _this}HomeHeaderBar.prototype.renderUserMenu=function(target){var _a=this.props,user=_a.user,customization=_a.customization,stateful=_a.stateful;var canEdit=user&&user.canAccessSettings()&&stateful&&customization.getSettingsMode()!==models_1.Customization.SETTINGS_MODE_SUPPRESSED;return React.createElement(components_1.UserMenu,{showSettings:canEdit,openOn:target,user:user,customization:customization})};HomeHeaderBar.prototype.renderAddMenu=function(target){var _a=this.props,onNewCollection=_a.onNewCollection,onNewDataCube=_a.onNewDataCube,user=_a.user;var showDataCubeAdd=onNewDataCube&&user&&user.canAccessSettings();return React.createElement(components_1.BubbleMenu,{className:"add-menu",direction:"down",stage:beltful_1.Stage.fromSize(200,200),openOn:target},React.createElement("ul",{className:"bubble-list"},showDataCubeAdd?React.createElement("li",{className:"add-data-cube",onClick:onNewDataCube},strings_1.STRINGS.newDataCube):null,React.createElement("li",{className:"add-album",onClick:function(){return onNewCollection("album")}},strings_1.STRINGS.newAlbum),React.createElement("li",{className:"add-dashboard",onClick:function(){return onNewCollection("dashboard")}},strings_1.STRINGS.newDashboard)))};HomeHeaderBar.prototype.render=function(){var _a=this.props,controller=_a.controller,user=_a.user,userMode=_a.userMode,stateful=_a.stateful,customization=_a.customization;var headerStyle=null;if(customization&&customization.headerBackground){headerStyle={background:customization.headerBackground}}var leftChildren=[{id:"menu-icon",className:"menu-icon",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.MENU}),onClick:controller.openSideDrawer},{id:"title",className:"svg-text-button title",content:[React.createElement(caladan_1.SvgIcon,{key:"imply",svg:Icons.FUTURA_IMPLY}),React.createElement(caladan_1.SvgIcon,{key:"pivot",className:"faded",svg:Icons.FUTURA_PIVOT})],onClick:controller.openSideDrawer}];var rightChildren=stateful?[{id:"add-item",className:"icon-button add",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_ADD_FRAMED}),tooltip:"New data cube or collection",renderMenu:this.renderAddMenu.bind(this)}]:[];if(models_1.User.modeNeedsUserButton(userMode)){rightChildren.push({id:"user-button",className:"icon-button user",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_USER}),tooltip:"Me",renderMenu:this.renderUserMenu.bind(this)})}else{rightChildren.push({id:"settings",className:"icon-button settings",content:React.createElement(caladan_1.SvgIcon,{className:"settings-icon",svg:Icons.FULL_SETTINGS}),tooltip:"Settings",onClick:function(){return controller.openSettings()}})}return React.createElement(caladan_1.HeaderBar,{className:"home-header-bar",style:headerStyle,
leftChildren:leftChildren,rightChildren:rightChildren})};return HomeHeaderBar}(React.Component);exports.HomeHeaderBar=HomeHeaderBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var string_1=__webpack_require__(152);var data_cube_seed_modal_1=__webpack_require__(809);var home_header_bar_1=__webpack_require__(825);var item_card_1=__webpack_require__(827);__webpack_require__(965);var HomeView=function(_super){tslib_1.__extends(HomeView,_super);function HomeView(){var _this=_super.call(this)||this;_this.state={};return _this}HomeView.prototype.renderDataCube=function(dataCube){var _a=this.props,stateful=_a.stateful,settings=_a.settings,controller=_a.controller;var actions=[];if(stateful){actions=[{label:strings_1.STRINGS.edit,callback:function(){return controller.editDataCube(dataCube,"update")},className:"edit"},{label:strings_1.STRINGS.duplicate,callback:function(){var name=string_1.generateUniqueName(dataCube.name.replace(/\d+$/,""),function(name){return!settings.getDataCube(name)});controller.editDataCube(dataCube.makeDuplicate(name),"create")},className:"duplicate"},{label:strings_1.STRINGS.delete,callback:function(){caladan_1.Notifier.handleRemoval("data cube",function(){controller.updateSettings(settings.deleteDataCube(dataCube.name)).then(function(undo){caladan_1.Notifier.success("Data cube deleted",{label:"Undo",callback:undo})},function(e){caladan_1.Notifier.failure("Woops","Something bad happened")})},dataCube.title)},className:"delete"}]}return React.createElement(item_card_1.ItemCard,{key:dataCube.name,title:dataCube.title,description:dataCube.getDescription(),icon:Icons.FULL_CUBE,onClick:function(){return controller.openDataCube(dataCube)},actions:actions})};HomeView.prototype.renderCollection=function(collection){var _a=this.props,stateful=_a.stateful,controller=_a.controller,settings=_a.settings;var actions=[];if(stateful){actions=[{label:strings_1.STRINGS.edit,callback:function(){return controller.editCollection(collection,"update")},className:"edit"},{label:strings_1.STRINGS.duplicate,callback:function(){var name=string_1.generateUniqueName(collection.name.replace(/\d+$/,""),function(name){return!settings.getCollection(name)});controller.editCollection(collection.makeDuplicate(name),"create")},className:"duplicate"},{label:strings_1.STRINGS.delete,callback:function(){controller.updateSettings(settings.deleteCollection(collection.name)).then(function(undo){caladan_1.Notifier.success("Collection deleted",{label:"Undo",callback:undo})},function(e){caladan_1.Notifier.failure("Woops","Something bad happened");throw e})},className:"delete"}]}return React.createElement(item_card_1.ItemCard,{key:collection.name,title:collection.title,count:collection.tiles.length,description:collection.getDescription(),icon:Icons.FULL_COLLECTION,onClick:function(){return controller.openCollection(collection)},actions:actions})};HomeView.prototype.renderItems=function(items,adder){return React.createElement("div",{className:"items-container"},items,adder||React.createElement("div",{className:"item-card empty"}),React.createElement("div",{className:"item-card empty"}),React.createElement("div",{className:"item-card empty"}),React.createElement("div",{className:"item-card empty"}),React.createElement("div",{className:"item-card empty"}),React.createElement("div",{className:"item-card empty"}))};HomeView.prototype.renderDataCubeSeedModal=function(){var _this=this;var _a=this.props,settings=_a.settings,controller=_a.controller;return React.createElement(data_cube_seed_modal_1.DataCubeSeedModal,{dataCubes:settings.dataCubes,onCancel:function(){return _this.setState({showDataCubeSeedModal:false})},onNext:function(nextDataCube){return controller.editDataCube(nextDataCube,"create")}})};HomeView.prototype.renderDataCubes=function(){var dataCubes=this.props.settings.dataCubes;var wipCubeIndex=this.state.wipCubeIndex;var items=dataCubes.map(this.renderDataCube,this);if(wipCubeIndex>-1){items.splice(wipCubeIndex,0,item_card_1.ItemCard.getLoadingItemCard())}return React.createElement("div",{className:"datacubes"},React.createElement("div",{className:"section-title"},React.createElement(caladan_1.SvgIcon,{svg:Icons.FUTURA_DATA_CUBES})),this.renderItems(items))};HomeView.prototype.renderCollections=function(){var _a=this.props,settings=_a.settings,stateful=_a.stateful;var collections=settings.collections;if(!stateful&&collections.length===0)return null;return React.createElement("div",{className:"collections"},React.createElement("div",{className:"section-title"},React.createElement(caladan_1.SvgIcon,{svg:Icons.FUTURA_COLLECTIONS})),this.renderItems(collections.map(this.renderCollection,this),collections.length===0?item_card_1.ItemCard.getNoItemCard(Icons.FULL_COLLECTION,strings_1.STRINGS.noCollections):null))};HomeView.prototype.onScroll=function(event){var scrolledDown=this.state.scrolledDown;var newScrolledDown=event.nativeEvent.target.scrollTop!==0;if(newScrolledDown!==scrolledDown){this.setState({scrolledDown:newScrolledDown})}};HomeView.prototype.renderContainer=function(){return React.createElement("div",{className:"container",onScroll:this.onScroll.bind(this)},this.renderDataCubes(),this.renderCollections())};HomeView.prototype.renderEmpty=function(){var _this=this;var _a=this.props,settings=_a.settings,controller=_a.controller,stateful=_a.stateful;var clusters=settings.clusters;var noClusters=!clusters||clusters.length===0;var action;if(stateful){action=noClusters?React.createElement("div",{className:"action"},"Please go to the ",React.createElement("span",{className:"link",onClick:function(){return controller.openSettings("clusters")}},"clusters settings")):React.createElement("div",{className:"action"},"Please ",React.createElement("span",{className:"link",onClick:function(){return _this.setState({showDataCubeSeedModal:true})}},"add a data cube"))}return React.createElement("div",{className:"container"},React.createElement("div",{className:"title"},React.createElement("div",{className:"icon"},React.createElement(caladan_1.SvgIcon,{svg:Icons.DATA_CUBES})),React.createElement("div",{className:"label"},noClusters?strings_1.STRINGS.noClusters:strings_1.STRINGS.noDataCubes)),action)};HomeView.prototype.render=function(){var _this=this;var _a=this.props,user=_a.user,userMode=_a.userMode,controller=_a.controller,customization=_a.customization,stateful=_a.stateful,settings=_a.settings;var _b=this.state,showDataCubeSeedModal=_b.showDataCubeSeedModal,scrolledDown=_b.scrolledDown;var onNewCollection=function(layout){var newCollection=new models_1.Collection({name:beltful_1.StringUtils.generateUniqueName("c",function(name){return!settings.getCollection(name)}),layout:layout,tiles:[],title:layout==="album"?"New album":"New dashboard"});controller.editCollection(newCollection,"create")};return React.createElement("div",{className:classNames("home-view",{"scrolled-down":scrolledDown,"no-data":settings.dataCubes.length===0})},React.createElement(home_header_bar_1.HomeHeaderBar,{controller:controller,user:user,userMode:userMode,stateful:stateful,onNewDataCube:function(){return _this.setState({showDataCubeSeedModal:true})},onNewCollection:onNewCollection,customization:customization}),settings.dataCubes.length>0?this.renderContainer():this.renderEmpty(),showDataCubeSeedModal?this.renderDataCubeSeedModal():null)};return HomeView}(React.Component);exports.HomeView=HomeView},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var classNames=__webpack_require__(9);var React=__webpack_require__(1);var strings_1=__webpack_require__(15);var components_1=__webpack_require__(203);__webpack_require__(966);var ItemCard=function(_super){tslib_1.__extends(ItemCard,_super);function ItemCard(){var _this=_super.call(this)||this;_this.state={};return _this}ItemCard.getNewItemCard=function(onClick){return React.createElement("div",{className:"item-card new-one",onClick:onClick},React.createElement("div",{className:"inner-container"},React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_ADD})))};ItemCard.getNoItemCard=function(icon,title){return React.createElement("div",{className:"item-card empty-placeholder"},React.createElement("div",{className:"inner-container"},React.createElement(caladan_1.SvgIcon,{className:"view-icon",svg:icon}),React.createElement("div",{className:"text"},React.createElement("div",{className:"title"},title))))};ItemCard.getLoadingItemCard=function(){return React.createElement("div",{className:"item-card loading"},React.createElement("div",{className:"inner-container"},React.createElement(caladan_1.Loader,null)))};ItemCard.prototype.onMoreIconClick=function(event){event.preventDefault();this.setState({moreMenuOpen:!this.state.moreMenuOpen})};ItemCard.prototype.renderMoreMenu=function(){var _this=this;var actions=this.props.actions;var onClose=function(){return _this.setState({moreMenuOpen:false})};var onClick=function(callback){return _this.setState({moreMenuOpen:false},callback)};var actionItems=actions.map(function(_a,i){var label=_a.label,callback=_a.callback,className=_a.className;return React.createElement("li",{key:i,className:className,onClick:onClick.bind(_this,callback)},label)});return React.createElement(components_1.BubbleMenu,{className:"item-card-more-menu",direction:"down",stage:beltful_1.Stage.fromSize(120,120),openOn:this.refs["more-button"],onClose:onClose},React.createElement("ul",{className:"bubble-list"},actionItems))};ItemCard.prototype.onClick=function(event){if(beltful_1.DOMUtils.isInside(event.target,this.refs["more-button"]))return;if(this.state.moreMenuOpen)return;this.props.onClick(event)};ItemCard.prototype.render=function(){var _a=this.props,title=_a.title,description=_a.description,icon=_a.icon,onClick=_a.onClick,count=_a.count,actions=_a.actions;var moreMenuOpen=this.state.moreMenuOpen;return React.createElement("div",{className:"item-card",onClick:this.onClick.bind(this)},React.createElement("div",{className:"inner-container"},React.createElement(caladan_1.SvgIcon,{className:"view-icon",svg:icon}),React.createElement("div",{className:"text"},React.createElement("div",{className:"title"},title," ",count!==undefined?React.createElement("span",{className:"count"},count):null),React.createElement("div",{className:"description"},description||strings_1.STRINGS.noDescription)),actions&&actions.length>0?React.createElement("div",{className:classNames("more-button icon",{active:moreMenuOpen}),onClick:this.onMoreIconClick.bind(this),ref:"more-button"},React.createElement(caladan_1.SvgIcon,{svg:Icons.CARET})):null),moreMenuOpen?this.renderMoreMenu():null)};return ItemCard}(React.Component);exports.ItemCard=ItemCard},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var components_1=__webpack_require__(203);__webpack_require__(967);var LinkHeaderBar=function(_super){tslib_1.__extends(LinkHeaderBar,_super);function LinkHeaderBar(){var _this=_super.call(this)||this;_this.state={};return _this}LinkHeaderBar.prototype.renderUserMenu=function(target){var _a=this.props,user=_a.user,customization=_a.customization,stateful=_a.stateful;var canEdit=user&&user.canAccessSettings()&&stateful&&customization.getSettingsMode()!==models_1.Customization.SETTINGS_MODE_SUPPRESSED;return React.createElement(components_1.UserMenu,{showSettings:canEdit,openOn:target,user:user,customization:customization})};LinkHeaderBar.prototype.render=function(){var _a=this.props,controller=_a.controller,title=_a.title,user=_a.user,userMode=_a.userMode,onExploreClick=_a.onExploreClick,customization=_a.customization;var userButton={id:"user-button",className:"icon-button user",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.FULL_USER}),renderMenu:this.renderUserMenu.bind(this),tooltip:"Me"};var headerStyle=null;if(customization&&customization.headerBackground){headerStyle={background:customization.headerBackground}}var leftChildren=[{id:"menu-icon",className:"menu-icon",content:React.createElement(caladan_1.SvgIcon,{svg:Icons.MENU}),onClick:controller.openSideDrawer},{id:"title",className:"title",content:title,onClick:controller.openSideDrawer}];var rightChildren=[{id:"explore",className:"text-button",content:"Explore",tooltip:"Explore",onClick:onExploreClick},{id:"help",className:"icon-button help",tooltip:"Support",content:React.createElement(caladan_1.SvgIcon,{className:"help-icon",svg:Icons.HELP}),onClick:function(){return window.open("https://groups.google.com/forum/#!forum/imply-user-group","_blank")}}].filter(Boolean);if(models_1.User.modeNeedsUserButton(userMode)){rightChildren.push(userButton)}else{rightChildren.push({id:"settings",className:"icon-button settings",content:React.createElement(caladan_1.SvgIcon,{className:"settings-icon",svg:Icons.FULL_SETTINGS}),tooltip:"Settings",onClick:function(){return controller.openSettings()}})}return React.createElement(caladan_1.HeaderBar,{className:"link-header-bar",style:headerStyle,leftChildren:leftChildren,rightChildren:rightChildren})};return LinkHeaderBar}(React.Component);exports.LinkHeaderBar=LinkHeaderBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var classNames=__webpack_require__(9);var immutable_class_1=__webpack_require__(2);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var ReactDOM=__webpack_require__(20);var models_1=__webpack_require__(10);var strings_1=__webpack_require__(15);var components_1=__webpack_require__(203);var localStorage=__webpack_require__(773);var url_1=__webpack_require__(316);var visualizations_1=__webpack_require__(762);var link_header_bar_1=__webpack_require__(828);__webpack_require__(968);var $maxTime=plywood_1.$(models_1.FilterClause.MAX_TIME_REF_NAME);var LATEST_PRESETS=[{name:strings_1.STRINGS.last5Minutes,selection:$maxTime.timeRange("PT5M",-1)},{name:strings_1.STRINGS.lastHour,selection:$maxTime.timeRange("PT1H",-1)},{name:strings_1.STRINGS.lastDay,selection:$maxTime.timeRange("P1D",-1)},{name:strings_1.STRINGS.lastWeek,selection:$maxTime.timeRange("P1W",-1)}];var MIN_PANEL_WIDTH=240;var MAX_PANEL_WIDTH=400;var LinkView=function(_super){tslib_1.__extends(LinkView,_super);function LinkView(){var _this=_super.call(this)||this;_this.state={linkTile:null,essence:null,menuStage:null,layout:_this.getStoredLayout()};_this.clicker={changeTimezone:function(timezone){var essence=_this.state.essence;essence=essence.changeTimezone(timezone);_this.setState({essence:essence})},changeFilter:function(filter,colors){var essence=_this.state.essence;essence=essence.changeFilter(filter);if(colors)essence=essence.changeColors(colors);_this.setState({essence:essence})},changeColors:function(colors){var essence=_this.state.essence;_this.setState({essence:essence.changeColors(colors)})},changePinnedSortMeasure:function(measure){var essence=_this.state.essence;_this.setState({essence:essence.changePinnedSortMeasure(measure)})},toggleEffectiveMeasure:function(measure){var essence=_this.state.essence;_this.setState({essence:essence.toggleSelectedMeasure(measure)})},changeHighlight:function(highlight){var essence=_this.state.essence;_this.setState({essence:essence.changeHighlight(highlight)})},acceptHighlight:function(){var essence=_this.state.essence;_this.setState({essence:essence.acceptHighlight()})},dropHighlight:function(){var essence=_this.state.essence;_this.setState({essence:essence.dropHighlight()})}};return _this}LinkView.prototype.initFromProps=function(props){var tileId=props.tileId,collection=props.collection;var linkTile=collection.getCollectionTile(tileId);if(!linkTile){url_1.replaceHash("#link/"+collection.getDefaultTile().name);return}this.setState({linkTile:linkTile,essence:linkTile.essence})};LinkView.prototype.updateFromProps=function(oldProps,nextProps){if(oldProps.tileId!==nextProps.tileId){this.setState({linkTile:nextProps.collection.getCollectionTile(nextProps.tileId)})}};LinkView.prototype.componentWillReceiveProps=function(nextProps){if(!nextProps.tileId)return;if(!this.props.tileId&&nextProps.tileId){this.initFromProps(nextProps);return}this.updateFromProps(this.props,nextProps)};LinkView.prototype.componentWillMount=function(){this.initFromProps(this.props)};LinkView.prototype.componentDidMount=function(){this.globalResizeListener()};LinkView.prototype.componentWillUpdate=function(nextProps,nextState){var linkTile=this.state.linkTile;if(!nextState.linkTile.equals(linkTile)){window.location.hash="link/"+nextState.linkTile.name}};LinkView.prototype.globalResizeListener=function(){var _a=this.refs,container=_a.container,visualization=_a.visualization;var containerDOM=ReactDOM.findDOMNode(container);var visualizationDOM=ReactDOM.findDOMNode(visualization);if(!containerDOM||!visualizationDOM)return;var deviceSize="large";if(window.innerWidth<=1250)deviceSize="medium";if(window.innerWidth<=1080)deviceSize="small";this.setState({deviceSize:deviceSize,menuStage:beltful_1.Stage.fromClientRect(containerDOM.getBoundingClientRect())})};LinkView.prototype.selectLinkItem=function(linkTile){var essence=this.state.essence;var newEssence=linkTile.essence;if(essence.dataCube.getSpecialTimeDimension()){}this.setState({linkTile:linkTile,essence:newEssence})};LinkView.prototype.getStoredLayout=function(){return localStorage.get("link-view-layout")||{linkPanelWidth:240,pinboardWidth:240}};LinkView.prototype.storeLayout=function(layout){localStorage.set("link-view-layout",layout)};LinkView.prototype.onLinkPanelResize=function(value){var layout=this.state.layout;layout.linkPanelWidth=value;this.setState({layout:layout});this.storeLayout(layout)};LinkView.prototype.onPinboardPanelResize=function(value){var layout=this.state.layout;layout.pinboardWidth=value;this.setState({layout:layout});this.storeLayout(layout)};LinkView.prototype.onPanelResizeEnd=function(){this.globalResizeListener()};LinkView.prototype.selectPreset=function(p){};LinkView.prototype.renderPresets=function(){var essence=this.state.essence;var PresetDropdown=caladan_1.Dropdown.specialize();var realTimeSelection=essence.getRealTimeSelection();var selected=immutable_class_1.SimpleArray.find(LATEST_PRESETS,function(p){return p.selection.equals(realTimeSelection)});return React.createElement(PresetDropdown,{items:LATEST_PRESETS,selectedItem:selected,equal:function(a,b){if(a===b)return true;if(!a!==!b)return false;return a.selection===b.selection},renderItem:function(p){return p?p.name:""},onSelect:this.selectPreset.bind(this)})};LinkView.prototype.renderLinkPanel=function(style){var _this=this;var collection=this.props.collection;var linkTile=this.state.linkTile;var groupId=0;var lastGroup=null;var items=[];collection.tiles.forEach(function(li){if(lastGroup!==li.group){items.push(React.createElement("div",{className:"link-group-title",key:"group_"+groupId},li.group));groupId++;lastGroup=li.group}items.push(React.createElement("div",{className:classNames("link-item",{selected:li===linkTile}),key:"li_"+li.name,onClick:_this.selectLinkItem.bind(_this,li)},li.title))});return React.createElement("div",{className:"link-panel",style:style},React.createElement("div",{className:"link-container"},items))};LinkView.prototype.renderEmpty=function(){return React.createElement("div",{className:"link-view"},React.createElement(caladan_1.GlobalEventListener,{resize:this.globalResizeListener.bind(this)}),React.createElement(caladan_1.HeaderBar,null),React.createElement("div",{className:"container",ref:"container"},React.createElement("div",{className:"center-panel"},React.createElement("div",{className:"center-top-bar"}),React.createElement("div",{className:"center-main"},React.createElement("div",{className:"visualization",ref:"visualization"})))))};LinkView.prototype.render=function(){var clicker=this.clicker;var _a=this.props,timekeeper=_a.timekeeper,getUrlPrefix=_a.getUrlPrefix,controller=_a.controller,collection=_a.collection,user=_a.user,userMode=_a.userMode,customization=_a.customization,stateful=_a.stateful;var _b=this.state,deviceSize=_b.deviceSize,linkTile=_b.linkTile,essence=_b.essence,layout=_b.layout;if(!linkTile)return this.renderEmpty();var visualization=essence.visualization;var visElement=null;if(essence.visResolve.proceedWithDimensions()){var visProps={clicker:clicker,timekeeper:timekeeper,essence:essence};visElement=React.createElement(visualizations_1.getVisualizationComponent(visualization),visProps)}var manualFallback=null;if(essence.visResolve.rejectedDimensions()||essence.visResolve.rejectedCombines()){manualFallback=React.createElement(components_1.ManualFallback,{clicker:clicker,essence:essence})}var styles={linkMeasurePanel:{width:layout.linkPanelWidth},centerPanel:{left:layout.linkPanelWidth,right:layout.pinboardWidth},pinboardPanel:{width:layout.pinboardWidth}};if(deviceSize==="small"){styles={linkMeasurePanel:{width:200},centerPanel:{left:200,right:200},pinboardPanel:{width:200}}}return React.createElement("div",{className:"link-view"},React.createElement(caladan_1.GlobalEventListener,{resize:this.globalResizeListener.bind(this)}),React.createElement(link_header_bar_1.LinkHeaderBar,{controller:controller,title:collection.title,user:user,userMode:userMode,onExploreClick:function(){return controller.openDataCube(essence.dataCube,essence)},getUrlPrefix:getUrlPrefix,customization:customization,changeTimezone:clicker.changeTimezone,timezone:essence.timezone,stateful:stateful}),React.createElement("div",{className:"container",ref:"container"},this.renderLinkPanel(styles.linkMeasurePanel),deviceSize!=="small"?React.createElement(caladan_1.ResizeHandle,{side:"left",initialValue:layout.linkPanelWidth,onResize:this.onLinkPanelResize.bind(this),onResizeEnd:this.onPanelResizeEnd.bind(this),min:MIN_PANEL_WIDTH,max:MAX_PANEL_WIDTH}):null,React.createElement("div",{className:"center-panel",style:styles.centerPanel},React.createElement("div",{className:"center-top-bar"},React.createElement("div",{className:"link-title"},linkTile.getTitle()),React.createElement("div",{className:"link-description"},linkTile.getDescription()),React.createElement("div",{className:"right-align"},this.renderPresets())),React.createElement("div",{className:"center-main"},React.createElement("div",{className:"visualization",ref:"visualization"},visElement),manualFallback)),deviceSize!=="small"?React.createElement(caladan_1.ResizeHandle,{side:"right",initialValue:layout.pinboardWidth,onResize:this.onPinboardPanelResize.bind(this),onResizeEnd:this.onPanelResizeEnd.bind(this),min:MIN_PANEL_WIDTH,max:MAX_PANEL_WIDTH}):null,React.createElement(components_1.PinboardPanel,{style:styles.pinboardPanel,clicker:clicker,essence:essence,timekeeper:timekeeper,getUrlPrefix:getUrlPrefix})))};return LinkView}(React.Component);exports.LinkView=LinkView},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var classNames=__webpack_require__(9);var d3_array_1=__webpack_require__(747);var d3_scale_1=__webpack_require__(760);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var ReactDOM=__webpack_require__(20);var models_1=__webpack_require__(10);var time_1=__webpack_require__(75);var components_1=__webpack_require__(203);var constants_1=__webpack_require__(47);var formatter_1=__webpack_require__(124);var base_visualization_1=__webpack_require__(751);var bar_coordinates_1=__webpack_require__(831);var pad_dataset_load_1=__webpack_require__(832);__webpack_require__(969);var X_AXIS_HEIGHT=84;var Y_AXIS_WIDTH=60;var CHART_TOP_PADDING=10;var CHART_BOTTOM_PADDING=0;var MIN_CHART_HEIGHT=200;var MAX_STEP_WIDTH=140;var MIN_STEP_WIDTH=20;var BARS_MIN_PAD_LEFT=30;var BARS_MIN_PAD_RIGHT=6;var HOVER_BUBBLE_V_OFFSET=8;var BarChart=function(_super){tslib_1.__extends(BarChart,_super);function BarChart(){var _this=_super.call(this)||this;_this.coordinatesCache=[];return _this}BarChart.prototype.getDefaultState=function(){var s=_super.prototype.getDefaultState.call(this);s.hoverInfo=null;return s};BarChart.prototype.componentDidUpdate=function(){var _a=this.state,scrollerYPosition=_a.scrollerYPosition,scrollerXPosition=_a.scrollerXPosition;var node=ReactDOM.findDOMNode(this.refs["scroller"]);if(!node)return;var rect=node.getBoundingClientRect();if(scrollerYPosition!==rect.top||scrollerXPosition!==rect.left){this.setState({scrollerYPosition:rect.top,scrollerXPosition:rect.left})}};BarChart.prototype.calculateMousePosition=function(x,y){var essence=this.props.essence;var measures=essence.getEffectiveMeasures();var chartStage=this.getSingleChartStage();var chartHeight=this.getOuterChartHeight(chartStage);if(y>=chartHeight*measures.length)return null;if(x>=chartStage.width)return null;var xScale=this.getPrimaryXScale();var chartIndex=Math.floor(y/chartHeight);var chartCoordinates=this.getBarsCoordinates(chartIndex,xScale);var _a=this.findBarCoordinatesForX(x,chartCoordinates),indices=_a.indices,coordinates=_a.coordinates;return{datum:this.findFlatDatumForIndices(indices),chartIndex:chartIndex,coordinates:coordinates,indexWithinSplit:indices[indices.length-1]}};BarChart.prototype.findFlatDatumForIndices=function(indices){var essence=this.props.essence;var datasetLoad=this.state.datasetLoad;var splits=essence.getEffectiveSplits();var mySplitDataset=datasetLoad.dataset.data[0][constants_1.SPLIT];var flatDatum={__nest:indices.length};var currentData=mySplitDataset;indices.forEach(function(datumIndex,i){var datum=currentData.data[datumIndex];flatDatum[splits.get(i).dimension]=datum[splits.get(i).dimension];currentData=datum[constants_1.SPLIT]});return flatDatum};BarChart.prototype.findBarCoordinatesForX=function(x,coordinates,currentIndices){if(currentIndices===void 0){currentIndices=[]}for(var i=0;i<coordinates.length;i++){if(coordinates[i].isXWithin(x)){currentIndices.push(i);if(coordinates[i].hasChildren()){return this.findBarCoordinatesForX(x,coordinates[i].children,currentIndices)}else{return{indices:currentIndices,coordinates:coordinates[i]}}}}return{indices:[],coordinates:null}};BarChart.prototype.onScrollerScroll=function(scrollTop,scrollLeft){this.setState({hoverInfo:null,scrollLeft:scrollLeft,scrollTop:scrollTop})};BarChart.prototype.onLimitReached=function(limit){var _a=this.props,essence=_a.essence,clicker=_a.clicker;if(window.toInfinityAndBeyond&&limit===caladan_1.Scroller.RIGHT_LIMIT){var split=essence.getEffectiveSplits().get(0);var limit_1=split.limitAction.value;var newSplit=split.changeLimitAction(plywood_1.Expression._.limit(limit_1+50));clicker.changeSplit(newSplit,models_1.VisStrategy.UnfairGame)}};BarChart.prototype.onMouseMove=function(x,y){this.setState({hoverInfo:this.calculateMousePosition(x,y)})};BarChart.prototype.onMouseLeave=function(){this.setState({hoverInfo:null})};BarChart.prototype.handleMultiSelect=function(selectionInfo){var _a=this.props,essence=_a.essence,clicker=_a.clicker;var chartIndex=selectionInfo.chartIndex,datum=selectionInfo.datum;var rowHighlight=this.getMultiFilter(essence,clicker,datum);if(!rowHighlight){clicker.dropHighlight()}else{this.setState({selectionInfo:selectionInfo});clicker.changeHighlight(new models_1.Highlight({owner:this.id,measure:essence.getEffectiveMeasures()[chartIndex].name,delta:rowHighlight}))}};BarChart.prototype.handleSimpleSelect=function(selectionInfo){var _a=this.props,essence=_a.essence,clicker=_a.clicker;var chartIndex=selectionInfo.chartIndex,datum=selectionInfo.datum;var splits=essence.splits;var rowHighlight=this.getFilterFromDatum(splits,selectionInfo.datum);if(rowHighlight.equals(essence.highlight.delta)){clicker.dropHighlight();this.setState({selectionInfo:null})}else{this.setState({selectionInfo:selectionInfo});clicker.changeHighlight(new models_1.Highlight({owner:this.id,measure:essence.getEffectiveMeasures()[chartIndex].name,delta:rowHighlight}))}};BarChart.prototype.handleNewSelect=function(selectionInfo){var _a=this.props,essence=_a.essence,clicker=_a.clicker;var chartIndex=selectionInfo.chartIndex,datum=selectionInfo.datum;this.setState({selectionInfo:selectionInfo});clicker.changeHighlight(new models_1.Highlight({owner:this.id,measure:essence.getEffectiveMeasures()[chartIndex].name,delta:this.getFilterFromDatum(essence.splits,selectionInfo.datum)}))};BarChart.prototype.onClick=function(x,y,part,event){var _a=this.props,essence=_a.essence,clicker=_a.clicker;var splits=essence.splits;var measures=essence.getEffectiveMeasures();if(!clicker.changeHighlight||!clicker.dropHighlight)return;var selectionInfo=this.calculateMousePosition(x,y);if(!selectionInfo)return;if(!selectionInfo.coordinates){clicker.dropHighlight();this.setState({selectionInfo:null});return}var rowHighlight;if(essence.highlightOn(this.id,measures[selectionInfo.chartIndex].name)){if(event.shiftKey){this.handleMultiSelect(selectionInfo)}else{this.handleSimpleSelect(selectionInfo)}}else{this.handleNewSelect(selectionInfo)}};BarChart.prototype.getYExtent=function(data,measure){var measureName=measure.name;var getY=function(d){return d[measureName]};return d3_array_1.extent(data,getY)};BarChart.prototype.getYScale=function(measure,yAxisStage){var essence=this.props.essence;var flatData=this.state.flatData;var splitLength=essence.splits.length();var leafData=flatData.filter(function(d){return d["__nest"]===splitLength-1});var extentY=this.getYExtent(leafData,measure);return d3_scale_1.scaleLinear().domain([Math.min(extentY[0]*1.1,0),Math.max(extentY[1]*1.1,0)]).range([yAxisStage.height,yAxisStage.y])};BarChart.prototype.hasValidYExtent=function(measure,data){var _a=this.getYExtent(data,measure),yMin=_a[0],yMax=_a[1];return!isNaN(yMin)&&!isNaN(yMax)};BarChart.prototype.getSingleChartStage=function(){var _a=this.props,essence=_a.essence,isThumbnail=_a.isThumbnail;var stage=this.state.stage;var xScale=this.getPrimaryXScale();var xTicks=xScale.domain();var width=xTicks.length>0?Math.round(xScale(xTicks[xTicks.length-1]))+xScale.bandwidth():0;var measures=essence.getEffectiveMeasures();var availableHeight=stage.height-X_AXIS_HEIGHT;var minHeight=isThumbnail?1:MIN_CHART_HEIGHT;var height=Math.max(minHeight,Math.floor(availableHeight/measures.length));return new beltful_1.Stage({x:0,y:CHART_TOP_PADDING,width:Math.max(width,stage.width-Y_AXIS_WIDTH-constants_1.VIS_H_PADDING*2),height:height-CHART_TOP_PADDING-CHART_BOTTOM_PADDING})};BarChart.prototype.getOuterChartHeight=function(chartStage){return chartStage.height+CHART_TOP_PADDING+CHART_BOTTOM_PADDING};BarChart.prototype.getAxisStages=function(chartStage){var essence=this.props.essence;var stage=this.state.stage;var xHeight=Math.max(stage.height-(CHART_TOP_PADDING+CHART_BOTTOM_PADDING+chartStage.height)*essence.getEffectiveMeasures().length,X_AXIS_HEIGHT);return{xAxisStage:new beltful_1.Stage({x:chartStage.x,y:0,height:xHeight,width:chartStage.width}),yAxisStage:new beltful_1.Stage({x:0,y:chartStage.y,height:chartStage.height,width:Y_AXIS_WIDTH+constants_1.VIS_H_PADDING})}};BarChart.prototype.getScrollerLayout=function(chartStage,xAxisStage,yAxisStage){var _a=this.props,essence=_a.essence,noScroll=_a.noScroll;var stage=this.state.stage;var measures=essence.getEffectiveMeasures()
;var oneChartHeight=this.getOuterChartHeight(chartStage);return{bodyWidth:noScroll?stage.width-yAxisStage.width:chartStage.width,bodyHeight:noScroll?stage.height-xAxisStage.height:oneChartHeight*measures.length-CHART_BOTTOM_PADDING,top:0,right:yAxisStage.width,bottom:xAxisStage.height,left:0}};BarChart.prototype.getBubbleLeftOffset=function(x){var _a=this.state,scrollLeft=_a.scrollLeft,scrollerXPosition=_a.scrollerXPosition;return scrollerXPosition+x-scrollLeft};BarChart.prototype.getBubbleTopOffset=function(y,chartIndex,chartStage){var _a=this.state,scrollTop=_a.scrollTop,scrollerYPosition=_a.scrollerYPosition;var oneChartHeight=this.getOuterChartHeight(chartStage);var chartsAboveMe=oneChartHeight*chartIndex;return chartsAboveMe-scrollTop+scrollerYPosition+y-HOVER_BUBBLE_V_OFFSET+CHART_TOP_PADDING};BarChart.prototype.xTooLeft=function(x){var scrollerXPosition=this.state.scrollerXPosition;return x<=scrollerXPosition};BarChart.prototype.xTooRight=function(x){var _a=this.state,stage=_a.stage,scrollerXPosition=_a.scrollerXPosition;return x>scrollerXPosition+stage.width-Y_AXIS_WIDTH};BarChart.prototype.yTooHigh=function(y){var scrollerYPosition=this.state.scrollerYPosition;return y<=scrollerYPosition};BarChart.prototype.yTooLow=function(y){var _a=this.state,stage=_a.stage,scrollerYPosition=_a.scrollerYPosition;return y>scrollerYPosition+stage.height-X_AXIS_HEIGHT};BarChart.prototype.canShowBubble=function(leftOffset,topOffset){return!(this.yTooHigh(topOffset)||this.yTooLow(topOffset)||this.xTooLeft(leftOffset)||this.xTooRight(leftOffset))};BarChart.prototype.onBubbleClose=function(){this.setState({selectionInfo:null})};BarChart.prototype.renderHoverBubble=function(hoverInfo){var essence=this.props.essence;var stage=this.state.stage;var chartStage=this.getSingleChartStage();var datum=hoverInfo.datum,chartIndex=hoverInfo.chartIndex,coordinates=hoverInfo.coordinates;var measure=essence.getEffectiveMeasures()[chartIndex];var leftOffset=this.getBubbleLeftOffset(coordinates.middleX);var topOffset=this.getBubbleTopOffset(coordinates.y,chartIndex,chartStage);if(!this.canShowBubble(leftOffset,topOffset))return null;return React.createElement(components_1.SegmentBubble,{top:topOffset,left:leftOffset,segmentLabel:this.labelizeInfos([hoverInfo]),measureLabel:measure.formatDatum(datum)})};BarChart.prototype.isSelected=function(datum,measure){var essence=this.props.essence;var splits=essence.splits;if(essence.highlightOnDifferentMeasure(this.id,measure.name))return false;if(essence.highlightOn(this.id,measure.name)){return this.isDatumSelected(essence.highlight.delta,splits,datum)}return false};BarChart.prototype.isFaded=function(){var essence=this.props.essence;return essence.highlightOn(this.id)};BarChart.prototype.hasAnySelectionGoingOn=function(){return this.props.essence.highlightOn(this.id)};BarChart.prototype.isHovered=function(datum,chartIndex){var essence=this.props.essence;var hoverInfo=this.state.hoverInfo;var splits=essence.splits;if(this.hasAnySelectionGoingOn())return false;if(!hoverInfo)return false;if(!hoverInfo.datum)return false;if(hoverInfo.chartIndex!==chartIndex)return false;var hoverFilter=this.getFilterFromDatum(splits,hoverInfo.datum);var potentialFilter=this.getFilterFromDatum(splits,datum);return hoverFilter&&potentialFilter&&potentialFilter.equals(hoverFilter)};BarChart.prototype.renderBars=function(data,measure,chartIndex,chartStage,xAxisStage,coordinates,splitIndex,path){var _this=this;if(splitIndex===void 0){splitIndex=0}if(path===void 0){path=[]}var essence=this.props.essence;var timezone=essence.timezone;var bars=[];var selectedBars=[];var dimension=essence.splits.get(splitIndex).dimension;var splitLength=essence.splits.length();data.forEach(function(d,i){var segmentValue=d[dimension];var subPath=path.concat(d);var bar;var bubble=null;var subCoordinates=coordinates[i];if(splitIndex<splitLength-1){var subRender=_this.renderBars(d[constants_1.SPLIT].data,measure,chartIndex,chartStage,xAxisStage,subCoordinates.children,splitIndex+1,subPath);bar=subRender.bars;selectedBars=selectedBars.concat(subRender.selectedBars)}else{var flatDatum=_this.flatDatumForPath(essence.getEffectiveSplits(),subPath);flatDatum[measure.name]=d[measure.name];var bubbleInfo={chartIndex:chartIndex,datum:flatDatum,indexWithinSplit:i,coordinates:subCoordinates};var isHovered=_this.isHovered(flatDatum,chartIndex);if(isHovered){bubble=_this.renderHoverBubble(bubbleInfo)}var selected=_this.isSelected(flatDatum,measure);var faded=_this.isFaded();if(selected)selectedBars.push(bubbleInfo);bar=React.createElement("g",{className:classNames("bar",{selected:selected,"not-selected":!selected&&faded,isHovered:isHovered}),key:String(segmentValue),transform:"translate("+Math.round(subCoordinates.x)+", 0)"},subCoordinates.renderBar("background"),bubble)}bars.push(bar)});return{bars:bars,selectedBars:selectedBars}};BarChart.prototype.renderTimeXAxisTicks=function(data,coordinates,xAxisStage){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper;var split=essence.splits.get(0);var dimension=split.dimension;var axisRange=essence.getEffectiveFilter(timekeeper,this.id).getExtent(dimension);var labelize=function(value){var tick=time_1.formatAxisBasedOnRange(value.midpoint(),axisRange,essence.timezone);return time_1.isBoundaryTick(tick)?tick.boundary:tick};return data.map(function(d,i){var segmentValueStr=labelize(d[dimension]);var coordinate=coordinates[i];return React.createElement("div",{className:"slanty-label continuous",key:i,style:{right:xAxisStage.width-coordinate.middleX}},segmentValueStr)})};BarChart.prototype.renderContinuousXAxisTicks=function(data,coordinates,xAxisStage){var essence=this.props.essence;var split=essence.splits.get(0);var dimension=split.dimension;var labels=[];var lastIndex=data.length-1;var ascending=split.sortAction.direction===plywood_1.SortExpression.ASCENDING;var leftThing=ascending?"start":"end";var rightThing=ascending?"end":"start";data.forEach(function(d,i){var segmentValue=d[dimension];var segmentValueStr=String(plywood_1.Range.isRange(segmentValue)?segmentValue[leftThing]:"");var coordinate=coordinates[i];labels.push(React.createElement("div",{className:"slanty-label continuous",key:i,style:{right:xAxisStage.width-coordinate.x}},segmentValueStr));if(i===lastIndex){segmentValueStr=String(plywood_1.Range.isRange(segmentValue)?segmentValue[rightThing]:"");labels.push(React.createElement("div",{className:"slanty-label continuous",key:"last-one",style:{right:xAxisStage.width-(coordinate.x+coordinate.width)}},segmentValueStr))}});return labels};BarChart.prototype.renderXAxis=function(data,coordinates,xAxisStage){var essence=this.props.essence;var xScale=this.getPrimaryXScale();var xTicks=xScale.domain();var split=essence.splits.get(0);var dimension=split.dimension;var labels=[];if(split.isBucketed()){labels=essence.getDimension(dimension).isTime()?this.renderTimeXAxisTicks(data,coordinates,xAxisStage):this.renderContinuousXAxisTicks(data,coordinates,xAxisStage)}else{data.forEach(function(d,i){var segmentValueStr=String(d[dimension]);var coordinate=coordinates[i];labels.push(React.createElement("div",{className:"slanty-label categorical",key:segmentValueStr,style:{right:xAxisStage.width-coordinate.middleX}},segmentValueStr))})}return React.createElement("div",{className:"x-axis",style:{width:xAxisStage.width}},React.createElement("svg",{style:xAxisStage.getWidthHeight(),viewBox:xAxisStage.getViewBox()},React.createElement(components_1.BucketMarks,{stage:xAxisStage,ticks:xTicks,scale:xScale})),labels)};BarChart.prototype.getYAxisStuff=function(dataset,measure,chartStage,chartIndex){var yAxisStage=this.getAxisStages(chartStage).yAxisStage;var yScale=this.getYScale(measure,yAxisStage);var yTicks=yScale.ticks(5);var yGridLines=React.createElement(components_1.GridLines,{orientation:"horizontal",scale:yScale,ticks:yTicks,stage:chartStage});var axisStage=yAxisStage.changeY(yAxisStage.y+(chartStage.height+CHART_TOP_PADDING+CHART_BOTTOM_PADDING)*chartIndex);var yAxis=React.createElement(components_1.VerticalAxis,{key:measure.name,stage:axisStage,ticks:yTicks,scale:yScale,hideZero:true});return{yGridLines:yGridLines,yAxis:yAxis,yScale:yScale}};BarChart.prototype.isChartVisible=function(chartIndex,xAxisStage){var _a=this.state,stage=_a.stage,scrollTop=_a.scrollTop;var chartStage=this.getSingleChartStage();var chartHeight=this.getOuterChartHeight(chartStage);var topY=chartIndex*chartHeight;var viewPortHeight=stage.height-xAxisStage.height;var hiddenAtBottom=topY-scrollTop>=viewPortHeight;var bottomY=topY+chartHeight;var hiddenAtTop=bottomY<scrollTop;return!hiddenAtTop&&!hiddenAtBottom};BarChart.prototype.renderChart=function(dataset,coordinates,measure,chartIndex,chartStage,getX){var isThumbnail=this.props.isThumbnail;var mySplitDataset=dataset.data[0][constants_1.SPLIT];var measureLabel=!isThumbnail?React.createElement(components_1.VisMeasureLabel,{measure:measure,datum:dataset.data[0]}):null;if(!this.hasValidYExtent(measure,mySplitDataset.data)){return{chart:React.createElement("div",{className:"measure-bar-chart",key:measure.name,style:{width:chartStage.width}},React.createElement("svg",{style:chartStage.getWidthHeight(0,CHART_BOTTOM_PADDING),viewBox:chartStage.getViewBox(0,CHART_BOTTOM_PADDING)}),measureLabel),yAxis:null,selectedBars:[]}}var xAxisStage=this.getAxisStages(chartStage).xAxisStage;var _a=this.getYAxisStuff(mySplitDataset,measure,chartStage,chartIndex),yAxis=_a.yAxis,yGridLines=_a.yGridLines;var bars;var selectedBars=[];if(this.isChartVisible(chartIndex,xAxisStage)){var renderedChart=this.renderBars(mySplitDataset.data,measure,chartIndex,chartStage,xAxisStage,coordinates);bars=renderedChart.bars;selectedBars=selectedBars.concat(renderedChart.selectedBars)}var chart=React.createElement("div",{className:"measure-bar-chart",key:measure.name,style:{width:chartStage.width}},React.createElement("svg",{style:chartStage.getWidthHeight(0,CHART_BOTTOM_PADDING),viewBox:chartStage.getViewBox(0,CHART_BOTTOM_PADDING)},yGridLines,React.createElement("g",{className:"bars",transform:chartStage.getTransform()},bars)),measureLabel);return{chart:chart,yAxis:yAxis,selectedBars:selectedBars}};BarChart.prototype.precalculate=function(props,datasetLoad){if(datasetLoad===void 0){datasetLoad=null}var registerDownloadableDataset=props.registerDownloadableDataset,essence=props.essence;var splits=essence.splits;var dimension=essence.getDimension(splits.get(0).dimension);var dimensionKind=dimension.getKind();var measures=essence.getEffectiveMeasures();this.coordinatesCache=[];var existingDatasetLoad=this.state.datasetLoad;var newState={};if(datasetLoad){if(dimensionKind==="number"){datasetLoad=pad_dataset_load_1.padDatasetLoad(datasetLoad,dimension,measures)}if(datasetLoad.loading)datasetLoad.dataset=existingDatasetLoad.dataset;newState.datasetLoad=datasetLoad}else{var stateDatasetLoad=this.state.datasetLoad;if(dimensionKind==="number"){datasetLoad=pad_dataset_load_1.padDatasetLoad(stateDatasetLoad,dimension,measures)}else{datasetLoad=stateDatasetLoad}}var dataset=datasetLoad.dataset;if(dataset&&splits.length()){var firstSplitDataSet=dataset.data[0][constants_1.SPLIT];if(registerDownloadableDataset)registerDownloadableDataset(dataset);var flatData=firstSplitDataSet.flatten({order:"preorder",nestingName:"__nest"}).data;var maxima=splits.toArray().map(function(){return 0});this.maxNumberOfLeaves(firstSplitDataSet.data,maxima,0);newState.maxNumberOfLeaves=maxima;newState.flatData=flatData}this.setState(newState)};BarChart.prototype.maxNumberOfLeaves=function(data,maxima,level){maxima[level]=Math.max(maxima[level],data.length);if(data[0]&&data[0][constants_1.SPLIT]!==undefined){var n=data.length;for(var i=0;i<n;i++){this.maxNumberOfLeaves(data[i][constants_1.SPLIT].data,maxima,level+1)}}};BarChart.prototype.getPrimaryXScale=function(){var _a=this.state,datasetLoad=_a.datasetLoad,maxNumberOfLeaves=_a.maxNumberOfLeaves;var data=datasetLoad.dataset.data[0][constants_1.SPLIT].data;var essence=this.props.essence;var splits=essence.splits;var dimension=splits.get(0).dimension;var getX=function(d){return d[dimension]};var _b=this.getXValues(maxNumberOfLeaves),usedWidth=_b.usedWidth,padLeft=_b.padLeft;return d3_scale_1.scaleBand().domain(data.map(getX)).range([padLeft,padLeft+usedWidth])};BarChart.prototype.getXValues=function(maxNumberOfLeaves){var essence=this.props.essence;var stage=this.state.stage;var overallWidth=stage.width-constants_1.VIS_H_PADDING*2-Y_AXIS_WIDTH;var numPrimarySteps=maxNumberOfLeaves[0];var minStepWidth=MIN_STEP_WIDTH*maxNumberOfLeaves.slice(1).reduce(function(a,b){return a*b},1);var maxAvailableWidth=overallWidth-BARS_MIN_PAD_LEFT-BARS_MIN_PAD_RIGHT;var stepWidth;if(minStepWidth*numPrimarySteps<maxAvailableWidth){stepWidth=Math.max(Math.min(maxAvailableWidth/numPrimarySteps,MAX_STEP_WIDTH*essence.splits.length()),MIN_STEP_WIDTH)}else{stepWidth=minStepWidth}var usedWidth=stepWidth*maxNumberOfLeaves[0];var padLeft=Math.max(BARS_MIN_PAD_LEFT,(overallWidth-usedWidth)/2);return{padLeft:padLeft,usedWidth:usedWidth}};BarChart.prototype.getBarsCoordinates=function(chartIndex,xScale){if(!!this.coordinatesCache[chartIndex]){return this.coordinatesCache[chartIndex]}var essence=this.props.essence;var datasetLoad=this.state.datasetLoad;var splits=essence.splits,dataCube=essence.dataCube;var measure=essence.getEffectiveMeasures()[chartIndex];var dataset=datasetLoad.dataset.data[0][constants_1.SPLIT];var dimension=splits.get(0).dimension;var chartStage=this.getSingleChartStage();var yScale=this.getYAxisStuff(dataset,measure,chartStage,chartIndex).yScale;this.coordinatesCache[chartIndex]=this.getSubCoordinates(dataset.data,measure,chartStage,function(d){return d[dimension]},xScale,yScale);return this.coordinatesCache[chartIndex]};BarChart.prototype.getSubCoordinates=function(data,measure,chartStage,getX,xScale,scaleY,splitIndex){var _this=this;if(splitIndex===void 0){splitIndex=1}var essence=this.props.essence;var maxNumberOfLeaves=this.state.maxNumberOfLeaves;var coordinates=data.map(function(d,i){var x=xScale(getX(d,i));var y=scaleY(d[measure.name]);var h=scaleY(0)-y;var children=[];var coordinate=new bar_coordinates_1.BarCoordinates({x:x,y:h>=0?y:scaleY(0),height:Math.round(Math.abs(h)),width:xScale.bandwidth(),children:children});if(splitIndex<essence.splits.length()){var subDataset=d[constants_1.SPLIT];if(subDataset instanceof plywood_1.Dataset){var subData=subDataset.data;var subStage=new beltful_1.Stage({x:x,y:chartStage.y,width:coordinate.barWidth,height:chartStage.height});var subGetX=function(d,i){return String(i)};var subxScale=d3_scale_1.scaleBand().domain(d3_array_1.range(0,maxNumberOfLeaves[splitIndex]).map(String)).range([x+coordinate.barOffset,x+subStage.width]);coordinate.children=_this.getSubCoordinates(subData,measure,subStage,subGetX,subxScale,scaleY,splitIndex+1)}}return coordinate});return coordinates};BarChart.prototype.renderRightGutter=function(measures,yAxisStage,yAxes){var yAxesStage=yAxisStage.changeHeight((yAxisStage.height+CHART_TOP_PADDING+CHART_BOTTOM_PADDING)*measures.length);return React.createElement("svg",{style:yAxesStage.getWidthHeight(),viewBox:yAxesStage.getViewBox()},yAxes)};BarChart.prototype.labelizeInfos=function(selections){if(selections.length>1)return selections.length+" selections";var essence=this.props.essence;var timezone=essence.timezone;var info=selections[0];var dimension=essence.splits.get(info.datum["__nest"]-1).dimension;var segmentValue=info.datum[dimension];return formatter_1.formatValue(segmentValue,timezone,time_1.DisplayYear.NEVER)};BarChart.prototype.renderTinyBubble=function(selections,left,top){var _a=this.state,stage=_a.stage,scrollLeft=_a.scrollLeft,scrollerXPosition=_a.scrollerXPosition,scrollTop=_a.scrollTop,scrollerYPosition=_a.scrollerYPosition;var coordinates=selections.map(function(s){return s.coordinates}).reduce(bar_coordinates_1.BarCoordinates.reduce);top=Math.max(top,stage.y);left=Math.min(stage.x+stage.width-Y_AXIS_WIDTH,Math.max(left,stage.x));return components_1.SegmentBubble.getTinyIndicator({left:left,top:top,direction:this.yTooHigh(top)?"down":"up",label:""+selections.length,onClick:function(){}})};BarChart.prototype.renderSelectionBubble=function(selections){var _a=this.props,essence=_a.essence,clicker=_a.clicker,openRawDataModal=_a.openRawDataModal;var stage=this.state.stage;var splits=essence.splits;if(!selections||!selections.length)return null;var chartStage=this.getSingleChartStage();var _b=selections[0],datum=_b.datum,chartIndex=_b.chartIndex;var coordinates=selections.map(function(s){return s.coordinates}).reduce(bar_coordinates_1.BarCoordinates.reduce);var dimensions=essence.getDimensions();var splitDimensions=splits.getSplitDimensions(dimensions);var measure=essence.getEffectiveMeasures()[chartIndex];var leftOffset=this.getBubbleLeftOffset(coordinates.middleX);var topOffset=this.getBubbleTopOffset(coordinates.y,chartIndex,chartStage);if(!this.canShowBubble(leftOffset,topOffset)){return null}return React.createElement(components_1.SegmentBubble,{left:leftOffset,top:topOffset,dimensions:splitDimensions,segmentLabel:this.labelizeInfos(selections),measureLabel:selections.length===1?measure.formatDatum(datum):null,clicker:clicker,openRawDataModal:openRawDataModal,onClose:this.onBubbleClose.bind(this)})};BarChart.prototype.renderOverlay=function(selections){var _this=this;if(!selections||!selections.length)return null;var chartStage=this.getSingleChartStage();var chartIndex=selections[0].chartIndex;var coordinates=[];var last;selections.forEach(function(s){if(last&&last.indexWithinSplit+1===s.indexWithinSplit){coordinates[coordinates.length-1]=coordinates[coordinates.length-1].merge(s.coordinates)}else{coordinates.push(s.coordinates)}last=s});var highlights=coordinates.map(function(coordinate){return coordinate.renderHighlight(chartStage.x,chartStage.y+_this.getOuterChartHeight(chartStage)*chartIndex,"selection-highlight")});return React.createElement("div",{className:"selection-highlight-container"},highlights)};BarChart.prototype.renderInternals=function(){var _this=this;var _a=this.props,essence=_a.essence,noScroll=_a.noScroll;var _b=this.state,stage=_b.stage,datasetLoad=_b.datasetLoad;var splits=essence.splits;var dimension=splits.get(0).dimension;var scrollerLayout;var measureCharts=[];var xAxis;var rightGutter;var overlay;var selections=[];if(datasetLoad.dataset&&splits.length()){var xScale_1=this.getPrimaryXScale();var yAxes_1=[];var measures=essence.getEffectiveMeasures();var getX_1=function(d){return d[dimension]};var chartStage_1=this.getSingleChartStage();var _c=this.getAxisStages(chartStage_1),xAxisStage=_c.xAxisStage,yAxisStage=_c.yAxisStage;xAxis=this.renderXAxis(datasetLoad.dataset.data[0][constants_1.SPLIT].data,this.getBarsCoordinates(0,xScale_1),xAxisStage);measures.forEach(function(measure,chartIndex){var coordinates=_this.getBarsCoordinates(chartIndex,xScale_1);var _a=_this.renderChart(datasetLoad.dataset,coordinates,measure,chartIndex,chartStage_1,getX_1),yAxis=_a.yAxis,chart=_a.chart,selectedBars=_a.selectedBars;measureCharts.push(chart);yAxes_1.push(yAxis);selections=selections.concat(selectedBars)});scrollerLayout=this.getScrollerLayout(chartStage_1,xAxisStage,yAxisStage);rightGutter=this.renderRightGutter(measures,chartStage_1,yAxes_1);measureCharts.push(this.renderOverlay(selections))}return React.createElement("div",{className:classNames("internals measure-bar-charts",{"no-scroll":noScroll}),style:{maxHeight:stage.height}},React.createElement(caladan_1.Scroller,{layout:scrollerLayout,ref:"scroller",bottomGutter:xAxis,rightGutter:rightGutter,bottomRightCorner:React.createElement("div",null),body:measureCharts,onMouseMove:this.onMouseMove.bind(this),onMouseLeave:this.onMouseLeave.bind(this),onClick:this.onClick.bind(this),onScroll:this.onScrollerScroll.bind(this),onLimitReached:this.onLimitReached.bind(this)}),this.renderSelectionBubble(selections))};return BarChart}(base_visualization_1.BaseVisualization);BarChart.visName=models_1.BAR_CHART_MANIFEST.name;exports.BarChart=BarChart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var React=__webpack_require__(1);var BAR_PROPORTION=.8;var SELECTION_PAD=4;var BarCoordinates=function(){function BarCoordinates(parameters){this.x=parameters.x;this.y=parameters.y;this.height=parameters.height;this.width=isNaN(parameters.width)?0:parameters.width;this.children=parameters.children;this._hitboxMin=this.x-this.barOffset;this._hitboxMax=this.x+this.barWidth+this.barOffset*2}BarCoordinates.reduce=function(previous,current){return previous?previous.merge(current):current};Object.defineProperty(BarCoordinates.prototype,"barWidth",{get:function(){return Math.max(this.width*BAR_PROPORTION,0)},enumerable:true,configurable:true});Object.defineProperty(BarCoordinates.prototype,"barOffset",{get:function(){return(this.width-this.barWidth)/2},enumerable:true,configurable:true});BarCoordinates.prototype.isXWithin=function(x){return x>=this._hitboxMin&&x<=this._hitboxMax};BarCoordinates.prototype.renderBar=function(className){return React.createElement("rect",{className:className,width:Math.round(this.barWidth),height:Math.round(Math.abs(this.height)),x:this.barOffset,y:Math.round(this.y)})};BarCoordinates.prototype.renderHighlight=function(left,top,className){var _a=this,height=_a.height,y=_a.y,x=_a.x,barOffset=_a.barOffset,width=_a.width;var leftOffset=Math.round(x)-SELECTION_PAD+left;var topOffset=Math.round(y)-SELECTION_PAD+top;var style={left:leftOffset,top:topOffset,width:width+SELECTION_PAD*2,height:Math.abs(height)+SELECTION_PAD*2};return React.createElement("div",{className:className,style:style})};BarCoordinates.prototype.merge=function(other){var x=Math.min(this.x,other.x);var rightMost=this.x+this.width>other.x+other.width?this:other;var leftMost=this.x<other.x?this:other;return new BarCoordinates({x:x,width:rightMost.x+rightMost.width-leftMost.x,height:Math.max(this.height,other.height),y:Math.min(this.y,other.y),children:this.children.concat(other.children)})};BarCoordinates.prototype.hasChildren=function(){return this.children.length>0};Object.defineProperty(BarCoordinates.prototype,"middleX",{get:function(){return this.x+this.barWidth*.5+this.barOffset},enumerable:true,configurable:true});return BarCoordinates}();exports.BarCoordinates=BarCoordinates},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var plywood_1=__webpack_require__(6);var constants_1=__webpack_require__(47);function padDataset(originalDataset,dimension,measures){var data=originalDataset.data[0][constants_1.SPLIT].data;if(!data.length)return originalDataset;var dimensionName=dimension.name;var firstBucket=data[0][dimensionName];if(!firstBucket)return originalDataset;var start=Number(firstBucket.start);var end=Number(firstBucket.end);var size=end-start;var i=start;var j=0;var filledData=[];data.forEach(function(d){var segmentValue=d[dimensionName];var segmentStart=segmentValue.start;while(i<segmentStart){filledData[j]={};filledData[j][dimensionName]=plywood_1.NumberRange.fromJS({start:i,end:i+size});measures.forEach(function(m){filledData[j][m.name]=0});if(d[constants_1.SPLIT]){filledData[j][constants_1.SPLIT]=new plywood_1.Dataset({data:[],attributes:[]})}j++;i+=size}filledData[j]=d;i+=size;j++});var value=originalDataset.valueOf();value.data[0][constants_1.SPLIT].data=filledData;return new plywood_1.Dataset(value)}function padDatasetLoad(datasetLoad,dimension,measures){var originalDataset=datasetLoad.dataset;var newDataset=originalDataset?padDataset(originalDataset,dimension,measures):null;datasetLoad.dataset=newDataset;return datasetLoad}exports.padDatasetLoad=padDatasetLoad},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var ReactDOM=__webpack_require__(20);var models_1=__webpack_require__(10);var components_1=__webpack_require__(203);var constants_1=__webpack_require__(47);var base_visualization_1=__webpack_require__(751);__webpack_require__(971);var HOVER_BUBBLE_V_OFFSET=-7;var $MAIN=plywood_1.$("main");var AVG_LAT="#int_avg_lat";var AVG_LON="#int_avg_lon";var GeoMarkerWrapper=function(_super){tslib_1.__extends(GeoMarkerWrapper,_super);function GeoMarkerWrapper(){return _super.call(this)||this}GeoMarkerWrapper.prototype.render=function(){return React.cloneElement(React.Children.only(this.props.children),this.props)};return GeoMarkerWrapper}(React.Component);exports.GeoMarkerWrapper=GeoMarkerWrapper;var Geo=function(_super){tslib_1.__extends(Geo,_super);function Geo(){return _super.call(this)||this}Geo.prototype.queryExtra=function(query,splitIndex,essence,timekeeper){if(splitIndex<0)return null;var dataCube=essence.dataCube;var latitudeLongitudeDimension=dataCube.getLatitudeLongitudeDimensions();if(!latitudeLongitudeDimension)return null;var latitude=latitudeLongitudeDimension.latitude,longitude=latitudeLongitudeDimension.longitude;return query.apply(AVG_LAT,$MAIN.average(plywood_1.$(latitude.name))).apply(AVG_LON,$MAIN.average(plywood_1.$(longitude.name)))};Geo.prototype.getDefaultState=function(){return _super.prototype.getDefaultState.call(this)};Geo.prototype.componentDidUpdate=function(){var _a=this.state,containerYPosition=_a.containerYPosition,containerXPosition=_a.containerXPosition;var node=ReactDOM.findDOMNode(this.container);if(!node)return;var rect=node.getBoundingClientRect();if(containerYPosition!==rect.top||containerXPosition!==rect.left){this.setState({containerYPosition:rect.top,containerXPosition:rect.left})}};Geo.prototype.canRenderMarkers=function(essence,datasetLoad){if(!datasetLoad||!essence)return false;var dataset=datasetLoad.dataset;if(!dataset)return false;if(!dataset.data[0][constants_1.SPLIT].data)return false;return true};Geo.prototype.isSelected=function(essence,d){var highlightDelta=this.hasHighlightOnThisMap(essence)?essence.highlight.delta:null;if(!highlightDelta)return false;var splits=essence.getEffectiveSplits();var flatDatum=this.flatDatumForPath(splits,[d]);return this.isDatumInFilter(highlightDelta,splits,flatDatum)};Geo.prototype.generateMarkers=function(){var _this=this;var essence=this.props.essence;var datasetLoad=this.state.datasetLoad;var splits=essence.splits,dataCube=essence.dataCube;if(!this.canRenderMarkers(essence,datasetLoad))return{};var firstDimension=essence.getDimension(essence.splits.get(0).dimension);var dimensionName=firstDimension.name;var valueField=essence.getEffectiveMeasures()[0].name;var converter=firstDimension.getCoordinatesConverter();var data=datasetLoad.dataset.data[0][constants_1.SPLIT].data;var markers=[];var unknowns=[];data.forEach(function(d){var segmentCode=d[dimensionName];var segmentValue=d[valueField];var fillOpacity=1;var isSelected=false;if(_this.hasHighlightOnThisMap(essence)){isSelected=_this.isSelected(essence,d);fillOpacity=isSelected?1:.5}if(converter){var geoInfo=converter(segmentCode);if(geoInfo){markers.push({label:geoInfo.label,latLng:{lat:geoInfo.latitude,lng:geoInfo.longitude},value:segmentValue,data:d,additionalOptions:{fillOpacity:fillOpacity},outerCircle:isSelected})}else{unknowns.push({label:segmentCode,latLng:{lat:NaN,lng:NaN},value:segmentValue,data:d,additionalOptions:{fillOpacity:fillOpacity}})}}else{if(segmentCode){markers.push({label:String(segmentCode),latLng:{lat:Number(d[AVG_LAT]),lng:Number(d[AVG_LON])},value:segmentValue,data:d,additionalOptions:{fillOpacity:fillOpacity},outerCircle:isSelected})}else{unknowns.push({label:segmentCode,latLng:{lat:NaN,lng:NaN},value:segmentValue,data:d,additionalOptions:{fillOpacity:fillOpacity}})}}});return{markers:markers,unknowns:unknowns}};Geo.prototype.precalculate=function(props,datasetLoad){if(datasetLoad===void 0){datasetLoad=null}if(!datasetLoad)return;this.setState({datasetLoad:datasetLoad,selections:[]})};Geo.prototype.onMapAppear=function(markers){var _this=this;var essence=this.props.essence;if(!markers)return;if(!this.hasHighlightOnThisMap(essence))return;this.setState({selections:markers.filter(function(m){return _this.isSelected(essence,_this.flatDatumForPath(essence.splits,[m.data]))})})};Geo.prototype.hasHighlightOnThisMap=function(essence){return essence.highlightOn(this.id)};Geo.prototype.dealWithShiftCLick=function(marker){var _a=this.props,clicker=_a.clicker,essence=_a.essence;var selections=this.state.selections;var splits=essence.splits;var flatDatum=this.flatDatumForPath(splits,[marker.data]);if(this.isDatumInFilter(essence.highlight.delta,splits,flatDatum)){selections=selections.filter(function(s){return s.data!==marker.data})}else{selections.push(marker)}if(selections.length===0){clicker.dropHighlight()}else{var filter=this.toggleDatumInFilter(essence.highlight.delta,splits,flatDatum);clicker.changeHighlight(new models_1.Highlight({owner:this.id,measure:null,delta:filter}))}this.setState({selections:selections})};Geo.prototype.dealWithSimpleClick=function(marker){var _a=this.props,clicker=_a.clicker,essence=_a.essence;var splits=essence.splits;var flatDatum=this.flatDatumForPath(splits,[marker.data]);var filter=this.getFilterFromDatum(essence.splits,flatDatum);if(!filter)return;if(this.hasHighlightOnThisMap(essence)){if(filter.equals(essence.highlight.delta)){clicker.dropHighlight();return}}this.setState({selections:[marker]});clicker.changeHighlight(new models_1.Highlight({owner:this.id,measure:null,delta:filter}))};Geo.prototype.onMarkerClick=function(marker,e){var _a=this.props,clicker=_a.clicker,essence=_a.essence;if(!clicker.dropHighlight||!clicker.changeHighlight)return;if(e.shiftKey&&this.hasHighlightOnThisMap(essence)){this.dealWithShiftCLick(marker)}else{this.dealWithSimpleClick(marker)}};Geo.prototype.clearHighlight=function(){var _a=this.props,clicker=_a.clicker,essence=_a.essence;if(this.hasHighlightOnThisMap(essence)){clicker.dropHighlight();this.hideBubble()}};Geo.prototype.showBubble=function(marker){var essence=this.props.essence;if(this.hasHighlightOnThisMap(essence))return;this.setState({selections:[marker]})};Geo.prototype.hideBubble=function(){var essence=this.props.essence;if(this.hasHighlightOnThisMap(essence))return;this.setState({selections:[]})};Geo.prototype.renderBubble=function(){var _this=this;var _a=this.props,clicker=_a.clicker,openRawDataModal=_a.openRawDataModal,essence=_a.essence;var _b=this.state,selections=_b.selections,containerYPosition=_b.containerYPosition,containerXPosition=_b.containerXPosition;var dimensions=essence.getDimensions();var splitDimensions=essence.splits.getSplitDimensions(dimensions);var _c=caladan_1.MarkerMap.geoMidPoint(selections.map(function(m){return m.latLng})),lat=_c.lat,lng=_c.lng;var n=selections.length;var segmentLabel=n>1?n+" selections":selections[0].label;var measureLabel=n>1?null:String(selections[0].value);var sticky=this.hasHighlightOnThisMap(essence);var onMouseLeave=function(){if(!sticky)_this.hideBubble()};return React.createElement(GeoMarkerWrapper,{position:[lat,lng],offset:[-containerXPosition,-containerYPosition-HOVER_BUBBLE_V_OFFSET]},React.createElement(components_1.SegmentBubble,{segmentLabel:segmentLabel,measureLabel:measureLabel,onMouseLeave:onMouseLeave,onClose:this.hideBubble.bind(this),dimensions:sticky?splitDimensions:undefined,clicker:sticky?clicker:undefined,openRawDataModal:sticky?openRawDataModal:undefined}))};Geo.prototype.renderMeasureLabel=function(){var _a=this.props,isThumbnail=_a.isThumbnail,essence=_a.essence;var datasetLoad=this.state.datasetLoad;var splits=essence.splits,dataCube=essence.dataCube;var datum=datasetLoad.dataset.data[0];var measure=essence.getEffectiveMeasures()[0];return isThumbnail?null:React.createElement(components_1.VisMeasureLabel,{measure:measure,datum:datum})};Geo.prototype.renderUnknownsLabel=function(unknowns){if(!unknowns||!unknowns.length)return null
;var n=unknowns.length;var title=unknowns.map(function(m){return'"'+m.label+'"'}).join(", ");return React.createElement("div",{className:"unknowns-label",title:title},n+" value"+(n>1?"s":"")+" can't be shown")};Geo.prototype.renderInternals=function(){var _this=this;var noScroll=this.props.noScroll;var selections=this.state.selections;var _a=this.generateMarkers(),markers=_a.markers,unknowns=_a.unknowns;if(!markers)return null;return React.createElement("div",{className:"internals geo-inner"},React.createElement(caladan_1.MarkerMap,{ref:function(container){return _this.container=container},disableZoom:noScroll,disablePan:noScroll,markers:markers,onMarkerOver:this.showBubble.bind(this),onMarkerOut:this.hideBubble.bind(this),onMarkerClick:this.onMarkerClick.bind(this),onMapClick:this.clearHighlight.bind(this),onAppear:this.onMapAppear.bind(this,markers)},selections.length>=1?this.renderBubble():null),this.renderMeasureLabel(),this.renderUnknownsLabel(unknowns))};return Geo}(base_visualization_1.BaseVisualization);Geo.visName=models_1.GEO_MANIFEST.name;exports.Geo=Geo},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var d3_scale_1=__webpack_require__(760);var immutable_class_1=__webpack_require__(2);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var ReactDOM=__webpack_require__(20);var models_1=__webpack_require__(10);var time_1=__webpack_require__(75);var components_1=__webpack_require__(203);var formatter_1=__webpack_require__(124);var base_visualization_1=__webpack_require__(751);__webpack_require__(972);var LEFT_GUTTER_WIDTH=150;var BOTTOM_GUTTER_HEIGHT=100;var TOP_GUTTER_HEIGHT=30;var MAP_SPACING=50;var MIN_TILE_HEIGHT=20;var MIN_TILE_WIDTH=20;var THUMBNAIL_MIN_TILE_HEIGHT=2;var THUMBNAIL_MIN_TILE_WIDTH=2;var X_LABEL_WIDTH=100;var SELECTION_PADDING=4;var PADDING=20;var MULTI_MEASURE_LAYOUT={outerPadding:20,verticalGap:30,horizontalGap:40,mapsPerRow:3,labelHeight:30};function getFilterFromDatum(splits,datum){return new models_1.Filter({clauses:splits.toArray().map(function(split){var dimension=split.dimension;var segment=datum[dimension];return new models_1.FilterClause({dimension:dimension,values:plywood_1.Set.fromJS([segment]),action:"overlap"})})})}function getFilterInDataset(split,index,dataset){var d={};d[split.dimension]=dataset.data[index]["v"];return getFilterFromDatum(new models_1.Splits([split]),d)}var Heatmap=function(_super){tslib_1.__extends(Heatmap,_super);function Heatmap(){return _super.call(this)||this}Heatmap.prototype.getDefaultState=function(){var s=_super.prototype.getDefaultState.call(this);s.refContainerXPosition=0;s.refContainerYPosition=0;return s};Heatmap.prototype.componentWillReceiveProps=function(nextProps){this.precalculate(nextProps);var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper;var datasetLoad=this.state.datasetLoad;var nextEssence=nextProps.essence;var nextTimekeeper=nextProps.timekeeper;if(nextEssence.differentDataCube(essence)||nextEssence.differentEffectiveFilter(essence,timekeeper,nextTimekeeper,this.id)||nextEssence.differentEffectiveSplits(essence)||nextEssence.newEffectiveMeasures(essence)){this.fetchData(nextEssence,nextTimekeeper)}};Heatmap.prototype.componentDidUpdate=function(){var _a=this.state,refContainerYPosition=_a.refContainerYPosition,refContainerXPosition=_a.refContainerXPosition;var node=ReactDOM.findDOMNode(this.refs["reference-container"]);if(!node)return;var rect=node.getBoundingClientRect();if(refContainerYPosition!==rect.top||refContainerXPosition!==rect.left){this.setState({refContainerYPosition:rect.top,refContainerXPosition:rect.left})}};Heatmap.prototype.onScroll=function(newScrollTop,newScrollLeft){var _a=this.state,scrollTop=_a.scrollTop,scrollLeft=_a.scrollLeft;if(newScrollTop!==scrollTop||newScrollLeft!==scrollLeft){this.setState({hoverInfo:null,scrollLeft:newScrollLeft,scrollTop:newScrollTop})}};Heatmap.prototype.onMouseMove=function(mapIndex,tile){var info={tile:tile,mapIndex:mapIndex};if(this.compareBubbleInfos(info,this.state.hoverInfo))return;this.setState({hoverInfo:info})};Heatmap.prototype.onMouseLeave=function(){this.setState({hoverInfo:null})};Heatmap.prototype.onClick=function(mapIndex,tile){var _a=this.props,essence=_a.essence,clicker=_a.clicker;var datasetLoad=this.state.datasetLoad;if(!clicker.changeHighlight||!clicker.dropHighlight)return;if(!tile)return;if(!tile.datum){clicker.dropHighlight();this.setState({selectionInfo:null});return}var datum=tile.datum,rowIndex=tile.rowIndex,columnIndex=tile.columnIndex;var splits=essence.splits;var measures=essence.getEffectiveMeasures();var highlight;var _b=this.getAxesDatasets(datasetLoad.dataset),xDataset=_b.xDataset,yDataset=_b.yDataset;if(rowIndex===-1){highlight=getFilterInDataset(splits.get(1),columnIndex,xDataset)}else if(columnIndex===-1){highlight=getFilterInDataset(splits.get(0),rowIndex,yDataset)}else{highlight=getFilterFromDatum(splits,datum)}if(essence.highlightOn(this.id,measures[mapIndex].name)){if(highlight.equals(essence.highlight.delta)){clicker.dropHighlight();this.setState({selectionInfo:null});return}}clicker.changeHighlight(new models_1.Highlight({owner:this.id,measure:measures[mapIndex].name,delta:highlight}))};Heatmap.prototype.getTileInScroller=function(x,y,part){var _a=this.state,mapHeight=_a.mapHeight,tileHeight=_a.tileHeight,tileWidth=_a.tileWidth,mapWidth=_a.mapWidth;var layout=this.getScrollerLayout(mapWidth,mapHeight);y-=layout.top;if([caladan_1.Scroller.BODY,caladan_1.Scroller.LEFT_GUTTER,caladan_1.Scroller.BOTTOM_GUTTER].indexOf(part)===-1)return null;var columnIndex=Math.floor((x-layout.left-layout.bodyPadding.left)/tileWidth);var rowIndex=Math.floor((y-layout.bodyPadding.top)/tileHeight);var datum;if(part===caladan_1.Scroller.BODY){datum=this.tilesForIndices[rowIndex+"-"+columnIndex];if(!datum)return null;return{columnIndex:columnIndex,rowIndex:rowIndex,datum:datum}}return null};Heatmap.prototype.subDatasetExpression=function(split,dimensions,measures){var expr=plywood_1.$("main").split(split.toSplitExpression(dimensions),"v");var sortMeasure=immutable_class_1.NamedArray.findByName(measures,split.sortAction.refName());if(sortMeasure){expr=expr.performActions([sortMeasure.toApplyAction(),split.sortAction])}else{expr=expr.sort(plywood_1.$("v"),split.sortAction.direction)}return expr.performAction(split.limitAction)};Heatmap.prototype.makeQuery=function(essence,timekeeper){var dimensions=essence.getDimensions();var measures=essence.getEffectiveMeasures();var splits=essence.getEffectiveSplits();if(splits.length()!==2)return null;var firstSplit=splits.get(0);var firstSplitExpression=firstSplit.toSplitExpression(dimensions);var firstLimit=firstSplit.limitAction.value;var secondSplit=splits.get(1);var secondSplitExpression=secondSplit.toSplitExpression(dimensions);var secondLimit=secondSplit.limitAction.value;var splitFns={};splitFns[firstSplit.dimension]=firstSplitExpression;splitFns[secondSplit.dimension]=secondSplitExpression;var $main=plywood_1.$("main");var query=plywood_1.ply().apply("main",$main.filter(essence.getEffectiveFilter(timekeeper,this.id).toExpression(dimensions))).apply("ys",this.subDatasetExpression(firstSplit,dimensions,measures)).apply("xs",this.subDatasetExpression(secondSplit,dimensions,measures)).performActions(measures.map(function(m){return m.toApplyAction()})).apply("cells",$main.filter(plywood_1.Expression.and([essence.getDimension(secondSplit.dimension).expression.overlap(plywood_1.$("xs").collect(plywood_1.$("v"))),essence.getDimension(firstSplit.dimension).expression.overlap(plywood_1.$("ys").collect(plywood_1.$("v")))])).split(splitFns).performActions(measures.map(function(m){return m.toApplyAction()})).limit(firstLimit*secondLimit));return query};Heatmap.prototype.precalculate=function(props,datasetLoad){if(datasetLoad===void 0){datasetLoad=null}var registerDownloadableDataset=props.registerDownloadableDataset,essence=props.essence;var stage=this.state.stage;var splits=essence.splits;var existingDatasetLoad=this.state.datasetLoad;var newState={};if(datasetLoad){newState.datasetLoad=datasetLoad}else{datasetLoad=existingDatasetLoad}var dataset=datasetLoad.dataset;if(dataset&&splits.length()){if(registerDownloadableDataset)registerDownloadableDataset(dataset)}this.prepareTiles(essence,newState,dataset);this.setTilesDimensions(essence,newState,dataset,stage);this.setState(newState)};Heatmap.prototype.getRowOrColumnSelection=function(essence,xDataset,yDataset){var _this=this;var splits=essence.splits,dataCube=essence.dataCube;var highlightDelta=essence.highlightOn(this.id)?essence.highlight.delta:null;if(!highlightDelta)return undefined;var selectionInfo;xDataset.data.forEach(function(e,i){var delta=getFilterInDataset(splits.get(1),i,xDataset);if(highlightDelta.equals(delta)||highlightDelta.equals(delta.toggleMode())){selectionInfo={mapIndex:_this.getSelectedMapIndexFromEssence(essence),tile:{rowIndex:-1,columnIndex:i,datum:{}}}}});yDataset.data.forEach(function(e,i){var delta=getFilterInDataset(splits.get(0),i,yDataset);if(highlightDelta.equals(delta)||highlightDelta.equals(delta.toggleMode())){selectionInfo={mapIndex:_this.getSelectedMapIndexFromEssence(essence),tile:{rowIndex:i,columnIndex:-1,datum:{}}}}});return selectionInfo};Heatmap.prototype.getSelectedMapIndexFromEssence=function(essence){if(!essence.highlightOn(this.id))return-1;var measures=essence.getEffectiveMeasures();return measures.map(function(m){return m.name}).indexOf(essence.highlight.measure)};Heatmap.prototype.setTilesDimensions=function(essence,state,dataset,stage){if(!dataset)return;if(essence.getEffectiveMeasures().length>1){this.setMultiMeasuresTilesDimensions(state,dataset,stage)}else{this.setSingleMeasureTilesDimensions(state,dataset,stage)}};Heatmap.prototype.setMultiMeasuresTilesDimensions=function(state,dataset,stage){var outerPadding=MULTI_MEASURE_LAYOUT.outerPadding,verticalGap=MULTI_MEASURE_LAYOUT.verticalGap,horizontalGap=MULTI_MEASURE_LAYOUT.horizontalGap,mapsPerRow=MULTI_MEASURE_LAYOUT.mapsPerRow,labelHeight=MULTI_MEASURE_LAYOUT.labelHeight;var avWidth=stage.width-outerPadding*2-horizontalGap*(mapsPerRow-1);var mapWidth=avWidth/mapsPerRow;var mapHeight=mapWidth;var _a=this.getAxesDatasets(dataset),xDataset=_a.xDataset,yDataset=_a.yDataset;state.tileWidth=Math.round(mapWidth/xDataset.data.length);state.tileHeight=state.tileWidth;state.mapWidth=Math.round(mapWidth);state.mapHeight=state.tileHeight*yDataset.data.length};Heatmap.prototype.getAvailableSize=function(layout,stage){return{availableHeight:stage.height-(layout.bottom||0)-(layout.top||0)-(layout.bodyPadding.top||0)-(layout.bodyPadding.bottom||0),availableWidth:stage.width-(layout.left||0)-(layout.right||0)-(layout.bodyPadding.left||0)-(layout.bodyPadding.right||0)}};Heatmap.prototype.setSingleMeasureTilesDimensions=function(state,dataset,stage){var isThumbnail=this.props.isThumbnail;var minWidth=isThumbnail?THUMBNAIL_MIN_TILE_WIDTH:MIN_TILE_WIDTH;var minHeight=isThumbnail?THUMBNAIL_MIN_TILE_HEIGHT:MIN_TILE_HEIGHT;var bareScrollerLayout=this.getScrollerLayout(0,0);var _a=this.getAxesDatasets(dataset),xDataset=_a.xDataset,yDataset=_a.yDataset;var columnsCount=xDataset.data.length;var rowsCount=yDataset.data.length;var _b=this.getAvailableSize(bareScrollerLayout,stage),availableWidth=_b.availableWidth,availableHeight=_b.availableHeight;state.tileHeight=Math.floor(Math.max(availableHeight/rowsCount,minHeight));state.tileWidth=Math.floor(Math.max(availableWidth/columnsCount,minWidth));state.mapHeight=state.tileHeight*rowsCount;state.mapWidth=state.tileWidth*columnsCount};Heatmap.prototype.getScrollerLayout=function(mapWidth,mapHeight){var isThumbnail=this.props.isThumbnail;var stage=this.state.stage;return{bodyWidth:isThumbnail?stage.width:mapWidth,bodyHeight:isThumbnail?stage.height:mapHeight,top:isThumbnail?0:TOP_GUTTER_HEIGHT,right:0,bottom:isThumbnail?0:BOTTOM_GUTTER_HEIGHT,left:isThumbnail?0:LEFT_GUTTER_WIDTH,bodyPadding:{top:PADDING,right:PADDING,left:isThumbnail?PADDING:0}}};Heatmap.prototype.getTimeTickFormatter=function(dimension){var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper;var axisRange=essence.getEffectiveFilter(timekeeper,this.id).getExtent(dimension.name);return function(value){var tick=time_1.formatAxisBasedOnRange(value.midpoint(),axisRange,essence.timezone);return time_1.isBoundaryTick(tick)?tick.boundary+" - "+tick.value:tick}};Heatmap.prototype.renderXAxis=function(dataset){var essence=this.props.essence;var _a=this.state,tileWidth=_a.tileWidth,scrollLeft=_a.scrollLeft;var xDimension=this.getAxesDimensions(essence).xDimension;var formatter=xDimension.isTime()?this.getTimeTickFormatter(xDimension):String;var firstVisibleTick=Math.floor((scrollLeft+tileWidth/2)/tileWidth);var ticks=dataset.data.map(function(datum,i){if(i<firstVisibleTick)return null;var style={position:"absolute",width:X_LABEL_WIDTH,left:tileWidth*(i+.5)-X_LABEL_WIDTH};return React.createElement("div",{className:"tick",key:i,style:style},formatter(datum["v"]))}).filter(Boolean);return React.createElement("div",{className:"x-axis"},ticks)};Heatmap.prototype.renderYAxis=function(dataset){var essence=this.props.essence;var _a=this.state,mapHeight=_a.mapHeight,tileHeight=_a.tileHeight;var yDimension=this.getAxesDimensions(essence).yDimension;var formatter=yDimension.isTime()?this.getTimeTickFormatter(yDimension):String;var ticks=[];dataset.data.forEach(function(datum,i){var style={position:"absolute",top:i*tileHeight,height:tileHeight,width:LEFT_GUTTER_WIDTH};ticks.push(React.createElement("div",{className:"tick",key:i,style:style},formatter(datum["v"])))});return React.createElement("div",{className:"y-axis"},ticks)};Heatmap.prototype.compareBubbleInfos=function(a,b){if(!a||!b)return false;if(!a.tile||!b.tile)return false;if(a.mapIndex!==b.mapIndex)return false;if(a.tile.rowIndex!==-1&&b.tile.rowIndex!==-1&&a.tile.rowIndex!==b.tile.rowIndex)return false;if(a.tile.columnIndex!==-1&&b.tile.columnIndex!==-1&&a.tile.columnIndex!==b.tile.columnIndex)return false;return true};Heatmap.prototype.getColorScale=function(data,measure){var min=Number.POSITIVE_INFINITY;var max=Number.NEGATIVE_INFINITY;var median=0;data.forEach(function(d){var value=d[measure.name];min=Math.min(min,value);max=Math.max(max,value)});return d3_scale_1.scaleLinear().domain([min,median,max]).range(["#e67320","#ffffff","#006088"])};Heatmap.prototype.prepareTiles=function(essence,newState,dataset){var _this=this;this.tilesForIndices={};var models=[];var colorScales={};if(!dataset)return;var measures=essence.getEffectiveMeasures();var _a=this.getAxesDatasets(dataset),xDataset=_a.xDataset,yDataset=_a.yDataset;var data=dataset.data[0]["cells"].data;var _b=this.getAxesFields(essence),xField=_b.xField,yField=_b.yField;measures.forEach(function(m){colorScales[m.name]=_this.getColorScale(data,m);models.push([])});var xSet=xDataset.data.map(function(d){return String(d["v"])});var ySet=yDataset.data.map(function(d){return String(d["v"])});var selectionInfo;data.forEach(function(datum,i){var columnIndex=xSet.indexOf(String(datum[xField]));var rowIndex=ySet.indexOf(String(datum[yField]));_this.tilesForIndices[rowIndex+"-"+columnIndex]=datum;if(_this.isSelected(essence,datum)){selectionInfo={mapIndex:_this.getSelectedMapIndexFromEssence(essence),tile:{rowIndex:rowIndex,columnIndex:columnIndex,datum:datum}}}measures.forEach(function(m,j){var value=datum[m.name];if(isNaN(value))return;models[j].push({rowIndex:rowIndex,columnIndex:columnIndex,datum:datum,color:colorScales[m.name](value)})})});if(!selectionInfo){selectionInfo=this.getRowOrColumnSelection(essence,xDataset,yDataset)}newState.selectionInfo=selectionInfo;newState.models=models};Heatmap.prototype.renderMapTiles=function(measure,individualEvents){var _this=this;var essence=this.props.essence;var _a=this.state,models=_a.models,mapHeight=_a.mapHeight,mapWidth=_a.mapWidth,tileHeight=_a.tileHeight,tileWidth=_a.tileWidth,selectionInfo=_a.selectionInfo;var measureIndex=essence.getEffectiveMeasures().indexOf(measure);var alphaFn=function(info){var selected=_this.compareBubbleInfos(selectionInfo,{mapIndex:measureIndex,tile:info});var faded=selectionInfo&&!selected;return faded?.5:1};var MyColorMap=caladan_1.ColorMap.specialize();return React.createElement(MyColorMap,{tileHeight:tileHeight,alpha:alphaFn,tileWidth:tileWidth,height:mapHeight,width:mapWidth,tiles:models[measureIndex],onClick:individualEvents?this.onClick.bind(this,measureIndex):null,onMouseMove:individualEvents?this.onMouseMove.bind(this,measureIndex):null,onMouseLeave:individualEvents?this.onMouseLeave.bind(this):null})};Heatmap.prototype.getMapStyle=function(measureIndex){var measuresCount=this.props.essence.getEffectiveMeasures().length;var _a=this.state,mapHeight=_a.mapHeight,mapWidth=_a.mapWidth;var outerPadding=MULTI_MEASURE_LAYOUT.outerPadding,verticalGap=MULTI_MEASURE_LAYOUT.verticalGap,horizontalGap=MULTI_MEASURE_LAYOUT.horizontalGap,mapsPerRow=MULTI_MEASURE_LAYOUT.mapsPerRow,labelHeight=MULTI_MEASURE_LAYOUT.labelHeight;var style={position:"absolute",width:mapWidth,height:mapHeight};if(measuresCount>1){var mapRowIndex=Math.floor(measureIndex/mapsPerRow);style.top=outerPadding+labelHeight+(mapHeight+verticalGap+labelHeight)*mapRowIndex;style.left=outerPadding+(mapWidth+horizontalGap)*(measureIndex-mapRowIndex*mapsPerRow);style.height=mapHeight+labelHeight}return style};Heatmap.prototype.renderHighlightBorder=function(){var _a=this.state,selectionInfo=_a.selectionInfo,tileHeight=_a.tileHeight,tileWidth=_a.tileWidth,refContainerXPosition=_a.refContainerXPosition,refContainerYPosition=_a.refContainerYPosition;if(!selectionInfo)return null;var mapIndex=selectionInfo.mapIndex,tile=selectionInfo.tile;var columnIndex=tile.columnIndex,rowIndex=tile.rowIndex,datum=tile.datum;var _b=this.getTileVerticalBoundaries(rowIndex,mapIndex),top=_b.top,height=_b.height;var _c=this.getTileHorizontalBoundaries(columnIndex,mapIndex),left=_c.left,width=_c.width;if(!this.canShowBubble(left,top))return null;var style={position:"absolute",left:left-SELECTION_PADDING,top:top-SELECTION_PADDING,width:width+SELECTION_PADDING*2,height:height+SELECTION_PADDING*2};return React.createElement(caladan_1.BodyPortal,null,React.createElement("div",{className:"heatmap-selection-highlight",style:style}))};Heatmap.prototype.getAxesDatasets=function(dataset){return{xDataset:dataset.data[0]["xs"],yDataset:dataset.data[0]["ys"]}};Heatmap.prototype.getAxesFields=function(essence){var _a=this.getAxesDimensions(essence),xDimension=_a.xDimension,yDimension=_a.yDimension;return{xField:xDimension.name,yField:yDimension.name}};Heatmap.prototype.getAxesDimensions=function(essence){var ySplit=essence.splits.get(0);var xSplit=essence.splits.get(1);return{xDimension:essence.getDimension(xSplit.dimension),yDimension:essence.getDimension(ySplit.dimension)}};Heatmap.prototype.isMultiMeasure=function(measures){return measures.length>1};Heatmap.prototype.getTileVerticalBoundaries=function(rowIndex,measureIndex){var essence=this.props.essence;var measures=essence.getEffectiveMeasures();var _a=this.state,scrollTop=_a.scrollTop,refContainerYPosition=_a.refContainerYPosition,mapHeight=_a.mapHeight,tileHeight=_a.tileHeight,mapWidth=_a.mapWidth;var top;var height=tileHeight;if(this.isMultiMeasure(measures)){var outerPadding=MULTI_MEASURE_LAYOUT.outerPadding,verticalGap=MULTI_MEASURE_LAYOUT.verticalGap,horizontalGap=MULTI_MEASURE_LAYOUT.horizontalGap,mapsPerRow=MULTI_MEASURE_LAYOUT.mapsPerRow,labelHeight=MULTI_MEASURE_LAYOUT.labelHeight;var mapRowIndex=Math.floor(measureIndex/mapsPerRow);top=outerPadding+(mapHeight+verticalGap+labelHeight)*mapRowIndex+labelHeight+rowIndex*tileHeight}else{var layout=this.getScrollerLayout(mapWidth,mapHeight);if(rowIndex>-1){top=layout.top+(mapHeight+MAP_SPACING)*measureIndex-scrollTop+rowIndex*tileHeight+layout.bodyPadding.top}else{top=layout.top+layout.bodyPadding.top;height=layout.bodyHeight-PADDING-layout.top-layout.bottom}}return{top:top+refContainerYPosition,height:height}};Heatmap.prototype.getTileHorizontalBoundaries=function(columnIndex,measureIndex){var essence=this.props.essence;var measures=essence.getEffectiveMeasures();var _a=this.state,scrollLeft=_a.scrollLeft,refContainerXPosition=_a.refContainerXPosition,tileWidth=_a.tileWidth,mapWidth=_a.mapWidth,mapHeight=_a.mapHeight;var left;var width=tileWidth;if(this.isMultiMeasure(measures)){var outerPadding=MULTI_MEASURE_LAYOUT.outerPadding,verticalGap=MULTI_MEASURE_LAYOUT.verticalGap,horizontalGap=MULTI_MEASURE_LAYOUT.horizontalGap,mapsPerRow=MULTI_MEASURE_LAYOUT.mapsPerRow,labelHeight=MULTI_MEASURE_LAYOUT.labelHeight;var mapRowIndex=Math.floor(measureIndex/mapsPerRow);left=outerPadding+(mapWidth+horizontalGap)*(measureIndex-mapRowIndex*mapsPerRow)+columnIndex*tileWidth}else{var layout=this.getScrollerLayout(mapWidth,mapHeight);if(columnIndex>-1){left=layout.left+layout.bodyPadding.left+columnIndex*tileWidth-scrollLeft}else{left=layout.left+layout.bodyPadding.left;width=layout.bodyWidth-layout.left}}return{left:left+refContainerXPosition,width:width}};Heatmap.prototype.renderHoverBubble=function(hoverInfo){var _a=this.state,scrollLeft=_a.scrollLeft,scrollTop=_a.scrollTop,refContainerXPosition=_a.refContainerXPosition,refContainerYPosition=_a.refContainerYPosition;var essence=this.props.essence;var splits=essence.splits,dataCube=essence.dataCube;var measures=essence.getEffectiveMeasures();var mapIndex=hoverInfo.mapIndex,tile=hoverInfo.tile;if(!tile)return null;var columnIndex=tile.columnIndex,rowIndex=tile.rowIndex,datum=tile.datum;if(columnIndex<0||rowIndex<0)return null;var _b=this.getTileVerticalBoundaries(rowIndex,mapIndex),top=_b.top,height=_b.height;var _c=this.getTileHorizontalBoundaries(columnIndex,mapIndex),left=_c.left,width=_c.width;if(!this.canShowBubble(left,top))return null;var _d=this.getAxesFields(essence),xField=_d.xField,yField=_d.yField;var formatter=function(v){return formatter_1.formatValue(v,essence.timezone,time_1.DisplayYear.NEVER)};return React.createElement(components_1.SegmentBubble,{top:top,left:left+width/2,segmentLabel:formatter(datum[yField])+", "+formatter(datum[xField]),measureLabel:measures[mapIndex].formatDatum(datum)})};Heatmap.prototype.isSelected=function(essence,d){var highlightDelta=essence.highlightOn(this.id)?essence.highlight.delta:null;if(!highlightDelta)return false;var delta=getFilterFromDatum(essence.splits,d);return highlightDelta.equals(delta)||delta&&highlightDelta.equals(delta.toggleMode())};Heatmap.prototype.canShowBubble=function(leftOffset,topOffset){var essence=this.props.essence;var _a=this.state,stage=_a.stage,scrollTop=_a.scrollTop,scrollLeft=_a.scrollLeft,refContainerYPosition=_a.refContainerYPosition,refContainerXPosition=_a.refContainerXPosition,mapHeight=_a.mapHeight,mapWidth=_a.mapWidth;var multiMeasure=this.isMultiMeasure(essence.getEffectiveMeasures());var outerPadding=MULTI_MEASURE_LAYOUT.outerPadding,verticalGap=MULTI_MEASURE_LAYOUT.verticalGap,horizontalGap=MULTI_MEASURE_LAYOUT.horizontalGap,mapsPerRow=MULTI_MEASURE_LAYOUT.mapsPerRow,labelHeight=MULTI_MEASURE_LAYOUT.labelHeight;var scrollerLayout=this.getScrollerLayout(mapWidth,mapHeight);var top=refContainerYPosition+(multiMeasure?scrollTop:0);var right=refContainerXPosition+stage.width;var bottom=refContainerYPosition+stage.height-(multiMeasure?-scrollTop:scrollerLayout.bottom);var left=refContainerXPosition+(multiMeasure?outerPadding:scrollerLayout.left);if(topOffset<top)return false;if(topOffset>bottom)return false;if(leftOffset<left)return false;if(leftOffset>right)return false;return true};Heatmap.prototype.renderSelectionBubble=function(selectionInfo){var hoverBubble=this.renderHoverBubble(selectionInfo);if(!hoverBubble)return null;var _a=this.props,essence=_a.essence,clicker=_a.clicker,openRawDataModal=_a.openRawDataModal;var splits=essence.splits;var dimensions=essence.getDimensions();var splitDimensions=splits.getSplitDimensions(dimensions);return React.cloneElement(hoverBubble,{splitDimensions:splitDimensions,clicker:clicker,openRawDataModal:openRawDataModal,onClose:this.onBubbleClose.bind(this),disableExclusion:true})};Heatmap.prototype.onBubbleClose=function(){this.setState({selectionInfo:null})};Heatmap.prototype.isMapVisible=function(measureIndex){var essence=this.props.essence;var measures=essence.getEffectiveMeasures();if(!this.isMultiMeasure(measures))return true;var _a=this.state,stage=_a.stage,scrollTop=_a.scrollTop,mapHeight=_a.mapHeight;var outerPadding=MULTI_MEASURE_LAYOUT.outerPadding,verticalGap=MULTI_MEASURE_LAYOUT.verticalGap,horizontalGap=MULTI_MEASURE_LAYOUT.horizontalGap,mapsPerRow=MULTI_MEASURE_LAYOUT.mapsPerRow,labelHeight=MULTI_MEASURE_LAYOUT.labelHeight;var mapActualHeight=mapHeight+verticalGap+labelHeight;var mapRowIndex=Math.floor(measureIndex/mapsPerRow);var firstVisibleRow=Math.floor(scrollTop/mapActualHeight);var lastVisibleRow=Math.floor((scrollTop+stage.height)/mapActualHeight);return mapRowIndex>=firstVisibleRow&&mapRowIndex<=lastVisibleRow};Heatmap.prototype.renderMeasureLabel=function(dataset){var _a=this.props,isThumbnail=_a.isThumbnail,essence=_a.essence;var _b=this.state,scrollTop=_b.scrollTop,mapHeight=_b.mapHeight;if(isThumbnail)return null;var mapIndex=Math.floor(scrollTop/(mapHeight+MAP_SPACING));var measure=essence.getEffectiveMeasures()[mapIndex];if(!measure)return null;return React.createElement(components_1.VisMeasureLabel,{measure:measure,datum:dataset.data[0]})};Heatmap.prototype.renderMultiMeasures=function(measures,dataset){var _this=this;var clicker=this.props.clicker;var mapHeight=this.state.mapHeight;var outerPadding=MULTI_MEASURE_LAYOUT.outerPadding,verticalGap=MULTI_MEASURE_LAYOUT.verticalGap,mapsPerRow=MULTI_MEASURE_LAYOUT.mapsPerRow,labelHeight=MULTI_MEASURE_LAYOUT.labelHeight;var onScroll=function(){var node=ReactDOM.findDOMNode(_this.refs["heatmap"]);if(!node)return;_this.onScroll(node.scrollTop,node.scrollLeft)};var height=outerPadding+(mapHeight+verticalGap+labelHeight)*Math.ceil(measures.length/mapsPerRow);return React.createElement("div",{className:"multi-container",ref:"reference-container",style:{height:height}},React.createElement(caladan_1.GlobalEventListener,{scroll:onScroll}),measures.map(function(m,i){if(!_this.isMapVisible(i))return null;return React.createElement("div",{className:"measure-map multi",style:_this.getMapStyle(i),key:i},React.createElement(components_1.VisMeasureLabel,{onClick:clicker.switchToMeasure?clicker.switchToMeasure.bind(_this,m):null,measure:m,datum:dataset.data[0]}),_this.renderMapTiles(m,true))}))};Heatmap.prototype.renderSingleMeasure=function(measure,dataset){var _this=this;var isThumbnail=this.props.isThumbnail;var _a=this.state,mapWidth=_a.mapWidth,mapHeight=_a.mapHeight;var _b=this.getAxesDatasets(dataset),xDataset=_b.xDataset,yDataset=_b.yDataset;var onMove=function(x,y,part){var tile=_this.getTileInScroller(x,y,part);_this.onMouseMove(0,tile);return!!(tile&&tile.datum)};var onClick=function(x,y,part){_this.onClick(0,_this.getTileInScroller(x,y,part))};var map=React.createElement("div",{className:"measure-map single",style:this.getMapStyle(0)},this.renderMapTiles(measure));var layout=this.getScrollerLayout(mapWidth,mapHeight);return React.createElement(caladan_1.Scroller,{layout:layout,ref:"reference-container",bottomGutter:this.renderXAxis(xDataset),bottomLeftCorner:React.createElement("div",null),topLeftCorner:this.renderMeasureLabel(dataset),leftGutter:this.renderYAxis(yDataset),topGutter:!isThumbnail?React.createElement("div",null):null,body:map,onClick:onClick,onMouseMove:onMove,onMouseLeave:this.onMouseLeave.bind(this),onScroll:this.onScroll.bind(this)})};Heatmap.prototype.renderInternals=function(){var essence=this.props.essence;var _a=this.state,datasetLoad=_a.datasetLoad,hoverInfo=_a.hoverInfo,selectionInfo=_a.selectionInfo;var dataset=datasetLoad.dataset?datasetLoad.dataset:null;if(!dataset)return null;var measures=essence.getEffectiveMeasures();return React.createElement("div",{className:"internals heatmap",ref:"heatmap"},this.isMultiMeasure(measures)?this.renderMultiMeasures(measures,dataset):this.renderSingleMeasure(measures[0],dataset),hoverInfo&&!selectionInfo?this.renderHoverBubble(hoverInfo):null,selectionInfo?this.renderSelectionBubble(selectionInfo):null,selectionInfo?this.renderHighlightBorder():null)};return Heatmap}(base_visualization_1.BaseVisualization);Heatmap.visName=models_1.HEATMAP_MANIFEST.name;exports.Heatmap=Heatmap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var React=__webpack_require__(1);__webpack_require__(973);var Highlighter=function(_super){tslib_1.__extends(Highlighter,_super);function Highlighter(){return _super.call(this)||this}Highlighter.prototype.renderRange=function(from,to){if(from===to)return null;var style={width:to-from,left:from};return React.createElement("div",{className:"frame",style:style})};Highlighter.prototype.renderBlank=function(from,to){if(from===to)return null;var style={width:to-from,left:from};return React.createElement("div",{className:"whiteout",style:style})};Highlighter.prototype.render=function(){var _this=this;var _a=this.props,ranges=_a.ranges,scaleX=_a.scaleX;var x=scaleX;if(!ranges)return null;ranges=ranges.sort(function(a,b){return a.compare(b)}).filter(function(r){return r.start!=r.end});if(!ranges.length)return null;var elements=[];var lastX=0;ranges.forEach(function(r){if(!r)return;elements.push(_this.renderBlank(lastX,x(r.start)));elements.push(_this.renderRange(x(r.start),x(r.end)));lastX=x(r.end)});elements.push(React.createElement("div",{className:"whiteout",style:{left:lastX,right:0}}));return React.createElement("div",{className:"highlighter"},elements)};return Highlighter}(React.Component);exports.Highlighter=Highlighter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var beltful_1=__webpack_require__(5);var caladan_1=__webpack_require__(8);var d3_array_1=__webpack_require__(747);var d3_scale_1=__webpack_require__(760);var immutable_class_1=__webpack_require__(2);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var ReactDOM=__webpack_require__(20);var models_1=__webpack_require__(10);var time_1=__webpack_require__(75);var components_1=__webpack_require__(203);var constants_1=__webpack_require__(47);var formatter_1=__webpack_require__(124);var base_visualization_1=__webpack_require__(751);var highlighter_1=__webpack_require__(835);__webpack_require__(974);var TEXT_SPACER=36;var X_AXIS_HEIGHT=40;var Y_AXIS_WIDTH=60;var MIN_CHART_HEIGHT=140;var HOVER_BUBBLE_V_OFFSET=-7;var HOVER_MULTI_BUBBLE_V_OFFSET=-8;var MAX_HOVER_DIST=50;var MAX_ASPECT_RATIO=1;var floatFormat=function(f){return f.toFixed(1)};function findClosest(data,dragDate,scaleX,continuousDimension){var closestDatum=null;var minDist=Infinity;for(var _i=0,data_1=data;_i<data_1.length;_i++){var datum=data_1[_i];var continuousSegmentValue=datum[continuousDimension.name];if(!continuousSegmentValue||!plywood_1.Range.isRange(continuousSegmentValue))continue;var mid=continuousSegmentValue.midpoint();var dist=Math.abs(mid.valueOf()-dragDate.valueOf());var distPx=Math.abs(scaleX(mid)-scaleX(dragDate));if((!closestDatum||dist<minDist)&&distPx<MAX_HOVER_DIST){closestDatum=datum;minDist=dist}}return closestDatum}function roundTo(v,roundTo){return Math.round(Math.floor(v/roundTo))*roundTo}var LineChart=function(_super){tslib_1.__extends(LineChart,_super);function LineChart(){var _this=_super.call(this)||this;_this._dragging=false;_this._hasDragged=false;return _this}LineChart.prototype.getDefaultState=function(){var s=_super.prototype.getDefaultState.call(this);s.selections=[];s.hoverRange=null;return s};LineChart.prototype.componentDidUpdate=function(){
var _a=this.state,containerYPosition=_a.containerYPosition,containerXPosition=_a.containerXPosition;var node=ReactDOM.findDOMNode(this.refs["container"]);if(!node)return;var rect=node.getBoundingClientRect();if(containerYPosition!==rect.top||containerXPosition!==rect.left){this.setState({containerYPosition:rect.top,containerXPosition:rect.left})}};LineChart.prototype.getMyEventX=function(e){var myDOM=ReactDOM.findDOMNode(this);var rect=myDOM.getBoundingClientRect();return beltful_1.EventUtils.getXFromEvent(e)-(rect.left+constants_1.VIS_H_PADDING)};LineChart.prototype.onMouseDown=function(measure,e){var clicker=this.props.clicker;var _a=this.state,scaleX=_a.scaleX,selections=_a.selections;if(!scaleX||!clicker.dropHighlight||!clicker.changeHighlight)return;this._dragging=true;var dragStartValue=scaleX.invert(this.getMyEventX(e));if(e.shiftKey){selections.push({dragStartValue:dragStartValue,dragRange:plywood_1.Range.fromJS({start:dragStartValue,end:dragStartValue})})}else{if(!!this.existingSelectionforValue(dragStartValue)){selections=[];clicker.dropHighlight()}else{selections=[{dragStartValue:dragStartValue,dragRange:plywood_1.Range.fromJS({start:dragStartValue,end:dragStartValue})}]}}this.setState({selections:selections,dragOnMeasure:measure})};LineChart.prototype.existingSelectionforValue=function(value){var selections=this.state.selections;return selections.filter(function(s){return s.dragRange.contains(value)})[0]};LineChart.prototype.onMouseMove=function(dataset,measure,scaleX,e){var essence=this.props.essence;var _a=this.state,continuousDimension=_a.continuousDimension,hoverRange=_a.hoverRange,hoverMeasure=_a.hoverMeasure;if(!dataset)return;var splitLength=essence.splits.length();var myDOM=ReactDOM.findDOMNode(this);var rect=myDOM.getBoundingClientRect();var dragDate=scaleX.invert(beltful_1.EventUtils.getXFromEvent(e)-(rect.left+constants_1.VIS_H_PADDING));var closestDatum;if(splitLength>1){var flatData=dataset.flatten();closestDatum=findClosest(flatData.data,dragDate,scaleX,continuousDimension)}else{closestDatum=findClosest(dataset.data,dragDate,scaleX,continuousDimension)}var currentHoverRange=closestDatum?closestDatum[continuousDimension.name]:null;if(!hoverRange||!immutable_class_1.immutableEqual(hoverRange,currentHoverRange)||measure!==hoverMeasure){this.setState({hoverRange:currentHoverRange,hoverMeasure:measure})}};LineChart.prototype.getLastDragRange=function(e){var _a=this.state,selections=_a.selections,axisRange=_a.axisRange,scaleX=_a.scaleX;var _b=selections[selections.length-1],dragRange=_b.dragRange,dragStartValue=_b.dragStartValue;var dragEndValue=scaleX.invert(this.getMyEventX(e));var rangeJS=null;if(dragStartValue.valueOf()===dragEndValue.valueOf()){dragEndValue=plywood_1.TimeRange.isTimeRange(axisRange)?new Date(dragEndValue.valueOf()+1):dragEndValue+1}if(dragStartValue<dragEndValue){rangeJS={start:dragStartValue,end:dragEndValue}}else{rangeJS={start:dragEndValue,end:dragStartValue}}return plywood_1.Range.fromJS(rangeJS).intersect(axisRange)};LineChart.prototype.floorRange=function(dragRange){var essence=this.props.essence;var splits=essence.splits,timezone=essence.timezone;var continuousSplit=splits.last();if(!continuousSplit.bucketAction)return dragRange;if(plywood_1.TimeRange.isTimeRange(dragRange)){var timeBucketAction=continuousSplit.bucketAction;var duration=timeBucketAction.duration;return plywood_1.TimeRange.fromJS({start:duration.floor(dragRange.start,timezone),end:duration.shift(duration.floor(dragRange.end,timezone),timezone,1)})}else{var numberBucketAction=continuousSplit.bucketAction;var bucketSize=numberBucketAction.size;var startFloored=roundTo(dragRange.start,bucketSize);var endFloored=roundTo(dragRange.end,bucketSize);if(endFloored-startFloored<bucketSize){endFloored+=bucketSize}return plywood_1.NumberRange.fromJS({start:startFloored,end:endFloored})}};LineChart.prototype.globalMouseMoveListener=function(e){var selections=this.state.selections;if(selections.length===0||!this._dragging)return;this._hasDragged=true;var dragRange=this.getLastDragRange(e);selections[selections.length-1].dragRange=dragRange;this.setState({selections:selections})};LineChart.prototype.handleSingleClickSelection=function(e){var _a=this.props,clicker=_a.clicker,essence=_a.essence;var _b=this.state,selections=_b.selections,dragOnMeasure=_b.dragOnMeasure,continuousDimension=_b.continuousDimension;var newRange=this.getLastDragRange(e);var overlappingSelection=selections.filter(function(s,i){return i!==selections.length-1}).filter(function(s){return s.dragRange.contains(newRange.start)})[0];if(overlappingSelection){selections=selections.filter(function(s){return s!==overlappingSelection});selections.pop()}else{selections[selections.length-1].dragRange=this.floorRange(newRange)}if(selections.length===0){clicker.dropHighlight()}else{clicker.changeHighlight(new models_1.Highlight({owner:this.id,measure:dragOnMeasure.name,delta:models_1.Filter.fromClause(new models_1.FilterClause({dimension:continuousDimension.name,values:plywood_1.Set.fromJS(this.simplifySelections(selections))}))}))}};LineChart.prototype.simplifySelections=function(selections){var ranges=[];var lastRange;selections.sort(function(a,b){return a.dragRange.compare(b.dragRange)}).forEach(function(_a){var dragRange=_a.dragRange;if(!lastRange){lastRange=dragRange}else{if(lastRange.mergeable(dragRange)){lastRange=lastRange.union(dragRange)}else{ranges.push(lastRange);lastRange=dragRange}}});if(lastRange)ranges.push(lastRange);return ranges};LineChart.prototype.globalMouseUpListener=function(e){var _a=this.props,clicker=_a.clicker,essence=_a.essence;var _b=this.state,continuousDimension=_b.continuousDimension,selections=_b.selections,dragOnMeasure=_b.dragOnMeasure;if(!this._dragging||selections.length===0)return;this._dragging=false;var lastSelection=selections[selections.length-1];if(!this._hasDragged){this.handleSingleClickSelection(e)}else{selections[selections.length-1].dragRange=this.floorRange(this.getLastDragRange(e));clicker.changeHighlight(new models_1.Highlight({owner:this.id,measure:dragOnMeasure.name,delta:models_1.Filter.fromClause(new models_1.FilterClause({dimension:continuousDimension.name,values:plywood_1.Set.fromJS(this.simplifySelections(selections))}))}))}this._hasDragged=false};LineChart.prototype.globalEscapeListener=function(e){var _a=this.props,essence=_a.essence,clicker=_a.clicker;if(essence.highlightOn(this.id)){clicker.dropHighlight();this.resetDrag()}};LineChart.prototype.resetDrag=function(){this.setState({selections:[],dragOnMeasure:null})};LineChart.prototype.onMouseLeave=function(measure,e){var hoverMeasure=this.state.hoverMeasure;if(hoverMeasure===measure){this.setState({hoverRange:null,hoverMeasure:null})}};LineChart.prototype.renderHighlighter=function(){var _a=this.state,selections=_a.selections,scaleX=_a.scaleX;return React.createElement(highlighter_1.Highlighter,{ranges:selections.map(function(s){return s.dragRange}),scaleX:scaleX})};LineChart.prototype.getColors=function(){var essence=this.props.essence;var customColors=this.state.customColors;var colors=essence.getEffectiveColors();if(colors&&colors.isLimitMode()){colors=customColors}return colors};LineChart.prototype.renderHoverBubble=function(topOffset,dataset,measure){var _a=this.props,clicker=_a.clicker,essence=_a.essence;var _b=this.state,containerYPosition=_b.containerYPosition,containerXPosition=_b.containerXPosition,scrollTop=_b.scrollTop;var _c=this.state,hoverRange=_c.hoverRange,scaleX=_c.scaleX,continuousDimension=_c.continuousDimension;var timezone=essence.timezone;var colors=this.getColors();var leftOffset=containerXPosition+constants_1.VIS_H_PADDING+scaleX(hoverRange.midpoint());var segmentLabel=formatter_1.formatValue(hoverRange,timezone,time_1.DisplayYear.NEVER);if(colors){var categoryDimension_1=essence.splits.get(0).dimension;var hoverDatums_1=dataset.data.map(function(d){var ds=d[constants_1.SPLIT];return ds instanceof plywood_1.Dataset?ds.findDatumByAttribute(continuousDimension.name,hoverRange):null});var colorEntries=dataset.data.map(function(d,i){var segment=d[categoryDimension_1];var hoverDatum=hoverDatums_1[i];if(!hoverDatum)return null;return{color:colors.getColor(segment),segmentLabel:String(segment),measureLabel:measure.formatDatum(hoverDatum)}}).filter(Boolean);return React.createElement(components_1.ColorSegmentBubble,{left:leftOffset,top:topOffset+HOVER_MULTI_BUBBLE_V_OFFSET,segmentLabel:segmentLabel,colorEntries:colorEntries})}else{var hoverDatum=dataset.findDatumByAttribute(continuousDimension.name,hoverRange);if(!hoverDatum)return null;var segmentLabel_1=formatter_1.formatValue(hoverRange,timezone,time_1.DisplayYear.NEVER);return React.createElement(components_1.SegmentBubble,{left:leftOffset,top:topOffset+HOVER_BUBBLE_V_OFFSET,segmentLabel:segmentLabel_1,measureLabel:measure.formatDatum(hoverDatum)})}};LineChart.prototype.getBubbleTopOffset=function(chartIndex,chartStage,scaleY,extentY){var _a=this.state,stage=_a.stage,scrollTop=_a.scrollTop,containerYPosition=_a.containerYPosition;var topOffset=chartStage.height*chartIndex+scaleY(extentY[1])+TEXT_SPACER-scrollTop;if(topOffset<0)topOffset=0;if(topOffset>stage.height-X_AXIS_HEIGHT)topOffset=stage.height-X_AXIS_HEIGHT;topOffset+=containerYPosition;return topOffset};LineChart.prototype.renderMultipleSelectionBubble=function(topOffset){var _a=this.props,clicker=_a.clicker,openRawDataModal=_a.openRawDataModal;var _b=this.state,containerXPosition=_b.containerXPosition,selections=_b.selections,scaleX=_b.scaleX;var range=selections[0].dragRange;selections.forEach(function(s){return range=range.extend(s.dragRange)});return React.createElement(components_1.SegmentBubble,{left:containerXPosition+constants_1.VIS_H_PADDING+scaleX(range.midpoint()),top:topOffset+HOVER_BUBBLE_V_OFFSET,segmentLabel:selections.length+" selections",clicker:clicker,openRawDataModal:openRawDataModal})};LineChart.prototype.renderChartBubble=function(dataset,chartIndex,containerStage,chartStage,extentY,scaleY){var _a=this.props,clicker=_a.clicker,essence=_a.essence,openRawDataModal=_a.openRawDataModal;var timezone=essence.timezone;var _b=this.state,stage=_b.stage,containerYPosition=_b.containerYPosition,containerXPosition=_b.containerXPosition,scrollTop=_b.scrollTop,selections=_b.selections,dragOnMeasure=_b.dragOnMeasure,hoverRange=_b.hoverRange,hoverMeasure=_b.hoverMeasure,scaleX=_b.scaleX,continuousDimension=_b.continuousDimension,customColors=_b.customColors;var measure=essence.getEffectiveMeasures()[chartIndex];if(essence.highlightOnDifferentMeasure(this.id,measure.name))return null;if(dragOnMeasure!==measure&&hoverMeasure!==measure)return null;var topOffset=this.getBubbleTopOffset(chartIndex,chartStage,scaleY,extentY);if(selections.length===0){return hoverRange?this.renderHoverBubble(topOffset,dataset,measure):null}if(selections.length>1){return this.renderMultipleSelectionBubble(topOffset)}var dragRange=selections[0].dragRange;var colors=this.getColors();if(colors){var categoryDimension_2=essence.splits.get(0).dimension;var hoverDatums_2=dataset.data.map(function(d){return d[constants_1.SPLIT].findDatumByAttribute(continuousDimension.name,dragRange)});var colorEntries=dataset.data.map(function(d,i){var segment=d[categoryDimension_2];var hoverDatum=hoverDatums_2[i];if(!hoverDatum)return null;return{color:colors.getColor(segment),segmentLabel:String(segment),measureLabel:measure.formatDatum(hoverDatum)}}).filter(Boolean);return React.createElement(components_1.ColorSegmentBubble,{left:containerXPosition+constants_1.VIS_H_PADDING+scaleX(dragRange.end),top:topOffset+HOVER_MULTI_BUBBLE_V_OFFSET,segmentLabel:formatter_1.formatValue(dragRange,timezone,time_1.DisplayYear.NEVER),colorEntries:colorEntries,clicker:clicker})}else{var highlightDatum=dataset.findDatumByAttribute(continuousDimension.name,dragRange);return React.createElement(components_1.SegmentBubble,{left:containerXPosition+constants_1.VIS_H_PADDING+scaleX(dragRange.midpoint()),top:topOffset+HOVER_BUBBLE_V_OFFSET,segmentLabel:formatter_1.formatValue(dragRange,timezone,time_1.DisplayYear.NEVER),measureLabel:highlightDatum?measure.formatDatum(highlightDatum):null,clicker:clicker,openRawDataModal:openRawDataModal})}};LineChart.prototype.renderChart=function(dataset,measure,chartIndex,containerStage,chartStage){var _a=this.props,essence=_a.essence,isThumbnail=_a.isThumbnail;var _b=this.state,hoverRange=_b.hoverRange,hoverMeasure=_b.hoverMeasure,selections=_b.selections,scaleX=_b.scaleX,xTicks=_b.xTicks,continuousDimension=_b.continuousDimension,customColors=_b.customColors;var splits=essence.splits;var colors=essence.getEffectiveColors();var splitLength=splits.length();if(colors&&colors.isLimitMode()){colors=customColors}var lineStage=chartStage.within({top:TEXT_SPACER,right:Y_AXIS_WIDTH,bottom:1});var yAxisStage=chartStage.within({top:TEXT_SPACER,left:lineStage.width,bottom:1});var measureName=measure.name;var getX=function(d){return d[continuousDimension.name]};var getY=function(d){return d[measureName]};var myDatum=dataset.data[0];var mySplitDataset=myDatum[constants_1.SPLIT];var extentY=null;if(splitLength===1){extentY=d3_array_1.extent(mySplitDataset.data,getY)}else{var minY_1=0;var maxY_1=0;mySplitDataset.data.forEach(function(datum){var subDataset=datum[constants_1.SPLIT];if(subDataset){var tempExtentY=d3_array_1.extent(subDataset.data,getY);minY_1=Math.min(tempExtentY[0],minY_1);maxY_1=Math.max(tempExtentY[1],maxY_1)}});extentY=[minY_1,maxY_1]}var horizontalGridLines;var chartLines;var verticalAxis;var bubble;if(!isNaN(extentY[0])&&!isNaN(extentY[1])){var scaleY_1=d3_scale_1.scaleLinear().domain([Math.min(extentY[0]*1.1,0),Math.max(extentY[1]*1.1,0)]).range([lineStage.height,0]);var yTicks=scaleY_1.ticks(5);var crossesZero=extentY[0]<0&&extentY[1]>0;if(!crossesZero)yTicks=yTicks.filter(function(n){return n!==0});horizontalGridLines=React.createElement(components_1.GridLines,{orientation:"horizontal",scale:scaleY_1,ticks:yTicks,stage:lineStage});verticalAxis=React.createElement(components_1.VerticalAxis,{stage:yAxisStage,ticks:yTicks,scale:scaleY_1});if(splitLength===1){chartLines=[];chartLines.push(React.createElement(components_1.ChartLine,{key:"single",dataset:mySplitDataset,getX:getX,getY:getY,scaleX:scaleX,scaleY:scaleY_1,stage:lineStage,showArea:true,hoverRange:!selections.length&&hoverMeasure===measure?hoverRange:null,color:"default"}))}else{var categoryDimension_3=essence.splits.get(0).dimension;chartLines=mySplitDataset.data.map(function(datum,i){var segment=datum[categoryDimension_3];var subDataset=datum[constants_1.SPLIT];if(!subDataset)return null;return React.createElement(components_1.ChartLine,{key:"single"+i,dataset:subDataset,getX:getX,getY:getY,scaleX:scaleX,scaleY:scaleY_1,stage:lineStage,showArea:false,hoverRange:!selections.length&&hoverMeasure===measure?hoverRange:null,color:colors?colors.getColor(segment):null})})}bubble=this.renderChartBubble(mySplitDataset,chartIndex,containerStage,chartStage,extentY,scaleY_1)}return React.createElement("div",{className:"measure-line-chart",key:measureName,onMouseDown:this.onMouseDown.bind(this,measure),onMouseMove:this.onMouseMove.bind(this,mySplitDataset,measure,scaleX),onMouseLeave:this.onMouseLeave.bind(this,measure)},React.createElement("svg",{style:chartStage.getWidthHeight(),viewBox:chartStage.getViewBox()},horizontalGridLines,React.createElement(components_1.GridLines,{orientation:"vertical",scale:scaleX,ticks:xTicks,stage:lineStage}),chartLines,verticalAxis,React.createElement("line",{className:"vis-bottom",x1:"0",y1:chartStage.height-.5,x2:chartStage.width,y2:chartStage.height-.5})),!isThumbnail?React.createElement(components_1.VisMeasureLabel,{measure:measure,datum:myDatum}):null,this.renderHighlighter(),bubble)};LineChart.prototype.getSelectionsFromEssence=function(essence){if(!essence||!essence.highlightOn(this.id))return[];return essence.getSingleHighlightSet().elements.map(function(r){return{dragRange:r}})};LineChart.prototype.getSelectedMeasureFromEssence=function(essence){if(!essence||!essence.highlightOn(this.id))return null;return essence.getEffectiveMeasures().filter(function(m){return m.name===essence.highlight.measure})[0]};LineChart.prototype.precalculate=function(props,datasetLoad){if(datasetLoad===void 0){datasetLoad=null}var registerDownloadableDataset=props.registerDownloadableDataset,registerCustomColors=props.registerCustomColors,essence=props.essence,timekeeper=props.timekeeper;var stage=this.state.stage;var splits=essence.splits,timezone=essence.timezone,dataCube=essence.dataCube;var colors=essence.getEffectiveColors();var existingDatasetLoad=this.state.datasetLoad;var newState={};newState.selections=this.getSelectionsFromEssence(essence);newState.dragOnMeasure=this.getSelectedMeasureFromEssence(essence);if(datasetLoad){if(datasetLoad.loading)datasetLoad.dataset=existingDatasetLoad.dataset;newState.datasetLoad=datasetLoad}else{datasetLoad=this.state.datasetLoad}if(splits.length()){var dataset=datasetLoad.dataset;if(dataset){if(registerDownloadableDataset)registerDownloadableDataset(dataset);var firstSplitValues=dataset.data[0][constants_1.SPLIT];if(colors&&colors.isLimitMode()&&firstSplitValues){var firstDim_1=splits.get(0).dimension;var newCustomColors=models_1.Colors.fromValues(firstDim_1,firstSplitValues.data.map(function(d){return d[firstDim_1]}));if(!newCustomColors.equals(this.state.customColors)){newState.customColors=newCustomColors;if(registerCustomColors)registerCustomColors(newCustomColors)}}}var continuousSplit=splits.length()===1?splits.get(0):splits.get(1);var continuousDimension=essence.getDimension(continuousSplit.dimension);if(continuousDimension){newState.continuousDimension=continuousDimension;var axisRange_1=essence.getEffectiveFilter(timekeeper,this.id).getExtent(continuousDimension.name);if(axisRange_1&&axisRange_1.isFinite()){var maxTime=dataCube.getMaxTime(timekeeper);var continuousBucketAction=continuousSplit.bucketAction;if(maxTime&&continuousBucketAction instanceof plywood_1.TimeBucketExpression){var continuousDuration=continuousBucketAction.duration;var axisRangeEnd=axisRange_1.end;var axisRangeEndFloor=continuousDuration.floor(axisRangeEnd,timezone);var axisRangeEndCeil=continuousDuration.shift(axisRangeEndFloor,timezone);if(maxTime&&axisRangeEndFloor<maxTime&&maxTime<axisRangeEndCeil){axisRange_1=plywood_1.Range.fromJS({start:axisRange_1.start,end:axisRangeEndCeil})}}}else{axisRange_1=this.getXAxisRange(dataset,continuousDimension)}if(axisRange_1&&stage){newState.axisRange=axisRange_1;var domain=[axisRange_1.start,axisRange_1.end];var range=[0,stage.width-constants_1.VIS_H_PADDING*2-Y_AXIS_WIDTH];var scaleFn=null;var labelFn=null;if(continuousDimension.isTime()){scaleFn=d3_scale_1.scaleTime();labelFn=function(d){return time_1.formatAxisBasedOnRange(d,axisRange_1,timezone)}}else{scaleFn=d3_scale_1.scaleLinear();labelFn=floatFormat}newState.scaleX=scaleFn.domain(domain).range(range);newState.xTicks=models_1.getLineChartTicks(axisRange_1,timezone);newState.tickFormatter=labelFn}}}this.setState(newState)};LineChart.prototype.getXAxisRange=function(dataset,continuousDimension){var _this=this;if(!dataset)return null;var key=continuousDimension.name;var firstDatum=dataset.data[0];var ranges;if(firstDatum[constants_1.SPLIT]){ranges=dataset.data.map(function(d){return _this.getXAxisRange(d[constants_1.SPLIT],continuousDimension)})}else{ranges=dataset.data.map(function(d){return d[key]})}return ranges.reduce(function(a,b){return a&&b?a.extend(b):a||b})};LineChart.prototype.hideBubble=function(){var _a=this.state,hoverRange=_a.hoverRange,hoverMeasure=_a.hoverMeasure;if(!hoverRange||!hoverMeasure)return;this.setState({hoverRange:null,hoverMeasure:null})};LineChart.prototype.onScroll=function(){var node=ReactDOM.findDOMNode(this.refs["container"]);if(!node)return;var _a=this.state,scrollTop=_a.scrollTop,scrollLeft=_a.scrollLeft;if(node.scrollTop!==scrollTop||node.scrollLeft!==scrollLeft){this.setState({hoverRange:null,hoverMeasure:null,scrollLeft:node.scrollLeft,scrollTop:node.scrollTop})}};LineChart.prototype.renderInternals=function(){var _this=this;var essence=this.props.essence;var _a=this.state,stage=_a.stage,datasetLoad=_a.datasetLoad,axisRange=_a.axisRange,scaleX=_a.scaleX,xTicks=_a.xTicks,tickFormatter=_a.tickFormatter;var splits=essence.splits;var measureCharts;var bottomAxis;if(datasetLoad.dataset&&splits.length()&&axisRange){var measures=essence.getEffectiveMeasures();var chartWidth=stage.width-constants_1.VIS_H_PADDING*2;var chartHeight=Math.max(MIN_CHART_HEIGHT,Math.floor(Math.min(chartWidth/MAX_ASPECT_RATIO,(stage.height-X_AXIS_HEIGHT)/measures.length)));var chartStage_1=new beltful_1.Stage({x:constants_1.VIS_H_PADDING,y:0,width:chartWidth,height:chartHeight});measureCharts=measures.map(function(measure,chartIndex){return _this.renderChart(datasetLoad.dataset,measure,chartIndex,stage,chartStage_1)});var xAxisStage=beltful_1.Stage.fromSize(chartStage_1.width,X_AXIS_HEIGHT);bottomAxis=React.createElement("svg",{className:"bottom-axis",width:xAxisStage.width,height:xAxisStage.height},React.createElement(components_1.LineChartAxis,{stage:xAxisStage,ticks:xTicks,tickFormatter:tickFormatter,scale:scaleX}))}var measureChartsStyle={maxHeight:stage.height-X_AXIS_HEIGHT};return React.createElement("div",{className:"internals line-chart-inner"},React.createElement(caladan_1.GlobalEventListener,{scroll:this.onScroll.bind(this)}),React.createElement("div",{className:"measure-line-charts",style:measureChartsStyle,ref:"container"},measureCharts),bottomAxis)};return LineChart}(base_visualization_1.BaseVisualization);LineChart.visName=models_1.LINE_CHART_MANIFEST.name;exports.LineChart=LineChart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var caladan_1=__webpack_require__(8);var Icons=__webpack_require__(11);var classNames=__webpack_require__(9);var d3_array_1=__webpack_require__(747);var d3_scale_1=__webpack_require__(760);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var ReactDOM=__webpack_require__(20);var models_1=__webpack_require__(10);var segment_bubble_1=__webpack_require__(314);var formatter_1=__webpack_require__(124);var base_visualization_1=__webpack_require__(751);__webpack_require__(975);var HEADER_HEIGHT=38;var SEGMENT_WIDTH=300;var THUMBNAIL_SEGMENT_WIDTH=150;var INDENT_WIDTH=25;var MEASURE_WIDTH=130;var ROW_HEIGHT=30;var PADDING_LEFT=10;var PADDING_RIGHT=10;var HIGHLIGHT_BUBBLE_V_OFFSET=-4;var Table=function(_super){tslib_1.__extends(Table,_super);function Table(){return _super.call(this)||this}Table.prototype.getDefaultState=function(){var s=_super.prototype.getDefaultState.call(this);s.flatData=null;s.hoverRow=null;s.selectedRows=[];return s};Table.prototype.getSegmentWidth=function(){var isThumbnail=this.props.isThumbnail;return isThumbnail?THUMBNAIL_SEGMENT_WIDTH:SEGMENT_WIDTH};Table.prototype.getMeasureForX=function(x){var essence=this.props.essence;var measureIndex=Math.floor((x-this.getSegmentWidth())/this.getIdealMeasureWidth(essence));return essence.getEffectiveMeasures()[measureIndex]||null};Table.prototype.getDatumForY=function(y){var flatData=this.state.flatData;var rowIndex=Math.floor((y-HEADER_HEIGHT)/ROW_HEIGHT);return flatData?flatData[rowIndex]:null};Table.prototype.sortOn=function(expression){var _a=this.props,clicker=_a.clicker,essence=_a.essence;var splits=essence.splits;if(!clicker.changeSplits)return;var commonSort=splits.getCommonSort();var myDescending=commonSort&&commonSort.expression.equals(expression)&&commonSort.direction===plywood_1.SortExpression.DESCENDING;clicker.changeSplits(essence.splits.changeSortActionFromNormalized(plywood_1.Expression._.sort(expression,myDescending?plywood_1.SortExpression.ASCENDING:plywood_1.SortExpression.DESCENDING)),models_1.VisStrategy.KeepAlways)};Table.prototype.handleMultiSelect=function(row){var _a=this.props,essence=_a.essence,clicker=_a.clicker;var rowHighlight=this.getMultiFilter(essence,clicker,row);if(!rowHighlight){clicker.dropHighlight()}else{clicker.changeHighlight(new models_1.Highlight({owner:this.id,measure:null,delta:rowHighlight}))}};Table.prototype.onClick=function(x,y,part,event){var _a=this.props,clicker=_a.clicker,essence=_a.essence;var splits=essence.splits;if(part===caladan_1.Scroller.TOP_LEFT_CORNER){this.sortOn(plywood_1.$(models_1.SplitCombine.SORT_ON_DIMENSION_PLACEHOLDER))}else if(part===caladan_1.Scroller.TOP_GUTTER){this.sortOn(plywood_1.$(this.getMeasureForX(x).name))}else if(part===caladan_1.Scroller.BODY||part===caladan_1.Scroller.LEFT_GUTTER){if(!clicker.dropHighlight||!clicker.changeHighlight)return;var row=this.getDatumForY(y);if(!row)return;var rowHighlight=void 0;if(essence.highlightOn(this.id)&&event.shiftKey){this.handleMultiSelect(row)}else{rowHighlight=this.getFilterFromDatum(essence.splits,row)}if(!rowHighlight)return;if(essence.highlightOn(this.id)){if(rowHighlight.equals(essence.highlight.delta)){clicker.dropHighlight();return}}clicker.changeHighlight(new models_1.Highlight({owner:this.id,measure:null,delta:rowHighlight}))}};Table.prototype.onMouseMove=function(x,y,part){var essence=this.props.essence;var _a=this.state,hoverMeasure=_a.hoverMeasure,hoverRow=_a.hoverRow;var newMeasure;var newDatum;if(part===caladan_1.Scroller.TOP_LEFT_CORNER||part===caladan_1.Scroller.TOP_GUTTER){newMeasure=this.getMeasureForX(x)}else if(part===caladan_1.Scroller.BODY||part===caladan_1.Scroller.LEFT_GUTTER){newDatum=this.getDatumForY(y)}if(hoverMeasure!==newMeasure||hoverRow!==newDatum){this.setState({hoverMeasure:newMeasure,hoverRow:newDatum})}};Table.prototype.onMouseLeave=function(){var _a=this.state,hoverMeasure=_a.hoverMeasure,hoverRow=_a.hoverRow;if(hoverMeasure||hoverRow){this.setState({hoverMeasure:null,hoverRow:null})}};Table.prototype.precalculate=function(props,datasetLoad){if(datasetLoad===void 0){datasetLoad=null}var registerDownloadableDataset=props.registerDownloadableDataset,essence=props.essence,isThumbnail=props.isThumbnail;var splits=essence.splits;var existingDatasetLoad=this.state.datasetLoad;var newState={};if(datasetLoad){if(datasetLoad.loading)datasetLoad.dataset=existingDatasetLoad.dataset;newState.datasetLoad=datasetLoad}else{datasetLoad=this.state.datasetLoad}var dataset=datasetLoad.dataset;if(dataset&&splits.length()){if(registerDownloadableDataset)registerDownloadableDataset(dataset);var flatData=dataset.flatten({order:"preorder",nestingName:"__nest"}).data;if(isThumbnail&&flatData.length){flatData.shift()}newState.flatData=flatData;newState.selectedRows=this.precalculateSelection(newState.flatData,essence)}this.setState(newState)};Table.prototype.precalculateSelection=function(flatData,essence){var _this=this;if(!flatData||!essence)return[];var splits=essence.splits,timezone=essence.timezone;var selectedRows=[];flatData.forEach(function(d,i){var nest=d["__nest"];if(nest===0)return;var selected=_this.checkSelection(essence,d).selected;if(selected){var split=splits.get(nest-1);if(!split)return;selectedRows.push({y:i*ROW_HEIGHT,index:i,datum:d,segmentLabel:formatter_1.formatValue(d[split.dimension],timezone),dimension:essence.getDimension(split.dimension)})}});return selectedRows};Table.prototype.getScalesForColumns=function(essence,flatData){var measuresArray=essence.getEffectiveMeasures();var splitLength=essence.splits.length();return measuresArray.map(function(measure){var measureValues=flatData.filter(function(d){return d["__nest"]===splitLength}).map(function(d){return Math.abs(d[measure.name])});measureValues.push(0);return d3_scale_1.scaleLinear().domain(d3_array_1.extent(measureValues)).range([0,100])})};Table.prototype.getFormattersFromMeasures=function(essence,flatData){var measuresArray=essence.getEffectiveMeasures();return measuresArray.map(function(measure){var measureName=measure.name;var measureValues=flatData.map(function(d){return d[measureName]});return formatter_1.formatterFromData(measureValues,measure.getFormat())})};Table.prototype.getIdealMeasureWidth=function(essence){var availableWidth=this.state.stage.width-this.getSegmentWidth()-PADDING_RIGHT-PADDING_LEFT;var columnsCount=essence.getEffectiveMeasures().length;return columnsCount*MEASURE_WIDTH>=availableWidth?MEASURE_WIDTH:availableWidth/columnsCount};Table.prototype.makeMeasuresRenderer=function(essence,formatters,hScales){var measuresArray=essence.getEffectiveMeasures();var idealWidth=this.getIdealMeasureWidth(essence);var splitLength=essence.splits.length();var isSingleMeasure=measuresArray.length===1;var className=classNames("measure",{"all-alone":!!isSingleMeasure});return function(datum){return measuresArray.map(function(measure,i){var measureValue=datum[measure.name];var measureValueStr=formatters[i](measureValue);var background=null;if(datum["__nest"]===splitLength){var backgroundWidth=hScales[i](Math.abs(measureValue));background=React.createElement("div",{className:"background-container"},React.createElement("div",{className:classNames("background",measureValue>=0?"positive":"negative"),style:{width:backgroundWidth+"%"}}))}return React.createElement("div",{className:className,key:measure.name,style:{width:idealWidth}},background,React.createElement("div",{className:"label"},measureValueStr))})}};Table.prototype.renderHeaderColumns=function(essence,hoverMeasure,measureWidth){var commonSort=essence.splits.getCommonSort();var commonSortName=commonSort?commonSort.expression.name:null;var sortArrowIcon=commonSort?React.createElement(caladan_1.SvgIcon,{svg:Icons.SORT_ARROW,className:"sort-arrow "+commonSort.direction}):null;return essence.getEffectiveMeasures().map(function(measure,i){var amISorted=commonSortName===measure.name;return React.createElement("div",{className:classNames("measure-name",{hover:measure===hoverMeasure,sorted:amISorted}),key:measure.name,style:{width:measureWidth}},React.createElement("div",{className:"title-wrap"},measure.title),amISorted?sortArrowIcon:null)})};Table.prototype.renderCornerSortArrow=function(essence){var commonSort=essence.splits.getCommonSort();if(!commonSort)return null;if(commonSort.refName()===models_1.SplitCombine.SORT_ON_DIMENSION_PLACEHOLDER){return React.createElement(caladan_1.SvgIcon,{svg:Icons.SORT_ARROW,className:"sort-arrow "+commonSort.direction})}return null};Table.prototype.onSimpleScroll=function(scrollTop,scrollLeft){this.setState({scrollLeft:scrollLeft,scrollTop:scrollTop})};Table.prototype.onLimitReached=function(limit){var _a=this.props,essence=_a.essence,clicker=_a.clicker;if(window.toInfinityAndBeyond&&limit===caladan_1.Scroller.BOTTOM_LIMIT){var split=essence.getEffectiveSplits().get(0);var limit_1=split.limitAction.value;var newSplit=split.changeLimitAction(plywood_1.Expression._.limit(limit_1+50));clicker.changeSplit(newSplit,models_1.VisStrategy.UnfairGame)}};Table.prototype.getVisibleIndices=function(){var _a=this.state,stage=_a.stage,flatData=_a.flatData,scrollTop=_a.scrollTop;return[Math.max(0,Math.floor(scrollTop/ROW_HEIGHT)),Math.min(flatData.length,Math.ceil((scrollTop+stage.height)/ROW_HEIGHT))]};Table.prototype.getScrollerLayout=function(){var _a=this.props,noScroll=_a.noScroll,essence=_a.essence;var _b=this.state,stage=_b.stage,flatData=_b.flatData;var measureWidth=this.getIdealMeasureWidth(essence);return{bodyWidth:noScroll?stage.width-this.getSegmentWidth():measureWidth*essence.getEffectiveMeasures().length+PADDING_RIGHT,bodyHeight:noScroll?stage.height-HEADER_HEIGHT:flatData?flatData.length*ROW_HEIGHT:0,bodyPadding:{bottom:50},top:HEADER_HEIGHT,right:0,bottom:0,left:this.getSegmentWidth()}};Table.prototype.checkSelection=function(essence,datum){var splits=essence.splits;if(!essence.highlightOn(this.id))return{selected:false,selectedClass:""};var highlightDelta=essence.highlight.delta;if(!highlightDelta)return{selected:false,selectedClass:""};var filter=this.getFilterFromDatum(splits,datum);if(!filter)return{selected:false,selectedClass:"not-selected"}
;var selected=this.isDatumSelected(highlightDelta,splits,datum);return{selected:selected,selectedClass:selected?"selected":"not-selected"}};Table.prototype.scrollIntoView=function(rowIndex){var stage=this.state.stage;var eventContainer=ReactDOM.findDOMNode(this._scroller).getElementsByClassName("event-container")[0];eventContainer.scrollTop=rowIndex*ROW_HEIGHT-stage.height/2+HEADER_HEIGHT};Table.prototype.renderHighlightBubble=function(){var _a=this.props,clicker=_a.clicker,openRawDataModal=_a.openRawDataModal;var _b=this.state,scrollTop=_b.scrollTop,selectedRows=_b.selectedRows,stage=_b.stage;var row=selectedRows.sort(function(a,b){return a.y-b.y})[0];if(!row)return null;var n=selectedRows.length;var label=n>1?n+" selections":row.segmentLabel;var apparentY=row.y-scrollTop-HIGHLIGHT_BUBBLE_V_OFFSET;var selectionIsUp=apparentY<0;var selectionIsDown=apparentY>stage.height-HEADER_HEIGHT;if(selectionIsDown||selectionIsUp){return segment_bubble_1.SegmentBubble.getTinyIndicator({left:stage.x+stage.width/2,top:stage.y+HEADER_HEIGHT+(selectionIsUp?0:stage.height-HEADER_HEIGHT),direction:selectionIsUp?"down":"up",label:label,onClick:this.scrollIntoView.bind(this,row.index)})}return React.createElement(segment_bubble_1.SegmentBubble,{left:stage.x+stage.width/2,top:stage.y+HEADER_HEIGHT+row.y-scrollTop-HIGHLIGHT_BUBBLE_V_OFFSET,segmentLabel:label,dimensions:[row.dimension],clicker:clicker,openRawDataModal:openRawDataModal})};Table.prototype.renderHighlighters=function(){var _a=this.state,scrollTop=_a.scrollTop,selectedRows=_a.selectedRows;if(selectedRows.length===0)return[];var nest=selectedRows[0].datum["__nest"];var left=Math.max(0,nest-1)*INDENT_WIDTH;var spans=[];var lastRow;selectedRows.forEach(function(row){if(lastRow&&lastRow.index+1===row.index){spans[spans.length-1].height+=ROW_HEIGHT}else{spans.push({y:row.y,height:ROW_HEIGHT})}lastRow=row});return spans.map(function(span,i){return React.createElement("div",{className:"highlighter",key:"highlight-"+i,style:{top:span.y-scrollTop,left:left,height:span.height}})})};Table.prototype.renderInternals=function(){var _this=this;var _a=this.props,clicker=_a.clicker,essence=_a.essence;var _b=this.state,flatData=_b.flatData,scrollTop=_b.scrollTop,hoverMeasure=_b.hoverMeasure,hoverRow=_b.hoverRow;var splits=essence.splits,timezone=essence.timezone;var idealWidth=this.getIdealMeasureWidth(essence);var headerColumns=this.renderHeaderColumns(essence,hoverMeasure,idealWidth);var rowWidth=idealWidth*headerColumns.length;var segments=[];var rows=[];if(flatData){var formatters=this.getFormattersFromMeasures(essence,flatData);var hScales=this.getScalesForColumns(essence,flatData);var _c=this.getVisibleIndices(),skipNumber=_c[0],lastElementToShow=_c[1];var measuresRenderer=this.makeMeasuresRenderer(essence,formatters,hScales);var rowY=skipNumber*ROW_HEIGHT;for(var i=skipNumber;i<lastElementToShow;i++){var d=flatData[i];var nest=d["__nest"];var split=nest>0?splits.get(nest-1):null;var dimension=split?split.dimension:null;var segmentValue=dimension?d[dimension]:"";var segmentLabel=nest?formatter_1.formatValue(segmentValue,timezone):"Total";var left=Math.max(0,nest-1)*INDENT_WIDTH;var segmentStyle={left:left,width:this.getSegmentWidth()-left,top:rowY};var hoverClass=d===hoverRow?"hover":null;var selectedClass=this.checkSelection(essence,d).selectedClass;var nestClass="nest"+nest;segments.push(React.createElement("div",{className:classNames("segment",nestClass,selectedClass,hoverClass),key:"_"+i,style:segmentStyle},segmentLabel));rows.push(React.createElement("div",{className:classNames("row",nestClass,selectedClass,hoverClass),key:"_"+i,style:{top:rowY,width:rowWidth}},measuresRenderer(d)));rowY+=ROW_HEIGHT}}var segmentLabels=React.createElement("div",{className:"segment-labels"},segments);var overlay=React.createElement("div",{className:"highlight-cont"},this.renderHighlighters());var corner=React.createElement("div",{className:"corner"},React.createElement("div",{className:"corner-wrap"},splits.getTitle(essence.getDimensions())),this.renderCornerSortArrow(essence));var scrollerLayout=this.getScrollerLayout();return React.createElement("div",{className:"internals table-inner"},React.createElement(caladan_1.Scroller,{ref:function(scroller){return _this._scroller=scroller},layout:scrollerLayout,topGutter:headerColumns,leftGutter:segmentLabels,topLeftCorner:corner,body:rows,overlay:overlay,onClick:this.onClick.bind(this),onMouseMove:this.onMouseMove.bind(this),onMouseLeave:this.onMouseLeave.bind(this),onScroll:this.onSimpleScroll.bind(this),onLimitReached:this.onLimitReached.bind(this)}),this.renderHighlightBubble())};return Table}(base_visualization_1.BaseVisualization);Table.visName=models_1.TABLE_MANIFEST.name;exports.Table=Table},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(0);var classNames=__webpack_require__(9);var plywood_1=__webpack_require__(6);var React=__webpack_require__(1);var models_1=__webpack_require__(10);var base_visualization_1=__webpack_require__(751);__webpack_require__(976);var PADDING_H=60;var TOTAL_WIDTH=176;var Totals=function(_super){tslib_1.__extends(Totals,_super);function Totals(){return _super.call(this)||this}Totals.prototype.componentWillReceiveProps=function(nextProps){this.precalculate(nextProps);var _a=this.props,essence=_a.essence,timekeeper=_a.timekeeper;var nextEssence=nextProps.essence;var nextTimekeeper=nextProps.timekeeper;if(nextEssence.differentDataCube(essence)||nextEssence.differentEffectiveFilter(essence,timekeeper,nextTimekeeper,this.id)||nextEssence.newEffectiveMeasures(essence)){this.fetchData(nextEssence,nextTimekeeper)}};Totals.prototype.makeQuery=function(essence,timekeeper){var dimensions=essence.getDimensions();var query=plywood_1.ply().apply("main",plywood_1.$("main").filter(essence.getEffectiveFilter(timekeeper,this.id).toExpression(dimensions)));essence.getEffectiveMeasures().forEach(function(measure){query=query.performAction(measure.toApplyAction())});return query};Totals.prototype.precalculate=function(props,datasetLoad){if(datasetLoad===void 0){datasetLoad=null}var registerDownloadableDataset=props.registerDownloadableDataset;var existingDatasetLoad=this.state.datasetLoad;var newState={};if(datasetLoad){if(datasetLoad.loading)datasetLoad.dataset=existingDatasetLoad.dataset;newState.datasetLoad=datasetLoad}else{datasetLoad=existingDatasetLoad}var dataset=datasetLoad.dataset;if(dataset){if(registerDownloadableDataset)registerDownloadableDataset(dataset)}this.setState(newState)};Totals.prototype.renderInternals=function(){var _a=this.props,essence=_a.essence,noScroll=_a.noScroll;var _b=this.state,stage=_b.stage,datasetLoad=_b.datasetLoad;var myDatum=datasetLoad.dataset?datasetLoad.dataset.data[0]:null;var measures=essence.getEffectiveMeasures();var single=measures.length===1;var totals=measures.map(function(measure){return React.createElement("div",{className:"total"+(single?" single":""),key:measure.name},React.createElement("div",{className:"measure-name"},measure.title),React.createElement("div",{className:"measure-value"},myDatum?measure.formatDatum(myDatum):"-"))});var totalContainerStyle=null;if(!single){var numColumns=Math.min(totals.length,Math.max(1,Math.floor((stage.width-2*PADDING_H)/TOTAL_WIDTH)));var containerWidth=numColumns*TOTAL_WIDTH;totalContainerStyle={left:"50%",width:containerWidth,marginLeft:-containerWidth/2}}return React.createElement("div",{className:classNames("internals",{"no-scroll":noScroll})},React.createElement("div",{className:"total-container",style:totalContainerStyle},totals))};return Totals}(base_visualization_1.BaseVisualization);Totals.visName=models_1.TOTALS_MANIFEST.name;exports.Totals=Totals},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".pivot-application{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;background:#e1e1e1}.pivot-application .not-implemented{display:none}.pivot-application .home-view,.pivot-application .no-data-view,.pivot-application .cube-view,.pivot-application .cube-edit-view,.pivot-application .link-view{position:absolute;top:0;bottom:0;left:0;right:0}.pivot-application .side-drawer-container{position:absolute;left:0;top:0;bottom:0;z-index:80}.pivot-application .side-drawer-container .side-drawer .nav-logo .logo{height:38px;top:16px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".attribute-modal form{width:448px}.attribute-modal form.vertical>*{display:block}.attribute-modal form input{border:1px solid #d4d4d4;border-radius:2px;box-shadow:inset 0 1px 1px rgba(0,0,0,0.13);padding-left:6px;padding-right:6px;width:100%;height:30px}.attribute-modal form input:hover{border-color:#b8b8b8}.attribute-modal form input:focus{border-color:#1ea3e6}.attribute-modal form input.error{border-color:#e24c4c}.attribute-modal form .dropdown .dropdown-label{margin-bottom:8px}.attribute-modal form input:not(.actionable),.attribute-modal form .input:not(.actionable),.attribute-modal form .checkbox:not(.actionable){margin-bottom:25px}.attribute-modal form textarea{height:120px;outline:none;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13px;line-height:16px;padding:6px;margin-bottom:25px}.attribute-modal form .checkbox{height:20px;width:100%}.attribute-modal form .checkbox .label{position:absolute;left:25px;top:5px}.attribute-modal form{width:448px}.attribute-modal form.vertical>*{display:block}.attribute-modal form .dropdown .dropdown-label{margin-bottom:8px}.attribute-modal form input:not(.actionable),.attribute-modal form .input:not(.actionable),.attribute-modal form .checkbox:not(.actionable){margin-bottom:25px}.attribute-modal form textarea{height:120px;outline:none;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13px;line-height:16px;padding:6px;margin-bottom:25px}.attribute-modal form .checkbox{height:20px;width:100%}.attribute-modal form .checkbox .label{position:absolute;left:25px;top:5px}.attribute-modal form input{border:1px solid #d4d4d4;border-radius:2px;box-shadow:inset 0 1px 1px rgba(0,0,0,0.13);padding-left:6px;padding-right:6px;width:100%;height:30px}.attribute-modal form input:hover{border-color:#b8b8b8}.attribute-modal form input:focus{border-color:#1ea3e6}.attribute-modal form input.error{border-color:#e24c4c}.attribute-modal form input.disabled{pointer-events:none;background:#f2f2f2}.attribute-modal form{width:100%}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".data-cube-seed-modal form{width:448px}.data-cube-seed-modal form.vertical>*{display:block}.data-cube-seed-modal form input{border:1px solid #d4d4d4;border-radius:2px;box-shadow:inset 0 1px 1px rgba(0,0,0,0.13);padding-left:6px;padding-right:6px;width:100%;height:30px}.data-cube-seed-modal form input:hover{border-color:#b8b8b8}.data-cube-seed-modal form input:focus{border-color:#1ea3e6}.data-cube-seed-modal form input.error{border-color:#e24c4c}.data-cube-seed-modal form .dropdown .dropdown-label{margin-bottom:8px}.data-cube-seed-modal form input:not(.actionable),.data-cube-seed-modal form .input:not(.actionable),.data-cube-seed-modal form .checkbox:not(.actionable){margin-bottom:25px}.data-cube-seed-modal form textarea{height:120px;outline:none;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13px;line-height:16px;padding:6px;margin-bottom:25px}.data-cube-seed-modal form .checkbox{height:20px;width:100%}.data-cube-seed-modal form .checkbox .label{position:absolute;left:25px;top:5px}.data-cube-seed-modal form{width:448px}.data-cube-seed-modal form.vertical>*{display:block}.data-cube-seed-modal form .dropdown .dropdown-label{margin-bottom:8px}.data-cube-seed-modal form input:not(.actionable),.data-cube-seed-modal form .input:not(.actionable),.data-cube-seed-modal form .checkbox:not(.actionable){margin-bottom:25px}.data-cube-seed-modal form textarea{height:120px;outline:none;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13px;line-height:16px;padding:6px;margin-bottom:25px}.data-cube-seed-modal form .checkbox{height:20px;width:100%}.data-cube-seed-modal form .checkbox .label{position:absolute;left:25px;top:5px}.data-cube-seed-modal form input{border:1px solid #d4d4d4;border-radius:2px;box-shadow:inset 0 1px 1px rgba(0,0,0,0.13);padding-left:6px;padding-right:6px;width:100%;height:30px}.data-cube-seed-modal form input:hover{border-color:#b8b8b8}.data-cube-seed-modal form input:focus{border-color:#1ea3e6}.data-cube-seed-modal form input.error{border-color:#e24c4c}.data-cube-seed-modal form input.disabled{pointer-events:none;background:#f2f2f2}.data-cube-seed-modal form{width:100%}.data-cube-seed-modal form .checkbox{margin-top:25px}.data-cube-seed-modal form .checkbox.selected .checkbox-body{background:#1ea3e6}.data-cube-seed-modal form .checkbox .label{top:4px;text-transform:initial;color:#666;font-size:13px}.data-cube-seed-modal .loading-bar{margin-top:10px}.data-cube-seed-modal .button-bar{text-align:right}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".dimension-modal form{width:448px}.dimension-modal form.vertical>*{display:block}.dimension-modal form input{border:1px solid #d4d4d4;border-radius:2px;box-shadow:inset 0 1px 1px rgba(0,0,0,0.13);padding-left:6px;padding-right:6px;width:100%;height:30px}.dimension-modal form input:hover{border-color:#b8b8b8}.dimension-modal form input:focus{border-color:#1ea3e6}.dimension-modal form input.error{border-color:#e24c4c}.dimension-modal form .dropdown .dropdown-label{margin-bottom:8px}.dimension-modal form input:not(.actionable),.dimension-modal form .input:not(.actionable),.dimension-modal form .checkbox:not(.actionable){margin-bottom:25px}.dimension-modal form textarea{height:120px;outline:none;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13px;line-height:16px;padding:6px;margin-bottom:25px}.dimension-modal form .checkbox{height:20px;width:100%}.dimension-modal form .checkbox .label{position:absolute;left:25px;top:5px}.dimension-modal form{width:448px}.dimension-modal form.vertical>*{display:block}.dimension-modal form .dropdown .dropdown-label{margin-bottom:8px}.dimension-modal form input:not(.actionable),.dimension-modal form .input:not(.actionable),.dimension-modal form .checkbox:not(.actionable){margin-bottom:25px}.dimension-modal form textarea{height:120px;outline:none;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13px;line-height:16px;padding:6px;margin-bottom:25px}.dimension-modal form .checkbox{height:20px;width:100%}.dimension-modal form .checkbox .label{position:absolute;left:25px;top:5px}.dimension-modal form input{border:1px solid #d4d4d4;border-radius:2px;box-shadow:inset 0 1px 1px rgba(0,0,0,0.13);padding-left:6px;padding-right:6px;width:100%;height:30px}.dimension-modal form input:hover{border-color:#b8b8b8}.dimension-modal form input:focus{border-color:#1ea3e6}.dimension-modal form input.error{border-color:#e24c4c}.dimension-modal form input.disabled{pointer-events:none;background:#f2f2f2}.dimension-modal .suggestions .items{background:#f5f5f5;padding:10px 0;max-height:300px;overflow:auto}.dimension-modal .suggestions .items .message{padding:4px 10px;color:#999;font-style:italic}.dimension-modal .suggestions .items .row{padding-left:14px;padding-top:3px;height:27px;cursor:pointer;white-space:nowrap}.dimension-modal .suggestions .items .row .label{position:absolute;top:5px;left:24px}.dimension-modal .suggestions .items .row:hover{background:#eee}.dimension-modal form{width:100%}.dimension-modal form .dropdown.column+.light-action,.dimension-modal form input.column+.light-action{margin-top:-20px;margin-bottom:10px}.dimension-modal form .dropdown-menu{max-height:230px;overflow:auto}.dimension-modal .suggestions .items{margin-bottom:25px}.dimension-modal .suggestions .items .checkbox{margin-bottom:5px}.dimension-modal .add-url{display:inline-block;margin-bottom:25px;color:#1ea3e6;cursor:pointer}.dimension-modal .button-group{margin-bottom:20px}.dimension-modal .button-bar{text-align:right}.dimension-modal .modal{width:550px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".edit-collection-modal form{width:448px}.edit-collection-modal form.vertical>*{display:block}.edit-collection-modal form input{border:1px solid #d4d4d4;border-radius:2px;box-shadow:inset 0 1px 1px rgba(0,0,0,0.13);padding-left:6px;padding-right:6px;width:100%;height:30px}.edit-collection-modal form input:hover{border-color:#b8b8b8}.edit-collection-modal form input:focus{border-color:#1ea3e6}.edit-collection-modal form input.error{border-color:#e24c4c}.edit-collection-modal form .dropdown .dropdown-label{margin-bottom:8px}.edit-collection-modal form input:not(.actionable),.edit-collection-modal form .input:not(.actionable),.edit-collection-modal form .checkbox:not(.actionable){margin-bottom:25px}.edit-collection-modal form textarea{height:120px;outline:none;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13px;line-height:16px;padding:6px;margin-bottom:25px}.edit-collection-modal form .checkbox{height:20px;width:100%}.edit-collection-modal form .checkbox .label{position:absolute;left:25px;top:5px}.edit-collection-modal form{width:448px}.edit-collection-modal form.vertical>*{display:block}.edit-collection-modal form .dropdown .dropdown-label{margin-bottom:8px}.edit-collection-modal form input:not(.actionable),.edit-collection-modal form .input:not(.actionable),.edit-collection-modal form .checkbox:not(.actionable){margin-bottom:25px}.edit-collection-modal form textarea{height:120px;outline:none;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13px;line-height:16px;padding:6px;margin-bottom:25px}.edit-collection-modal form .checkbox{height:20px;width:100%}.edit-collection-modal form .checkbox .label{position:absolute;left:25px;top:5px}.edit-collection-modal form input{border:1px solid #d4d4d4;border-radius:2px;box-shadow:inset 0 1px 1px rgba(0,0,0,0.13);padding-left:6px;padding-right:6px;width:100%;height:30px}.edit-collection-modal form input:hover{border-color:#b8b8b8}.edit-collection-modal form input:focus{border-color:#1ea3e6}.edit-collection-modal form input.error{border-color:#e24c4c}.edit-collection-modal form input.disabled{pointer-events:none;background:#f2f2f2}.edit-collection-modal form{width:100%}.edit-collection-modal .add-description{display:inline-block;margin-top:-10px;margin-bottom:25px;color:#1ea3e6;cursor:pointer}.edit-collection-modal .layout-picker{margin-bottom:25px}.edit-collection-modal .checkbox-group .checkbox:first-child{margin-bottom:10px}.edit-collection-modal .action-buttons{margin-bottom:25px}.edit-collection-modal .action-buttons .button{margin-right:8px}.edit-collection-modal .button-bar{text-align:right}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".expired-modal p{margin-bottom:14px;line-height:20px}.expired-modal p:last-child{margin-bottom:0}.expired-modal a{color:#1ea3e6;cursor:pointer}.expired-modal a:hover{text-decoration:underline}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".measure-modal .suggestions .items{background:#f5f5f5;padding:10px 0;max-height:300px;overflow:auto}.measure-modal .suggestions .items .message{padding:4px 10px;color:#999;font-style:italic}.measure-modal .suggestions .items .row{padding-left:14px;padding-top:3px;height:27px;cursor:pointer;white-space:nowrap}.measure-modal .suggestions .items .row .label{position:absolute;top:5px;left:24px}.measure-modal .suggestions .items .row:hover{background:#eee}.measure-modal .form .grid-row{margin-bottom:10px}.measure-modal .suggestions .items{margin-bottom:25px}.measure-modal .suggestions .items .checkbox{margin-bottom:5px}.measure-modal .button-group{margin-bottom:20px}.measure-modal .button-bar{text-align:right;margin-top:30px}.measure-modal .modal{width:550px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".raw-data-modal .content{position:absolute;top:60px;bottom:0;left:0;right:0;left:18px;right:18px;overflow:hidden}.raw-data-modal .content .filters{position:absolute;top:0;bottom:0;left:0;right:0;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;height:30px;color:#999}.raw-data-modal .content .filters .limit,.raw-data-modal .content .filters .filter{font-size:13px;height:30px;display:inline}.raw-data-modal .content .filters .filter:not(:last-child)::after{content:'; '}.raw-data-modal .content .scroller{position:absolute;top:30px;bottom:66px;left:0;right:0;border:1px solid #dedede;cursor:auto}.raw-data-modal .content .scroller .row{height:30px;position:absolute;border-bottom:1px solid #dedede}.raw-data-modal .content .scroller .header-cell,.raw-data-modal .content .scroller .cell{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;display:inline-block;height:100%;border-right:1px solid #dedede;padding-left:6px;padding-right:6px;padding-top:8px}.raw-data-modal .content .scroller .header-cell.unsplitable,.raw-data-modal .content .scroller .cell.unsplitable{background:#f5f5f5}.raw-data-modal .content .scroller .header-cell{background:#f5f5f5;height:30px;border-bottom:1px solid #dedede}.raw-data-modal .content .scroller .header-cell .title-wrap{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;display:inline-block;width:100%;height:100%}.raw-data-modal .content .loader,.raw-data-modal .content .query-error{position:absolute;top:0;bottom:0;left:0;right:0}.raw-data-modal .content .button-bar{position:absolute;left:0;right:0;bottom:18px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".expired-modal p{margin-bottom:14px;line-height:20px}.expired-modal p:last-child{margin-bottom:0}.expired-modal a{color:#1ea3e6;cursor:pointer}.expired-modal a:hover{text-decoration:underline}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".album-layout{overflow:auto}.album-layout .container{width:86%;margin-left:auto;margin-right:auto;padding:5px}.album-layout .container .tile-wrapper{display:inline-block;width:33.3333333333%;height:18vw}.album-layout .container .tile-wrapper .collection-tile-card{position:absolute;top:5px;bottom:5px;left:5px;right:5px}.album-layout .container .tile-wrapper.edition{cursor:move}.album-layout .container .tile-wrapper.dragged{opacity:0.4}.album-layout .container .tile-wrapper.drop-before::after{content:'';position:absolute;top:25px;bottom:25px;left:-2px;width:2px;border-right:2px dashed #1ea3e6}.album-layout .container .tile-wrapper.drop-after::after{content:'';position:absolute;top:25px;bottom:25px;right:-2px;width:2px;border-right:2px dashed #1ea3e6}.album-layout.empty{height:100%;color:#bababa;text-align:center}.album-layout.empty .container{position:absolute;left:50%;top:40%;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}.album-layout.empty .container .svg-icon{width:60px}.album-layout.empty .container .svg-icon path{fill:#bababa}.album-layout.empty .container .placeholder{font-size:16px;font-style:italic;margin-top:14px}@media all and (max-width: 1600px){.album-layout .container .tile-wrapper{width:50%;height:24vw}}@media all and (max-width: 1080px){.album-layout .container{width:100%}.album-layout .container .tile-wrapper{height:30vw}}@media all and (max-width: 900px){.album-layout .container{width:100%}.album-layout .container .tile-wrapper{width:100%;height:52vw}}@media all and (max-width: 700px){.album-layout .container{width:100%}.album-layout .container .tile-wrapper{width:100%;height:60vw}}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".collection-header-bar .title-wrapper{display:inline-block;padding:0 2px 0 4px}.collection-header-bar .title-cont{display:inline-block;font-size:14px;line-height:18px;margin-top:11px;font-weight:600}.collection-header-bar .title-cont .static{padding-right:3px}.collection-header-bar .title-cont.editing{cursor:text}.collection-header-bar .title-cont.editing .static{opacity:0.001}.collection-header-bar .title-cont input{position:absolute;left:0;top:0;width:100%;height:100%;padding:0;color:#fff;border-bottom:1px dashed #fff;background:none;font-weight:inherit}.collection-header-bar .description-wrapper{display:inline-block;height:100%}.collection-header-bar .description{opacity:0.62;display:inline-block;padding:11px 5px}.collection-header-bar .description:hover{opacity:0.85}.collection-header-bar .description svg path{fill:#fff}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".collection-tile-card{background:#fff;border-radius:2px}.collection-tile-card.editing .headband{cursor:inherit}.collection-tile-card.editing:after{content:'';pointer-events:none;position:absolute;top:-1px;bottom:-1px;left:-1px;right:-1px;border:2px solid #1ea3e6;border-radius:2px}.collection-tile-card.editing .content{pointer-events:none}.collection-tile-card.editing .headband{cursor:default}.collection-tile-card .headband{position:absolute;top:0;left:0;right:0;height:36px;border-bottom:1px solid #e6e6e6;cursor:pointer}.collection-tile-card .headband .left{position:absolute;left:16px;right:75px;height:100%;overflow:hidden}.collection-tile-card .headband .left .title{display:inline-block;color:#444;margin-top:8px;margin-right:5px;min-width:50px;height:18px;line-height:18px;overflow:hidden}.collection-tile-card .headband .left .title.editing{cursor:text}.collection-tile-card .headband .left .title.editing span{font-weight:600}.collection-tile-card .headband .left .title .static{padding-right:3px;white-space:nowrap}.collection-tile-card .headband .left .title input{position:absolute;left:0;top:0;width:100%;height:100%;padding:0;color:#1ea3e6;border-bottom:1px dashed #1ea3e6;font-weight:600}.collection-tile-card .headband .left .description{display:inline-block;height:100%}.collection-tile-card .headband .left .description svg{margin:8px 2px 0 2px;fill:#bababa}.collection-tile-card .headband .left .description svg.open{fill:#666}.collection-tile-card .headband .right{position:absolute;right:9px;height:100%}.collection-tile-card .headband .expand-button,.collection-tile-card .headband .edit-button,.collection-tile-card .headband .delete-button{display:inline-block;height:100%;cursor:pointer;width:31px}.collection-tile-card .headband .expand-button:hover:after,.collection-tile-card .headband .edit-button:hover:after,.collection-tile-card .headband .delete-button:hover:after{content:'';pointer-events:none;position:absolute;top:3px;left:1px;width:29px;height:29px;border-radius:29px}.collection-tile-card .headband .expand-button svg,.collection-tile-card .headband .edit-button svg,.collection-tile-card .headband .delete-button svg{margin:8px 6px;width:19px}.collection-tile-card .headband .edit-button:hover:after{background:rgba(30,163,230,0.2)}.collection-tile-card .headband .delete-button:hover:after{background:rgba(226,75,75,0.2)}.collection-tile-card .headband:hover .expand-button path{fill:#666}.collection-tile-card .headband .expand-button path{fill:#bababa}.collection-tile-card .headband .edit-button path{fill:#1ea3e6}.collection-tile-card .headband .delete-button path{fill:#e24c4c}.collection-tile-card .headband .delete-button:hover path{fill:#e24c4c}.collection-tile-card .content{position:absolute;top:36px;bottom:0;left:0;right:0}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".collection-view{position:absolute;top:0;bottom:0;left:0;right:0}.collection-view .header-bar{height:42px}.collection-view .album-layout,.collection-view .dashboard-layout{position:absolute;top:42px;bottom:0;left:0;right:0}.collection-view.filterable .album-layout,.collection-view.filterable .dashboard-layout{position:absolute;top:84px;bottom:0;left:0;right:0}.collection-view .filter-tile{position:absolute;top:42px;height:42px;left:0;right:0;background:#f0f0f0}.collection-view .filter-tile .title{padding-top:16px}.collection-view .filter-tile .items{top:3px;bottom:3px}.collection-view .filter-tile .items .filter{background:#9ddafb}.collection-view .filter-tile .items .filter:hover,.collection-view .filter-tile .items .filter:active,.collection-view .filter-tile .items .filter.selected{background:#85d1fa}.collection-view .filter-tile .items .filter.type-time,.collection-view .filter-tile .items .filter.type-number{background:#afe4b1}.collection-view .filter-tile .items .filter.type-time:hover,.collection-view .filter-tile .items .filter.type-time:active,.collection-view .filter-tile .items .filter.type-time.selected,.collection-view .filter-tile .items .filter.type-number:hover,.collection-view .filter-tile .items .filter.type-number:active,.collection-view .filter-tile .items .filter.type-number.selected{background:#9cdd9e}.collection-view .filter-tile .items .filter.from-highlight{border:1px dashed #168bc5;background:rgba(157,218,251,0.5)}.collection-view .filter-tile .items .filter.from-highlight.type-time,.collection-view .filter-tile .items .filter.from-highlight.type-number{border:1px dashed #449c53;background:rgba(175,228,177,0.5)}.collection-view .filter-tile .items .remove path{fill:rgba(0,0,0,0.25)}.collection-view .filter-tile.dummy .placeholder{display:inline-block;height:100%;font-size:13px;color:#a6a6a6;padding:15px 7px 0 16px;cursor:default;font-style:italic}.collection-view .filter-tile.dummy .delete-icon{display:inline-block;height:100%;padding:11px 1px;cursor:pointer;width:31px}.collection-view .filter-tile.dummy .delete-icon svg{width:19px;margin-left:5px}.collection-view .filter-tile.dummy .delete-icon svg path{fill:#aaa}.collection-view .filter-tile.dummy .delete-icon:hover:after{content:'';position:absolute;top:5px;left:0;width:31px;height:31px;border-radius:31px;background:black;opacity:0.1}.collection-view .filter-tile.dummy .delete-icon:hover svg path{fill:#777}.collection-view .collection-items{display:-webkit-box;display:-ms-flexbox;display:flex;width:80%;margin:0 auto;-ms-flex-wrap:wrap;flex-wrap:wrap}.collection-view .collection-items .collection-tile-card{-webkit-box-flex:1;-ms-flex:1 0;flex:1 0;-ms-flex-preferred-size:50%;flex-basis:50%}.collection-view.scrolled .header-bar{box-shadow:0 3px 5px -2px rgba(0,0,0,0.3)}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined)
;exports.push([module.i,".dashboard-layout{position:absolute;top:0;bottom:0;left:0;right:0;overflow:auto}.dashboard-layout.empty{height:100%;color:#bababa;text-align:center}.dashboard-layout.empty .container{position:absolute;left:50%;top:40%;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}.dashboard-layout.empty .container .svg-icon{width:60px}.dashboard-layout.empty .container .svg-icon path{fill:#bababa}.dashboard-layout.empty .container .placeholder{font-size:16px;font-style:italic;margin-top:14px}.dashboard-layout .cards{position:absolute}.dashboard-layout .unit{position:absolute;background:#000;opacity:0.05;text-align:center;padding-top:10px;border-radius:2px;pointer-events:none}.dashboard-layout .row-buttons{position:absolute;bottom:20px;left:20px}.dashboard-layout .row-buttons .modify-rows{display:inline-block;margin-right:10px;color:#1ea3e6;font-weight:600;line-height:19px;background:#fff;z-index:7;cursor:pointer;padding:8px 14px 8px 8px;border-radius:2px;box-shadow:0 3px 10px 0 rgba(0,0,0,0.26),0 0 3px 0 rgba(0,0,0,0.16)}.dashboard-layout .row-buttons .modify-rows svg{width:19px;fill:#1ea3e6;margin-right:3px}.dashboard-layout .row-buttons .modify-rows span{display:inline-block}.dashboard-layout .row-buttons .modify-rows.remove svg{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.dashboard-layout .tile-wrapper{position:absolute;border-radius:2px}.dashboard-layout .tile-wrapper.editing.invalid .collection-tile-card.editing:after{content:'';pointer-events:none;position:absolute;top:-1px;bottom:-1px;left:-1px;right:-1px;border:2px solid #e24c4c;border-radius:2px}.dashboard-layout .tile-wrapper.positioning{z-index:5;box-shadow:0 5px 7px -2px rgba(0,0,0,0.2)}.dashboard-layout .tile-wrapper .collection-tile-card{position:absolute;top:0;bottom:0;left:0;right:0}.dashboard-layout .tile-wrapper .edit-overlay{position:absolute;top:36px;bottom:0;left:0;right:0;background:#fff;opacity:0.2}.dashboard-layout .tile-wrapper .edit-handle{position:absolute}.dashboard-layout .tile-wrapper .edit-handle.move{left:4px;right:4px;top:36px;bottom:4px;cursor:move}.dashboard-layout .tile-wrapper .edit-handle.resize-top{left:4px;right:4px;top:-4px;height:8px;cursor:ns-resize}.dashboard-layout .tile-wrapper .edit-handle.resize-top-left{left:-4px;width:8px;top:-4px;height:8px;cursor:nwse-resize}.dashboard-layout .tile-wrapper .edit-handle.resize-top-right{right:-4px;width:8px;top:-4px;height:8px;cursor:nesw-resize}.dashboard-layout .tile-wrapper .edit-handle.resize-left{left:-4px;width:8px;top:4px;bottom:4px;cursor:ew-resize}.dashboard-layout .tile-wrapper .edit-handle.resize-right{right:-4px;width:8px;top:4px;bottom:4px;cursor:ew-resize}.dashboard-layout .tile-wrapper .edit-handle.resize-bottom{left:4px;right:4px;bottom:-4px;height:8px;cursor:ns-resize}.dashboard-layout .tile-wrapper .edit-handle.resize-bottom-left{left:-4px;width:8px;bottom:-4px;height:8px;cursor:nesw-resize}.dashboard-layout .tile-wrapper .edit-handle.resize-bottom-right{right:-4px;width:8px;bottom:-4px;height:8px;cursor:nwse-resize}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".cube-edit-view .tab-content .dimension-list .list-title .actions .search-button .clearable-input,.cube-edit-view .tab-content .measure-list .list-title .actions .search-button .clearable-input{background:#fff;border:1px solid #d1d1d1;border-radius:2px;box-shadow:inset 0 1px 1px 0 rgba(0,0,0,0.1)}.cube-edit-view .cube-edit-content{position:absolute;top:42px;bottom:0;left:0;right:0;padding:10px 10px}.cube-edit-view .flat-modal{margin-left:auto;margin-right:auto;background-color:white;max-width:1000px;height:100%}.cube-edit-view .tabs{position:absolute;top:0;bottom:70px;width:190px;border-right:1px solid #e6e6e6;padding:12px 0}.cube-edit-view .tabs button{background-color:transparent;display:block;width:100%;height:38px;text-align:left;color:#1ea3e6;border-radius:0px}.cube-edit-view .tabs button.icon{padding-left:38px}.cube-edit-view .tabs button.icon .svg-icon{position:absolute;top:9px;left:12px}.cube-edit-view .tabs button.icon .svg-icon path{fill:#1ea3e6}.cube-edit-view .tabs button:hover{background-color:#e3f4fc}.cube-edit-view .tabs button:active{color:#1ea3e6}.cube-edit-view .tabs button.active{background-color:#1ea3e6;color:white}.cube-edit-view .tabs button.active .svg-icon path{fill:white}.cube-edit-view .tab-content{position:absolute;top:0;bottom:70px;left:190px;right:0;overflow:auto}.cube-edit-view .tab-content .tab-title{font-size:16px;text-transform:capitalize;padding:0 24px;height:56px;line-height:55px;border-bottom:1px solid #e6e6e6}.cube-edit-view .tab-content .form{width:620px;padding:10px 24px 24px 24px}.cube-edit-view .tab-content .form.advanced{position:absolute;top:56px;bottom:0;width:100%;overflow:scroll}.cube-edit-view .tab-content .form .msg{padding-bottom:8px}.cube-edit-view .tab-content .form .info-spot{position:absolute;top:8px;margin-left:16px}.cube-edit-view .tab-content .form textarea{height:200px;outline:none;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13px;line-height:16px;padding:6px}.cube-edit-view .tab-content .dimension-list,.cube-edit-view .tab-content .measure-list{position:absolute;position:absolute;top:0;bottom:0;left:0;right:0}.cube-edit-view .tab-content .dimension-list .list-title,.cube-edit-view .tab-content .measure-list .list-title{width:initial;height:56px;padding-left:24px;padding-right:24px;padding-top:11px}.cube-edit-view .tab-content .dimension-list .list-title .label,.cube-edit-view .tab-content .measure-list .list-title .label{font-size:16px;text-transform:capitalize;color:#454545}.cube-edit-view .tab-content .dimension-list .list-title .actions .search-button button,.cube-edit-view .tab-content .measure-list .list-title .actions .search-button button{width:30px}.cube-edit-view .tab-content .dimension-list .list-title .actions .search-button .clearable-input,.cube-edit-view .tab-content .measure-list .list-title .actions .search-button .clearable-input{padding-left:6px;padding-right:22px;height:30px}.cube-edit-view .tab-content .dimension-list .list-title .actions .search-button .clearable-input .clear,.cube-edit-view .tab-content .measure-list .list-title .actions .search-button .clearable-input .clear{top:7px;right:6px}.cube-edit-view .tab-content .dimension-list .simple-list,.cube-edit-view .tab-content .measure-list .simple-list{padding-left:24px;padding-right:24px;top:56px}.cube-edit-view .tab-content .dimension-list .simple-list .item,.cube-edit-view .tab-content .measure-list .simple-list .item{width:initial}.cube-edit-view .tab-content .columns{height:500px}.cube-edit-view .tab-content .buttons{padding:10px 0}.cube-edit-view .tab-content .buttons>button:not(:last-child){margin-right:10px}.cube-edit-view .button-bar{position:absolute;bottom:0;height:70px;left:0;right:0;text-align:right;border-top:1px solid #e6e6e6;padding:20px}.cube-edit-view .button-bar>*:not(:first-child){margin-left:10px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".cube-header-bar .refreshing svg{-webkit-animation-name:rotate;animation-name:rotate;-webkit-animation-duration:1s;animation-duration:1s}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.add-to-collection-menu.bubble-menu ul.bubble-list li{cursor:pointer}.add-to-collection-menu.bubble-menu ul.bubble-list li.label{cursor:default;pointer-events:none;color:#bababa}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".cube-view .center-panel .center-main .visualization{background:#fff}.cube-view .cube-header-bar,.cube-view .supervised-cube-header-bar{position:absolute;top:0;left:0;right:0;height:42px}.cube-view .container{position:absolute;top:42px;bottom:0;left:0;right:0}.cube-view .dimension-measure-panel{position:absolute;top:0;bottom:0;left:0;width:240px;top:10px;bottom:10px;left:10px}@media only screen and (max-width: 1080px){.cube-view .dimension-measure-panel{padding:0 1px 0 0;top:0;right:1px;bottom:0;left:0;font-size:0.9em}}.cube-view .dimension-measure-panel>*{position:absolute;left:0;right:0}@media only screen and (max-width: 1080px){.cube-view .dimension-measure-panel>*{right:1px}}.cube-view .dimension-measure-panel .dimension-list-tile{top:0;border-radius:2px 2px 0 0}.cube-view .dimension-measure-panel .resize-handle svg{display:none}.cube-view .dimension-measure-panel .resize-handle.top{margin-top:0}.cube-view .dimension-measure-panel .measures-tile{margin-top:1px;bottom:0;border-radius:0 0 2px 2px}.cube-view .center-panel{position:absolute;top:10px;bottom:10px;left:240px;right:240px}@media only screen and (max-width: 1080px){.cube-view .center-panel{top:0;bottom:0}}.cube-view .center-panel .center-top-bar{position:absolute;top:0;left:0;right:0;height:73px}.cube-view .center-panel .center-top-bar .filter-split-section{position:absolute;top:0;bottom:0;left:0;right:79px}.cube-view .center-panel .center-top-bar .filter-tile,.cube-view .center-panel .center-top-bar .split-tile{height:36px}.cube-view .center-panel .center-top-bar .filter-tile{margin-bottom:1px;border-radius:2px 0 0 0}.cube-view .center-panel .center-top-bar .split-tile{border-radius:0 0 0 2px}.cube-view .center-panel .center-top-bar .vis-selector{position:absolute;top:0;bottom:0;right:0;width:78px;z-index:8;border-radius:0 2px 2px 0}.cube-view .center-panel .center-main{position:absolute;top:78px;bottom:0;left:0;right:0}@media only screen and (max-width: 1080px){.cube-view .center-panel .center-main{position:absolute;top:74px;bottom:0;left:0;right:0}}.cube-view .center-panel .center-main .visualization{position:absolute;top:0;bottom:0;left:0;right:0;border-radius:2px}.cube-view .center-panel .center-main .manual-fallback{position:absolute;top:0;bottom:0;left:0;right:0}.cube-view .center-panel .center-main .drop-indicator{position:absolute;top:0;bottom:0;left:0;right:0;z-index:9}.cube-view .center-panel .center-main .drag-mask{position:absolute;top:0;bottom:0;left:0;right:0;z-index:10}.cube-view .pinboard-panel{position:absolute;top:0;bottom:0;right:0;width:240px;margin-bottom:9px}@media only screen and (max-width: 1080px){.cube-view .pinboard-panel{margin-bottom:0}}.cube-view .pinboard-panel .pinboard-measure-tile:first-child,.cube-view .pinboard-panel .dimension-tile:first-child,.cube-view .pinboard-panel .placeholder-tile:first-child{border-radius:2px 2px 0 0}.cube-view .pinboard-panel .pinboard-measure-tile:last-child,.cube-view .pinboard-panel .dimension-tile:last-child,.cube-view .pinboard-panel .placeholder-tile:last-child{border-radius:0 0 2px 2px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".supervised-cube-header-bar .left-bar .title{cursor:default;font-size:14px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".home-header-bar .title .primary{text-transform:lowercase}.home-header-bar .title .secondary{margin-left:4px;opacity:0.7}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".home-view.no-data .container{position:absolute;top:36%;left:50%;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%);text-align:center}.home-view.no-data .container .title{cursor:default}.home-view.no-data .container .title .icon{display:inline-block;margin-bottom:6px;width:42px}.home-view.no-data .container .title .icon path{fill:#999}.home-view.no-data .container .title .label{display:inline-block;height:46px;padding-top:13px;font-size:20px;color:#999}.home-view.no-data .container .action{color:#999}.home-view.no-data .container .action a,.home-view.no-data .container .action .link{cursor:pointer;color:#1ea3e6;border-bottom:1px dashed}.home-view .header-bar{position:absolute;top:0;left:0;right:0;height:42px}.home-view .container{position:absolute;top:42px;bottom:0;left:0;right:0;overflow-y:auto;padding-bottom:40px}.home-view .container .datacubes,.home-view .container .collections{margin-top:32px;margin-bottom:20px;padding:0 12%}.home-view .container .datacubes .section-title,.home-view .container .collections .section-title{text-transform:uppercase;color:#a6a6a6;margin-bottom:10px;font-size:15px}.home-view .container .datacubes .section-title .svg-icon,.home-view .container .collections .section-title .svg-icon{height:25px;width:auto}.home-view .container .datacubes .section-title .svg-icon path,.home-view .container .collections .section-title .svg-icon path{fill:#aaa}.home-view .container .datacubes .actions,.home-view .container .collections .actions{margin-top:-7px;padding-right:5px;display:none}.home-view .container .datacubes .actions>*,.home-view .container .collections .actions>*{cursor:pointer}.home-view .container .datacubes .actions>* .svg-icon,.home-view .container .collections .actions>* .svg-icon{height:20px;padding:1px 0 0 1px}.home-view .container .datacubes .actions>* .svg-icon path,.home-view .container .collections .actions>* .svg-icon path{fill:#1ea3e6}.home-view .container .datacubes .actions>*:hover .svg-icon path,.home-view .container .collections .actions>*:hover .svg-icon path{fill:#1795d3}.home-view .container .datacubes .items-container,.home-view .container .collections .items-container{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:-5px}.home-view .container .datacubes .items-container .item-card,.home-view .container .collections .items-container .item-card{height:98px;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;min-width:310px}.home-view .container .datacubes .items-container .item-card.empty,.home-view .container .collections .items-container .item-card.empty{height:0;opacity:0;margin:0;padding:0}.home-view.no-data .container{bottom:initial}.home-view.scrolled-down .header-bar{box-shadow:0 3px 5px -2px rgba(0,0,0,0.3)}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".item-card{width:280px;padding:5px;cursor:pointer}.item-card .inner-container{background-color:#fff;width:100%;height:100%;padding:16px 16px;border-radius:2px;transition:box-shadow 0.2s;white-space:nowrap}.item-card .inner-container:hover{box-shadow:0 2px 6px 0 rgba(0,0,0,0.14)}.item-card .inner-container>*{display:inline-block}.item-card .inner-container .svg-icon.view-icon{height:19px;margin-right:9px}.item-card .inner-container .svg-icon.view-icon path{fill:#1ea3e6}.item-card .inner-container .text{padding-top:2px;white-space:normal;width:calc(100% - 30px)}.item-card .inner-container .text .title{font-size:13px;font-weight:600;color:#1ea3e6;margin-bottom:5px;margin-right:12px;line-height:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.item-card .inner-container .text .description{font-size:12px;line-height:16px;color:#bababa;height:33px;overflow-y:hidden}.item-card .inner-container .count{margin-left:3px}.item-card .inner-container .count::before{content:'('}.item-card .inner-container .count::after{content:')'}.item-card .inner-container .more-button{position:absolute;top:14px;right:10px;width:20px;height:20px;border-radius:10px}.item-card .inner-container .more-button:hover{background:#f2f2f2}.item-card .inner-container .more-button:hover .svg-icon path{fill:#aaa}.item-card .inner-container .more-button .svg-icon{margin:5px;width:10px;height:10px}.item-card .inner-container .more-button .svg-icon path{fill:#d0d0d0}.item-card.new-one{opacity:0.4}.item-card.new-one:hover{opacity:0.6}.item-card.new-one .inner-container{text-align:center;box-shadow:initial;background:#fff}.item-card.new-one .inner-container .svg-icon{margin-top:10px;height:36px}.item-card.new-one .inner-container .svg-icon path{fill:#777}.item-card.empty-placeholder{cursor:auto;font-style:italic;opacity:0.5}.item-card.empty-placeholder .inner-container{box-shadow:initial}.item-card.empty-placeholder .inner-container .title{color:#999}.item-card.empty-placeholder .inner-container .svg-icon{opacity:1}.item-card.empty-placeholder .inner-container .svg-icon path{fill:#666}.item-card:hover{z-index:1}.item-card.loading .loader{height:100%;width:100%;font-size:11px}.item-card.loading .loader svg{width:20px;height:20px;margin-top:-10px}.item-card.loading .loader .label{top:calc(50% + 20px)}.item-card-more-menu{padding:4px 14px 3px 14px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".link-header-bar{background:#208b84}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".link-view .center-panel .center-top-bar,.link-view .center-panel .center-main .visualization{background:#fff}.link-view .link-header-bar{position:absolute;top:0;left:0;right:0;height:42px}.link-view .container{position:absolute;top:42px;bottom:0;left:0;right:0}.link-view .link-panel{position:absolute;top:0;bottom:0;left:0;width:230px;padding:10px 10px}@media only screen and (max-width: 1080px){.link-view .link-panel{padding:0 1px 0 0;font-size:0.9em}}.link-view .link-panel .link-container{background:#fff;overflow:auto;height:100%}.link-view .link-panel .link-container .link-group-title{padding:0 18px;color:#999;font-size:12px;text-transform:uppercase;pointer-events:none;margin-top:8px;height:25px;line-height:25px}.link-view .link-panel .link-container .link-item{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;height:25px;line-height:25px;padding:0 4px 0 38px;cursor:pointer;overflow:hidden}.link-view .link-panel .link-container .link-item.selected{background:rgba(30,163,230,0.16)}.link-view .link-panel .link-container .link-item:hover:not(.selected){background:rgba(30,163,230,0.12)}.link-view .center-panel{position:absolute;top:10px;bottom:10px;left:240px;right:240px}@media only screen and (max-width: 1080px){.link-view .center-panel{top:0;bottom:0}}.link-view .center-panel .center-top-bar{position:absolute;top:0;left:0;right:0;height:73px;border-radius:2px;padding:17px 20px;border-bottom:1px solid #eee}.link-view .center-panel .center-top-bar .link-title{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;font-size:17px;margin-bottom:8px;padding-right:152px}.link-view .center-panel .center-top-bar .link-description{line-height:13px;max-height:26px;overflow:hidden;color:#999;padding-right:152px}.link-view .center-panel .center-top-bar .right-align{position:absolute;min-width:150px;right:18px;top:18px;bottom:18px}.link-view .center-panel .center-main{position:absolute;top:78px;bottom:0;left:0;right:0}@media only screen and (max-width: 1080px){.link-view .center-panel .center-main{position:absolute;top:74px;bottom:0;left:0;right:0}}.link-view .center-panel .center-main .visualization{position:absolute;top:0;bottom:0;left:0;right:0;border-radius:2px}.link-view .center-panel .center-main .visualization .line-chart,.link-view .center-panel .center-main .visualization .table{position:absolute;top:0;bottom:0;left:0;right:0}.link-view .center-panel .center-main .manual-fallback{position:absolute;top:0;bottom:0;left:0;right:0}.link-view .center-panel .center-main .drop-indicator{position:absolute;top:0;bottom:0;left:0;right:0;z-index:9}.link-view .pinboard-panel{position:absolute;top:0;bottom:0;right:0;width:240px;margin-bottom:9px}@media only screen and (max-width: 1080px){.link-view .pinboard-panel{margin-bottom:0}}.link-view .pinboard-panel .pinboard-measure-tile:first-child,.link-view .pinboard-panel .dimension-tile:first-child,.link-view .pinboard-panel .placeholder-tile:first-child{border-radius:2px 2px 0 0}.link-view .pinboard-panel .pinboard-measure-tile:last-child,.link-view .pinboard-panel .dimension-tile:last-child,.link-view .pinboard-panel .placeholder-tile:last-child{border-radius:0 0 2px 2px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".bar-chart .measure-bar-charts{overflow-x:hidden;overflow-y:auto}.bar-chart .scroller{position:relative;height:100%}.bar-chart .scroller .bottom-shadow{opacity:0}.bar-chart .scroller .bottom-right-corner{background-color:white}.bar-chart .selection-highlight-container{position:absolute;top:0px}.bar-chart .selection-highlight-container .selection-highlight{position:absolute;pointer-events:none;border:1px dashed #1ea3e6}.bar-chart .vertical-axis .border{stroke-width:0}.bar-chart .x-axis{stroke:#ccc;stroke-width:1px}.bar-chart .x-axis .slanty-labels{position:absolute;overflow:hidden}.bar-chart .x-axis .slanty-label{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;position:absolute;width:100px;height:20px;-webkit-transform:rotate(-43deg);-ms-transform:rotate(-43deg);transform:rotate(-43deg);-webkit-transform-origin:right top;-ms-transform-origin:right top;transform-origin:right top;text-align:right;cursor:default;overflow:hidden;font-size:12px}.bar-chart .x-axis .slanty-label.categorical{top:3px}.bar-chart .x-axis .slanty-label.continuous{top:6px}.bar-chart .measure-bar-chart::after{content:'';position:absolute;top:0;right:0;bottom:0;left:0;border-bottom:1px solid #ccc;border-right:1px solid #ccc}.bar-chart .measure-bar-chart:first-child::after{top:10px}.bar-chart .measure-bar-chart .vis-measure-label{position:absolute;left:12px;top:12px}.bar-chart .measure-bar-chart .vis-bottom{pointer-events:none;stroke:#ccc}.bar-chart .measure-bar-chart g.bars g.bar.not-selected{fill-opacity:0.5}.bar-chart .measure-bar-chart g.bars g.bar.hover{fill-opacity:0.9}.bar-chart .measure-bar-chart g.bars g.bar>rect.background{pointer-events:none;fill:#1ea3e6}.bar-chart .measure-bar-chart g.bars g.bar>rect.mouse-event-target{fill:#fff;fill-opacity:0.001}.bar-chart .measure-bar-chart .mask{fill:#fff}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".base-visualization{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden}.base-visualization .internals{position:absolute;top:0;bottom:0;left:0;right:0;overflow:auto}.base-visualization .loader,.base-visualization .query-error{position:absolute;top:0;bottom:0;left:0;right:0}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".geo .vis-measure-label{position:absolute;left:16px;top:12px;font-weight:600;text-shadow:0 0 2px #fff}.geo .unknowns-label{position:absolute;right:16px;bottom:12px;font-weight:600;text-shadow:0 0 2px #fff}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".heatmap .measure-map.multi .vis-measure-label{position:absolute;top:-38px;left:-4px;right:0;pointer-events:auto;cursor:pointer}.heatmap .measure-map.multi .color-map.actionable{cursor:pointer}.heatmap .scroller{position:relative;height:100%}.heatmap .scroller .left-gutter,.heatmap .scroller .top-gutter,.heatmap .scroller .top-left-corner{background-color:white}.heatmap .scroller .bottom-gutter{overflow:visible;background-color:white;z-index:1}.heatmap .scroller .top-left-corner{overflow:visible;width:190px !important;z-index:10}.heatmap .scroller .vis-measure-label{padding-left:16px;padding-top:12px}.heatmap .scroller .x-axis .tick{height:20px;text-align:right;-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg);text-overflow:ellipsis;overflow:hidden;top:40px;margin-left:20px}.heatmap .scroller .y-axis .tick{-webkit-transform:translate(0, 33%);-ms-transform:translate(0, 33%);transform:translate(0, 33%);text-overflow:ellipsis;overflow:hidden;text-align:right;padding-left:15px;padding-right:10px}.heatmap-selection-highlight{pointer-events:none;border:1px dashed #1ea3e6}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".highlighter{pointer-events:none}.highlighter .frame{position:absolute;height:100%;border:1px dashed #168bc5;border-radius:2px;z-index:1}.highlighter .frame .highlight-controls{position:absolute;right:-33px}.highlighter .whiteout{position:absolute;height:100%;background:#fff;opacity:0.5}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".line-chart .measure-line-charts{overflow-x:hidden;overflow-y:auto;padding-left:10px}.line-chart .measure-line-chart .vis-measure-label{position:absolute;left:6px;top:12px}.line-chart .measure-line-chart .vis-bottom{pointer-events:none;stroke:#ccc}.line-chart .measure-line-chart .highlighter{position:absolute;top:0;bottom:0;left:0;right:0}.line-chart .measure-line-chart:nth-child(n+2) .highlighter .frame{border-top:0}.line-chart .bottom-axis{padding-left:10px}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".table .table-inner{left:10px}.table .scroller{position:absolute;top:0;bottom:0;left:0;right:0}.table .scroller .measure-name{background-color:#fff;border-bottom:1px solid #e6e6e6;padding-top:12px;white-space:nowrap;padding-left:10px;display:inline-block;width:130px;height:100%}.table .scroller .measure-name>.title-wrap{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;display:inline-block;height:100%;padding-left:4px;max-width:100%}.table .scroller .measure-name.sorted>.title-wrap{max-width:calc(100% - 15px)}.table .scroller .measure-name>.sort-arrow{width:8px;right:-4px}.table .scroller .measure-name>.sort-arrow.ascending{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.table .scroller.has-top-shadow .measure-name,.table .scroller.has-top-shadow .corner{border-bottom:0}.table .scroller .row{position:absolute;height:30px;border-bottom:1px solid #e6e6e6;left:0;white-space:nowrap}.table .scroller .row.hover{background:#e3f4fc}.table .scroller .row.selected{background:#e3f4fc}.table .scroller .row.not-selected{color:#a6a6a6}.table .scroller .row>.measure{white-space:nowrap;padding-left:10px;overflow:hidden;padding-top:8px;display:inline-block;width:130px;height:calc(100% + 2px);margin-top:-1px}.table .scroller .row>.measure.all-alone{width:100%}.table .scroller .row>.measure>.background-container{position:absolute;top:0;left:10px;right:0;bottom:0}.table .scroller .row>.measure>.background-container>.background{height:100%}.table .scroller .row>.measure>.background-container>.background.negative{background-color:rgba(255,110,26,0.2);border-top:1px solid #ebcebd;border-bottom:1px solid #ebcebd}.table .scroller .row>.measure>.background-container>.background.positive{background-color:rgba(30,163,230,0.2);border-top:1px solid #b8d7e3;border-bottom:1px solid #b8d7e3}.table .scroller .row>.measure>.label{padding-left:4px}.table .scroller .highlight-cont{position:absolute;left:0;right:0;top:38px;bottom:0;overflow:hidden}.table .scroller .highlight-cont .highlighter{position:absolute;right:0;height:31px;margin-top:-1px;border:1px solid #e3f4fc}.table .scroller .highlight-cont .highlighter::after{position:absolute;top:-1px;bottom:-1px;left:-1px;right:-1px;content:'';border:1px dashed #168bc5}.table .scroller .left-gutter,.table .scroller .top-left-corner{background-color:#fff;border-top-left-radius:2px;border-bottom-left-radius:2px}.table .scroller .corner{position:absolute;background-color:#fff;left:0;top:0;width:300px;height:38px;overflow:hidden;padding:12px 0 0 6px;border-bottom:1px solid #e6e6e6}.table .scroller .corner>.corner-wrap{display:inline-block;max-width:calc(100% - 10px)}.table .scroller .corner .sort-arrow{width:8px;right:-4px}.table .scroller .corner .sort-arrow.ascending{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.table .scroller .segment-labels .segment{position:absolute;height:30px;border-bottom:1px solid #e6e6e6;left:0;background-color:#fff;white-space:nowrap;padding-left:6px;overflow:hidden;padding-top:8px}.table .scroller .segment-labels .segment.hover{background:#e3f4fc}.table .scroller .segment-labels .segment.selected{background:#e3f4fc}.table .scroller .segment-labels .segment.not-selected{color:#a6a6a6}\n",""])},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(undefined);exports.push([module.i,".totals .internals.no-scroll{overflow:hidden}.totals .total-container{position:absolute;top:60px;padding-bottom:60px;width:100%}.totals .total{display:inline-block;width:176px;text-align:center;padding:0 10px;margin-bottom:34px}.totals .total .measure-name{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;width:100%;cursor:default;font-size:15px;padding-bottom:8px;color:#999;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.totals .total .measure-value{width:100%;cursor:default;font-size:30px;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.totals .total.single{width:100%}.totals .total.single .measure-name{font-size:22px;padding-bottom:11px}.totals .total.single .measure-value{font-size:44px}\n",""])},,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(x){return function(){return x}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__pairs__=__webpack_require__(782);__webpack_exports__["a"]=function(values0,values1,reduce){var n0=values0.length,n1=values1.length,values=new Array(n0*n1),i0,i1,i,value0;if(reduce==null)reduce=__WEBPACK_IMPORTED_MODULE_0__pairs__["b"];for(i0=i=0;i0<n0;++i0){for(value0=values0[i0],i1=0;i1<n1;++i1,++i){values[i]=reduce(value0,values1[i1])}}return values}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__array__=__webpack_require__(776);var __WEBPACK_IMPORTED_MODULE_1__bisect__=__webpack_require__(777);var __WEBPACK_IMPORTED_MODULE_2__constant__=__webpack_require__(871);var __WEBPACK_IMPORTED_MODULE_3__extent__=__webpack_require__(780);var __WEBPACK_IMPORTED_MODULE_4__identity__=__webpack_require__(875);var __WEBPACK_IMPORTED_MODULE_5__range__=__webpack_require__(783);var __WEBPACK_IMPORTED_MODULE_6__ticks__=__webpack_require__(785);var __WEBPACK_IMPORTED_MODULE_7__threshold_sturges__=__webpack_require__(784);__webpack_exports__["a"]=function(){var value=__WEBPACK_IMPORTED_MODULE_4__identity__["a"],domain=__WEBPACK_IMPORTED_MODULE_3__extent__["a"],threshold=__WEBPACK_IMPORTED_MODULE_7__threshold_sturges__["a"];function histogram(data){var i,n=data.length,x,values=new Array(n);for(i=0;i<n;++i){values[i]=value(data[i],i,data)}var xz=domain(values),x0=xz[0],x1=xz[1],tz=threshold(values,x0,x1);if(!Array.isArray(tz)){tz=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__ticks__["c"])(x0,x1,tz);tz=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__range__["a"])(Math.ceil(x0/tz)*tz,Math.floor(x1/tz)*tz,tz)}var m=tz.length;while(tz[0]<=x0)tz.shift(),--m;while(tz[m-1]>x1)tz.pop(),--m;var bins=new Array(m+1),bin;for(i=0;i<=m;++i){bin=bins[i]=[];bin.x0=i>0?tz[i-1]:x0;bin.x1=i<m?tz[i]:x1}for(i=0;i<n;++i){x=values[i];if(x0<=x&&x<=x1){
bins[__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__bisect__["a"])(tz,x,0,m)].push(data[i])}}return bins}histogram.value=function(_){return arguments.length?(value=typeof _==="function"?_:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__constant__["a"])(_),histogram):value};histogram.domain=function(_){return arguments.length?(domain=typeof _==="function"?_:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__constant__["a"])([_[0],_[1]]),histogram):domain};histogram.thresholds=function(_){return arguments.length?(threshold=typeof _==="function"?_:Array.isArray(_)?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__constant__["a"])(__WEBPACK_IMPORTED_MODULE_0__array__["b"].call(_)):__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__constant__["a"])(_),histogram):threshold};return histogram}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(x){return x}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(values,valueof){var n=values.length,i=-1,value,max;if(valueof==null){while(++i<n){if((value=values[i])!=null&&value>=value){max=value;while(++i<n){if((value=values[i])!=null&&value>max){max=value}}}}}else{while(++i<n){if((value=valueof(values[i],i,values))!=null&&value>=value){max=value;while(++i<n){if((value=valueof(values[i],i,values))!=null&&value>max){max=value}}}}}return max}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__number__=__webpack_require__(753);__webpack_exports__["a"]=function(values,valueof){var n=values.length,m=n,i=-1,value,sum=0;if(valueof==null){while(++i<n){if(!isNaN(value=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__number__["a"])(values[i])))sum+=value;else--m}}else{while(++i<n){if(!isNaN(value=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__number__["a"])(valueof(values[i],i,values))))sum+=value;else--m}}if(m)return sum/m}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__ascending__=__webpack_require__(752);var __WEBPACK_IMPORTED_MODULE_1__number__=__webpack_require__(753);var __WEBPACK_IMPORTED_MODULE_2__quantile__=__webpack_require__(763);__webpack_exports__["a"]=function(values,valueof){var n=values.length,i=-1,value,numbers=[];if(valueof==null){while(++i<n){if(!isNaN(value=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__number__["a"])(values[i]))){numbers.push(value)}}}else{while(++i<n){if(!isNaN(value=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__number__["a"])(valueof(values[i],i,values)))){numbers.push(value)}}}return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__quantile__["a"])(numbers.sort(__WEBPACK_IMPORTED_MODULE_0__ascending__["a"]),.5)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(arrays){var n=arrays.length,m,i=-1,j=0,merged,array;while(++i<n)j+=arrays[i].length;merged=new Array(j);while(--n>=0){array=arrays[n];m=array.length;while(--m>=0){merged[--j]=array[m]}}return merged}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(array,indexes){var i=indexes.length,permutes=new Array(i);while(i--)permutes[i]=array[indexes[i]];return permutes}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__ascending__=__webpack_require__(752);__webpack_exports__["a"]=function(values,compare){if(!(n=values.length))return;var n,i=0,j=0,xi,xj=values[j];if(compare==null)compare=__WEBPACK_IMPORTED_MODULE_0__ascending__["a"];while(++i<n){if(compare(xi=values[i],xj)<0||compare(xj,xj)!==0){xj=xi,j=i}}if(compare(xj,xj)===0)return j}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(array,i0,i1){var m=(i1==null?array.length:i1)-(i0=i0==null?0:+i0),t,i;while(m){i=Math.random()*m--|0;t=array[m+i0];array[m+i0]=array[i+i0];array[i+i0]=t}return array}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(values,valueof){var n=values.length,i=-1,value,sum=0;if(valueof==null){while(++i<n){if(value=+values[i])sum+=value}}else{while(++i<n){if(value=+valueof(values[i],i,values))sum+=value}}return sum}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__array__=__webpack_require__(776);var __WEBPACK_IMPORTED_MODULE_1__ascending__=__webpack_require__(752);var __WEBPACK_IMPORTED_MODULE_2__number__=__webpack_require__(753);var __WEBPACK_IMPORTED_MODULE_3__quantile__=__webpack_require__(763);__webpack_exports__["a"]=function(values,min,max){values=__WEBPACK_IMPORTED_MODULE_0__array__["a"].call(values,__WEBPACK_IMPORTED_MODULE_2__number__["a"]).sort(__WEBPACK_IMPORTED_MODULE_1__ascending__["a"]);return Math.ceil((max-min)/(2*(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__quantile__["a"])(values,.75)-__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__quantile__["a"])(values,.25))*Math.pow(values.length,-1/3)))}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__deviation__=__webpack_require__(779);__webpack_exports__["a"]=function(values,min,max){return Math.ceil((max-min)/(3.5*__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__deviation__["a"])(values)*Math.pow(values.length,-1/3)))}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__transpose__=__webpack_require__(786);__webpack_exports__["a"]=function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__transpose__["a"])(arguments)}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__src_nest__=__webpack_require__(890);var __WEBPACK_IMPORTED_MODULE_1__src_set__=__webpack_require__(891);var __WEBPACK_IMPORTED_MODULE_2__src_map__=__webpack_require__(764);__webpack_require__.d(__webpack_exports__,"a",function(){return __WEBPACK_IMPORTED_MODULE_2__src_map__["a"]});var __WEBPACK_IMPORTED_MODULE_3__src_keys__=__webpack_require__(889);var __WEBPACK_IMPORTED_MODULE_4__src_values__=__webpack_require__(892);var __WEBPACK_IMPORTED_MODULE_5__src_entries__=__webpack_require__(888)},function(module,__webpack_exports__,__webpack_require__){"use strict";var _unused_webpack_default_export=function(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]});return entries}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _unused_webpack_default_export=function(map){var keys=[];for(var key in map)keys.push(key);return keys}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__map__=__webpack_require__(764);var _unused_webpack_default_export=function(){var keys=[],sortKeys=[],sortValues,rollup,nest;function apply(array,depth,createResult,setResult){if(depth>=keys.length)return rollup!=null?rollup(array):sortValues!=null?array.sort(sortValues):array;var i=-1,n=array.length,key=keys[depth++],keyValue,value,valuesByKey=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__map__["a"])(),values,result=createResult();while(++i<n){if(values=valuesByKey.get(keyValue=key(value=array[i])+"")){values.push(value)}else{valuesByKey.set(keyValue,[value])}}valuesByKey.each(function(values,key){setResult(result,key,apply(values,depth,createResult,setResult))});return result}function entries(map,depth){if(++depth>keys.length)return map;var array,sortKey=sortKeys[depth-1];if(rollup!=null&&depth>=keys.length)array=map.entries();else array=[],map.each(function(v,k){array.push({key:k,values:entries(v,depth)})});return sortKey!=null?array.sort(function(a,b){return sortKey(a.key,b.key)}):array}return nest={object:function(array){return apply(array,0,createObject,setObject)},map:function(array){return apply(array,0,createMap,setMap)},entries:function(array){return entries(apply(array,0,createMap,setMap),0)},key:function(d){keys.push(d);return nest},sortKeys:function(order){sortKeys[keys.length-1]=order;return nest},sortValues:function(order){sortValues=order;return nest},rollup:function(f){rollup=f;return nest}}};function createObject(){return{}}function setObject(object,key,value){object[key]=value}function createMap(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__map__["a"])()}function setMap(map,key,value){map.set(key,value)}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__map__=__webpack_require__(764);function Set(){}var proto=__WEBPACK_IMPORTED_MODULE_0__map__["a"].prototype;Set.prototype=set.prototype={constructor:Set,has:proto.has,add:function(value){value+="";this[__WEBPACK_IMPORTED_MODULE_0__map__["b"]+value]=value;return this},remove:proto.remove,clear:proto.clear,values:proto.keys,size:proto.size,empty:proto.empty,each:proto.each};function set(object,f){var set=new Set;if(object instanceof Set)object.each(function(value){set.add(value)});else if(object){var i=-1,n=object.length;if(f==null)while(++i<n)set.add(object[i]);else while(++i<n)set.add(f(object[i],i,object))}return set}var _unused_webpack_default_export=set},function(module,__webpack_exports__,__webpack_require__){"use strict";var _unused_webpack_default_export=function(map){var values=[];for(var key in map)values.push(map[key]);return values}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__define__=__webpack_require__(766);var __WEBPACK_IMPORTED_MODULE_1__color__=__webpack_require__(765);var __WEBPACK_IMPORTED_MODULE_2__math__=__webpack_require__(788);__webpack_exports__["a"]=cubehelix;var A=-.14861,B=+1.78277,C=-.29227,D=-.90649,E=+1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);if(!(o instanceof __WEBPACK_IMPORTED_MODULE_1__color__["a"]))o=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["b"])(o);var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-C*bl)/D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*__WEBPACK_IMPORTED_MODULE_2__math__["a"]-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}function cubehelix(h,s,l,opacity){return arguments.length===1?cubehelixConvert(h):new Cubehelix(h,s,l,opacity==null?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h;this.s=+s;this.l=+l;this.opacity=+opacity}__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__define__["a"])(Cubehelix,cubehelix,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__define__["b"])(__WEBPACK_IMPORTED_MODULE_1__color__["c"],{brighter:function(k){k=k==null?__WEBPACK_IMPORTED_MODULE_1__color__["d"]:Math.pow(__WEBPACK_IMPORTED_MODULE_1__color__["d"],k);return new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker:function(k){k=k==null?__WEBPACK_IMPORTED_MODULE_1__color__["e"]:Math.pow(__WEBPACK_IMPORTED_MODULE_1__color__["e"],k);return new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=isNaN(this.h)?0:(this.h+120)*__WEBPACK_IMPORTED_MODULE_2__math__["b"],l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new __WEBPACK_IMPORTED_MODULE_1__color__["a"](255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)),this.opacity)}}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__define__=__webpack_require__(766);var __WEBPACK_IMPORTED_MODULE_1__color__=__webpack_require__(765);var __WEBPACK_IMPORTED_MODULE_2__math__=__webpack_require__(788);__webpack_exports__["b"]=lab;__webpack_exports__["a"]=hcl;var Kn=18,Xn=.95047,Yn=1,Zn=1.08883,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl){var h=o.h*__WEBPACK_IMPORTED_MODULE_2__math__["b"];return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}if(!(o instanceof __WEBPACK_IMPORTED_MODULE_1__color__["a"]))o=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["b"])(o);var b=rgb2xyz(o.r),a=rgb2xyz(o.g),l=rgb2xyz(o.b),x=xyz2lab((.4124564*b+.3575761*a+.1804375*l)/Xn),y=xyz2lab((.2126729*b+.7151522*a+.072175*l)/Yn),z=xyz2lab((.0193339*b+.119192*a+.9503041*l)/Zn);return new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity)}function lab(l,a,b,opacity){return arguments.length===1?labConvert(l):new Lab(l,a,b,opacity==null?1:opacity)}function Lab(l,a,b,opacity){this.l=+l;this.a=+a;this.b=+b;this.opacity=+opacity}__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__define__["a"])(Lab,lab,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__define__["b"])(__WEBPACK_IMPORTED_MODULE_1__color__["c"],{brighter:function(k){return new Lab(this.l+Kn*(k==null?1:k),this.a,this.b,this.opacity)},darker:function(k){return new Lab(this.l-Kn*(k==null?1:k),this.a,this.b,this.opacity)},rgb:function(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;y=Yn*lab2xyz(y);x=Xn*lab2xyz(x);z=Zn*lab2xyz(z);return new __WEBPACK_IMPORTED_MODULE_1__color__["a"](xyz2rgb(3.2404542*x-1.5371385*y-.4985314*z),xyz2rgb(-.969266*x+1.8760108*y+.041556*z),xyz2rgb(.0556434*x-.2040259*y+1.0572252*z),this.opacity)}}));function xyz2lab(t){return t>t3?Math.pow(t,1/3):t/t2+t0}function lab2xyz(t){return t>t1?t*t*t:t2*(t-t0)}function xyz2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2xyz(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);if(!(o instanceof Lab))o=labConvert(o);var h=Math.atan2(o.b,o.a)*__WEBPACK_IMPORTED_MODULE_2__math__["a"];return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function hcl(h,c,l,opacity){return arguments.length===1?hclConvert(h):new Hcl(h,c,l,opacity==null?1:opacity)}function Hcl(h,c,l,opacity){this.h=+h;this.c=+c;this.l=+l;this.opacity=+opacity}__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__define__["a"])(Hcl,hcl,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__define__["b"])(__WEBPACK_IMPORTED_MODULE_1__color__["c"],{brighter:function(k){return new Hcl(this.h,this.c,this.l+Kn*(k==null?1:k),this.opacity)},darker:function(k){return new Hcl(this.h,this.c,this.l-Kn*(k==null?1:k),this.opacity)},rgb:function(){return labConvert(this).rgb()}}))},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__locale__=__webpack_require__(793);__webpack_require__.d(__webpack_exports__,"a",function(){return format});__webpack_require__.d(__webpack_exports__,"b",function(){return formatPrefix});var locale;var format;var formatPrefix;defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(definition){locale=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__locale__["a"])(definition);format=locale.format;formatPrefix=locale.formatPrefix;return locale}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(x,p){x=x.toPrecision(p);out:for(var n=x.length,i=1,i0=-1,i1;i<n;++i){switch(x[i]){case".":i0=i1=i;break;case"0":if(i0===0)i0=i;i1=i;break;case"e":break out;default:if(i0>0)i0=0;break}}return i0>0?x.slice(0,i0)+x.slice(i1+1):x}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(grouping,thousands){return function(value,width){var i=value.length,t=[],j=0,g=grouping[0],length=0;while(i>0&&g>0){if(length+g+1>width)g=Math.max(1,width-length);t.push(value.substring(i-=g,i+g));if((length+=g+1)>width)break;g=grouping[j=(j+1)%grouping.length]}return t.reverse().join(thousands)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(numerals){return function(value){return value.replace(/[0-9]/g,function(i){return numerals[+i]})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__formatDecimal__=__webpack_require__(767);__webpack_exports__["a"]=function(x,p){var d=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__formatDecimal__["a"])(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(x){return x}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__exponent__=__webpack_require__(758);__webpack_exports__["a"]=function(step){return Math.max(0,-__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__exponent__["a"])(Math.abs(step)))}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__exponent__=__webpack_require__(758);__webpack_exports__["a"]=function(step,value){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__exponent__["a"])(value)/3)))*3-__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__exponent__["a"])(Math.abs(step)))}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__exponent__=__webpack_require__(758);__webpack_exports__["a"]=function(step,max){step=Math.abs(step),max=Math.abs(max)-step;return Math.max(0,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__exponent__["a"])(max)-__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__exponent__["a"])(step))+1}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_color__=__webpack_require__(749);var __WEBPACK_IMPORTED_MODULE_1__color__=__webpack_require__(755);__webpack_require__.d(__webpack_exports__,"a",function(){return cubehelixLong});function cubehelix(hue){return function cubehelixGamma(y){y=+y;function cubehelix(start,end){var h=hue((start=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["a"])(start)).h,(end=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["a"])(end)).h),s=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["a"])(start.s,end.s),l=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["a"])(start.l,end.l),opacity=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["a"])(start.opacity,end.opacity);return function(t){start.h=h(t);start.s=s(t);start.l=l(Math.pow(t,y));start.opacity=opacity(t);return start+""}}cubehelix.gamma=cubehelixGamma;return cubehelix}(1)}var _unused_webpack_default_export=cubehelix(__WEBPACK_IMPORTED_MODULE_1__color__["b"]);var cubehelixLong=cubehelix(__WEBPACK_IMPORTED_MODULE_1__color__["a"])},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_color__=__webpack_require__(749);var __WEBPACK_IMPORTED_MODULE_1__color__=__webpack_require__(755);function hcl(hue){return function(start,end){var h=hue((start=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["b"])(start)).h,(end=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["b"])(end)).h),c=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["a"])(start.c,end.c),l=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["a"])(start.l,end.l),opacity=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["a"])(start.opacity,end.opacity);return function(t){start.h=h(t);start.c=c(t);start.l=l(t);start.opacity=opacity(t);return start+""}}}var _unused_webpack_default_export=hcl(__WEBPACK_IMPORTED_MODULE_1__color__["b"]);var hclLong=hcl(__WEBPACK_IMPORTED_MODULE_1__color__["a"])},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_color__=__webpack_require__(749);var __WEBPACK_IMPORTED_MODULE_1__color__=__webpack_require__(755);function hsl(hue){return function(start,end){var h=hue((start=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["d"])(start)).h,(end=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["d"])(end)).h),s=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["a"])(start.s,end.s),l=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["a"])(start.l,end.l),opacity=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["a"])(start.opacity,end.opacity);return function(t){start.h=h(t);start.s=s(t);start.l=l(t);start.opacity=opacity(t);return start+""}}}var _unused_webpack_default_export=hsl(__WEBPACK_IMPORTED_MODULE_1__color__["b"]);var hslLong=hsl(__WEBPACK_IMPORTED_MODULE_1__color__["a"])},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_color__=__webpack_require__(749);var __WEBPACK_IMPORTED_MODULE_1__color__=__webpack_require__(755);function lab(start,end){var l=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["a"])((start=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["c"])(start)).l,(end=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["c"])(end)).l),a=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["a"])(start.a,end.a),b=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["a"])(start.b,end.b),opacity=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__color__["a"])(start.opacity,end.opacity);return function(t){start.l=l(t);start.a=a(t);start.b=b(t);start.opacity=opacity(t);return start+""}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _unused_webpack_default_export=function(interpolator,n){var samples=new Array(n);for(var i=0;i<n;++i)samples[i]=interpolator(i/(n-1));return samples}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=function(a,b){return a=+a,b-=a,function(t){return Math.round(a+b*t)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return identity});var degrees=180/Math.PI;var identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};__webpack_exports__["b"]=function(a,b,c,d,e,f){var scaleX,scaleY,skewX;if(scaleX=Math.sqrt(a*a+b*b))a/=scaleX,b/=scaleX;if(skewX=a*c+b*d)c-=a*skewX,d-=b*skewX;if(scaleY=Math.sqrt(c*c+d*d))c/=scaleY,d/=scaleY,skewX/=scaleY;if(a*d<b*c)a=-a,b=-b,skewX=-skewX,scaleX=-scaleX;return{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX,scaleY:scaleY}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__number__=__webpack_require__(759);var __WEBPACK_IMPORTED_MODULE_1__parse__=__webpack_require__(912);function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}function translate(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__number__["a"])(xa,xb)},{i:i-2,x:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__number__["a"])(ya,yb)})}else if(xb||yb){s.push("translate("+xb+pxComma+yb+pxParen)}}function rotate(a,b,s,q){if(a!==b){if(a-b>180)b+=360;else if(b-a>180)a+=360;q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__number__["a"])(a,b)})}else if(b){s.push(pop(s)+"rotate("+b+degParen)}}function skewX(a,b,s,q){if(a!==b){q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__number__["a"])(a,b)})}else if(b){s.push(pop(s)+"skewX("+b+degParen)}}function scale(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__number__["a"])(xa,xb)},{i:i-2,x:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__number__["a"])(ya,yb)})}else if(xb!==1||yb!==1){s.push(pop(s)+"scale("+xb+","+yb+")")}}return function(a,b){var s=[],q=[];a=parse(a),b=parse(b);translate(a.translateX,a.translateY,b.translateX,b.translateY,s,q);rotate(a.rotate,b.rotate,s,q);skewX(a.skewX,b.skewX,s,q);scale(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q);a=b=null;return function(t){var i=-1,n=q.length,o;while(++i<n)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform(__WEBPACK_IMPORTED_MODULE_1__parse__["a"],"px, ","px)","deg)");var interpolateTransformSvg=interpolateTransform(__WEBPACK_IMPORTED_MODULE_1__parse__["b"],", ",")",")")},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__decompose__=__webpack_require__(910);__webpack_exports__["a"]=parseCss;__webpack_exports__["b"]=parseSvg;var cssNode,cssRoot,cssView,svgNode;function parseCss(value){if(value==="none")return __WEBPACK_IMPORTED_MODULE_0__decompose__["a"];if(!cssNode)cssNode=document.createElement("DIV"),cssRoot=document.documentElement,cssView=document.defaultView;cssNode.style.transform=value;value=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform");cssRoot.removeChild(cssNode);value=value.slice(7,-1).split(",");return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__decompose__["b"])(+value[0],+value[1],+value[2],+value[3],+value[4],+value[5])}function parseSvg(value){if(value==null)return __WEBPACK_IMPORTED_MODULE_0__decompose__["a"];if(!svgNode)svgNode=document.createElementNS("http://www.w3.org/2000/svg","g");svgNode.setAttribute("transform",value);if(!(value=svgNode.transform.baseVal.consolidate()))return __WEBPACK_IMPORTED_MODULE_0__decompose__["a"];value=value.matrix;return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__decompose__["b"])(value.a,value.b,value.c,value.d,value.e,value.f)}},function(module,__webpack_exports__,__webpack_require__){"use strict";var rho=Math.SQRT2,rho2=2,rho4=4,epsilon2=1e-12;function cosh(x){return((x=Math.exp(x))+1/x)/2}function sinh(x){return((x=Math.exp(x))-1/x)/2}function tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}var _unused_webpack_default_export=function(p0,p1){var ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy,i,S;if(d2<epsilon2){S=Math.log(w1/w0)/rho;i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]}}else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+rho4*d2)/(2*w0*rho2*d1),b1=(w1*w1-w0*w0-rho4*d2)/(2*w1*rho2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho;i=function(t){var s=t*S,coshr0=cosh(r0),u=w0/(rho2*d1)*(coshr0*tanh(rho*s+r0)-sinh(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/cosh(rho*s+r0)]}}i.duration=S*1e3;return i}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_array__=__webpack_require__(747);var __WEBPACK_IMPORTED_MODULE_1__ordinal__=__webpack_require__(803);__webpack_exports__["a"]=band;__webpack_exports__["b"]=point;function band(){var scale=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__ordinal__["a"])().unknown(undefined),domain=scale.domain,ordinalRange=scale.range,range=[0,1],step,bandwidth,round=false,paddingInner=0,paddingOuter=0,align=.5;delete scale.unknown;function rescale(){var n=domain().length,reverse=range[1]<range[0],start=range[reverse-0],stop=range[1-reverse];step=(stop-start)/Math.max(1,n-paddingInner+paddingOuter*2);if(round)step=Math.floor(step);start+=(stop-start-step*(n-paddingInner))*align;bandwidth=step*(1-paddingInner);if(round)start=Math.round(start),bandwidth=Math.round(bandwidth);var values=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["range"])(n).map(function(i){return start+step*i});return ordinalRange(reverse?values.reverse():values)}scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()};scale.range=function(_){return arguments.length?(range=[+_[0],+_[1]],rescale()):range.slice()};scale.rangeRound=function(_){return range=[+_[0],+_[1]],round=true,rescale()};scale.bandwidth=function(){return bandwidth};scale.step=function(){return step};scale.round=function(_){return arguments.length?(round=!!_,rescale()):round};scale.padding=function(_){return arguments.length?(paddingInner=paddingOuter=Math.max(0,Math.min(1,_)),rescale()):paddingInner};scale.paddingInner=function(_){return arguments.length?(paddingInner=Math.max(0,Math.min(1,_)),rescale()):paddingInner};scale.paddingOuter=function(_){return arguments.length?(paddingOuter=Math.max(0,Math.min(1,_)),rescale()):paddingOuter};scale.align=function(_){return arguments.length?(align=Math.max(0,Math.min(1,_)),rescale()):align};scale.copy=function(){return band().domain(domain()).range(range).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)};return rescale()}function pointish(scale){var copy=scale.copy;scale.padding=scale.paddingOuter;delete scale.paddingInner;delete scale.paddingOuter;scale.copy=function(){return pointish(copy())};return scale}function point(){return pointish(band().paddingInner(1))}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__colors__=__webpack_require__(756);__webpack_exports__["a"]=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__colors__["a"])("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf")},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__colors__=__webpack_require__(756);__webpack_exports__["a"]=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__colors__["a"])("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5")},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__colors__=__webpack_require__(756);__webpack_exports__["a"]=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__colors__["a"])("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6")},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__colors__=__webpack_require__(756);__webpack_exports__["a"]=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__colors__["a"])("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9")},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_color__=__webpack_require__(749);var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__=__webpack_require__(754);__webpack_exports__["a"]=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["d"])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["a"])(300,.5,0),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["a"])(-240,.5,1))},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__array__=__webpack_require__(750);var __WEBPACK_IMPORTED_MODULE_1__linear__=__webpack_require__(757);var __WEBPACK_IMPORTED_MODULE_2__number__=__webpack_require__(802);__webpack_exports__["a"]=identity;function identity(){var domain=[0,1];function scale(x){return+x}scale.invert=scale;scale.domain=scale.range=function(_){return arguments.length?(domain=__WEBPACK_IMPORTED_MODULE_0__array__["a"].call(_,__WEBPACK_IMPORTED_MODULE_2__number__["a"]),scale):domain.slice()};scale.copy=function(){return identity().domain(domain)};return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__linear__["b"])(scale)}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_array__=__webpack_require__(747);var __WEBPACK_IMPORTED_MODULE_1_d3_format__=__webpack_require__(789);var __WEBPACK_IMPORTED_MODULE_2__constant__=__webpack_require__(770);var __WEBPACK_IMPORTED_MODULE_3__nice__=__webpack_require__(801);var __WEBPACK_IMPORTED_MODULE_4__continuous__=__webpack_require__(761);__webpack_exports__["a"]=log;function deinterpolate(a,b){return(b=Math.log(b/a))?function(x){
return Math.log(x/a)/b}:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__constant__["a"])(b)}function reinterpolate(a,b){return a<0?function(t){return-Math.pow(-b,t)*Math.pow(-a,1-t)}:function(t){return Math.pow(b,t)*Math.pow(a,1-t)}}function pow10(x){return isFinite(x)?+("1e"+x):x<0?0:x}function powp(base){return base===10?pow10:base===Math.E?Math.exp:function(x){return Math.pow(base,x)}}function logp(base){return base===Math.E?Math.log:base===10&&Math.log10||base===2&&Math.log2||(base=Math.log(base),function(x){return Math.log(x)/base})}function reflect(f){return function(x){return-f(-x)}}function log(){var scale=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__continuous__["a"])(deinterpolate,reinterpolate).domain([1,10]),domain=scale.domain,base=10,logs=logp(10),pows=powp(10);function rescale(){logs=logp(base),pows=powp(base);if(domain()[0]<0)logs=reflect(logs),pows=reflect(pows);return scale}scale.base=function(_){return arguments.length?(base=+_,rescale()):base};scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()};scale.ticks=function(count){var d=domain(),u=d[0],v=d[d.length-1],r;if(r=v<u)i=u,u=v,v=i;var i=logs(u),j=logs(v),p,k,t,n=count==null?10:+count,z=[];if(!(base%1)&&j-i<n){i=Math.round(i)-1,j=Math.round(j)+1;if(u>0)for(;i<j;++i){for(k=1,p=pows(i);k<base;++k){t=p*k;if(t<u)continue;if(t>v)break;z.push(t)}}else for(;i<j;++i){for(k=base-1,p=pows(i);k>=1;--k){t=p*k;if(t<u)continue;if(t>v)break;z.push(t)}}}else{z=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["ticks"])(i,j,Math.min(j-i,n)).map(pows)}return r?z.reverse():z};scale.tickFormat=function(count,specifier){if(specifier==null)specifier=base===10?".0e":",";if(typeof specifier!=="function")specifier=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_format__["f"])(specifier);if(count===Infinity)return specifier;if(count==null)count=10;var k=Math.max(1,base*count/scale.ticks().length);return function(d){var i=d/pows(Math.round(logs(d)));if(i*base<base-.5)i*=base;return i<=k?specifier(d):""}};scale.nice=function(){return domain(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__nice__["a"])(domain(),{floor:function(x){return pows(Math.floor(logs(x)))},ceil:function(x){return pows(Math.ceil(logs(x)))}}))};scale.copy=function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__continuous__["c"])(scale,log().base(base))};return scale}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__constant__=__webpack_require__(770);var __WEBPACK_IMPORTED_MODULE_1__linear__=__webpack_require__(757);var __WEBPACK_IMPORTED_MODULE_2__continuous__=__webpack_require__(761);__webpack_exports__["a"]=pow;__webpack_exports__["b"]=sqrt;function raise(x,exponent){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent)}function pow(){var exponent=1,scale=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__continuous__["a"])(deinterpolate,reinterpolate),domain=scale.domain;function deinterpolate(a,b){return(b=raise(b,exponent)-(a=raise(a,exponent)))?function(x){return(raise(x,exponent)-a)/b}:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__constant__["a"])(b)}function reinterpolate(a,b){b=raise(b,exponent)-(a=raise(a,exponent));return function(t){return raise(a+b*t,1/exponent)}}scale.exponent=function(_){return arguments.length?(exponent=+_,domain(domain())):exponent};scale.copy=function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__continuous__["c"])(scale,pow().exponent(exponent))};return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__linear__["b"])(scale)}function sqrt(){return pow().exponent(.5)}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_array__=__webpack_require__(747);var __WEBPACK_IMPORTED_MODULE_1__array__=__webpack_require__(750);__webpack_exports__["a"]=quantile;function quantile(){var domain=[],range=[],thresholds=[];function rescale(){var i=0,n=Math.max(1,range.length);thresholds=new Array(n-1);while(++i<n)thresholds[i-1]=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["quantile"])(domain,i/n);return scale}function scale(x){if(!isNaN(x=+x))return range[__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["bisect"])(thresholds,x)]}scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:[i>0?thresholds[i-1]:domain[0],i<thresholds.length?thresholds[i]:domain[domain.length-1]]};scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[];for(var i=0,n=_.length,d;i<n;++i)if(d=_[i],d!=null&&!isNaN(d=+d))domain.push(d);domain.sort(__WEBPACK_IMPORTED_MODULE_0_d3_array__["ascending"]);return rescale()};scale.range=function(_){return arguments.length?(range=__WEBPACK_IMPORTED_MODULE_1__array__["b"].call(_),rescale()):range.slice()};scale.quantiles=function(){return thresholds.slice()};scale.copy=function(){return quantile().domain(domain).range(range)};return scale}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_array__=__webpack_require__(747);var __WEBPACK_IMPORTED_MODULE_1__array__=__webpack_require__(750);var __WEBPACK_IMPORTED_MODULE_2__linear__=__webpack_require__(757);__webpack_exports__["a"]=quantize;function quantize(){var x0=0,x1=1,n=1,domain=[.5],range=[0,1];function scale(x){if(x<=x)return range[__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["bisect"])(domain,x,0,n)]}function rescale(){var i=-1;domain=new Array(n);while(++i<n)domain[i]=((i+1)*x1-(i-n)*x0)/(n+1);return scale}scale.domain=function(_){return arguments.length?(x0=+_[0],x1=+_[1],rescale()):[x0,x1]};scale.range=function(_){return arguments.length?(n=(range=__WEBPACK_IMPORTED_MODULE_1__array__["b"].call(_)).length-1,rescale()):range.slice()};scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:i<1?[x0,domain[0]]:i>=n?[domain[n-1],x1]:[domain[i-1],domain[i]]};scale.copy=function(){return quantize().domain([x0,x1]).range(range)};return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__linear__["b"])(scale)}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_color__=__webpack_require__(749);var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__=__webpack_require__(754);__webpack_require__.d(__webpack_exports__,"b",function(){return warm});__webpack_require__.d(__webpack_exports__,"c",function(){return cool});var warm=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["d"])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["a"])(-100,.75,.35),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["a"])(80,1.5,.8));var cool=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["d"])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["a"])(260,.75,.35),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["a"])(80,1.5,.8));var rainbow=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_color__["a"])();__webpack_exports__["a"]=function(t){if(t<0||t>1)t-=Math.floor(t);var ts=Math.abs(t-.5);rainbow.h=360*t-100;rainbow.s=1.5-1.5*ts;rainbow.l=.8-.9*ts;return rainbow+""}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__linear__=__webpack_require__(757);__webpack_exports__["a"]=sequential;function sequential(interpolator){var x0=0,x1=1,clamp=false;function scale(x){var t=(x-x0)/(x1-x0);return interpolator(clamp?Math.max(0,Math.min(1,t)):t)}scale.domain=function(_){return arguments.length?(x0=+_[0],x1=+_[1],scale):[x0,x1]};scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp};scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator};scale.copy=function(){return sequential(interpolator).domain([x0,x1]).clamp(clamp)};return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__linear__["b"])(scale)}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_array__=__webpack_require__(747);var __WEBPACK_IMPORTED_MODULE_1__array__=__webpack_require__(750);__webpack_exports__["a"]=threshold;function threshold(){var domain=[.5],range=[0,1],n=1;function scale(x){if(x<=x)return range[__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["bisect"])(domain,x,0,n)]}scale.domain=function(_){return arguments.length?(domain=__WEBPACK_IMPORTED_MODULE_1__array__["b"].call(_),n=Math.min(domain.length,range.length-1),scale):domain.slice()};scale.range=function(_){return arguments.length?(range=__WEBPACK_IMPORTED_MODULE_1__array__["b"].call(_),n=Math.min(domain.length,range.length-1),scale):range.slice()};scale.invertExtent=function(y){var i=range.indexOf(y);return[domain[i-1],domain[i]]};scale.copy=function(){return threshold().domain(domain).range(range)};return scale}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_d3_array__=__webpack_require__(747);var __WEBPACK_IMPORTED_MODULE_1_d3_format__=__webpack_require__(789);__webpack_exports__["a"]=function(domain,count,specifier){var start=domain[0],stop=domain[domain.length-1],step=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_d3_array__["tickStep"])(start,stop,count==null?10:count),precision;specifier=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_format__["a"])(specifier==null?",f":specifier);switch(specifier.type){case"s":{var value=Math.max(Math.abs(start),Math.abs(stop));if(specifier.precision==null&&!isNaN(precision=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_format__["b"])(step,value)))specifier.precision=precision;return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_format__["c"])(specifier,value)}case"":case"e":case"g":case"p":case"r":{if(specifier.precision==null&&!isNaN(precision=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_format__["d"])(step,Math.max(Math.abs(start),Math.abs(stop)))))specifier.precision=precision-(specifier.type==="e");break}case"f":case"%":{if(specifier.precision==null&&!isNaN(precision=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_format__["e"])(step)))specifier.precision=precision-(specifier.type==="%")*2;break}}return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d3_format__["f"])(specifier)}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__time__=__webpack_require__(804);var __WEBPACK_IMPORTED_MODULE_1_d3_time_format__=__webpack_require__(805);var __WEBPACK_IMPORTED_MODULE_2_d3_time__=__webpack_require__(772);__webpack_exports__["a"]=function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__time__["b"])(__WEBPACK_IMPORTED_MODULE_2_d3_time__["a"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["b"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["c"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["d"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["e"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["f"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["g"],__WEBPACK_IMPORTED_MODULE_2_d3_time__["h"],__WEBPACK_IMPORTED_MODULE_1_d3_time_format__["a"]).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__colors__=__webpack_require__(756);__webpack_require__.d(__webpack_exports__,"b",function(){return magma});__webpack_require__.d(__webpack_exports__,"c",function(){return inferno});__webpack_require__.d(__webpack_exports__,"d",function(){return plasma});function ramp(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}__webpack_exports__["a"]=ramp(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__colors__["a"])("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var magma=ramp(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__colors__["a"])("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));var inferno=ramp(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__colors__["a"])("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));var plasma=ramp(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__colors__["a"])("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"))},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__isoFormat__=__webpack_require__(806);var __WEBPACK_IMPORTED_MODULE_1__defaultLocale__=__webpack_require__(771);function parseIsoNative(string){var date=new Date(string);return isNaN(date)?null:date}var parseIso=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__defaultLocale__["b"])(__WEBPACK_IMPORTED_MODULE_0__isoFormat__["a"]);var _unused_webpack_default_export=parseIso},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var __WEBPACK_IMPORTED_MODULE_1__duration__=__webpack_require__(748);var day=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+step)},function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*__WEBPACK_IMPORTED_MODULE_1__duration__["d"])/__WEBPACK_IMPORTED_MODULE_1__duration__["b"]},function(date){return date.getDate()-1});__webpack_exports__["a"]=day;var days=day.range},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var __WEBPACK_IMPORTED_MODULE_1__duration__=__webpack_require__(748);var hour=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){var offset=date.getTimezoneOffset()*__WEBPACK_IMPORTED_MODULE_1__duration__["d"]%__WEBPACK_IMPORTED_MODULE_1__duration__["c"];if(offset<0)offset+=__WEBPACK_IMPORTED_MODULE_1__duration__["c"];date.setTime(Math.floor((+date-offset)/__WEBPACK_IMPORTED_MODULE_1__duration__["c"])*__WEBPACK_IMPORTED_MODULE_1__duration__["c"]+offset)},function(date,step){date.setTime(+date+step*__WEBPACK_IMPORTED_MODULE_1__duration__["c"])},function(start,end){return(end-start)/__WEBPACK_IMPORTED_MODULE_1__duration__["c"]},function(date){return date.getHours()});__webpack_exports__["a"]=hour;var hours=hour.range},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var millisecond=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(){},function(date,step){date.setTime(+date+step)},function(start,end){return end-start});millisecond.every=function(k){k=Math.floor(k);if(!isFinite(k)||!(k>0))return null;if(!(k>1))return millisecond;return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setTime(Math.floor(date/k)*k)},function(date,step){date.setTime(+date+step*k)},function(start,end){return(end-start)/k})};__webpack_exports__["a"]=millisecond;var milliseconds=millisecond.range},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var __WEBPACK_IMPORTED_MODULE_1__duration__=__webpack_require__(748);var minute=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setTime(Math.floor(date/__WEBPACK_IMPORTED_MODULE_1__duration__["d"])*__WEBPACK_IMPORTED_MODULE_1__duration__["d"])},function(date,step){date.setTime(+date+step*__WEBPACK_IMPORTED_MODULE_1__duration__["d"])},function(start,end){return(end-start)/__WEBPACK_IMPORTED_MODULE_1__duration__["d"]},function(date){return date.getMinutes()});__webpack_exports__["a"]=minute;var minutes=minute.range},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var month=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setDate(1);date.setHours(0,0,0,0)},function(date,step){date.setMonth(date.getMonth()+step)},function(start,end){return end.getMonth()-start.getMonth()+(end.getFullYear()-start.getFullYear())*12},function(date){return date.getMonth()});__webpack_exports__["a"]=month;var months=month.range},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var __WEBPACK_IMPORTED_MODULE_1__duration__=__webpack_require__(748);var second=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setTime(Math.floor(date/__WEBPACK_IMPORTED_MODULE_1__duration__["e"])*__WEBPACK_IMPORTED_MODULE_1__duration__["e"])},function(date,step){date.setTime(+date+step*__WEBPACK_IMPORTED_MODULE_1__duration__["e"])},function(start,end){return(end-start)/__WEBPACK_IMPORTED_MODULE_1__duration__["e"]},function(date){return date.getUTCSeconds()});__webpack_exports__["a"]=second;var seconds=second.range},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var __WEBPACK_IMPORTED_MODULE_1__duration__=__webpack_require__(748);var utcDay=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step)},function(start,end){return(end-start)/__WEBPACK_IMPORTED_MODULE_1__duration__["b"]},function(date){return date.getUTCDate()-1});__webpack_exports__["a"]=utcDay;var utcDays=utcDay.range},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var __WEBPACK_IMPORTED_MODULE_1__duration__=__webpack_require__(748);var utcHour=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setUTCMinutes(0,0,0)},function(date,step){date.setTime(+date+step*__WEBPACK_IMPORTED_MODULE_1__duration__["c"])},function(start,end){return(end-start)/__WEBPACK_IMPORTED_MODULE_1__duration__["c"]},function(date){return date.getUTCHours()});__webpack_exports__["a"]=utcHour;var utcHours=utcHour.range},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var __WEBPACK_IMPORTED_MODULE_1__duration__=__webpack_require__(748);var utcMinute=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setUTCSeconds(0,0)},function(date,step){date.setTime(+date+step*__WEBPACK_IMPORTED_MODULE_1__duration__["d"])},function(start,end){return(end-start)/__WEBPACK_IMPORTED_MODULE_1__duration__["d"]},function(date){return date.getUTCMinutes()});__webpack_exports__["a"]=utcMinute;var utcMinutes=utcMinute.range},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var utcMonth=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setUTCDate(1);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCMonth(date.getUTCMonth()+step)},function(start,end){return end.getUTCMonth()-start.getUTCMonth()+(end.getUTCFullYear()-start.getUTCFullYear())*12},function(date){return date.getUTCMonth()});__webpack_exports__["a"]=utcMonth;var utcMonths=utcMonth.range},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var __WEBPACK_IMPORTED_MODULE_1__duration__=__webpack_require__(748);__webpack_require__.d(__webpack_exports__,"a",function(){return utcSunday});__webpack_require__.d(__webpack_exports__,"b",function(){return utcMonday});function utcWeekday(i){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step*7)},function(start,end){return(end-start)/__WEBPACK_IMPORTED_MODULE_1__duration__["a"]})}var utcSunday=utcWeekday(0);var utcMonday=utcWeekday(1);var utcTuesday=utcWeekday(2);var utcWednesday=utcWeekday(3);var utcThursday=utcWeekday(4);var utcFriday=utcWeekday(5);var utcSaturday=utcWeekday(6);var utcSundays=utcSunday.range;var utcMondays=utcMonday.range;var utcTuesdays=utcTuesday.range;var utcWednesdays=utcWednesday.range;var utcThursdays=utcThursday.range;var utcFridays=utcFriday.range;var utcSaturdays=utcSaturday.range},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var utcYear=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)},function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()},function(date){return date.getUTCFullYear()});utcYear.every=function(k){return!isFinite(k=Math.floor(k))||!(k>0)?null:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k);date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)})};__webpack_exports__["a"]=utcYear;var utcYears=utcYear.range},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var __WEBPACK_IMPORTED_MODULE_1__duration__=__webpack_require__(748);__webpack_require__.d(__webpack_exports__,"a",function(){return sunday});__webpack_require__.d(__webpack_exports__,"b",function(){return monday});function weekday(i){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7);date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+step*7)},function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*__WEBPACK_IMPORTED_MODULE_1__duration__["d"])/__WEBPACK_IMPORTED_MODULE_1__duration__["a"]})}var sunday=weekday(0);var monday=weekday(1);var tuesday=weekday(2);var wednesday=weekday(3);var thursday=weekday(4);var friday=weekday(5);var saturday=weekday(6);var sundays=sunday.range;var mondays=monday.range;var tuesdays=tuesday.range;var wednesdays=wednesday.range;var thursdays=thursday.range;var fridays=friday.range;var saturdays=saturday.range},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interval__=__webpack_require__(746);var year=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setMonth(0,1);date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step)},function(start,end){return end.getFullYear()-start.getFullYear()},function(date){return date.getFullYear()});year.every=function(k){return!isFinite(k=Math.floor(k))||!(k>0)?null:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__interval__["a"])(function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k);date.setMonth(0,1);date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step*k)})};__webpack_exports__["a"]=year;var years=year.range},function(module,exports,__webpack_require__){var content=__webpack_require__(839);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./pivot-application.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./pivot-application.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(840);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./attribute-modal.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./attribute-modal.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(841);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./data-cube-seed-modal.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./data-cube-seed-modal.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(842);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./dimension-modal.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./dimension-modal.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(843);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./edit-collection-modal.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./edit-collection-modal.css")
;if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(844);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./expired-modal.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./expired-modal.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(845);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./measure-modal.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./measure-modal.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(846);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./raw-data-modal.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./raw-data-modal.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(847);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./welcome-modal.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./welcome-modal.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(848);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../../node_modules/css-loader/index.js!./album-layout.css",function(){var newContent=require("!!../../../../../node_modules/css-loader/index.js!./album-layout.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(849);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../../node_modules/css-loader/index.js!./collection-header-bar.css",function(){var newContent=require("!!../../../../../node_modules/css-loader/index.js!./collection-header-bar.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(850);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../../node_modules/css-loader/index.js!./collection-tile-card.css",function(){var newContent=require("!!../../../../../node_modules/css-loader/index.js!./collection-tile-card.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(851);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./collection-view.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./collection-view.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(852);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../../node_modules/css-loader/index.js!./dashboard-layout.css",function(){var newContent=require("!!../../../../../node_modules/css-loader/index.js!./dashboard-layout.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(853);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./cube-edit-view.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./cube-edit-view.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(854);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../../node_modules/css-loader/index.js!./cube-header-bar.css",function(){var newContent=require("!!../../../../../node_modules/css-loader/index.js!./cube-header-bar.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(855);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./cube-view.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./cube-view.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(856);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../../node_modules/css-loader/index.js!./supervised-cube-header-bar.css",function(){var newContent=require("!!../../../../../node_modules/css-loader/index.js!./supervised-cube-header-bar.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(857);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../../node_modules/css-loader/index.js!./home-header-bar.css",function(){var newContent=require("!!../../../../../node_modules/css-loader/index.js!./home-header-bar.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(858);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./home-view.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./home-view.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(859);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../../node_modules/css-loader/index.js!./item-card.css",function(){var newContent=require("!!../../../../../node_modules/css-loader/index.js!./item-card.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(860);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../../node_modules/css-loader/index.js!./link-header-bar.css",function(){var newContent=require("!!../../../../../node_modules/css-loader/index.js!./link-header-bar.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(861);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./link-view.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./link-view.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(862);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./bar-chart.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./bar-chart.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(863);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./base-visualization.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./base-visualization.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(864);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./geo.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./geo.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(865);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./heatmap.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./heatmap.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(866);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../../node_modules/css-loader/index.js!./highlighter.css",function(){var newContent=require("!!../../../../../node_modules/css-loader/index.js!./highlighter.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(867);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./line-chart.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./line-chart.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(868);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./table.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./table.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports,__webpack_require__){var content=__webpack_require__(869);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(4)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!../../../../node_modules/css-loader/index.js!./totals.css",function(){var newContent=require("!!../../../../node_modules/css-loader/index.js!./totals.css");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}}]);